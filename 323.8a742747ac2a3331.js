"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[323],{6323:(xe,N,b)=>{b.d(N,{K:()=>de});var s=b(4523),v=b(177),e=b(4438),D=b(9417),P=b(345),B=b(4161),V=b(6078),w=b(872),c=b(4289),p=b(2604);const _=(h,g)=>g.type,T=(h,g)=>g.name,L=(h,g)=>g.value,F=(h,g)=>g.id;function M(h,g){if(1&h&&(e.j41(0,"option",61),e.EFF(1),e.k0s()),2&h){const r=g.$implicit;e.Y8G("value",r.value)("title",r.description),e.R7$(),e.SpI(" ",r.label," ")}}function O(h,g){if(1&h&&(e.j41(0,"optgroup",60),e.Z7z(1,M,2,3,"option",61,L),e.k0s()),2&h){const r=g.$implicit;e.Y8G("label",r.name),e.R7$(),e.Dyx(r.modes)}}function C(h,g){if(1&h){const r=e.RV6();e.j41(0,"div",52),e.bIt("click",function(a){return e.eBV(r),e.XpG().closeLayerContextMenu(),e.Njj(a.stopPropagation())})("keydown.escape",function(){e.eBV(r);const a=e.XpG();return e.Njj(a.closeLayerContextMenu())}),e.k0s(),e.j41(1,"div",53),e.bIt("click",function(a){return e.eBV(r),e.Njj(a.stopPropagation())})("keydown",function(a){return e.eBV(r),e.Njj(a.stopPropagation())}),e.j41(2,"button",54),e.bIt("click",function(){e.eBV(r);const a=e.XpG();return a.startRenameLayer(a.showLayerContextMenu()),e.Njj(a.closeLayerContextMenu())}),e.j41(3,"span",11),e.EFF(4,"edit"),e.k0s(),e.EFF(5," Rename "),e.k0s(),e.nrm(6,"div",55),e.j41(7,"button",56),e.bIt("click",function(){e.eBV(r);const a=e.XpG();return a.deleteLayer(a.showLayerContextMenu()),e.Njj(a.closeLayerContextMenu())}),e.j41(8,"span",11),e.EFF(9,"delete"),e.k0s(),e.EFF(10," Delete "),e.k0s(),e.nrm(11,"div",55),e.j41(12,"button",54),e.bIt("click",function(){e.eBV(r);const a=e.XpG();return a.duplicateLayer(a.showLayerContextMenu()),e.Njj(a.closeLayerContextMenu())}),e.j41(13,"span",11),e.EFF(14,"content_copy"),e.k0s(),e.EFF(15," Duplicate "),e.k0s(),e.nrm(16,"div",55),e.j41(17,"div",57)(18,"div",58)(19,"span",11),e.EFF(20,"layers"),e.k0s(),e.EFF(21," Blend Mode "),e.k0s(),e.j41(22,"select",59),e.bIt("change",function(a){e.eBV(r);const u=e.XpG();return e.Njj(u.setLayerBlendMode(u.showLayerContextMenu(),a.target.value))})("click",function(a){return e.eBV(r),e.Njj(a.stopPropagation())}),e.Z7z(23,O,3,1,"optgroup",60,T),e.k0s()()()}if(2&h){const r=e.XpG();e.R7$(),e.xc7("position","fixed")("top",r.contextMenuPosition().top,"px")("left",r.contextMenuPosition().left,"px")("z-index",99999),e.R7$(6),e.Y8G("disabled",1===r.layers().length),e.R7$(15),e.Y8G("value",r.getLayerBlendMode(r.showLayerContextMenu())),e.R7$(),e.Dyx(r.blendModeCategories)}}function A(h,g){if(1&h){const r=e.RV6();e.j41(0,"input",81,2),e.bIt("blur",function(a){e.eBV(r);const u=e.XpG().$implicit,m=e.XpG(2);return e.Njj(m.finishRenameLayer(a,u.id))})("keyup.enter",function(a){e.eBV(r);const u=e.XpG().$implicit,m=e.XpG(2);return e.Njj(m.finishRenameLayer(a,u.id))})("click",function(a){return e.eBV(r),e.Njj(a.stopPropagation())}),e.k0s()}if(2&h){const r=e.XpG().$implicit;e.Y8G("value",r.name)}}function j(h,g){if(1&h&&(e.j41(0,"span",82),e.EFF(1),e.k0s()),2&h){const r=e.XpG().$implicit;e.R7$(),e.JRh(r.name)}}function G(h,g){if(1&h){const r=e.RV6();e.j41(0,"div",68),e.bIt("dragover",function(a){const u=e.eBV(r).$index,m=e.XpG(2);return e.Njj(m.onDragOver(a,u))})("dragleave",function(a){e.eBV(r);const u=e.XpG(2);return e.Njj(u.onDragLeave(a))})("drop",function(a){const u=e.eBV(r).$index,m=e.XpG(2);return e.Njj(m.onDrop(a,u))}),e.j41(1,"div",69),e.bIt("click",function(){const a=e.eBV(r).$implicit,u=e.XpG(2);return e.Njj(u.switchToLayer(a.id))})("keyup.enter",function(){const a=e.eBV(r).$implicit,u=e.XpG(2);return e.Njj(u.switchToLayer(a.id))})("keyup.space",function(){const a=e.eBV(r).$implicit,u=e.XpG(2);return e.Njj(u.switchToLayer(a.id))}),e.j41(2,"div",70),e.bIt("dragstart",function(a){const u=e.eBV(r).$index,m=e.XpG(2);return e.Njj(m.onDragStart(a,u))})("dragend",function(){e.eBV(r);const a=e.XpG(2);return e.Njj(a.onDragEnd())}),e.j41(3,"span",11),e.EFF(4,"drag_indicator"),e.k0s()(),e.j41(5,"div",71),e.DNE(6,A,2,1,"input",72)(7,j,2,1),e.j41(8,"span",73),e.EFF(9),e.k0s(),e.j41(10,"div",74),e.bIt("mousedown",function(a){return e.eBV(r),e.Njj(a.stopPropagation())})("dragstart",function(a){return e.eBV(r),a.preventDefault(),e.Njj(a.stopPropagation())}),e.j41(11,"span",75),e.EFF(12),e.k0s(),e.j41(13,"input",76),e.bIt("input",function(a){const u=e.eBV(r).$implicit,m=e.XpG(2);return e.Njj(m.setLayerOpacity(u.id,a.target.value/100))})("pointerdown",function(a){return e.eBV(r),e.Njj(a.stopPropagation())})("click",function(a){return e.eBV(r),e.Njj(a.stopPropagation())})("dragstart",function(a){return e.eBV(r),a.preventDefault(),e.Njj(a.stopPropagation())}),e.k0s()()()(),e.j41(14,"div",77)(15,"button",78),e.bIt("click",function(a){const u=e.eBV(r).$implicit;return e.XpG(2).toggleLayerVisibility(u.id),e.Njj(a.stopPropagation())}),e.j41(16,"span",11),e.EFF(17),e.k0s()(),e.j41(18,"button",78),e.bIt("click",function(a){const u=e.eBV(r).$implicit;return e.XpG(2).toggleLayerLock(u.id),e.Njj(a.stopPropagation())}),e.j41(19,"span",11),e.EFF(20),e.k0s()(),e.j41(21,"div",79)(22,"button",80,1),e.bIt("click",function(a){const u=e.eBV(r).$implicit,m=e.XpG(2);return e.Njj(m.toggleLayerContextMenu(a,u.id))}),e.j41(24,"span",11),e.EFF(25,"more_vert"),e.k0s()()()()()}if(2&h){const r=g.$implicit,d=e.XpG(2);e.AVh("active",d.activeLayerId()===r.id)("locked-layer",r.locked),e.BMQ("data-locked",r.locked)("data-visible",r.visible)("aria-label","Switch to "+r.name+(r.locked?" (locked - no editing allowed)":"")),e.R7$(6),e.vxM(6,d.editingLayerId()===r.id?6:7),e.R7$(3),e.SpI("",r.elements.length," elements"),e.R7$(3),e.SpI("",d.getLayerOpacityPercent(r.id),"%"),e.R7$(),e.Y8G("value",d.getLayerOpacityPercent(r.id))("disabled",r.locked),e.BMQ("aria-label","Layer opacity: "+d.getLayerOpacityPercent(r.id)+"%"),e.R7$(2),e.Y8G("title",r.visible?"Hide layer":"Show layer"),e.R7$(2),e.JRh(r.visible?"visibility":"visibility_off"),e.R7$(),e.Y8G("title",r.locked?"Unlock layer (allow editing)":"Lock layer (prevent editing)"),e.R7$(2),e.JRh(r.locked?"lock":"lock_open")}}function z(h,g){if(1&h){const r=e.RV6();e.j41(0,"div",62),e.bIt("click",function(a){return e.eBV(r),e.Njj(a.stopPropagation())})("keyup",function(a){return e.eBV(r),e.Njj(a.stopPropagation())}),e.j41(1,"div",63)(2,"span",64),e.EFF(3,"Layers"),e.k0s(),e.j41(4,"button",65),e.bIt("click",function(){e.eBV(r);const a=e.XpG();return e.Njj(a.addLayer())}),e.j41(5,"span",11),e.EFF(6,"add"),e.k0s()()(),e.j41(7,"div",66),e.bIt("scroll",function(){e.eBV(r);const a=e.XpG();return e.Njj(a.onLayersListScroll())}),e.Z7z(8,G,26,17,"div",67,F),e.k0s()()}if(2&h){const r=e.XpG();e.R7$(8),e.Dyx(r.layers())}}function q(h,g){if(1&h){const r=e.RV6();e.j41(0,"input",83,3),e.bIt("blur",function(a){e.eBV(r);const u=e.XpG();return e.Njj(u.finishEditingTitle(a))})("keyup.enter",function(a){e.eBV(r);const u=e.XpG();return e.Njj(u.finishEditingTitle(a))}),e.k0s()}if(2&h){const r=e.XpG();e.Y8G("value",r.boardTitle())}}function Z(h,g){if(1&h){const r=e.RV6();e.j41(0,"button",84),e.bIt("click",function(){e.eBV(r);const a=e.XpG();return e.Njj(a.startEditingTitle())}),e.j41(1,"span",11),e.EFF(2,"dashboard"),e.k0s(),e.j41(3,"span",85),e.EFF(4),e.k0s(),e.j41(5,"span",86),e.EFF(6,"edit"),e.k0s()()}if(2&h){const r=e.XpG();e.R7$(4),e.JRh(r.boardTitle())}}function Q(h,g){if(1&h){const r=e.RV6();e.j41(0,"div",18)(1,"button",87),e.bIt("click",function(){e.eBV(r);const a=e.XpG();return e.Njj(a.toggleFullscreen())}),e.j41(2,"span",11),e.EFF(3),e.k0s(),e.EFF(4),e.k0s(),e.nrm(5,"div",88),e.j41(6,"button",87),e.bIt("click",function(){e.eBV(r);const a=e.XpG();return e.Njj(a.toggleGrid())}),e.j41(7,"span",11),e.EFF(8),e.k0s(),e.EFF(9," Toggle Grid "),e.k0s(),e.j41(10,"button",87),e.bIt("click",function(){e.eBV(r);const a=e.XpG();return e.Njj(a.clear())}),e.j41(11,"span",11),e.EFF(12,"clear_all"),e.k0s(),e.EFF(13," Clear Board "),e.k0s(),e.j41(14,"button",87),e.bIt("click",function(){e.eBV(r);const a=e.XpG();return e.Njj(a.saveAsImage())}),e.j41(15,"span",11),e.EFF(16,"download"),e.k0s(),e.EFF(17," Save as PNG "),e.k0s(),e.j41(18,"button",87),e.bIt("click",function(){e.eBV(r);const a=e.XpG();return e.Njj(a.exportBoard())}),e.j41(19,"span",11),e.EFF(20,"file_download"),e.k0s(),e.EFF(21," Export Board "),e.k0s(),e.j41(22,"input",89,4),e.bIt("change",function(a){e.eBV(r);const u=e.XpG();return e.Njj(u.importBoard(a))}),e.k0s(),e.j41(24,"button",87),e.bIt("click",function(){e.eBV(r);const a=e.sdS(23);return e.Njj(a.click())}),e.j41(25,"span",11),e.EFF(26,"file_upload"),e.k0s(),e.EFF(27," Import Board "),e.k0s(),e.j41(28,"input",90,5),e.bIt("change",function(a){e.eBV(r);const u=e.XpG();return e.Njj(u.uploadImage(a))}),e.k0s(),e.j41(30,"button",87),e.bIt("click",function(){e.eBV(r);const a=e.sdS(29);return e.Njj(a.click())}),e.j41(31,"span",11),e.EFF(32,"image"),e.k0s(),e.EFF(33," Add Image "),e.k0s()()}if(2&h){const r=e.XpG();e.R7$(3),e.JRh(r.isFullscreen()?"fullscreen_exit":"fullscreen"),e.R7$(),e.SpI(" ",r.isFullscreen()?"Exit Fullscreen":"Enter Fullscreen"," "),e.R7$(4),e.JRh(r.config().enableGrid?"check_box":"check_box_outline_blank")}}function ee(h,g){1&h&&(e.j41(0,"div",22)(1,"p"),e.EFF(2,"Press "),e.j41(3,"kbd"),e.EFF(4,"ESC"),e.k0s(),e.EFF(5," or click "),e.j41(6,"span",11),e.EFF(7,"close"),e.k0s(),e.EFF(8," to exit fullscreen"),e.k0s()())}function te(h,g){if(1&h){const r=e.RV6();e.j41(0,"button",91),e.bIt("click",function(){const a=e.eBV(r).$implicit,u=e.XpG();return e.Njj(u.selectTool(a.type))}),e.k0s()}if(2&h){const r=g.$implicit,d=e.XpG();e.AVh("active",d.selectedTool()===r.type),e.Y8G("title",r.name)("innerHTML",r.icon,e.npT)}}function ne(h,g){if(1&h){const r=e.RV6();e.j41(0,"button",97),e.bIt("click",function(){const a=e.eBV(r).$implicit,u=e.XpG(3);return e.Njj(u.selectTool(a.type))}),e.nrm(1,"span",98),e.EFF(2),e.k0s()}if(2&h){const r=g.$implicit,d=e.XpG(3);e.AVh("active",d.selectedTool()===r.type),e.R7$(),e.Y8G("innerHTML",r.icon,e.npT),e.R7$(),e.SpI(" ",r.name," ")}}function oe(h,g){if(1&h&&(e.j41(0,"div",95),e.Z7z(1,ne,3,4,"button",96,_),e.k0s()),2&h){const r=e.XpG(2);e.R7$(),e.Dyx(r.overflowTools())}}function U(h,g){if(1&h){const r=e.RV6();e.nrm(0,"div",92),e.j41(1,"div",93)(2,"button",94),e.bIt("click",function(){e.eBV(r);const a=e.XpG();return e.Njj(a.toggleToolsOverflow())}),e.j41(3,"span",11),e.EFF(4,"more_horiz"),e.k0s()(),e.DNE(5,oe,3,0,"div",95),e.k0s()}if(2&h){const r=e.XpG();e.R7$(5),e.vxM(5,r.showToolsOverflow()?5:-1)}}function ie(h,g){1&h&&(e.j41(0,"span",102),e.EFF(1,"check"),e.k0s())}function re(h,g){if(1&h){const r=e.RV6();e.j41(0,"button",101),e.bIt("click",function(){const a=e.eBV(r).$implicit,u=e.XpG(2);return e.Njj(u.selectColor(a))}),e.DNE(1,ie,2,0,"span",102),e.k0s()}if(2&h){const r=g.$implicit,d=e.XpG(2);e.xc7("background",r),e.AVh("selected",d.selectedColor()===r),e.Y8G("title",r),e.R7$(),e.vxM(1,d.selectedColor()===r?1:-1)}}function se(h,g){if(1&h&&(e.j41(0,"div",45)(1,"div",99),e.Z7z(2,re,2,6,"button",100,e.fX1),e.k0s()()),2&h){const r=e.XpG();e.R7$(2),e.Dyx(r.quickColors)}}function ae(h,g){1&h&&(e.j41(0,"span",102),e.EFF(1,"check"),e.k0s())}function ve(h,g){if(1&h){const r=e.RV6();e.j41(0,"button",101),e.bIt("click",function(){const a=e.eBV(r).$implicit,u=e.XpG(2);return e.Njj(u.selectBackgroundColor(a))}),e.DNE(1,ae,2,0,"span",102),e.k0s()}if(2&h){const r=g.$implicit,d=e.XpG(2);e.xc7("background",r),e.AVh("selected",d.config().backgroundColor===r),e.Y8G("title",r),e.R7$(),e.vxM(1,d.config().backgroundColor===r?1:-1)}}function le(h,g){if(1&h&&(e.j41(0,"div",45)(1,"div",99),e.Z7z(2,ve,2,6,"button",100,e.fX1),e.k0s()()),2&h){const r=e.XpG();e.R7$(2),e.Dyx(r.quickColors)}}function ce(h,g){if(1&h){const r=e.RV6();e.j41(0,"button",104),e.bIt("click",function(){const a=e.eBV(r).$implicit,u=e.XpG(2);return e.Njj(u.selectWidth(a))}),e.nrm(1,"div",105),e.j41(2,"span",106),e.EFF(3),e.k0s()()}if(2&h){const r=g.$implicit,d=e.XpG(2);e.AVh("selected",d.selectedWidth()===r),e.R7$(),e.xc7("height",r,"px")("background",d.selectedColor()),e.R7$(2),e.SpI("",r,"px")}}function X(h,g){if(1&h&&(e.j41(0,"div",51),e.Z7z(1,ce,4,7,"button",103,e.fX1),e.k0s()),2&h){const r=e.XpG();e.R7$(),e.Dyx(r.strokeWidths)}}let de=(()=>{class h{constructor(){this.whiteboardService=(0,e.WQX)(B.K),this.sanitizer=(0,e.WQX)(P.up),this.draggedLayerIndex=null,this.draggedElement=null,this.data=[],this.dataChange=new e.bkB,this.boardId="whiteboard-app",this.boardSignals=this.whiteboardService.signals(this.boardId),this.layers=this.boardSignals.layers,this.activeLayerId=this.boardSignals.activeLayerId,this.activeLayer=this.boardSignals.activeLayer,this.selectedTool=this.boardSignals.selectedTool,this.canUndo=this.boardSignals.canUndo,this.canRedo=this.boardSignals.canRedo,this.availableTools=this.boardSignals.availableTools,this.selectedElements=this.boardSignals.selectedElements,this.whiteboardConfig=this.boardSignals.config,this.formatType=V.o8,this.toolType=w.p,this.selectedColor=(0,e.EWP)(()=>{const r=this.selectedElements();return r.length>0&&r[0].style?.strokeColor?r[0].style.strokeColor:this.config().strokeColor||"#000000"}),this.selectedWidth=(0,e.EWP)(()=>{const r=this.selectedElements();return r.length>0&&void 0!==r[0].style?.strokeWidth?r[0].style.strokeWidth:this.config().strokeWidth||3}),this.zoomLevel=(0,e.EWP)(()=>{const r=this.whiteboardConfig().zoom||1;return Math.round(100*r)}),this.showColorPalette=(0,e.vPA)(!1),this.showBackgroundPalette=(0,e.vPA)(!1),this.showWidthMenu=(0,e.vPA)(!1),this.showMoreMenu=(0,e.vPA)(!1),this.isFullscreen=(0,e.vPA)(!1),this.showFullscreenHint=(0,e.vPA)(!1),this.boardTitle=(0,e.vPA)("Untitled Board"),this.isEditingTitle=(0,e.vPA)(!1),this.showLayersMenu=(0,e.vPA)(!1),this.editingLayerId=(0,e.vPA)(null),this.showLayerContextMenu=(0,e.vPA)(null),this.contextMenuPosition=(0,e.vPA)({top:0,left:0}),this.showToolsOverflow=(0,e.vPA)(!1),this.maxVisibleTools=(0,e.vPA)(6),this.blendModes=c.B,this.blendModeCategories=[{name:"Normal",modes:c.B.filter(r=>"normal"===r.category)},{name:"Darken",modes:c.B.filter(r=>"darken"===r.category)},{name:"Lighten",modes:c.B.filter(r=>"lighten"===r.category)},{name:"Contrast",modes:c.B.filter(r=>"contrast"===r.category)},{name:"Component",modes:c.B.filter(r=>"component"===r.category)}],this.primaryTools=(0,e.EWP)(()=>{const r=this.availableTools(),d=[w.p.Hand,w.p.Select,w.p.Pen,w.p.Eraser];return r.filter(a=>d.includes(a.type)&&a.enabled).map(a=>({type:a.type,name:a.name,description:a.description,icon:this.sanitizer.bypassSecurityTrustHtml(a.icon||"")})).sort((a,u)=>d.indexOf(a.type)-d.indexOf(u.type))}),this.shapeTools=(0,e.EWP)(()=>{const r=this.availableTools(),d=[w.p.Line,w.p.Arrow,w.p.Rectangle,w.p.Ellipse,w.p.Text];return r.filter(a=>d.includes(a.type)&&a.enabled).map(a=>({type:a.type,name:a.name,description:a.description,icon:this.sanitizer.bypassSecurityTrustHtml(a.icon||"")})).sort((a,u)=>d.indexOf(a.type)-d.indexOf(u.type))}),this.allTools=(0,e.EWP)(()=>[...this.primaryTools(),...this.shapeTools()]),this.visibleTools=(0,e.EWP)(()=>{const r=this.allTools(),d=this.maxVisibleTools();return r.slice(0,d)}),this.overflowTools=(0,e.EWP)(()=>{const r=this.allTools(),d=this.maxVisibleTools();return r.slice(d)}),this.hasOverflowTools=(0,e.EWP)(()=>this.overflowTools().length>0),this.quickColors=["#000000","#ffffff","#dc2626","#ea580c","#d97706","#65a30d","#059669","#0891b2","#2563eb","#7c3aed","#c026d3","#e11d48"],this.strokeWidths=[1,2,3,5,8,12,16,20],this.config=(0,e.vPA)({strokeColor:"#000000",backgroundColor:"#ffffff",strokeWidth:3,fullScreen:!0,enableGrid:!1,snapToGrid:!1,gridSize:20}),this.handleResize=()=>{if(typeof window>"u")return;const r=window.innerWidth;this.maxVisibleTools.set(r<480?7:r<640?8:9)},this.whiteboardService.setActiveBoard(this.boardId),this.setupClickOutsideHandler(),this.setupResponsiveToolbar()}ngOnDestroy(){this.clickOutsideListener&&typeof document<"u"&&document.removeEventListener("click",this.clickOutsideListener),this.isFullscreen()&&(document.body.style.overflow=""),typeof window<"u"&&window.removeEventListener("resize",this.handleResize)}onDataChange(r){this.dataChange.emit(r)}selectTool(r){this.whiteboardService.setActiveTool(r),this.closeAllMenus()}selectColor(r){const d=this.selectedElements();d.length>0&&this.whiteboardService.updateSelectedElements({style:{...d[0].style,strokeColor:r}}),this.config.update(a=>({...a,strokeColor:r})),this.showColorPalette.set(!1)}selectWidth(r){const d=this.selectedElements();d.length>0&&this.whiteboardService.updateSelectedElements({style:{...d[0].style,strokeWidth:r}}),this.config.update(a=>({...a,strokeWidth:r})),this.showWidthMenu.set(!1)}selectBackgroundColor(r){this.config.update(d=>({...d,backgroundColor:r})),this.showBackgroundPalette.set(!1)}closeAllMenus(){this.showColorPalette.set(!1),this.showBackgroundPalette.set(!1),this.showWidthMenu.set(!1),this.showMoreMenu.set(!1),this.showToolsOverflow.set(!1)}toggleColorPalette(){this.showColorPalette.set(!this.showColorPalette()),this.showBackgroundPalette.set(!1),this.showWidthMenu.set(!1),this.showMoreMenu.set(!1)}toggleBackgroundPalette(){this.showBackgroundPalette.set(!this.showBackgroundPalette()),this.showColorPalette.set(!1),this.showWidthMenu.set(!1),this.showMoreMenu.set(!1)}toggleWidthMenu(){this.showWidthMenu.set(!this.showWidthMenu()),this.showColorPalette.set(!1),this.showBackgroundPalette.set(!1),this.showMoreMenu.set(!1)}toggleMoreMenu(){this.showMoreMenu.set(!this.showMoreMenu()),this.showColorPalette.set(!1),this.showBackgroundPalette.set(!1),this.showWidthMenu.set(!1),this.showToolsOverflow.set(!1)}toggleToolsOverflow(){this.showToolsOverflow.set(!this.showToolsOverflow()),this.showColorPalette.set(!1),this.showBackgroundPalette.set(!1),this.showWidthMenu.set(!1),this.showMoreMenu.set(!1)}startEditingTitle(){this.isEditingTitle.set(!0)}finishEditingTitle(r){this.boardTitle.set(r.target.value||"Untitled Board"),this.isEditingTitle.set(!1)}undo(){this.whiteboardService.undo()}redo(){this.whiteboardService.redo()}clear(){this.whiteboardService.clear()}zoomIn(){this.whiteboardService.zoomIn()}zoomOut(){this.whiteboardService.zoomOut()}resetZoom(){this.whiteboardService.resetZoom()}toggleFullscreen(){const r=!this.isFullscreen();this.isFullscreen.set(r),r?(document.body.style.overflow="hidden",this.showFullscreenHint.set(!0),setTimeout(()=>{this.showFullscreenHint.set(!1)},3e3)):(document.body.style.overflow="",this.showFullscreenHint.set(!1)),this.closeAllMenus()}toggleGrid(){this.config.update(r=>({...r,enableGrid:!r.enableGrid})),this.showMoreMenu.set(!1)}toggleLayersMenu(){this.showLayersMenu.update(r=>!r),this.showLayerContextMenu.set(null)}switchToLayer(r){if(this.activeLayerId()===r)return;this.whiteboardService.setActiveLayer(r),this.showLayerContextMenu.set(null);const d=this.layers().find(a=>a.id===r);d?.locked&&console.info(`Active layer "${d.name}" is locked. Drawing is disabled on locked layers.`)}addLayer(){const r=this.layers().length;this.whiteboardService.addLayer(`Layer ${r+1}`),this.showLayerContextMenu.set(null)}deleteLayer(r){const a=this.layers().find(k=>k.id===r)?.name||"this layer";confirm(`Are you sure you want to delete "${a}"? This action cannot be undone.`)&&(this.whiteboardService.removeLayer(r)||alert("Cannot delete the last layer. At least one layer is required."),this.showLayerContextMenu.set(null))}duplicateLayer(r){this.whiteboardService.duplicateLayer(r),this.showLayerContextMenu.set(null)}startRenameLayer(r){this.editingLayerId.set(r),this.showLayerContextMenu.set(null),setTimeout(()=>{const d=document.querySelector(".layer-name-input");d&&(d.focus(),d.select())},50)}finishRenameLayer(r,d){const a=r.target,u=a.value.trim();return u?u.length>50?(alert("Layer name is too long. Maximum 50 characters."),void a.focus()):(this.whiteboardService.renameLayer(d,u),void this.editingLayerId.set(null)):(alert("Layer name cannot be empty."),void a.focus())}toggleLayerVisibility(r){this.whiteboardService.toggleLayerVisibility(r)}toggleLayerLock(r){this.layers().find(a=>a.id===r)&&this.whiteboardService.toggleLayerLock(r)}toggleLayerContextMenu(r,d){if(r.stopPropagation(),this.showLayerContextMenu()===d)this.closeLayerContextMenu();else{const u=r.currentTarget.getBoundingClientRect(),k=280;let E=u.right-220,x=u.bottom+4;E<0&&(E=u.left),x+k>window.innerHeight&&(x=u.top-k-4),this.contextMenuPosition.set({top:x,left:E}),this.showLayerContextMenu.set(d)}}closeLayerContextMenu(){this.showLayerContextMenu.set(null)}onLayersListScroll(){this.closeLayerContextMenu()}onDragStart(r,d){const a=r.target;if(this.draggedLayerIndex=d,this.draggedElement=a.closest(".layer-item"),r.dataTransfer&&this.draggedElement){r.dataTransfer.effectAllowed="move",r.dataTransfer.setData("text/plain",d.toString());const u=this.draggedElement.getBoundingClientRect();r.dataTransfer.setDragImage(this.draggedElement,u.width/2,u.height/2)}setTimeout(()=>{this.draggedElement?.classList.add("dragging")},0)}onDragOver(r,d){if(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="move"),null===this.draggedLayerIndex||this.draggedLayerIndex===d)return;const u=r.target.closest(".layer-item");if(!u)return;const m=u.getBoundingClientRect();r.clientY<m.top+m.height/2?(u.classList.add("drag-over-top"),u.classList.remove("drag-over-bottom")):(u.classList.add("drag-over-bottom"),u.classList.remove("drag-over-top"))}onDragLeave(r){r.target.closest(".layer-item")?.classList.remove("drag-over-top","drag-over-bottom")}onDrop(r,d){r.preventDefault(),r.stopPropagation();const u=r.target.closest(".layer-item");if(u?.classList.remove("drag-over-top","drag-over-bottom"),null!==this.draggedLayerIndex&&this.draggedLayerIndex!==d&&u){const m=u.getBoundingClientRect(),E=r.clientY<m.top+m.height/2?d:d+1,x=this.draggedLayerIndex<E?E-1:E;this.draggedLayerIndex!==x&&this.whiteboardService.reorderLayersByIndex(this.draggedLayerIndex,x)}}onDragEnd(){this.draggedElement?.classList.remove("dragging"),document.querySelectorAll(".layer-item").forEach(r=>{r.classList.remove("drag-over-top","drag-over-bottom")}),this.draggedLayerIndex=null,this.draggedElement=null}saveAsImage(){var r=this;return(0,s.A)(function*(){try{yield r.whiteboardService.save(V.o8.Png,r.boardTitle()),r.showMoreMenu.set(!1),console.log("Whiteboard saved successfully")}catch(d){console.error("Save failed:",d),alert("Failed to save whiteboard as image. Please try again.")}})()}exportBoard(){try{const r=this.whiteboardService.exportData();if(!r)return void alert("No data to export.");const d=new Blob([r],{type:"application/json"}),a=URL.createObjectURL(d),u=document.createElement("a"),m=(new Date).toISOString().split("T")[0];u.href=a,u.download=`${this.boardTitle()}_${m}.json`,u.click(),URL.revokeObjectURL(a),this.showMoreMenu.set(!1),console.log("Board exported successfully")}catch(r){console.error("Export failed:",r),alert("Failed to export board data. Please try again.")}}importBoard(r){const d=r.target;if(!d.files||!d.files[0])return;const a=d.files[0];if(!a.name.endsWith(".json"))return alert("Please select a valid JSON file."),void(d.value="");if(a.size>10485760)return alert("File is too large. Maximum size is 10MB."),void(d.value="");const m=new FileReader;m.onload=k=>{try{const E=k.target?.result;if(!E)throw new Error("Failed to read file");JSON.parse(E),this.whiteboardService.importData(E),d.value="",this.showMoreMenu.set(!1),console.log("Board imported successfully")}catch(E){console.error("Import failed:",E),alert("Failed to import board data. The file may be corrupted or invalid."),d.value=""}},m.onerror=()=>{alert("Failed to read file. Please try again."),d.value=""},m.readAsText(a)}uploadImage(r){const d=r.target;if(!d.files||!d.files[0])return;const a=d.files[0];if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(a.type))return alert("Please select a valid image file (JPEG, PNG, GIF, or WebP)."),void(d.value="");if(a.size>5242880)return alert("Image is too large. Maximum size is 5MB."),void(d.value="");const k=new FileReader;k.onload=E=>{try{const x=E.target?.result;if(!x)throw new Error("Failed to read image");this.whiteboardService.addImage({image:x}),d.value="",this.showMoreMenu.set(!1),console.log("Image uploaded successfully")}catch(x){console.error("Image upload failed:",x),alert("Failed to upload image. Please try again."),d.value=""}},k.onerror=()=>{alert("Failed to read image file. Please try again."),d.value=""},k.readAsDataURL(a)}setLayerOpacity(r,d){this.whiteboardService.setLayerOpacity(r,d)||console.warn("Failed to set layer opacity")}setLayerBlendMode(r,d){this.whiteboardService.setLayerBlendMode(r,d)||console.warn("Failed to set layer blend mode")}getLayerOpacityPercent(r){const d=this.layers().find(a=>a.id===r);return d&&void 0!==d.opacity?Math.round(100*d.opacity):100}getLayerBlendMode(r){return this.layers().find(a=>a.id===r)?.blendMode||"normal"}onMenuItemClick(){this.showMoreMenu.set(!1)}onSave(){console.log("Whiteboard auto-saved")}onReady(){console.log("Whiteboard ready")}setupClickOutsideHandler(){typeof document>"u"||(this.clickOutsideListener=r=>{const d=r.target;this.showLayersMenu()&&!d.closest(".layers-section")&&!d.closest(".layer-context-menu")&&setTimeout(()=>this.showLayersMenu.set(!1),0),this.showColorPalette()&&!d.closest(".prop-color-btn, .floating-color-palette")&&setTimeout(()=>this.showColorPalette.set(!1),0),this.showBackgroundPalette()&&!d.closest(".prop-color-btn, .floating-color-palette")&&setTimeout(()=>this.showBackgroundPalette.set(!1),0),this.showWidthMenu()&&!d.closest(".prop-width-btn, .floating-width-menu")&&setTimeout(()=>this.showWidthMenu.set(!1),0),this.showMoreMenu()&&!d.closest(".more-menu-wrapper, .more-menu")&&setTimeout(()=>this.showMoreMenu.set(!1),0),this.showToolsOverflow()&&!d.closest(".tools-overflow-wrapper, .tools-overflow-menu")&&setTimeout(()=>this.showToolsOverflow.set(!1),0)},document.addEventListener("click",this.clickOutsideListener))}setupResponsiveToolbar(){typeof window>"u"||(this.handleResize(),window.addEventListener("resize",this.handleResize))}static{this.\u0275fac=function(d){return new(d||h)}}static{this.\u0275cmp=e.VBU({type:h,selectors:[["app-basic-component"]],inputs:{data:"data"},outputs:{dataChange:"dataChange"},standalone:!0,features:[e.Jv_([B.K]),e.aNF],decls:83,vars:32,consts:[["layersSection",""],["contextMenuTrigger",""],["layerNameInput",""],["titleInput",""],["importFileInput",""],["imageFileInput",""],[1,"basic-demo"],["id","ng-whiteboard-portals"],[1,"toolbar-top"],[1,"layers-section"],["title","Layers",1,"layers-menu-btn",3,"click"],[1,"material-icons"],["tabindex","-1","role","dialog","aria-label","Layers menu",1,"layers-dropdown"],[1,"board-name-section"],["type","text",1,"board-name-input",3,"value"],[1,"toolbar-separator"],[1,"more-menu-wrapper"],["title","More Options",1,"layer-btn",3,"click"],[1,"more-menu"],[1,"app-content"],[1,"canvas-area"],[1,"whiteboard-canvas",3,"dataChange","configChange","save","ready","boardId","config"],[1,"fullscreen-hint"],[1,"toolbar-bottom-left"],["title","Undo (Ctrl+Z)",1,"bottom-btn",3,"click","disabled"],["title","Redo (Ctrl+Y)",1,"bottom-btn",3,"click","disabled"],[1,"toolbar-bottom-center"],[1,"toolbar-secondary-left"],["title","Undo",1,"secondary-btn",3,"click","disabled"],["title","Redo",1,"secondary-btn",3,"click","disabled"],[1,"toolbar-secondary-right"],["title","Zoom Out",1,"secondary-btn",3,"click"],[1,"secondary-zoom-level"],["title","Zoom In",1,"secondary-btn",3,"click"],[1,"toolbar-main-tools"],[1,"bottom-btn",3,"active","title","innerHTML"],[1,"toolbar-bottom-right"],["title","Zoom Out",1,"bottom-btn",3,"click"],["title","Reset Zoom (100%)",1,"bottom-btn","zoom-reset-btn",3,"click"],["title","Zoom In",1,"bottom-btn",3,"click"],[1,"toolbar-properties"],[1,"prop-group"],[1,"prop-label"],["title","Stroke Color",1,"prop-color-btn",3,"click"],[1,"color-preview"],[1,"floating-color-palette"],[1,"prop-separator"],["title","Canvas Background Color",1,"prop-color-btn",3,"click"],["title","Stroke Width",1,"prop-width-btn",3,"click"],[1,"width-preview-line"],[1,"width-value"],[1,"floating-width-menu"],["tabindex","-1","role","button","aria-label","Close context menu",1,"context-menu-backdrop",3,"click","keydown.escape"],["role","menu","tabindex","-1",1,"layer-context-menu",3,"click","keydown"],["role","menuitem",1,"context-menu-item",3,"click"],[1,"context-menu-divider"],["role","menuitem",1,"context-menu-item","danger",3,"click","disabled"],[1,"context-menu-section"],[1,"context-menu-label"],[1,"blend-mode-select",3,"change","click","value"],[3,"label"],[3,"value","title"],["tabindex","-1","role","dialog","aria-label","Layers menu",1,"layers-dropdown",3,"click","keyup"],[1,"layers-dropdown-header"],[1,"layers-dropdown-title"],["title","Add New Layer",1,"header-action-btn",3,"click"],[1,"layers-list",3,"scroll"],["tabindex","0","role","button",1,"layer-item",3,"active","locked-layer"],["tabindex","0","role","button",1,"layer-item",3,"dragover","dragleave","drop"],["tabindex","0","role","button",1,"layer-item-left",3,"click","keyup.enter","keyup.space"],["draggable","true",1,"layer-drag-handle",3,"dragstart","dragend"],[1,"layer-info"],["type","text",1,"layer-name-input",3,"value"],[1,"layer-meta"],[1,"layer-opacity-control",3,"mousedown","dragstart"],[1,"opacity-label"],["type","range","min","0","max","100","draggable","false",1,"opacity-slider-inline",3,"input","pointerdown","click","dragstart","value","disabled"],[1,"layer-item-right"],[1,"layer-action-btn",3,"click","title"],[1,"layer-more-wrapper"],["title","More options",1,"layer-action-btn","layer-more-btn",3,"click"],["type","text",1,"layer-name-input",3,"blur","keyup.enter","click","value"],[1,"layer-name"],["type","text",1,"board-name-input",3,"blur","keyup.enter","value"],["title","Click to edit board name",1,"board-name-display",3,"click"],[1,"board-name-text"],[1,"material-icons","edit-icon"],[1,"menu-item",3,"click"],[1,"menu-divider"],["type","file","id","importFile","accept",".json",1,"hidden-input",3,"change"],["type","file","id","imageFile","accept","image/*",1,"hidden-input",3,"change"],[1,"bottom-btn",3,"click","title","innerHTML"],[1,"separator"],[1,"tools-overflow-wrapper"],["title","More Tools",1,"bottom-btn",3,"click"],[1,"tools-overflow-menu"],[1,"menu-item","tool-menu-item",3,"active"],[1,"menu-item","tool-menu-item",3,"click"],[1,"tool-icon",3,"innerHTML"],[1,"palette-grid"],[1,"palette-color-item",3,"background","selected","title"],[1,"palette-color-item",3,"click","title"],[1,"material-icons","check-icon"],[1,"width-menu-item",3,"selected"],[1,"width-menu-item",3,"click"],[1,"width-menu-preview"],[1,"width-menu-label"]],template:function(d,a){if(1&d){const u=e.RV6();e.j41(0,"div",6)(1,"div",7),e.DNE(2,C,25,10),e.k0s(),e.j41(3,"div",8)(4,"div",9,0)(6,"button",10),e.bIt("click",function(){return e.eBV(u),e.Njj(a.toggleLayersMenu())}),e.j41(7,"span",11),e.EFF(8,"layers"),e.k0s()(),e.DNE(9,z,10,0,"div",12),e.k0s(),e.j41(10,"div",13),e.DNE(11,q,2,1,"input",14)(12,Z,7,1),e.k0s(),e.nrm(13,"div",15),e.j41(14,"div",16)(15,"button",17),e.bIt("click",function(){return e.eBV(u),e.Njj(a.toggleMoreMenu())}),e.j41(16,"span",11),e.EFF(17,"more_vert"),e.k0s()(),e.DNE(18,Q,34,3,"div",18),e.k0s()(),e.j41(19,"div",19)(20,"main",20)(21,"ng-whiteboard",21),e.bIt("dataChange",function(k){return e.eBV(u),e.Njj(a.onDataChange(k))})("configChange",function(k){return e.eBV(u),e.Njj(a.config.set(k))})("save",function(){return e.eBV(u),e.Njj(a.onSave())})("ready",function(){return e.eBV(u),e.Njj(a.onReady())}),e.k0s(),e.DNE(22,ee,9,0,"div",22),e.k0s()(),e.j41(23,"div",23)(24,"button",24),e.bIt("click",function(){return e.eBV(u),e.Njj(a.undo())}),e.j41(25,"span",11),e.EFF(26,"undo"),e.k0s()(),e.j41(27,"button",25),e.bIt("click",function(){return e.eBV(u),e.Njj(a.redo())}),e.j41(28,"span",11),e.EFF(29,"redo"),e.k0s()()(),e.j41(30,"div",26)(31,"div",27)(32,"button",28),e.bIt("click",function(){return e.eBV(u),e.Njj(a.undo())}),e.j41(33,"span",11),e.EFF(34,"undo"),e.k0s()(),e.j41(35,"button",29),e.bIt("click",function(){return e.eBV(u),e.Njj(a.redo())}),e.j41(36,"span",11),e.EFF(37,"redo"),e.k0s()()(),e.j41(38,"div",30)(39,"button",31),e.bIt("click",function(){return e.eBV(u),e.Njj(a.zoomOut())}),e.j41(40,"span",11),e.EFF(41,"remove"),e.k0s()(),e.j41(42,"span",32),e.EFF(43),e.k0s(),e.j41(44,"button",33),e.bIt("click",function(){return e.eBV(u),e.Njj(a.zoomIn())}),e.j41(45,"span",11),e.EFF(46,"add"),e.k0s()()(),e.j41(47,"div",34),e.Z7z(48,te,1,4,"button",35,_),e.DNE(50,U,6,1),e.k0s()(),e.j41(51,"div",36)(52,"button",37),e.bIt("click",function(){return e.eBV(u),e.Njj(a.zoomOut())}),e.j41(53,"span",11),e.EFF(54,"zoom_out"),e.k0s()(),e.j41(55,"button",38),e.bIt("click",function(){return e.eBV(u),e.Njj(a.resetZoom())}),e.EFF(56),e.k0s(),e.j41(57,"button",39),e.bIt("click",function(){return e.eBV(u),e.Njj(a.zoomIn())}),e.j41(58,"span",11),e.EFF(59,"zoom_in"),e.k0s()()(),e.j41(60,"div",40)(61,"div",41)(62,"span",42),e.EFF(63,"Stroke"),e.k0s(),e.j41(64,"button",43),e.bIt("click",function(){return e.eBV(u),e.Njj(a.toggleColorPalette())}),e.nrm(65,"span",44),e.k0s(),e.DNE(66,se,4,0,"div",45),e.k0s(),e.nrm(67,"div",46),e.j41(68,"div",41)(69,"span",42),e.EFF(70,"BG"),e.k0s(),e.j41(71,"button",47),e.bIt("click",function(){return e.eBV(u),e.Njj(a.toggleBackgroundPalette())}),e.nrm(72,"span",44),e.k0s(),e.DNE(73,le,4,0,"div",45),e.k0s(),e.nrm(74,"div",46),e.j41(75,"div",41)(76,"span",42),e.EFF(77,"Size"),e.k0s(),e.j41(78,"button",48),e.bIt("click",function(){return e.eBV(u),e.Njj(a.toggleWidthMenu())}),e.nrm(79,"div",49),e.j41(80,"span",50),e.EFF(81),e.k0s()(),e.DNE(82,X,3,0,"div",51),e.k0s()()()}2&d&&(e.AVh("fullscreen-mode",a.isFullscreen()),e.R7$(2),e.vxM(2,null!==a.showLayerContextMenu()?2:-1),e.R7$(7),e.vxM(9,a.showLayersMenu()?9:-1),e.R7$(2),e.vxM(11,a.isEditingTitle()?11:12),e.R7$(7),e.vxM(18,a.showMoreMenu()?18:-1),e.R7$(3),e.Y8G("boardId",a.boardId)("config",a.config()),e.R7$(),e.vxM(22,a.showFullscreenHint()?22:-1),e.R7$(2),e.Y8G("disabled",!a.canUndo()),e.R7$(3),e.Y8G("disabled",!a.canRedo()),e.R7$(5),e.Y8G("disabled",!a.canUndo()),e.R7$(3),e.Y8G("disabled",!a.canRedo()),e.R7$(8),e.SpI("",a.zoomLevel(),"%"),e.R7$(5),e.Dyx(a.visibleTools()),e.R7$(2),e.vxM(50,a.hasOverflowTools()?50:-1),e.R7$(6),e.SpI(" ",a.zoomLevel(),"% "),e.R7$(8),e.xc7("background",a.selectedColor()),e.R7$(),e.xc7("background",a.selectedColor()),e.R7$(),e.vxM(66,a.showColorPalette()?66:-1),e.R7$(5),e.xc7("background",a.config().backgroundColor||"#ffffff"),e.R7$(),e.xc7("background",a.config().backgroundColor||"#ffffff"),e.R7$(),e.vxM(73,a.showBackgroundPalette()?73:-1),e.R7$(6),e.xc7("height",a.selectedWidth(),"px")("background",a.selectedColor()),e.R7$(2),e.SpI("",a.selectedWidth(),"px"),e.R7$(),e.vxM(82,a.showWidthMenu()?82:-1))},dependencies:[v.MD,D.YN,D.xH,D.y7,p.I],styles:['.basic-demo{display:flex;flex-direction:column;width:100%;height:100%;position:relative;overflow:hidden}.basic-demo.fullscreen-mode{position:fixed;inset:0;z-index:9999}.app-header{display:flex;align-items:center;justify-content:space-between;height:60px;padding:0 16px;background:#fff;border-bottom:1px solid #dadce0;box-shadow:0 1px 2px #3c40431a;z-index:100}.header-left{display:flex;align-items:center;gap:24px}.app-logo{display:flex;align-items:center;gap:8px}.app-logo .logo-icon{font-size:24px;color:#4285f4}.app-logo .logo-text{font-size:20px;font-weight:500;color:#202124}.board-title .title-display{margin:0;font-size:16px;font-weight:400;color:#5f6368;cursor:pointer;padding:6px 12px;border-radius:4px;transition:all .15s cubic-bezier(.4,0,.2,1);background:transparent;border:none}.board-title .title-display:hover:not(:disabled),.board-title .title-display:focus:not(:disabled){background:#4285f40a;outline:none}.board-title .title-display:disabled{cursor:not-allowed;opacity:.5}.board-title .title-input{font-size:16px;font-weight:400;color:#202124;border:1px solid #4285f4;border-radius:4px;padding:6px 12px;outline:none;background:#fff;min-width:200px}.header-right{display:flex;align-items:center;gap:8px}.header-btn{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:transparent;border:none;border-radius:50%;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);color:#5f6368}.header-btn:hover:not(:disabled){background:#5f63680a}.header-btn:disabled{opacity:.4;cursor:not-allowed}.header-btn:disabled:hover{background:transparent}.header-btn .material-icons{font-size:20px}.app-content{display:flex;flex:1;overflow:hidden;width:100%;height:100%}.canvas-area{flex:1;position:relative;background:#fff;overflow:hidden;display:flex;flex-direction:column}.whiteboard-canvas{width:100%;height:100%;flex:1}.whiteboard-canvas ::ng-deep ng-whiteboard{width:100%!important;height:100%!important;display:block!important}.whiteboard-canvas ::ng-deep .whiteboard-container{width:100%!important;height:100%!important;margin:0!important;padding:0!important;position:relative!important}.whiteboard-canvas ::ng-deep .whiteboard-svg{width:100%!important;height:100%!important;display:block!important}.whiteboard-canvas ::ng-deep .whiteboard-canvas-wrapper{width:100%!important;height:100%!important}.toolbar-left{width:80px;min-width:80px;background:#fff;border-right:1px solid #dadce0;display:flex;flex-direction:column;align-items:center;padding:16px 12px;gap:20px;z-index:50;flex-shrink:0;box-shadow:2px 0 8px #0000000a}.tool-group{display:flex;flex-direction:column;gap:8px;position:relative}.tool-group:not(:first-child){border-top:1px solid #e8eaed;padding-top:20px}.tool-group:not(:first-child):before{content:"";position:absolute;top:10px;left:50%;transform:translate(-50%);width:24px;height:1px;background:#e8eaed}.tool-btn{display:flex;align-items:center;justify-content:center;width:56px;height:56px;background:transparent;border:2px solid transparent;border-radius:12px;color:#5f6368;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);position:relative}.tool-btn:hover:not(:disabled){background:#4285f414;color:#4285f4;border-color:#4285f433;transform:translateY(-1px);box-shadow:0 2px 8px #4285f426}.tool-btn.active{background:#4285f4;color:#fff;border-color:#4285f4;box-shadow:0 4px 12px #4285f44d;transform:translateY(-1px)}.tool-btn:disabled{opacity:.4;cursor:not-allowed;color:#9aa0a6;background:transparent;border-color:transparent;transform:none;box-shadow:none}.tool-btn:disabled:hover{background:transparent;border-color:transparent;transform:none;box-shadow:none}.tool-btn .material-icons{font-size:22px}.property-control{position:relative}.color-btn{display:flex;align-items:center;justify-content:center;width:56px;height:56px;background:#fff;border:2px solid #dadce0;border-radius:12px;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);position:relative;box-shadow:0 1px 2px #3c40431a}.color-btn:hover{border-color:#4285f4;transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.color-btn .color-indicator{width:36px;height:36px;border-radius:8px;border:3px solid rgba(255,255,255,.9);box-shadow:0 0 0 1px #0000001a,inset 0 0 0 1px #ffffff4d}.width-btn{display:flex;align-items:center;justify-content:center;width:56px;height:56px;background:#fff;border:2px solid #dadce0;border-radius:12px;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);box-shadow:0 1px 2px #3c40431a}.width-btn:hover{border-color:#4285f4;transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.width-btn .width-indicator{display:flex;align-items:center;justify-content:center;width:36px;height:36px}.width-btn .width-indicator .width-line{width:28px;border-radius:2px;box-shadow:0 1px 2px #0000001a}.color-palette{position:absolute;left:92px;top:0;display:grid;grid-template-columns:repeat(4,1fr);gap:8px;padding:16px;background:#fff;border:1px solid #dadce0;border-radius:12px;box-shadow:0 4px 8px #3c404326;z-index:200;animation:slideInLeft .2s ease;min-width:200px}.palette-color{width:36px;height:36px;border:3px solid transparent;border-radius:8px;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);position:relative;box-shadow:0 2px 4px #0000001a,inset 0 0 0 1px #fff3}.palette-color:hover{transform:scale(1.1);border-color:#0000004d;box-shadow:0 4px 8px #00000026,inset 0 0 0 1px #fff3}.palette-color.selected{border-color:#4285f4;box-shadow:0 0 0 3px #4285f44d,0 4px 8px #00000026;transform:scale(1.05)}.width-menu{position:absolute;left:92px;top:0;display:flex;flex-direction:column;gap:6px;padding:16px;background:#fff;border:1px solid #dadce0;border-radius:12px;box-shadow:0 4px 8px #3c404326;z-index:200;animation:slideInLeft .2s ease;min-width:120px}.width-option{display:flex;align-items:center;justify-content:center;width:88px;height:40px;background:transparent;border:2px solid transparent;border-radius:8px;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1)}.width-option:hover{border-color:#4285f4;background:#4285f40a;transform:translateY(-1px);box-shadow:0 2px 8px #4285f426}.width-option.selected{border-color:#4285f4;background:#4285f41a;box-shadow:0 2px 8px #4285f433}.width-option .width-preview{width:60px;border-radius:3px;box-shadow:0 1px 3px #00000026}@keyframes slideInLeft{0%{opacity:0;transform:translate(-10px)}to{opacity:1;transform:translate(0)}}.toolbar-right{width:320px;min-width:320px;background:#fff;border-left:1px solid #dadce0;display:flex;flex-direction:column;z-index:50;flex-shrink:0;box-shadow:-2px 0 8px #0000000a;overflow-y:auto}.properties-panel{display:flex;flex-direction:column;height:100%}.properties-header{display:flex;align-items:center;justify-content:space-between;padding:20px;border-bottom:1px solid #e8eaed;background:#fff;position:sticky;top:0;z-index:10}.properties-header h3{margin:0;font-size:16px;font-weight:600;color:#202124}.properties-content{flex:1;padding:20px;overflow-y:auto}.property-empty{display:flex;align-items:center;justify-content:center;height:200px;color:#9aa0a6;font-size:14px;text-align:center;padding:20px}.property-section{margin-bottom:24px}.property-section:last-child{margin-bottom:0}.property-label{display:block;margin-bottom:8px;font-size:13px;font-weight:500;color:#5f6368;text-transform:uppercase;letter-spacing:.5px}.toolbar-top{position:absolute;top:20px;left:50%;transform:translate(-50%);display:flex;align-items:center;gap:16px;padding:8px 16px;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid #dadce0;border-radius:12px;box-shadow:0 8px 32px #0000001f;z-index:150;animation:fadeInDown .3s ease-out}@keyframes fadeInDown{0%{opacity:0;transform:translate(-50%) translateY(-10px)}to{opacity:1;transform:translate(-50%) translateY(0)}}.board-name-section{display:flex;align-items:center}.board-name-display{display:flex;align-items:center;gap:8px;padding:6px 12px;background:transparent;border:none;border-radius:8px;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);color:#202124;font-size:14px;font-weight:600;width:100%}.board-name-display:hover{background:#4285f40f}.board-name-display:hover .edit-icon{opacity:1}.board-name-display .material-icons{font-size:18px;color:#5f6368}.board-name-display .edit-icon{font-size:16px;opacity:0;transition:all .15s cubic-bezier(.4,0,.2,1)}.board-name-display .board-name-text{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.board-name-input{padding:6px 12px;border:2px solid #4285f4;border-radius:8px;font-size:14px;font-weight:600;color:#202124;outline:none;background:#fff;width:100%;box-sizing:border-box;font-family:inherit}.board-name-input:focus{box-shadow:0 0 0 3px #4285f41a}.toolbar-separator{width:1px;height:28px;background:#e8eaed}.toolbar-secondary-left,.toolbar-secondary-right{display:none;align-items:center;gap:4px;padding:5px 8px;background:#5f63680a;border-radius:4px;border:1px solid rgba(218,220,224,.5)}.secondary-group{display:flex;align-items:center;gap:2px}.secondary-btn{display:flex;align-items:center;justify-content:center;width:24px;height:24px;background:transparent;border:none;border-radius:4px;color:#5f6368;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);padding:0}.secondary-btn:hover:not(:disabled){background:#4285f414;color:#4285f4}.secondary-btn:active:not(:disabled){background:#4285f41f;transform:scale(.95)}.secondary-btn:disabled{opacity:.3;cursor:not-allowed}.secondary-btn .material-icons{font-size:16px}.secondary-zoom-level{font-size:10px;font-weight:600;color:#202124;min-width:28px;text-align:center;padding:2px 4px;background:#4285f40f;border-radius:4px;line-height:1.3}.layers-section{position:relative;display:flex;align-items:center;gap:8px}.layers-section .layers-menu-btn{display:flex;align-items:center;justify-content:center;width:36px;height:36px;padding:0;background:transparent;border:none;border-radius:8px;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);color:#5f6368}.layers-section .layers-menu-btn .material-icons{font-size:20px}.layers-section .layers-menu-btn:hover{background:#4285f414;color:#4285f4;transform:translateY(-1px)}.layers-section .layers-menu-btn:active{transform:translateY(0)}.layers-section .layers-dropdown{position:absolute;top:calc(100% + 12px);left:0;min-width:380px;max-height:500px;background:#fff;border:1px solid #dadce0;border-radius:12px;box-shadow:0 4px 8px #3c404326;overflow:visible;z-index:1001;animation:slideUpFade .2s ease-out}.layers-section .layers-dropdown .layers-dropdown-header{display:flex;align-items:center;justify-content:space-between;padding:16px 18px;background:#4285f40a;border-bottom:1px solid #e8eaed}.layers-section .layers-dropdown .layers-dropdown-header .layers-dropdown-title{font-size:15px;font-weight:600;color:#202124;letter-spacing:-.01em}.layers-section .layers-dropdown .layers-dropdown-header .header-action-btn{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:#fff;border:1px solid #dadce0;border-radius:8px;color:#5f6368;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1)}.layers-section .layers-dropdown .layers-dropdown-header .header-action-btn .material-icons{font-size:20px;color:#5f6368}.layers-section .layers-dropdown .layers-dropdown-header .header-action-btn:hover{background:#4285f4;border-color:#4285f4;transform:translateY(-1px);box-shadow:0 2px 8px #4285f44d}.layers-section .layers-dropdown .layers-dropdown-header .header-action-btn:hover .material-icons{color:#fff}.layers-section .layers-dropdown .layers-list{max-height:400px;overflow-y:auto;overflow-x:visible;padding:10px;min-height:60px;display:block;position:relative}.layers-section .layers-dropdown .layers-list::-webkit-scrollbar{width:6px}.layers-section .layers-dropdown .layers-list::-webkit-scrollbar-track{background:transparent}.layers-section .layers-dropdown .layers-list::-webkit-scrollbar-thumb{background:#dadce0;border-radius:3px}.layers-section .layers-dropdown .layers-list::-webkit-scrollbar-thumb:hover{background:#9aa0a6}.layers-section .layers-dropdown .layers-list .layer-item{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;margin-bottom:4px;background:#fff;border:1px solid #e8eaed;border-radius:8px;cursor:default;transition:all .15s cubic-bezier(.4,0,.2,1);position:relative;-webkit-user-select:none;user-select:none;box-sizing:border-box;overflow:visible}.layers-section .layers-dropdown .layers-list .layer-item:last-child{margin-bottom:0}.layers-section .layers-dropdown .layers-list .layer-item:hover:not(.active){background:#4285f405;border-color:#dadce0;transform:translate(2px)}.layers-section .layers-dropdown .layers-list .layer-item.active{background:#4285f40f;border-color:#4285f4;box-shadow:0 2px 4px #4285f41a}.layers-section .layers-dropdown .layers-list .layer-item.active .layer-name{color:#4285f4;font-weight:600}.layers-section .layers-dropdown .layers-list .layer-item.active:hover{border-color:#4285f4;background:#4285f414}.layers-section .layers-dropdown .layers-list .layer-item.locked-layer{cursor:pointer;background:#fbbf240d;border-left:3px solid #fbbf24}.layers-section .layers-dropdown .layers-list .layer-item.locked-layer:hover:not(.active){background:#fbbf2414;border-color:#fbbf24}.layers-section .layers-dropdown .layers-list .layer-item.locked-layer.active{background:#4285f40f;border-color:#4285f4;border-left-color:#fbbf24;box-shadow:0 2px 4px #4285f41a}.layers-section .layers-dropdown .layers-list .layer-item.locked-layer .layer-thumbnail{border-color:#fbbf24;background:#fbbf241a}.layers-section .layers-dropdown .layers-list .layer-item.locked-layer .layer-thumbnail .material-icons{color:#f59e0b}.layers-section .layers-dropdown .layers-list .layer-item[data-visible=false]{opacity:.5}.layers-section .layers-dropdown .layers-list .layer-item[data-visible=false] .layer-name{color:#9aa0a6}.layers-section .layers-dropdown .layers-list .layer-item[data-visible=false] .layer-thumbnail{opacity:.5}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left{display:flex;align-items:center;gap:10px;flex:1;min-width:0;cursor:grab}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left:active{cursor:grabbing}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-drag-handle{width:20px;height:20px;display:flex;align-items:center;justify-content:center;color:#9aa0a6;transition:all .15s cubic-bezier(.4,0,.2,1);border-radius:4px;opacity:.6;cursor:grab;pointer-events:auto}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-drag-handle .material-icons{font-size:16px;pointer-events:none}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-drag-handle:hover{opacity:1;background:#5f63680d}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-drag-handle:active{cursor:grabbing}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-thumbnail{width:44px;height:34px;display:flex;align-items:center;justify-content:center;background:#f8f9fa;border:1px solid #e8eaed;border-radius:4px;flex-shrink:0}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-thumbnail .material-icons{font-size:20px;color:#9aa0a6}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-info{display:flex;flex-direction:column;gap:3px;flex:1;min-width:0}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-info .layer-name{font-size:13px;font-weight:500;color:#202124;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-info .layer-name-input{width:100%;padding:4px 8px;border:2px solid #4285f4;border-radius:4px;font-size:13px;font-weight:500;outline:none;background:#fff;font-family:inherit}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-info .layer-name-input:focus{box-shadow:0 0 0 3px #4285f41a}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-info .layer-meta{font-size:11px;color:#9aa0a6}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-info .layer-opacity-control{display:flex;align-items:center;gap:8px;margin-top:2px;padding:4px 0}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-info .layer-opacity-control .opacity-label{font-size:10px;font-weight:600;color:#5f6368;min-width:32px;text-align:right}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-info .layer-opacity-control .opacity-slider-inline{flex:1;height:4px;border-radius:2px;background:linear-gradient(to right,#4285f433,#4285f4);outline:none;appearance:none;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);margin:0;padding:0}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-info .layer-opacity-control .opacity-slider-inline:hover{height:5px}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-info .layer-opacity-control .opacity-slider-inline:disabled{opacity:.4;cursor:not-allowed}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-info .layer-opacity-control .opacity-slider-inline::-webkit-slider-thumb{appearance:none;width:14px;height:14px;border-radius:50%;background:#4285f4;cursor:pointer;border:2px solid #ffffff;box-shadow:0 1px 3px #0003;-webkit-transition:all .15s cubic-bezier(.4,0,.2,1);transition:all .15s cubic-bezier(.4,0,.2,1);margin-top:-5px}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-info .layer-opacity-control .opacity-slider-inline::-webkit-slider-thumb:hover{transform:scale(1.15);box-shadow:0 2px 4px #0000004d}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-info .layer-opacity-control .opacity-slider-inline::-webkit-slider-thumb:active{transform:scale(1)}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-info .layer-opacity-control .opacity-slider-inline::-moz-range-thumb{width:14px;height:14px;border-radius:50%;background:#4285f4;cursor:pointer;border:2px solid #ffffff;box-shadow:0 1px 3px #0003;-moz-transition:all .15s cubic-bezier(.4,0,.2,1);transition:all .15s cubic-bezier(.4,0,.2,1)}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-info .layer-opacity-control .opacity-slider-inline::-moz-range-thumb:hover{transform:scale(1.15);box-shadow:0 2px 4px #0000004d}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-info .layer-opacity-control .opacity-slider-inline::-moz-range-thumb:active{transform:scale(1)}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-info .layer-opacity-control .opacity-slider-inline::-webkit-slider-runnable-track{width:100%;height:4px;border-radius:2px;background:transparent}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-info .layer-opacity-control .opacity-slider-inline::-moz-range-track{width:100%;height:4px;border-radius:2px;background:transparent;border:none}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-info .layer-opacity-control .opacity-slider-inline::-moz-range-progress{height:4px;border-radius:2px;background:transparent}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-right{display:flex;align-items:center;gap:2px;position:relative;overflow:visible}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-right .layer-action-btn{width:28px;height:28px;display:flex;align-items:center;justify-content:center;background:transparent;border:none;border-radius:4px;color:#5f6368;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);padding:0}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-right .layer-action-btn .material-icons{font-size:18px}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-right .layer-action-btn:hover{background:#5f636814;color:#202124;transform:translateY(-1px)}.layers-section .layers-dropdown .layers-list .layer-item .layer-item-right .layer-action-btn:active{transform:translateY(0)}.layer-btn:hover:not(:disabled){background:#4285f414;color:#4285f4;transform:translateY(-1px)}.layer-btn:active:not(:disabled){transform:translateY(0)}.layer-btn:disabled{opacity:.3;cursor:not-allowed}.layer-indicator{display:flex;align-items:center;gap:4px;padding:4px 12px;background:#4285f40f;border-radius:8px;font-size:13px;font-weight:600;color:#202124;min-width:50px;justify-content:center}.layer-indicator .page-current{color:#4285f4}.layer-indicator .page-separator{color:#9aa0a6}.layer-indicator .page-total{color:#5f6368}.page-divider{width:1px;height:20px;background:#e8eaed;margin:0 4px}.layers-section{display:flex;align-items:center;gap:4px}.layer-btn{display:flex;align-items:center;justify-content:center;width:32px;height:32px;background:transparent;border:none;border-radius:8px;color:#5f6368;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1)}.layer-btn:hover{background:#4285f414;color:#4285f4;transform:translateY(-1px)}.layer-btn:active{transform:translateY(0)}.layer-btn .material-icons{font-size:18px}.bottom-btn{display:flex;align-items:center;justify-content:center;min-width:40px;height:40px;padding:0 12px;background:transparent;border:2px solid transparent;border-radius:8px;color:#5f6368;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);font-size:13px;font-weight:500;white-space:nowrap}.bottom-btn .material-icons,.bottom-btn .material-symbols-outlined{font-size:20px}.bottom-btn svg{width:20px;height:20px;color:currentColor}.bottom-btn:hover:not(:disabled){background:#4285f414;color:#4285f4;border-color:#4285f433;transform:translateY(-1px)}.bottom-btn:active:not(:disabled){transform:translateY(0)}.bottom-btn.active{background:#4285f4;color:#fff;border-color:#4285f4;box-shadow:0 2px 8px #4285f44d}.bottom-btn.active:hover{background:#3367d6;border-color:#3367d6}.bottom-btn:disabled{opacity:.4;cursor:not-allowed;color:#9aa0a6;background:transparent;border-color:transparent;transform:none}.bottom-btn:disabled:hover{background:transparent;border-color:transparent;transform:none}.toolbar-bottom-left{position:absolute;bottom:20px;left:20px;display:flex;align-items:center;gap:4px;padding:8px;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid #dadce0;border-radius:12px;box-shadow:0 8px 32px #0000001f;z-index:100;animation:fadeInUpLeft .3s ease-out}@keyframes fadeInUpLeft{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.toolbar-bottom-center{position:absolute;bottom:20px;left:50%;transform:translate(-50%);display:flex;flex-direction:row;align-items:center;gap:6px;padding:8px 12px;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid #dadce0;border-radius:12px;box-shadow:0 8px 32px #0000001f;z-index:100;animation:fadeInUp .3s ease-out .1s;animation-fill-mode:both;max-width:calc(100% - 40px);overflow:visible}.toolbar-main-tools{display:flex;align-items:center;gap:6px;flex-wrap:nowrap}.toolbar-bottom-right{position:absolute;bottom:20px;right:20px;display:flex;align-items:center;gap:4px;padding:8px;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid #dadce0;border-radius:12px;box-shadow:0 8px 32px #0000001f;z-index:100;animation:fadeInUpRight .3s ease-out .2s;animation-fill-mode:both}@keyframes fadeInUpRight{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes fadeInUp{0%{opacity:0;transform:translate(-50%) translateY(10px)}to{opacity:1;transform:translate(-50%) translateY(0)}}.toolbar-properties{position:absolute;top:50%;right:16px;transform:translateY(-50%);display:flex;flex-direction:column;align-items:center;gap:4px;padding:10px;width:54px;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid #dadce0;border-radius:12px;box-shadow:0 8px 32px #0000001f;z-index:150;animation:slideInFromRight .3s ease-out}@keyframes slideInFromRight{0%{opacity:0;transform:translateY(-50%) translate(20px)}to{opacity:1;transform:translateY(-50%) translate(0)}}.prop-group{position:relative;display:flex;flex-direction:column;align-items:center;gap:6px}.prop-label{font-size:9px;font-weight:600;color:#5f6368;text-transform:uppercase;letter-spacing:.5px;writing-mode:horizontal-tb;text-align:center}.prop-color-btn{width:32px;height:32px;border:2px solid #dadce0;border-radius:8px;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);padding:0;display:flex;align-items:center;justify-content:center;overflow:hidden}.prop-color-btn:hover:not(:disabled){transform:scale(1.1);box-shadow:0 2px 8px #00000026}.prop-color-btn:disabled{opacity:.4;cursor:not-allowed;border-color:#e8eaed}.prop-color-btn:disabled:hover{transform:none;box-shadow:none}.prop-color-btn .color-preview{width:100%;height:100%;display:block;border-radius:4px}.prop-width-btn{display:flex;flex-direction:column;align-items:center;gap:3px;padding:4px 6px;background:transparent;border:1px solid #dadce0;border-radius:8px;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);width:32px}.prop-width-btn:hover:not(:disabled){background:#4285f40f;border-color:#4285f4}.prop-width-btn:disabled{opacity:.4;cursor:not-allowed;border-color:#e8eaed}.prop-width-btn:disabled:hover{background:transparent;border-color:#e8eaed}.prop-width-btn:disabled .width-value{color:#9aa0a6}.prop-width-btn .width-preview-line{width:20px;border-radius:2px;transition:all .15s cubic-bezier(.4,0,.2,1)}.prop-width-btn .width-value{font-size:9px;font-weight:500;color:#5f6368}.prop-separator{width:24px;height:1px;background:#e8eaed;margin:2px 0}.floating-color-palette{position:absolute;top:50%;right:calc(100% + 8px);transform:translateY(-50%);background:#fff;border:1px solid #dadce0;border-radius:12px;padding:12px;box-shadow:0 8px 32px #0000001f;z-index:200;animation:slideInFromRight .2s ease}.palette-grid{display:grid;grid-template-columns:repeat(6,1fr);gap:8px}.palette-color-item{width:32px;height:32px;border:2px solid transparent;border-radius:8px;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);position:relative;display:flex;align-items:center;justify-content:center}.palette-color-item:hover:not(:disabled){transform:scale(1.15);box-shadow:0 2px 8px #0003}.palette-color-item.selected{border-color:#4285f4;box-shadow:0 0 0 2px #4285f433}.palette-color-item:disabled{opacity:.4;cursor:not-allowed}.palette-color-item:disabled:hover{transform:none;box-shadow:none}.palette-color-item .check-icon{font-size:16px;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3)}.floating-width-menu{position:absolute;top:50%;right:calc(100% + 8px);transform:translateY(-50%);background:#fff;border:1px solid #dadce0;border-radius:12px;padding:8px;box-shadow:0 8px 32px #0000001f;z-index:200;min-width:160px;animation:slideInFromRight .2s ease}.width-menu-item{display:flex;align-items:center;gap:12px;padding:10px 12px;background:transparent;border:none;border-radius:8px;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);width:100%}.width-menu-item:hover:not(:disabled){background:#4285f40f}.width-menu-item.selected{background:#4285f41a}.width-menu-item.selected .width-menu-label{color:#4285f4;font-weight:600}.width-menu-item:disabled{opacity:.4;cursor:not-allowed}.width-menu-item:disabled:hover{background:transparent}.width-menu-item:disabled .width-menu-label{color:#9aa0a6}.width-menu-item .width-menu-preview{flex:1;border-radius:2px;min-width:60px}.width-menu-item .width-menu-label{font-size:12px;font-weight:500;color:#5f6368;min-width:32px}.toolbar-left-section,.toolbar-right-section,.toolbar-center-section{display:flex;align-items:center;gap:8px}.toolbar-center-section{display:flex;align-items:center;gap:12px}.toolbar-left-section,.toolbar-right-section{display:flex;align-items:center;gap:4px}.toolbar-center-section{display:flex;align-items:center}.bottom-btn{display:flex;align-items:center;justify-content:center;min-width:36px;height:36px;padding:0 6px;background:transparent;border:none;border-radius:8px;color:#5f6368;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);font-size:12px;font-weight:500}.bottom-btn:hover{background:#4285f414;color:#4285f4;transform:translateY(-1px);box-shadow:0 2px 8px #4285f426}.bottom-btn.active{background:#4285f4;color:#fff;box-shadow:0 2px 8px #4285f44d}.bottom-btn.zoom-reset-btn{min-width:50px;font-weight:600}.bottom-btn .material-icons{font-size:18px}.separator{width:1px;height:20px;background:#e8eaed;margin:0 4px;flex-shrink:0}.prop-separator{width:100%;height:1px;background:#e8eaed;margin:6px 0;flex-shrink:0}.more-menu-wrapper{position:relative;display:flex;align-items:center}.more-menu{position:absolute;bottom:calc(100% + 12px);right:0;min-width:220px;background:#fff;border:1px solid #dadce0;border-radius:12px;box-shadow:0 8px 32px #0000001f;z-index:200;animation:slideUpFade .2s ease;overflow:hidden}.toolbar-top .more-menu{top:calc(100% + 12px);bottom:auto;animation:slideDown .2s ease}.menu-item{display:flex;align-items:center;gap:14px;width:100%;padding:14px 18px;background:transparent;border:none;text-align:left;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);font-size:15px;font-weight:500;color:#202124}.menu-item:hover:not(:disabled){background:#4285f40f;transform:translateY(-1px)}.menu-item:active:not(:disabled){transform:translateY(0)}.menu-item:disabled{opacity:.4;cursor:not-allowed;color:#9aa0a6}.menu-item:disabled:hover{background:transparent;transform:none}.menu-item:disabled .material-icons{color:#9aa0a6}.menu-item .material-icons{font-size:20px;color:#5f6368}.menu-divider{height:1px;background:#e8eaed;margin:8px 0}.hidden-input{display:none}.tools-overflow-wrapper{position:relative;display:flex;align-items:center}.tools-overflow-menu{position:absolute;bottom:calc(100% + 8px);left:50%;transform:translate(-50%);display:flex;flex-direction:column;gap:4px;padding:8px;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid #dadce0;border-radius:12px;box-shadow:0 8px 32px #0000001f;z-index:200;animation:slideUpFade .2s ease;min-width:160px}.tools-overflow-menu .tool-menu-item{display:flex;align-items:center;gap:12px;padding:8px 12px;background:transparent;border:none;border-radius:8px;color:#5f6368;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);font-size:14px;text-align:left;width:100%}.tools-overflow-menu .tool-menu-item .tool-icon{display:flex;align-items:center;justify-content:center;width:20px;height:20px}.tools-overflow-menu .tool-menu-item .tool-icon ::ng-deep svg{width:20px;height:20px;fill:currentColor}.tools-overflow-menu .tool-menu-item .tool-icon ::ng-deep .material-icons{font-size:20px}.tools-overflow-menu .tool-menu-item:hover:not(:disabled){background:#4285f414;color:#4285f4}.tools-overflow-menu .tool-menu-item.active{background:#4285f41f;color:#4285f4;font-weight:600}.tools-overflow-menu .tool-menu-item:disabled{opacity:.4;cursor:not-allowed}@keyframes slideUpFade{0%{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}@keyframes fadeInOut{0%{opacity:0;transform:translateY(-10px)}15%,85%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-10px)}}@keyframes slideInFromLeft{0%{opacity:0;transform:translate(-20px) translateY(-50%)}to{opacity:1;transform:translate(0) translateY(-50%)}}@keyframes slideInFromBottom{0%{opacity:0;transform:translate(-50%) translateY(20px)}to{opacity:1;transform:translate(-50%) translateY(0)}}@keyframes slideUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.material-icons{font-family:Material Icons;font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;font-feature-settings:"liga";-webkit-font-smoothing:antialiased}.basic-demo.fullscreen-mode{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:9999;background:#fff;overflow:hidden}.basic-demo.fullscreen-mode .app-content{height:100vh;overflow:hidden}.basic-demo.fullscreen-mode .canvas-area{margin:0;border-radius:0;box-shadow:none;overflow:hidden}.basic-demo.fullscreen-mode .toolbar-top{position:fixed;top:20px;left:50%;transform:translate(-50%);z-index:1000}.basic-demo.fullscreen-mode .toolbar-properties{position:fixed;z-index:1000}.basic-demo.fullscreen-mode .toolbar-right{display:none}.basic-demo.fullscreen-mode .toolbar-left.fullscreen-toolbar{position:fixed;left:20px;top:50%;transform:translateY(-50%);width:80px;height:auto;max-height:80vh;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid #dadce0;border-radius:12px;box-shadow:0 8px 32px #0000001f;z-index:1000;overflow-y:auto;padding-top:56px;animation:slideInFromLeft .3s ease-out}.basic-demo.fullscreen-mode .toolbar-left.fullscreen-toolbar .color-palette,.basic-demo.fullscreen-mode .toolbar-left.fullscreen-toolbar .width-menu{left:88px}.basic-demo.fullscreen-mode .fullscreen-close-btn{position:absolute;top:-15px;right:-15px;width:36px;height:36px;background:#4285f4;color:#fff;border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 4px 12px #4285f44d;z-index:1001;transition:all .15s cubic-bezier(.4,0,.2,1)}.basic-demo.fullscreen-mode .fullscreen-close-btn:hover{background:#3367d6;transform:scale(1.1);box-shadow:0 6px 16px #4285f466}.basic-demo.fullscreen-mode .fullscreen-close-btn .material-icons{font-size:18px}.basic-demo.fullscreen-mode .hidden-in-fullscreen{display:none!important}.basic-demo.fullscreen-mode .toolbar-bottom-left,.basic-demo.fullscreen-mode .toolbar-bottom-center,.basic-demo.fullscreen-mode .toolbar-bottom-right{position:fixed}.basic-demo.fullscreen-mode .fullscreen-hint{position:absolute;top:20px;right:20px;background:#000c;color:#fff;padding:12px 16px;border-radius:8px;font-size:14px;z-index:1000;animation:fadeInOut 3s ease-in-out forwards;pointer-events:none}.basic-demo.fullscreen-mode .fullscreen-hint p{margin:0;display:flex;align-items:center;gap:8px}.basic-demo.fullscreen-mode .fullscreen-hint kbd{background:#fff3;padding:2px 6px;border-radius:3px;font-size:12px;border:1px solid rgba(255,255,255,.3)}.basic-demo.fullscreen-mode .fullscreen-hint .material-icons{font-size:16px;background:#fff3;padding:2px;border-radius:3px}@media (max-width: 1024px) and (min-width: 769px){.toolbar-top{max-width:90%;gap:12px;padding:6px 14px}.mobile-controls,.mobile-separator,.toolbar-secondary-left,.toolbar-secondary-right{display:none}.toolbar-bottom-left,.toolbar-bottom-right{padding:8px;gap:4px}.toolbar-bottom-center{max-width:calc(100% - 220px);gap:5px;padding:8px 12px;flex-direction:row;align-items:center}.toolbar-properties{right:12px}.bottom-btn{min-width:38px;height:38px;padding:0 10px}.bottom-btn .material-icons,.bottom-btn .material-symbols-outlined{font-size:19px}.bottom-btn svg{width:19px;height:19px}.bottom-btn.zoom-reset-btn{min-width:46px;font-size:12px}}@media (max-width: 768px){.app-header{height:56px;padding:0 12px}.header-left{gap:16px}.app-logo .logo-text{display:none}.board-title .title-display{font-size:14px}.board-title .title-input{font-size:14px;min-width:150px}.toolbar-left{width:68px;padding:12px 6px;gap:16px}.toolbar-right{display:none}.toolbar-top{gap:6px;padding:6px 10px;width:-moz-fit-content;width:fit-content;left:8px;right:auto;transform:none}.toolbar-top .toolbar-separator{height:24px}.toolbar-top .layers-menu-btn{width:28px;height:28px;padding:0}.toolbar-top .layers-menu-btn .material-icons{font-size:18px}.toolbar-top .board-name-display{padding:4px 8px;gap:6px}.toolbar-top .board-name-display .material-icons{font-size:16px}.toolbar-top .board-name-display .edit-icon{display:none}.toolbar-top .board-name-input{padding:4px 8px;font-size:13px}.toolbar-top .layer-btn .material-icons{font-size:18px}.toolbar-top .layers-section{gap:4px}.toolbar-top .layers-section .layers-menu-btn{padding:4px 8px;font-size:12px}.toolbar-top .layers-section .layers-menu-btn .material-icons{font-size:16px}.toolbar-top .layers-section .layers-menu-btn .layers-count{padding:1px 4px;font-size:10px}.toolbar-top .layers-section .layers-menu-btn .dropdown-icon{font-size:16px}.toolbar-top .layers-section .layers-dropdown{position:fixed;left:0;right:0;width:100vw;min-width:unset;max-width:-moz-fit-content;max-width:fit-content;transform:none;border-radius:0;border-left:none;border-right:none;box-sizing:border-box;margin:0;padding:0}.toolbar-top .layers-section .layers-dropdown .layers-dropdown-header{padding:12px}.toolbar-top .layers-section .layers-dropdown .layers-dropdown-header .layers-dropdown-title{font-size:14px}.toolbar-top .layers-section .layers-dropdown .layers-dropdown-header .header-action-btn{width:28px;height:28px}.toolbar-top .layers-section .layers-dropdown .layers-dropdown-header .header-action-btn .material-icons{font-size:18px}.toolbar-top .layers-section .layers-dropdown .layers-list .layer-item{padding:10px}.toolbar-top .layers-section .layers-dropdown .layers-list .layer-item .layer-item-left{gap:8px}.toolbar-top .layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-drag-handle{width:20px;height:20px}.toolbar-top .layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-drag-handle .material-icons{font-size:16px}.toolbar-top .layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-thumbnail{width:40px;height:30px}.toolbar-top .layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-thumbnail .material-icons{font-size:20px}.toolbar-top .layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-info .layer-name{font-size:13px}.toolbar-top .layers-section .layers-dropdown .layers-list .layer-item .layer-item-left .layer-info .layer-meta{font-size:11px}.toolbar-top .layers-section .layers-dropdown .layers-list .layer-item .layer-item-right{gap:2px}.toolbar-top .layers-section .layers-dropdown .layers-list .layer-item .layer-item-right .layer-action-btn{width:28px;height:28px}.toolbar-top .layers-section .layers-dropdown .layers-list .layer-item .layer-item-right .layer-action-btn .material-icons{font-size:16px}.toolbar-top .layer-indicator{padding:2px 8px;font-size:12px;min-width:40px}.toolbar-top .layer-btn{width:28px;height:28px}.toolbar-top .layer-btn .material-icons{font-size:16px}.tool-btn{width:50px;height:50px}.tool-btn .material-icons{font-size:20px}.color-btn,.width-btn{width:50px;height:50px}.color-btn .color-indicator,.width-btn .color-indicator,.color-btn .width-indicator,.width-btn .width-indicator{width:32px;height:32px}.color-btn .width-indicator .width-line,.width-btn .width-indicator .width-line{width:24px}.color-palette{left:76px;grid-template-columns:repeat(3,1fr);padding:12px;min-width:160px}.color-palette .palette-color{width:32px;height:32px}.width-menu{left:76px;padding:12px;min-width:100px}.width-menu .width-option{width:76px;height:36px}.width-menu .width-option .width-preview{width:48px}.toolbar-bottom-left,.toolbar-bottom-right{display:none}.toolbar-bottom-center{bottom:20px;left:50%;transform:translate(-50%);padding:8px 10px;width:calc(100% - 32px);gap:4px;flex-direction:column;align-items:stretch}.toolbar-bottom-center .toolbar-secondary-left{display:flex;position:absolute;bottom:100%;left:5px;width:-moz-fit-content;width:fit-content}.toolbar-bottom-center .toolbar-secondary-right{display:flex;position:absolute;bottom:100%;right:5px;width:-moz-fit-content;width:fit-content}.toolbar-bottom-center .toolbar-main-tools{display:flex;align-items:center;gap:4px;flex-wrap:nowrap}.toolbar-bottom-center .bottom-btn{min-width:36px;height:36px;padding:0 8px}.toolbar-bottom-center .bottom-btn .material-icons,.toolbar-bottom-center .bottom-btn .material-symbols-outlined{font-size:18px}.toolbar-bottom-center .bottom-btn svg{width:18px;height:18px}.toolbar-bottom-center .separator{margin:0 2px}.toolbar-bottom-center .tools-overflow-menu{left:0;right:auto;max-width:90vw}.toolbar-properties{top:20px;right:8px;left:auto;transform:none;flex-direction:row;gap:4px;padding:6px 10px;width:auto;max-width:200px}.toolbar-properties .prop-group{flex-direction:row;gap:6px}.toolbar-properties .prop-label{display:none}.toolbar-properties .prop-separator{width:1px;height:24px}.toolbar-properties .prop-color-btn{width:28px;height:28px}.toolbar-properties .prop-width-btn{min-width:auto;padding:4px 8px}.toolbar-properties .prop-width-btn .width-preview-line{max-width:20px}.toolbar-properties .prop-width-btn .width-value{font-size:10px}.toolbar-properties .floating-color-palette,.toolbar-properties .floating-width-menu{top:calc(100% + 8px);right:0;bottom:auto;left:auto;transform:none}.palette-grid{grid-template-columns:repeat(4,1fr)}.bottom-btn{width:36px;height:36px}.bottom-btn.zoom-reset-btn{min-width:48px;font-size:12px}.bottom-btn .material-icons{font-size:18px}.separator{display:none}.more-menu{min-width:180px}}@media (max-width: 480px){.toolbar-top{width:-moz-fit-content;width:fit-content;padding:5px 8px;gap:4px;left:6px;right:auto}.toolbar-top .secondary-btn{width:22px;height:22px}.toolbar-top .secondary-btn .material-icons{font-size:14px}.toolbar-top .secondary-zoom-level{font-size:9px;min-width:26px;padding:1px 3px}.toolbar-top .layers-menu-btn,.toolbar-top .layer-btn{width:26px;height:26px}.toolbar-top .layers-menu-btn .material-icons,.toolbar-top .layer-btn .material-icons{font-size:16px}.toolbar-bottom-left,.toolbar-bottom-right{display:none}.toolbar-bottom-center{width:calc(100% - 24px);padding:6px;gap:3px}.toolbar-bottom-center .toolbar-secondary-left,.toolbar-bottom-center .toolbar-secondary-right{bottom:100%;padding:4px 6px;gap:3px}.toolbar-bottom-center .toolbar-main-tools{gap:2px}.toolbar-bottom-center .bottom-btn{min-width:32px;height:32px;padding:0 6px}.toolbar-bottom-center .bottom-btn .material-icons,.toolbar-bottom-center .bottom-btn .material-symbols-outlined{font-size:16px}.toolbar-bottom-center .bottom-btn svg{width:16px;height:16px}.toolbar-properties{top:12px;right:6px;padding:3px 5px;gap:2px}.toolbar-properties .prop-color-btn,.toolbar-properties .prop-width-btn{width:24px;height:24px;padding:2px 4px}}@keyframes fadeIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}.layer-item-right{display:flex;align-items:center;gap:6px;position:relative;z-index:1}.layer-more-wrapper{position:relative}.context-menu-backdrop{position:fixed;inset:0;z-index:1000;background:transparent;cursor:default;opacity:1!important}.layer-context-menu{position:fixed;width:220px;background:#fff;border:1px solid #dadce0;border-radius:8px;box-shadow:0 8px 24px #00000026;padding:6px;z-index:1100;animation:slideUpFade .15s ease-out;opacity:1!important;overflow:visible!important}.layer-context-menu:focus{outline:none}.layer-context-menu .context-menu-section{padding:10px 12px}.layer-context-menu .context-menu-section .context-menu-label{display:flex;align-items:center;gap:8px;font-size:12px;font-weight:600;color:#5f6368;margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px}.layer-context-menu .context-menu-section .context-menu-label .material-icons{font-size:16px;color:#5f6368}.layer-context-menu .context-menu-section .blend-mode-select{width:100%;padding:8px 10px;background:#fff;border:1px solid #dadce0;border-radius:4px;color:#202124;font-size:13px;font-weight:500;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);outline:none}.layer-context-menu .context-menu-section .blend-mode-select:hover{border-color:#4285f4;box-shadow:0 0 0 3px #4285f41a}.layer-context-menu .context-menu-section .blend-mode-select:focus{border-color:#4285f4;box-shadow:0 0 0 3px #4285f426}.layer-context-menu .context-menu-section .blend-mode-select option{padding:6px;font-size:13px}.layer-context-menu .context-menu-section .blend-mode-select optgroup{font-weight:600;font-size:12px;color:#5f6368;padding:4px 0}.layer-context-menu .context-menu-item{width:100%;display:flex;align-items:center;gap:10px;padding:9px 12px;background:transparent;border:none;border-radius:4px;color:#202124;font-size:13px;font-weight:500;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);text-align:left}.layer-context-menu .context-menu-item .material-icons{font-size:18px;color:#5f6368}.layer-context-menu .context-menu-item:hover:not(:disabled){background:#4285f40f;transform:translate(2px)}.layer-context-menu .context-menu-item:disabled{opacity:.4;cursor:not-allowed}.layer-context-menu .context-menu-item.danger,.layer-context-menu .context-menu-item.danger .material-icons{color:#dc2626}.layer-context-menu .context-menu-item.danger:hover:not(:disabled){background:#dc26260f}.layer-context-menu .context-menu-divider{height:1px;background:#e8eaed;margin:4px 0}.layer-item.dragging{opacity:.5;cursor:move}.layer-item.drag-over-top{border-top:2px solid #4285f4;margin-top:-2px}.layer-item.drag-over-bottom{border-bottom:2px solid #4285f4;margin-bottom:-2px}.layer-drag-handle{cursor:move}.layer-drag-handle:active{cursor:grabbing}\n'],encapsulation:2})}}return h})()},4161:(xe,N,b)=>{b.d(N,{K:()=>B});var s=b(4523),v=b(4438),e=b(4446),D=b(872),P=b(6078);let B=(()=>{class V{constructor(){this.instanceService=(0,v.WQX)(e.b),this.activeBoardId=(0,v.vPA)(null)}setActiveBoard(c){this.activeBoardId.set(c)}getActiveBoard(){return this.activeBoardId()}getApi(c){const p=c||this.activeBoardId();if(!p)throw new Error("NgWhiteboardService: No boardId provided and no active board set. Call setActiveBoard() first or pass boardId parameter.");const _=this.instanceService.getInstance(p);if(!_)throw new Error(`NgWhiteboardService: Board "${p}" not found. Ensure the whiteboard component is initialized.`);return _}signals(c){return{elements:(0,v.EWP)(()=>{this.instanceService.registryVersion();const p=this.instanceService.getInstance(c);return p?p.elements():[]}),selectedElements:(0,v.EWP)(()=>{this.instanceService.registryVersion();const p=this.instanceService.getInstance(c);return p?p.selectedElements():[]}),config:(0,v.EWP)(()=>{this.instanceService.registryVersion();const p=this.instanceService.getInstance(c);return p?p.config():{}}),elementsCount:(0,v.EWP)(()=>{this.instanceService.registryVersion();const p=this.instanceService.getInstance(c);return p?p.elementsCount():0}),hasElements:(0,v.EWP)(()=>{this.instanceService.registryVersion();const p=this.instanceService.getInstance(c);return!!p&&p.hasElements()}),selectedTool:(0,v.EWP)(()=>{this.instanceService.registryVersion();const p=this.instanceService.getInstance(c);return p?p.selectedTool():D.p.Pen}),availableTools:(0,v.EWP)(()=>{this.instanceService.registryVersion();const p=this.instanceService.getInstance(c);return p?p.availableTools():[]}),layers:(0,v.EWP)(()=>{this.instanceService.registryVersion();const p=this.instanceService.getInstance(c);return p?p.layers():[]}),activeLayerId:(0,v.EWP)(()=>{this.instanceService.registryVersion();const p=this.instanceService.getInstance(c);return p?p.activeLayerId():null}),activeLayer:(0,v.EWP)(()=>{this.instanceService.registryVersion();const p=this.instanceService.getInstance(c);return p?p.activeLayer():null}),canUndo:(0,v.EWP)(()=>{this.instanceService.registryVersion();const p=this.instanceService.getInstance(c);return!!p&&p.getCanUndoSignal()()}),canRedo:(0,v.EWP)(()=>{this.instanceService.registryVersion();const p=this.instanceService.getInstance(c);return!!p&&p.getCanRedoSignal()()}),selectionBox:(0,v.EWP)(()=>{this.instanceService.registryVersion();const p=this.instanceService.getInstance(c);return p?p.getSelectionBoxSignal()():{x:0,y:0,width:0,height:0}}),boundingBox:(0,v.EWP)(()=>{this.instanceService.registryVersion();const p=this.instanceService.getInstance(c);return p?p.getBoundingBoxSignal()():null})}}getAllBoards(){return this.instanceService.getAllInstanceIds()}getBoardCount(){return this.instanceService.getInstanceCount()}hasBoard(c){return this.instanceService.hasInstance(c)}setElements(c){this.getApi().setElements(c)}getElements(){return this.getApi().getElements()}addElements(c){this.getApi().addElements(c)}updateElements(c){this.getApi().updateElements(c)}removeElements(c){this.getApi().removeElements(c)}clear(){this.getApi().clear()}clearAll(){this.getApi().clearAll()}addElement(c){this.getApi().addElement(c)}updateElement(c){this.getApi().updateElement(c)}removeElementsByIds(c){this.getApi().removeElementsByIds(c)}getElementById(c){return this.getApi().getElementById(c)}getElementsByIds(c){return this.getApi().getElementsByIds(c)}getNextZIndex(){return this.getApi().getNextZIndex()}elementExists(c){return this.getApi().elementExists(c)}selectElements(c,p=!1){this.getApi().selectElements(c,p)}deselectElement(c){this.getApi().deselectElement(c)}toggleSelection(c){this.getApi().toggleSelection(c)}clearSelection(){this.getApi().clearSelection()}selectAll(){this.getApi().selectAll()}getSelectedElements(){return this.getApi().getSelectedElements()}updateSelectedElements(c){this.getApi().updateSelectedElements(c)}removeSelectedElements(){this.getApi().removeSelectedElements()}isSelected(c){return this.getApi().isSelected(c)}clearSelectionBox(){this.getApi().clearSelectionBox()}transformSelectedElements(c){this.getApi().transformSelectedElements(c)}setSelectionBox(c){this.getApi().setSelectionBox(c)}updateBoundingBox(){this.getApi().updateBoundingBox()}getClipboardInfo(){return this.getApi().getClipboardInfo()}copyElements(){this.getApi().copyElements()}cutElements(){this.getApi().cutElements()}pasteElements(){this.getApi().pasteElements()}duplicateElements(){this.getApi().duplicateElements()}deleteSelectedElements(){this.getApi().deleteSelectedElements()}bringToFront(){this.getApi().bringToFront()}bringForward(){this.getApi().bringForward()}sendBackward(){this.getApi().sendBackward()}sendToBack(){this.getApi().sendToBack()}groupSelectedElements(){this.getApi().groupSelectedElements()}ungroupSelectedElements(){this.getApi().ungroupSelectedElements()}lockElements(){this.getApi().lockElements()}unlockElements(){this.getApi().unlockElements()}alignElements(c){this.getApi().alignElements(c)}getCanvas(){return this.getApi().getCanvas()}setCanvasDimensions(c,p){this.getApi().setCanvasDimensions(c,p)}centerCanvas(){this.getApi().centerCanvas()}fullScreen(){this.getApi().fullScreen()}exitFullScreen(c,p){this.getApi().exitFullScreen(c,p)}resetCanvas(){this.getApi().resetCanvas()}setZoom(c){this.getApi().setZoom(c)}zoomIn(){this.getApi().zoomIn()}zoomOut(){this.getApi().zoomOut()}resetZoom(){this.getApi().resetZoom()}zoomToFit(){this.getApi().zoomToFit()}zoomToSelection(){this.getApi().zoomToSelection()}pan(c,p){this.getApi().pan(c,p)}panTo(c,p){this.getApi().panTo(c,p)}resetPan(){this.getApi().resetPan()}save(c=P.o8.Base64,p="whiteboard"){var _=this;return(0,s.A)(function*(){return _.getApi().save(c,p)})()}addImage(c){this.getApi().addImage(c)}importImageFile(c,p,_){var T=this;return(0,s.A)(function*(){return T.getApi().importImageFile(c,p,_)})()}exportData(){return this.getApi().exportData()}importData(c){this.getApi().importData(c)}undo(){return this.getApi().undo()}redo(){return this.getApi().redo()}getCanUndoSignal(){return this.getApi().getCanUndoSignal()}getCanRedoSignal(){return this.getApi().getCanRedoSignal()}clearHistory(){this.getApi().clearHistory()}getConfig(){return this.getApi().getConfig()}updateConfig(c){this.getApi().updateConfig(c)}updateConfigValue(c,p){this.getApi().updateConfigValue(c,p)}addLayer(c){this.getApi().addLayer(c)}removeLayer(c){return this.getApi().removeLayer(c)}duplicateLayer(c){this.getApi().duplicateLayer(c)}setActiveLayer(c){return this.getApi().setActiveLayer(c)}getActiveLayerId(){return this.getApi().getActiveLayerId()}toggleLayerVisibility(c){return this.getApi().toggleLayerVisibility(c)}toggleLayerLock(c){return this.getApi().toggleLayerLock(c)}renameLayer(c,p){return this.getApi().renameLayer(c,p)}setLayerOpacity(c,p){return this.getApi().setLayerOpacity(c,p)}setLayerBlendMode(c,p){return this.getApi().setLayerBlendMode(c,p)}moveLayerUp(c){return this.getApi().moveLayerUp(c)}moveLayerDown(c){return this.getApi().moveLayerDown(c)}reorderLayersByIndex(c,p){return this.getApi().reorderLayersByIndex(c,p)}toggleGrid(){this.getApi().toggleGrid()}toggleSnapToGrid(){this.getApi().toggleSnapToGrid()}setGridSize(c){this.getApi().setGridSize(c)}setActiveTool(c){this.getApi().setActiveTool(c)}getActiveTool(){return this.getApi().getActiveTool()}setToolEnabled(c,p){return this.getApi().setToolEnabled(c,p)}setEnabledTools(c){this.getApi().setEnabledTools(c)}setCursor(c){this.getApi().setCursor(c)}resetCursor(){this.getApi().resetCursor()}screenToCanvas(c,p){return this.getApi().screenToCanvas(c,p)}canvasToScreen(c,p){return this.getApi().canvasToScreen(c,p)}getSelectionBoxSignal(){return this.getApi().getSelectionBoxSignal()}getBoundingBoxSignal(){return this.getApi().getBoundingBoxSignal()}static{this.\u0275fac=function(p){return new(p||V)}}static{this.\u0275prov=v.jDH({token:V,factory:V.\u0275fac})}}return V})()},7468:(xe,N,b)=>{b.d(N,{p:()=>w});var s=b(1985),v=b(3073),e=b(8750),D=b(3794),P=b(4360),B=b(6450),V=b(8496);function w(...c){const p=(0,D.ms)(c),{args:_,keys:T}=(0,v.D)(c),L=new s.c(F=>{const{length:M}=_;if(!M)return void F.complete();const O=new Array(M);let C=M,A=M;for(let j=0;j<M;j++){let G=!1;(0,e.Tg)(_[j]).subscribe((0,P._)(F,z=>{G||(G=!0,A--),O[j]=z},()=>C--,void 0,()=>{(!C||!G)&&(A||F.next(T?(0,V.e)(T,O):O),F.complete())}))}});return p?L.pipe((0,B.I)(p)):L}},9417:(xe,N,b)=>{b.d(N,{YN:()=>pn,kq:()=>w,xH:()=>lt,y7:()=>dt});var s=b(4438);b(177),b(6648),b(7468),b(6354);let B=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=l=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(s.rXU(s.sFG),s.rXU(s.aKT))}}static{this.\u0275dir=s.FsC({type:n})}}return n})(),V=(()=>{class n extends B{static{this.\u0275fac=(()=>{let t;return function(l){return(t||(t=s.xGo(n)))(l||n)}})()}static{this.\u0275dir=s.FsC({type:n,features:[s.Vt3]})}}return n})();const w=new s.nKC(""),$=new s.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>fe}),fe="always";Promise.resolve(),Promise.resolve();const Jt={provide:w,useExisting:(0,s.Rfq)(()=>Ie),multi:!0};function at(n,o){return null==n?`${o}`:(o&&"object"==typeof o&&(o="Object"),`${n}: ${o}`.slice(0,50))}let Ie=(()=>{class n extends V{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const l=at(this._getOptionId(t),t);this.setProperty("value",l)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){const i=function qt(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static{this.\u0275fac=(()=>{let t;return function(l){return(t||(t=s.xGo(n)))(l||n)}})()}static{this.\u0275dir=s.FsC({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,l){1&i&&s.bIt("change",function(y){return l.onChange(y.target.value)})("blur",function(){return l.onTouched()})},inputs:{compareWith:"compareWith"},features:[s.Jv_([Jt]),s.Vt3]})}}return n})(),lt=(()=>{class n{constructor(t,i,l){this._element=t,this._renderer=i,this._select=l,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(at(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(s.rXU(s.aKT),s.rXU(s.sFG),s.rXU(Ie,9))}}static{this.\u0275dir=s.FsC({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();const Zt={provide:w,useExisting:(0,s.Rfq)(()=>Ne),multi:!0};function ct(n,o){return null==n?`${o}`:("string"==typeof o&&(o=`'${o}'`),o&&"object"==typeof o&&(o="Object"),`${n}: ${o}`.slice(0,50))}let Ne=(()=>{class n extends V{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let i;if(this.value=t,Array.isArray(t)){const l=t.map(f=>this._getOptionId(f));i=(f,y)=>{f._setSelected(l.indexOf(y.toString())>-1)}}else i=(l,f)=>{l._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{const l=[],f=i.selectedOptions;if(void 0!==f){const y=f;for(let S=0;S<y.length;S++){const Le=this._getOptionValue(y[S].value);l.push(Le)}}else{const y=i.options;for(let S=0;S<y.length;S++){const _e=y[S];if(_e.selected){const Le=this._getOptionValue(_e.value);l.push(Le)}}}this.value=l,t(l)}}_registerOption(t){const i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){const i=function Qt(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static{this.\u0275fac=(()=>{let t;return function(l){return(t||(t=s.xGo(n)))(l||n)}})()}static{this.\u0275dir=s.FsC({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,l){1&i&&s.bIt("change",function(y){return l.onChange(y.target)})("blur",function(){return l.onTouched()})},inputs:{compareWith:"compareWith"},features:[s.Jv_([Zt]),s.Vt3]})}}return n})(),dt=(()=>{class n{constructor(t,i,l){this._element=t,this._renderer=i,this._select=l,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(ct(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(ct(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(s.rXU(s.aKT),s.rXU(s.sFG),s.rXU(Ne,9))}}static{this.\u0275dir=s.FsC({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),cn=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=s.$C({type:n})}static{this.\u0275inj=s.G2t({})}}return n})(),pn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:$,useValue:t.callSetDisabledState??fe}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=s.$C({type:n})}static{this.\u0275inj=s.G2t({imports:[cn]})}}return n})()}}]);