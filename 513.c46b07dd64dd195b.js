(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[513],{5513:(ns,ue,q)=>{"use strict";q.r(ue),q.d(ue,{LiveAppModule:()=>J_});var ee=q(6895),is=q(9430),Te=q(2720);function os(n,e,t,i,o,r,a){try{var l=n[r](a),c=l.value}catch(u){return void t(u)}l.done?e(c):Promise.resolve(c).then(i,o)}function b(n){return function(){var e=this,t=arguments;return new Promise(function(i,o){var r=n.apply(e,t);function a(c){os(r,i,o,a,l,"next",c)}function l(c){os(r,i,o,a,l,"throw",c)}a(void 0)})}}const f=function(n,e){if(!n)throw qe(e)},qe=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},ss=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=63&o|128):55296==(64512&o)&&i+1<n.length&&56320==(64512&n.charCodeAt(i+1))?(o=65536+((1023&o)<<10)+(1023&n.charCodeAt(++i)),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=63&o|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=63&o|128)}return e},Pn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const r=n[o],a=o+1<n.length,l=a?n[o+1]:0,c=o+2<n.length,u=c?n[o+2]:0;let p=(15&l)<<2|u>>6,_=63&u;c||(_=64,a||(p=64)),i.push(t[r>>2],t[(3&r)<<4|l>>4],t[p],t[_])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ss(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const r=n[t++];e[i++]=String.fromCharCode((31&o)<<6|63&r)}else if(o>239&&o<365){const c=((7&o)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(1023&c))}else{const r=n[t++],a=n[t++];e[i++]=String.fromCharCode((15&o)<<12|(63&r)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const r=t[n.charAt(o++)],l=o<n.length?t[n.charAt(o)]:0;++o;const u=o<n.length?t[n.charAt(o)]:64;++o;const d=o<n.length?t[n.charAt(o)]:64;if(++o,null==r||null==l||null==u||null==d)throw Error();i.push(r<<2|l>>4),64!==u&&(i.push(l<<4&240|u>>2),64!==d&&i.push(u<<6&192|d))}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},rs=function(n){const e=ss(n);return Pn.encodeByteArray(e,!0)},Ft=function(n){return rs(n).replace(/\./g,"")},Ln=function(n){try{return Pn.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ll(n){return as(void 0,n)}function as(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!cl(t)||(n[t]=as(n[t],e[t]));return n}function cl(n){return"__proto__"!==n}function ls(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(function Ut(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}())}function cs(){return"object"==typeof indexedDB}function us(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var r;e((null===(r=o.error)||void 0===r?void 0:r.message)||"")}}catch(t){e(t)}})}const On=()=>function _l(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u")return;const n=process.env.__FIREBASE_DEFAULTS__,e=process.env.__FIREBASE_DEFAULTS_PATH__;if(n)return e&&console.warn("Values were provided for both __FIREBASE_DEFAULTS__ and __FIREBASE_DEFAULTS_PATH__. __FIREBASE_DEFAULTS_PATH__ will be ignored."),JSON.parse(n);if(e)try{return q(9163)(e)}catch{console.warn(`Unable to read defaults from file provided to __FIREBASE_DEFAULTS_PATH__: ${e}`)}})()||(()=>{if(typeof document>"u")return;const n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/),e=n&&Ln(n[1]);return e&&JSON.parse(e)})();class lt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,i))}}}class Ee extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,Ee.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bt.prototype.create)}}class Bt{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,r=this.errors[e],a=r?function xl(n,e){return n.replace(Cl,(t,i)=>{const o=e[i];return null!=o?String(o):`<${i}?>`})}(r,i):"Error";return new Ee(o,`${this.serviceName}: ${a} (${o}).`,i)}}const Cl=/\{\$([^}]+)}/g;function ct(n){return JSON.parse(n)}function D(n){return JSON.stringify(n)}const zt=function(n){let e={},t={},i={},o="";try{const r=n.split(".");e=ct(Ln(r[0])||""),t=ct(Ln(r[1])||""),o=r[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:o}};function ne(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function He(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function ds(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function qt(n,e,t){const i={};for(const o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=e.call(t,n[o],o,n));return i}function Ht(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const r=n[o],a=e[o];if(hs(r)&&hs(a)){if(!Ht(r,a))return!1}else if(r!==a)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function hs(n){return null!==n&&"object"==typeof n}class Il{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)i[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)i[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const p=i[d-3]^i[d-8]^i[d-14]^i[d-16];i[d]=4294967295&(p<<1|p>>>31)}let u,h,o=this.chain_[0],r=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(u=l^r&(a^l),h=1518500249):(u=r^a^l,h=1859775393):d<60?(u=r&a|l&(r|a),h=2400959708):(u=r^a^l,h=3395469782);const p=(o<<5|o>>>27)+u+c+h+i[d]&4294967295;c=l,l=a,a=4294967295&(r<<30|r>>>2),r=o,o=p}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const i=t-this.blockSize;let o=0;const r=this.buf_;let a=this.inbuf_;for(;o<t;){if(0===a)for(;o<=i;)this.compress_(e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(r[a]=e.charCodeAt(o),++a,++o,a===this.blockSize){this.compress_(r),a=0;break}}else for(;o<t;)if(r[a]=e[o],++a,++o,a===this.blockSize){this.compress_(r),a=0;break}}this.inbuf_=a,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=255&t,t/=256;this.compress_(this.buf_);let i=0;for(let o=0;o<5;o++)for(let r=24;r>=0;r-=8)e[i]=this.chain_[o]>>r&255,++i;return e}}function We(n,e){return`${n} failed: ${e} argument `}const Wt=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};function ps(n,e=1e3,t=2){const i=e*Math.pow(t,n),o=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+o)}function Ae(n){return n&&n._delegate?n._delegate:n}class ie{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ie="[DEFAULT]";class Ol{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new lt;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(o)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(o)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Fl(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ie})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const r=this.getOrInitializeService({instanceIdentifier:o});i.resolve(r)}catch{}}}}clearInstance(e=Ie){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return b(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Ie){return this.instances.has(e)}getOptions(e=Ie){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[r,a]of this.instancesDeferred.entries())i===this.normalizeInstanceIdentifier(r)&&a.resolve(o);return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),r=null!==(i=this.onInitCallbacks.get(o))&&void 0!==i?i:new Set;r.add(e),this.onInitCallbacks.set(o,r);const a=this.instances.get(o);return a&&e(a,o),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Ie?void 0:n),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}var n;return i||null}normalizeInstanceIdentifier(e=Ie){return this.component?this.component.multipleInstances?e:Ie:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ul{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ol(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Fn=[];var E=(()=>{return(n=E||(E={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",E;var n})();const _s={debug:E.DEBUG,verbose:E.VERBOSE,info:E.INFO,warn:E.WARN,error:E.ERROR,silent:E.SILENT},Bl=E.INFO,zl={[E.DEBUG]:"log",[E.VERBOSE]:"log",[E.INFO]:"info",[E.WARN]:"warn",[E.ERROR]:"error"},ql=(n,e,...t)=>{if(e<n.logLevel)return;const i=(new Date).toISOString(),o=zl[e];if(!o)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[o](`[${i}]  ${n.name}:`,...t)};class Un{constructor(e){this.name=e,this._logLevel=Bl,this._logHandler=ql,this._userLogHandler=null,Fn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in E))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?_s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,E.DEBUG,...e),this._logHandler(this,E.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,E.VERBOSE,...e),this._logHandler(this,E.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,E.INFO,...e),this._logHandler(this,E.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,E.WARN,...e),this._logHandler(this,E.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,E.ERROR,...e),this._logHandler(this,E.ERROR,...e)}}let fs,gs;const ms=new WeakMap,Bn=new WeakMap,vs=new WeakMap,zn=new WeakMap,qn=new WeakMap;let Hn={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return Bn.get(n);if("objectStoreNames"===e)return n.objectStoreNames||vs.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return de(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Jl(n){return"function"==typeof n?function jl(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Gl(){return gs||(gs=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Wn(this),e),de(ms.get(this))}:function(...e){return de(n.apply(Wn(this),e))}:function(e,...t){const i=n.call(Wn(this),e,...t);return vs.set(i,e.sort?e.sort():[e]),de(i)}}(n):(n instanceof IDBTransaction&&function $l(n){if(Bn.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",a),n.removeEventListener("abort",a)},r=()=>{t(),o()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",r),n.addEventListener("error",a),n.addEventListener("abort",a)});Bn.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,function Wl(){return fs||(fs=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Hn):n)}function de(n){if(n instanceof IDBRequest)return function Vl(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",r),n.removeEventListener("error",a)},r=()=>{t(de(n.result)),o()},a=()=>{i(n.error),o()};n.addEventListener("success",r),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&ms.set(t,n)}).catch(()=>{}),qn.set(e,n),e}(n);if(zn.has(n))return zn.get(n);const e=Jl(n);return e!==n&&(zn.set(n,e),qn.set(e,n)),e}const Wn=n=>qn.get(n);function ys(n,e,{blocked:t,upgrade:i,blocking:o,terminated:r}={}){const a=indexedDB.open(n,e),l=de(a);return i&&a.addEventListener("upgradeneeded",c=>{i(de(a.result),c.oldVersion,c.newVersion,de(a.transaction))}),t&&a.addEventListener("blocked",()=>t()),l.then(c=>{r&&c.addEventListener("close",()=>r()),o&&c.addEventListener("versionchange",()=>o())}).catch(()=>{}),l}const Kl=["get","getKey","getAll","getAllKeys","count"],Yl=["put","add","delete","clear"],Gn=new Map;function ws(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(Gn.get(e))return Gn.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=Yl.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!o&&!Kl.includes(t))return;const r=function(){var a=b(function*(l,...c){const u=this.transaction(l,o?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(c.shift())),(yield Promise.all([h[t](...c),o&&u.done]))[0]});return function(c){return a.apply(this,arguments)}}();return Gn.set(e,r),r}!function Ql(n){Hn=n(Hn)}(n=>({...n,get:(e,t,i)=>ws(e,t)||n.get(e,t,i),has:(e,t)=>!!ws(e,t)||n.has(e,t)}));class Xl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function ec(n){return"VERSION"===n.getComponent()?.type}(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}return null}).filter(t=>t).join(" ")}}const Vn="@firebase/app",Se=new Un("@firebase/app"),Gt="[DEFAULT]",Ac={[Vn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ke=new Map,Vt=new Map;function Ic(n,e){try{n.container.addComponent(e)}catch(t){Se.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function he(n){const e=n.name;if(Vt.has(e))return Se.debug(`There were multiple attempts to register component ${e}.`),!1;Vt.set(e,n);for(const t of ke.values())Ic(t,n);return!0}function Ge(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const oe=new Bt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class kc{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ie("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oe.create("app-deleted",{appName:this._name})}}function xs(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:Gt,automaticDataCollectionEnabled:!1},e),o=i.name;if("string"!=typeof o||!o)throw oe.create("bad-app-name",{appName:String(o)});if(t||(t=(()=>{var n;return null===(n=On())||void 0===n?void 0:n.config})()),!t)throw oe.create("no-options");const r=ke.get(o);if(r){if(Ht(t,r.options)&&Ht(i,r.config))return r;throw oe.create("duplicate-app",{appName:o})}const a=new Ul(o);for(const c of Vt.values())a.addComponent(c);const l=new kc(t,i,a);return ke.set(o,l),l}function Cs(n=Gt){const e=ke.get(n);if(!e&&n===Gt)return xs();if(!e)throw oe.create("no-app",{appName:n});return e}function Q(n,e,t){var i;let o=null!==(i=Ac[n])&&void 0!==i?i:n;t&&(o+=`-${t}`);const r=o.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const l=[`Unable to register library "${o}" with version "${e}":`];return r&&l.push(`library name "${o}" contains illegal characters (whitespace or "/")`),r&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Se.warn(l.join(" "))}he(new ie(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}const ut="firebase-heartbeat-store";let Qn=null;function Ts(){return Qn||(Qn=ys("firebase-heartbeat-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(ut)}}).catch(n=>{throw oe.create("idb-open",{originalErrorMessage:n.message})})),Qn}function jn(){return(jn=b(function*(n){var e;try{return(yield Ts()).transaction(ut).objectStore(ut).get(As(n))}catch(t){if(t instanceof Ee)Se.warn(t.message);else{const i=oe.create("idb-get",{originalErrorMessage:null===(e=t)||void 0===e?void 0:e.message});Se.warn(i.message)}}})).apply(this,arguments)}function Es(n,e){return Jn.apply(this,arguments)}function Jn(){return(Jn=b(function*(n,e){var t;try{const o=(yield Ts()).transaction(ut,"readwrite");return yield o.objectStore(ut).put(e,As(n)),o.done}catch(i){if(i instanceof Ee)Se.warn(i.message);else{const o=oe.create("idb-set",{originalErrorMessage:null===(t=i)||void 0===t?void 0:t.message});Se.warn(o.message)}}})).apply(this,arguments)}function As(n){return`${n.name}!${n.options.appId}`}class Oc{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Fc(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){var e=this;return b(function*(){const i=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Is();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==o&&!e._heartbeatsCache.heartbeats.some(r=>r.date===o))return e._heartbeatsCache.heartbeats.push({date:o,agent:i}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(r=>{const a=new Date(r.date).valueOf();return Date.now()-a<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return b(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=Is(),{heartbeatsToSend:i,unsentEntries:o}=function Zc(n,e=1024){const t=[];let i=n.slice();for(const o of n){const r=t.find(a=>a.agent===o.agent);if(r){if(r.dates.push(o.date),Ss(t)>e){r.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Ss(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}(e._heartbeatsCache.heartbeats),r=Ft(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(e._heartbeatsCache.heartbeats=o,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),r})()}}function Is(){return(new Date).toISOString().substring(0,10)}class Fc{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(function*(){return!!cs()&&us().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return b(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function Mc(n){return jn.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return b(function*(){var i;if(yield t._canUseIndexedDBPromise){const r=yield t.read();return Es(t.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return b(function*(){var i;if(yield t._canUseIndexedDBPromise){const r=yield t.read();return Es(t.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}})()}}function Ss(n){return Ft(JSON.stringify({version:2,heartbeats:n})).length}!function Uc(n){he(new ie("platform-logger",e=>new Xl(e),"PRIVATE")),he(new ie("heartbeat",e=>new Oc(e),"PRIVATE")),Q(Vn,"0.8.0",n),Q(Vn,"0.8.0","esm2017"),Q("fire-js","")}(""),Q("firebase","9.11.0","app");const ks="@firebase/installations",Kn="0.5.13",Rs=`w:${Kn}`,Ds="FIS_v2",se=new Bt("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ms(n){return n instanceof Ee&&n.code.includes("request-failed")}function Yn({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function Ps(n){return{token:n.token,requestStatus:2,expiresIn:$c(n.expiresIn),creationTime:Date.now()}}function Xn(n,e){return ei.apply(this,arguments)}function ei(){return(ei=b(function*(n,e){const i=(yield e.json()).error;return se.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})).apply(this,arguments)}function Ls({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Os(n,{refreshToken:e}){const t=Ls(n);return t.append("Authorization",function Qc(n){return`${Ds} ${n}`}(e)),t}function ti(n){return ni.apply(this,arguments)}function ni(){return(ni=b(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function $c(n){return Number(n.replace("s","000"))}function jc(n,e){return ii.apply(this,arguments)}function ii(){return(ii=b(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=Yn(n),o=Ls(n),r=e.getImmediate({optional:!0});if(r){const u=yield r.getHeartbeatsHeader();u&&o.append("x-firebase-client",u)}const l={method:"POST",headers:o,body:JSON.stringify({fid:t,authVersion:Ds,appId:n.appId,sdkVersion:Rs})},c=yield ti(()=>fetch(i,l));if(c.ok){const u=yield c.json();return{fid:u.fid||t,registrationStatus:2,refreshToken:u.refreshToken,authToken:Ps(u.authToken)}}throw yield Xn("Create Installation",c)})).apply(this,arguments)}function Zs(n){return new Promise(e=>{setTimeout(e,n)})}const Kc=/^[cdef][\w-]{21}$/;function Yc(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function Xc(n){return function Jc(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return Kc.test(t)?t:""}catch{return""}}function Ve(n){return`${n.appName}!${n.appId}`}const $e=new Map;function Fs(n,e){const t=Ve(n);Us(t,e),function nu(n,e){const t=function Bs(){return!Ne&&"BroadcastChannel"in self&&(Ne=new BroadcastChannel("[Firebase] FID Change"),Ne.onmessage=n=>{Us(n.data.key,n.data.fid)}),Ne}();t&&t.postMessage({key:n,fid:e}),function zs(){0===$e.size&&Ne&&(Ne.close(),Ne=null)}()}(t,e)}function Us(n,e){const t=$e.get(n);if(t)for(const i of t)i(e)}let Ne=null;const Re="firebase-installations-store";let si=null;function ri(){return si||(si=ys("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Re)}})),si}function $t(n,e){return ai.apply(this,arguments)}function ai(){return(ai=b(function*(n,e){const t=Ve(n),o=(yield ri()).transaction(Re,"readwrite"),r=o.objectStore(Re),a=yield r.get(t);return yield r.put(e,t),yield o.done,(!a||a.fid!==e.fid)&&Fs(n,e.fid),e})).apply(this,arguments)}function li(n){return ci.apply(this,arguments)}function ci(){return(ci=b(function*(n){const e=Ve(n),i=(yield ri()).transaction(Re,"readwrite");yield i.objectStore(Re).delete(e),yield i.done})).apply(this,arguments)}function dt(n,e){return ui.apply(this,arguments)}function ui(){return(ui=b(function*(n,e){const t=Ve(n),o=(yield ri()).transaction(Re,"readwrite"),r=o.objectStore(Re),a=yield r.get(t),l=e(a);return void 0===l?yield r.delete(t):yield r.put(l,t),yield o.done,l&&(!a||a.fid!==l.fid)&&Fs(n,l.fid),l})).apply(this,arguments)}function di(n){return hi.apply(this,arguments)}function hi(){return(hi=b(function*(n){let e;const t=yield dt(n.appConfig,i=>{const o=su(i),r=ru(n,o);return e=r.registrationPromise,r.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})).apply(this,arguments)}function su(n){return Hs(n||{fid:Yc(),registrationStatus:0})}function ru(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(se.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function au(n,e){return pi.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:lu(n)}:{installationEntry:e}}function pi(){return(pi=b(function*(n,e){try{const t=yield jc(n,e);return $t(n.appConfig,t)}catch(t){throw Ms(t)&&409===t.customData.serverCode?yield li(n.appConfig):yield $t(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})).apply(this,arguments)}function lu(n){return _i.apply(this,arguments)}function _i(){return(_i=b(function*(n){let e=yield qs(n.appConfig);for(;1===e.registrationStatus;)yield Zs(100),e=yield qs(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:i}=yield di(n);return i||t}return e})).apply(this,arguments)}function qs(n){return dt(n,e=>{if(!e)throw se.create("installation-not-found");return Hs(e)})}function Hs(n){return function cu(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function uu(n,e){return fi.apply(this,arguments)}function fi(){return(fi=b(function*({appConfig:n,heartbeatServiceProvider:e},t){const i=du(n,t),o=Os(n,t),r=e.getImmediate({optional:!0});if(r){const u=yield r.getHeartbeatsHeader();u&&o.append("x-firebase-client",u)}const l={method:"POST",headers:o,body:JSON.stringify({installation:{sdkVersion:Rs,appId:n.appId}})},c=yield ti(()=>fetch(i,l));if(c.ok)return Ps(yield c.json());throw yield Xn("Generate Auth Token",c)})).apply(this,arguments)}function du(n,{fid:e}){return`${Yn(n)}/${e}/authTokens:generate`}function gi(n){return mi.apply(this,arguments)}function mi(){return(mi=b(function*(n,e=!1){let t;const i=yield dt(n.appConfig,r=>{if(!Gs(r))throw se.create("not-registered");const a=r.authToken;if(!e&&_u(a))return r;if(1===a.requestStatus)return t=hu(n,e),r;{if(!navigator.onLine)throw se.create("app-offline");const l=gu(r);return t=pu(n,l),l}});return t?yield t:i.authToken})).apply(this,arguments)}function hu(n,e){return vi.apply(this,arguments)}function vi(){return(vi=b(function*(n,e){let t=yield Ws(n.appConfig);for(;1===t.authToken.requestStatus;)yield Zs(100),t=yield Ws(n.appConfig);const i=t.authToken;return 0===i.requestStatus?gi(n,e):i})).apply(this,arguments)}function Ws(n){return dt(n,e=>{if(!Gs(e))throw se.create("not-registered");return function mu(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function pu(n,e){return yi.apply(this,arguments)}function yi(){return(yi=b(function*(n,e){try{const t=yield uu(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return yield $t(n.appConfig,i),t}catch(t){if(!Ms(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield $t(n.appConfig,i)}else yield li(n.appConfig);throw t}})).apply(this,arguments)}function Gs(n){return void 0!==n&&2===n.registrationStatus}function _u(n){return 2===n.requestStatus&&!function fu(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function gu(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function wi(){return(wi=b(function*(n){const e=n,{installationEntry:t,registrationPromise:i}=yield di(e);return i?i.catch(console.error):gi(e).catch(console.error),t.fid})).apply(this,arguments)}function bi(){return(bi=b(function*(n,e=!1){const t=n;return yield wu(t),(yield gi(t,e)).token})).apply(this,arguments)}function wu(n){return xi.apply(this,arguments)}function xi(){return(xi=b(function*(n){const{registrationPromise:e}=yield di(n);e&&(yield e)})).apply(this,arguments)}function Ei(n){return se.create("missing-app-config-values",{valueName:n})}const Vs="installations",Eu=n=>{const e=n.getProvider("app").getImmediate(),t=function Cu(n){if(!n||!n.options)throw Ei("App Configuration");if(!n.name)throw Ei("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Ei(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:Ge(e,"heartbeat"),_delete:()=>Promise.resolve()}},Au=n=>{const t=Ge(n.getProvider("app").getImmediate(),Vs).getImmediate();return{getId:()=>function vu(n){return wi.apply(this,arguments)}(t),getToken:o=>function yu(n){return bi.apply(this,arguments)}(t,o)}};(function Iu(){he(new ie(Vs,Eu,"PUBLIC")),he(new ie("installations-internal",Au,"PRIVATE"))})(),Q(ks,Kn),Q(ks,Kn,"esm2017");const Qt="analytics",Su="firebase_id",Ru="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$s="https://www.googletagmanager.com/gtag/js",L=new Un("@firebase/analytics");function Qs(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Du(n,e){const t=document.createElement("script");t.src=`${$s}?l=${n}&id=${e}`,t.async=!0,document.head.appendChild(t)}function Pu(n,e,t,i,o,r){return Ai.apply(this,arguments)}function Ai(){return(Ai=b(function*(n,e,t,i,o,r){const a=i[o];try{if(a)yield e[a];else{const c=(yield Qs(t)).find(u=>u.measurementId===o);c&&(yield e[c.appId])}}catch(l){L.error(l)}n("config",o,r)})).apply(this,arguments)}function Lu(n,e,t,i,o){return Ii.apply(this,arguments)}function Ii(){return(Ii=b(function*(n,e,t,i,o){try{let r=[];if(o&&o.send_to){let a=o.send_to;Array.isArray(a)||(a=[a]);const l=yield Qs(t);for(const c of a){const u=l.find(d=>d.measurementId===c),h=u&&e[u.appId];if(!h){r=[];break}r.push(h)}}0===r.length&&(r=Object.values(e)),yield Promise.all(r),n("event",i,o||{})}catch(r){L.error(r)}})).apply(this,arguments)}function Fu(){const n=window.document.getElementsByTagName("script");for(const e of Object.values(n))if(e.src&&e.src.includes($s))return e;return null}const U=new Bt("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),js=new class qu{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Hu(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Wu(n){return Si.apply(this,arguments)}function Si(){return(Si=b(function*(n){var e;const{appId:t,apiKey:i}=n,o={method:"GET",headers:Hu(i)},r=Ru.replace("{app-id}",t),a=yield fetch(r,o);if(200!==a.status&&304!==a.status){let l="";try{const c=yield a.json();null!==(e=c.error)&&void 0!==e&&e.message&&(l=c.error.message)}catch{}throw U.create("config-fetch-failed",{httpStatus:a.status,responseMessage:l})}return a.json()})).apply(this,arguments)}function Gu(n){return ki.apply(this,arguments)}function ki(){return(ki=b(function*(n,e=js,t){const{appId:i,apiKey:o,measurementId:r}=n.options;if(!i)throw U.create("no-app-id");if(!o){if(r)return{measurementId:r,appId:i};throw U.create("no-api-key")}const a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Qu;return setTimeout(b(function*(){l.abort()}),void 0!==t?t:6e4),Js({appId:i,apiKey:o,measurementId:r},a,l,e)})).apply(this,arguments)}function Js(n,e,t){return Ni.apply(this,arguments)}function Ni(){return(Ni=b(function*(n,{throttleEndTimeMillis:e,backoffCount:t},i,o=js){var r,a;const{appId:l,measurementId:c}=n;try{yield Vu(i,e)}catch(u){if(c)return L.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${null===(r=u)||void 0===r?void 0:r.message}]`),{appId:l,measurementId:c};throw u}try{const u=yield Wu(n);return o.deleteThrottleMetadata(l),u}catch(u){const h=u;if(!$u(h)){if(o.deleteThrottleMetadata(l),c)return L.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:l,measurementId:c};throw u}const d=503===Number(null===(a=h?.customData)||void 0===a?void 0:a.httpStatus)?ps(t,o.intervalMillis,30):ps(t,o.intervalMillis),p={throttleEndTimeMillis:Date.now()+d,backoffCount:t+1};return o.setThrottleMetadata(l,p),L.debug(`Calling attemptFetch again in ${d} millis`),Js(n,p,i,o)}})).apply(this,arguments)}function Vu(n,e){return new Promise((t,i)=>{const o=Math.max(e-Date.now(),0),r=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(r),i(U.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function $u(n){if(!(n instanceof Ee&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class Qu{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Ri,Zi;function Di(){return(Di=b(function*(n,e,t,i,o){if(o&&o.global)n("event",t,i);else{const r=yield e;n("event",t,Object.assign(Object.assign({},i),{send_to:r}))}})).apply(this,arguments)}function Ks(n){Zi=n}function Ys(n){Ri=n}function ed(){return Fi.apply(this,arguments)}function Fi(){return(Fi=b(function*(){var n;if(!cs())return L.warn(U.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield us()}catch(e){return L.warn(U.create("indexeddb-unavailable",{errorInfo:null===(n=e)||void 0===n?void 0:n.toString()}).message),!1}return!0})).apply(this,arguments)}function Ui(){return(Ui=b(function*(n,e,t,i,o,r,a){var l;const c=Gu(n);c.then(_=>{t[_.measurementId]=_.appId,n.options.measurementId&&_.measurementId!==n.options.measurementId&&L.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>L.error(_)),e.push(c);const u=ed().then(_=>{if(_)return i.getId()}),[h,d]=yield Promise.all([c,u]);Fu()||Du(r,h.measurementId),Zi&&(o("consent","default",Zi),Ks(void 0)),o("js",new Date);const p=null!==(l=a?.config)&&void 0!==l?l:{};return p.origin="firebase",p.update=!0,null!=d&&(p[Su]=d),o("config",h.measurementId,p),Ri&&(o("set",Ri),Ys(void 0)),h.measurementId})).apply(this,arguments)}class nd{constructor(e){this.app=e}_delete(){return delete re[this.app.options.appId],Promise.resolve()}}let re={},Xs=[];const er={};let nr,ae,jt="dataLayer",Bi=!1;function od(n,e,t){!function id(){const n=[];if(function dl(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}()&&n.push("This is a browser extension environment."),function pl(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,o)=>`(${o+1}) ${i}`).join(" "),t=U.create("invalid-analytics-context",{errorInfo:e});L.warn(t.message)}}();const i=n.options.appId;if(!i)throw U.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw U.create("no-api-key");L.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=re[i])throw U.create("already-exists",{id:i});if(!Bi){!function Mu(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(jt);const{wrappedGtag:r,gtagCore:a}=function Zu(n,e,t,i,o){let r=function(...a){window[i].push(arguments)};return window[o]&&"function"==typeof window[o]&&(r=window[o]),window[o]=function Ou(n,e,t,i){function r(){return(r=b(function*(a,l,c){try{"event"===a?yield Lu(n,e,t,l,c):"config"===a?yield Pu(n,e,t,i,l,c):"consent"===a?n("consent","update",c):n("set",l)}catch(u){L.error(u)}})).apply(this,arguments)}return function o(a,l,c){return r.apply(this,arguments)}}(r,n,e,t),{gtagCore:r,wrappedGtag:window[o]}}(re,Xs,er,jt,"gtag");ae=r,nr=a,Bi=!0}return re[i]=function td(n,e,t,i,o,r,a){return Ui.apply(this,arguments)}(n,Xs,er,e,nr,jt,t),new nd(n)}const ir="@firebase/analytics";!function ld(){he(new ie(Qt,(e,{options:t})=>od(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),he(new ie("analytics-internal",function n(e){try{const t=e.getProvider(Qt).getImmediate();return{logEvent:(i,o,r)=>function ad(n,e,t,i){n=Ae(n),function ju(n,e,t,i,o){return Di.apply(this,arguments)}(ae,re[n.app.options.appId],e,t,i).catch(o=>L.error(o))}(t,i,o,r)}}catch(t){throw U.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Q(ir,"0.8.1"),Q(ir,"0.8.1","esm2017")}();const sr="@firebase/database";let qi="";class ud{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),D(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ct(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class dd{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return ne(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const ar=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ud(e)}}catch{}return new dd},De=ar("localStorage"),Hi=ar("sessionStorage"),Qe=new Un("@firebase/database"),lr=function(){let n=1;return function(){return n++}}(),cr=function(n){const e=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);if(o>=55296&&o<=56319){const r=o-55296;i++,f(i<n.length,"Surrogate pair missing trail surrogate."),o=65536+(r<<10)+(n.charCodeAt(i)-56320)}o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=63&o|128):o<65536?(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=63&o|128):(e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=63&o|128)}return e}(n),t=new Il;t.update(e);const i=t.digest();return Pn.encodeByteArray(i)},ht=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=ht.apply(null,i):e+="object"==typeof i?D(i):i,e+=" "}return e};let Me=null,ur=!0;const M=function(...n){if(!0===ur&&(ur=!1,null===Me&&!0===Hi.get("logging_enabled")&&function(n,e){f(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Qe.logLevel=E.VERBOSE,Me=Qe.log.bind(Qe),e&&Hi.set("logging_enabled",!0)):"function"==typeof n?Me=n:(Me=null,Hi.remove("logging_enabled"))}(!0)),Me){const e=ht.apply(null,n);Me(e)}},pt=function(n){return function(...e){M(n,...e)}},Wi=function(...n){const e="FIREBASE INTERNAL ERROR: "+ht(...n);Qe.error(e)},j=function(...n){const e=`FIREBASE FATAL ERROR: ${ht(...n)}`;throw Qe.error(e),new Error(e)},O=function(...n){const e="FIREBASE WARNING: "+ht(...n);Qe.warn(e)},Jt=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},le="[MIN_NAME]",J="[MAX_NAME]",Pe=function(n,e){if(n===e)return 0;if(n===le||e===J)return-1;if(e===le||n===J)return 1;{const t=Kt(n),i=Kt(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},_d=function(n,e){return n===e?0:n<e?-1:1},_t=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+D(e))},Gi=function(n){if("object"!=typeof n||null===n)return D(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=D(e[i]),t+=":",t+=Gi(n[e[i]]);return t+="}",t},hr=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let o=0;o<t;o+=e)i.push(n.substring(o,o+e>t?t:o+e));return i};function P(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const pr=function(n){f(!Jt(n),"Invalid JSON number");const i=1023;let o,r,a,l,c;0===n?(r=0,a=0,o=1/n==-1/0?1:0):(o=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(l=Math.min(Math.floor(Math.log(n)/Math.LN2),i),r=l+i,a=Math.round(n*Math.pow(2,52-l)-Math.pow(2,52))):(r=0,a=Math.round(n/Math.pow(2,-1074))));const u=[];for(c=52;c;c-=1)u.push(a%2?1:0),a=Math.floor(a/2);for(c=11;c;c-=1)u.push(r%2?1:0),r=Math.floor(r/2);u.push(o?1:0),u.reverse();const h=u.join("");let d="";for(c=0;c<64;c+=8){let p=parseInt(h.substr(c,8),2).toString(16);1===p.length&&(p="0"+p),d+=p}return d.toLowerCase()},vd=new RegExp("^-?(0*)\\d{1,10}$"),Kt=function(n){if(vd.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},je=function(n){try{n()}catch(e){setTimeout(()=>{throw O("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},ft=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class wd{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){O(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class bd{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(M("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',O(e)}}let gt=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const yr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,xr="websocket",Cr="long_polling";class Qi{constructor(e,t,i,o,r=!1,a="",l=!1){this.secure=t,this.namespace=i,this.webSocketOnly=o,this.nodeAdmin=r,this.persistenceKey=a,this.includeNamespaceInQueryParams=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=De.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&De.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Tr(n,e,t){let i;if(f("string"==typeof e,"typeof type must == string"),f("object"==typeof t,"typeof params must == object"),e===xr)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Cr)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function xd(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const o=[];return P(t,(r,a)=>{o.push(r+"="+a)}),i+o.join("&")}class Cd{constructor(){this.counters_={}}incrementCounter(e,t=1){ne(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return ll(this.counters_)}}const ji={},Ji={};function Ki(n){const e=n.toString();return ji[e]||(ji[e]=new Cd),ji[e]}class Ed{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<i.length;++o)i[o]&&je(()=>{this.onMessage_(i[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class pe{constructor(e,t,i,o,r,a,l){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=o,this.authToken=r,this.transportSessionId=a,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=pt(e),this.stats_=Ki(t),this.urlFn=c=>(this.appCheckToken&&(c.ac=this.appCheckToken),Tr(t,Cr,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Ed(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Yi((...r)=>{const[a,l,c,u,h]=r;if(this.incrementIncomingBytes_(r),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===a)this.id=l,this.password=c;else{if("close"!==a)throw new Error("Unrecognized command received: "+a);l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_()}},(...r)=>{const[a,l]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(a,l)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&yr.test(location.hostname)&&(i.r="f");const o=this.urlFn(i);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){pe.forceAllow_=!0}static forceDisallow(){pe.forceDisallow_=!0}static isAvailable(){return!(!pe.forceAllow_&&(pe.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=D(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=rs(t),o=hr(i,1840);for(let r=0;r<o.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[r]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=D(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Yi{constructor(e,t,i,o){this.onDisconnect=i,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=lr(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Yi.createIFrame_();let r="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(r='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(l){M("frame writing exception"),l.stack&&M(l.stack),M(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||M("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const a=this.pendingSegs.shift();i=i+"&seg"+o+"="+a.seg+"&ts"+o+"="+a.ts+"&d"+o+"="+a.d,o++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(o),i()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const o=i.readyState;(!o||"loaded"===o||"complete"===o)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{M("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let Xt=null;typeof MozWebSocket<"u"?Xt=MozWebSocket:typeof WebSocket<"u"&&(Xt=WebSocket);let Je=(()=>{class n{constructor(t,i,o,r,a,l,c){this.connId=t,this.applicationId=o,this.appCheckToken=r,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=pt(this.connId),this.stats_=Ki(i),this.connURL=n.connectionURL_(i,l,c,r,o),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,o,r,a){const l={v:"5"};return typeof location<"u"&&location.hostname&&yr.test(location.hostname)&&(l.r="f"),i&&(l.s=i),o&&(l.ls=o),r&&(l.ac=r),a&&(l.p=a),Tr(t,xr,l)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,De.set("previous_websocket_failure",!0);try{let o;0,this.mySock=new Xt(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const r=o.message||o.data;return r&&this.log_(r),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const r=o.message||o.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&null!==Xt&&!n.forceDisallow_}static previouslyFailed(){return De.isInMemoryStorage||!0===De.get("previous_websocket_failure")}markConnectionHealthy(){De.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const o=ct(i);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(f(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const o=this.extractFrameCount_(i);null!==o&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const i=D(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const o=hr(i,16384);o.length>1&&this.sendString_(String(o.length));for(let r=0;r<o.length;r++)this.sendString_(o[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Rr=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[pe,Je]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=Je&&Je.isAvailable();let o=i&&!Je.previouslyFailed();if(t.webSocketOnly&&(i||O("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Je];else{const r=this.transports_=[];for(const a of n.ALL_TRANSPORTS)a&&a.isAvailable()&&r.push(a);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Fr{constructor(e,t,i,o,r,a,l,c,u,h){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=o,this.authToken_=r,this.onMessage_=a,this.onReady_=l,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=pt("c:"+this.id+":"),this.transportManager_=new Rr(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=ft(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=_t("t",e),i=_t("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=_t("t",e),i=_t("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=_t("t",e);if("d"in e){const i=e.d;if("h"===t)this.onHandshake_(i);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?Wi("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Wi("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&O("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),ft(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ft(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(De.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ur{put(e,t,i,o){}merge(e,t,i,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class Br{constructor(e){this.allowedEvents_=e,this.listeners_={},f(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let o=0;o<i.length;o++)i[o].callback.apply(i[o].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const o=this.getInitialEvent(e);o&&t.apply(i,o)}off(e,t,i){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let r=0;r<o.length;r++)if(o[r].callback===t&&(!i||i===o[r].context))return void o.splice(r,1)}validateEventType_(e){f(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class en extends Br{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ls()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new en}getInitialEvent(e){return f("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class T{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[i]=this.pieces_[o],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function C(){return new T("")}function v(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function _e(n){return n.pieces_.length-n.pieceNum_}function A(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new T(n.pieces_,e)}function eo(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function mt(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Hr(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new T(e,0)}function N(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof T)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let o=0;o<i.length;o++)i[o].length>0&&t.push(i[o])}return new T(t,0)}function y(n){return n.pieceNum_>=n.pieces_.length}function Z(n,e){const t=v(n),i=v(e);if(null===t)return e;if(t===i)return Z(A(n),A(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function to(n,e){if(_e(n)!==_e(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function H(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(_e(n)>_e(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class Qd{constructor(e,t){this.errorPrefix_=t,this.parts_=mt(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Wt(this.parts_[i]);Wr(this)}}function Wr(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Le(n))}function Le(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class no extends Br{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new no}getInitialEvent(e){return f("visible"===e,"Unknown event type: "+e),[this.visible_]}}const vt=1e3;let nn,Oe=(()=>{class n extends Ur{constructor(t,i,o,r,a,l,c,u){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=o,this.onConnectStatus_=r,this.onServerInfoUpdate_=a,this.authTokenProvider_=l,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=n.nextPersistentConnectionId_++,this.log_=pt("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=vt,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");no.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&en.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,o){const r=++this.requestNumber_,a={r,a:t,b:i};this.log_(D(a)),f(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),o&&(this.requestCBHash_[r]=o)}get(t){this.initConnection_();const i=new lt,o={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:o,onComplete:l=>{const c=l.d;"ok"===l.s?i.resolve(c):i.reject(c)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,o,r){this.initConnection_();const a=t._queryIdentifier,l=t._path.toString();this.log_("Listen called for "+l+" "+a),this.listens.has(l)||this.listens.set(l,new Map),f(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),f(!this.listens.get(l).has(a),"listen() called twice for same path/queryId.");const c={onComplete:r,hashFn:i,query:t,tag:o};this.listens.get(l).set(a,c),this.connected_&&this.sendListen_(c)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(o)})}sendListen_(t){const i=t.query,o=i._path.toString(),r=i._queryIdentifier;this.log_("Listen on "+o+" for "+r);const a={p:o};t.tag&&(a.q=i._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,c=>{const u=c.d,h=c.s;n.warnOnListenWarnings_(u,i),(this.listens.get(o)&&this.listens.get(o).get(r))===t&&(this.log_("listen response",c),"ok"!==h&&this.removeListen_(o,r),t.onComplete&&t.onComplete(h,u))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&ne(t,"w")){const o=He(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const r='".indexOn": "'+i._queryParams.getIndex().toString()+'"',a=i._path.toString();O(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=zt(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=function(n){const t=zt(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",o={cred:t};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(i,o,r=>{const a=r.s,l=r.d||"error";this.authToken_===t&&("ok"===a?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,o=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,o)})}unlisten(t,i){const o=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+r),f(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,r)&&this.connected_&&this.sendUnlisten_(o,r,t._queryObject,i)}sendUnlisten_(t,i,o,r){this.log_("Unlisten on "+t+" for "+i);const a={p:t};r&&(a.q=o,a.t=r),this.sendRequest("n",a)}onDisconnectPut(t,i,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:o})}onDisconnectMerge(t,i,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:o})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,o,r){const a={p:i,d:o};this.log_("onDisconnect "+t,a),this.sendRequest(t,a,l=>{r&&setTimeout(()=>{r(l.s,l.d)},Math.floor(0))})}put(t,i,o,r){this.putInternal("p",t,i,o,r)}merge(t,i,o,r){this.putInternal("m",t,i,o,r)}putInternal(t,i,o,r,a){this.initConnection_();const l={p:i,d:o};void 0!==a&&(l.h=a),this.outstandingPuts_.push({action:t,request:l,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,o,a=>{this.log_(i+" response",a),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(a.s,a.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+D(t));const i=t.r,o=this.requestCBHash_[i];o&&(delete this.requestCBHash_[i],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):Wi("Unrecognized action received from server: "+D(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){f(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=vt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=vt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return b(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),o=t.onReady_.bind(t),r=t.onRealtimeDisconnect_.bind(t),a=t.id+":"+n.nextConnectionId_++,l=t.lastSessionId;let c=!1,u=null;const h=function(){u?u.close():(c=!0,r())};t.realtime_={close:h,sendRequest:function(_){f(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(_)}};const p=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[_,g]=yield Promise.all([t.authTokenProvider_.getToken(p),t.appCheckTokenProvider_.getToken(p)]);c?M("getToken() completed but was canceled"):(M("getToken() completed. Creating connection."),t.authToken_=_&&_.accessToken,t.appCheckToken_=g&&g.token,u=new Fr(a,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,o,r,x=>{O(x+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},l))}catch(_){t.log_("Failed to get token: "+_),c||(t.repoInfo_.nodeAdmin&&O(_),h())}}})()}interrupt(t){M("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){M("Resuming connection for reason: "+t),delete this.interruptReasons_[t],ds(this.interruptReasons_)&&(this.reconnectDelay_=vt,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let o;o=i?i.map(a=>Gi(a)).join("$"):"default";const r=this.removeListen_(t,o);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(t,i){const o=new T(t).toString();let r;if(this.listens.has(o)){const a=this.listens.get(o);r=a.get(i),a.delete(i),0===a.size&&this.listens.delete(o)}else r=void 0;return r}onAuthRevoked_(t,i){M("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){M("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+qi.replace(/\./g,"-")]=1,ls()?t["framework.cordova"]=1:function hl(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=en.getInstance().currentlyOnline();return ds(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class w{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new w(e,t)}}class tn{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new w(le,e),o=new w(le,t);return 0!==this.compare(i,o)}minPost(){return w.MIN}}class $r extends tn{static get __EMPTY_NODE(){return nn}static set __EMPTY_NODE(e){nn=e}compare(e,t){return Pe(e.name,t.name)}isDefinedOn(e){throw qe("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return w.MIN}maxPost(){return new w(J,nn)}makePost(e,t){return f("string"==typeof e,"KeyIndex indexValue must always be a string."),new w(e,nn)}toString(){return".key"}}const K=new $r;class on{constructor(e,t,i,o,r=null){this.isReverse_=o,this.resultGenerator_=r,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,o&&(a*=-1),a<0)e=this.isReverse_?e.left:e.right;else{if(0===a){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let oo,G=(()=>{class n{constructor(t,i,o,r,a){this.key=t,this.value=i,this.color=o??n.RED,this.left=r??F.EMPTY_NODE,this.right=a??F.EMPTY_NODE}copy(t,i,o,r,a){return new n(t??this.key,i??this.value,o??this.color,r??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,o){let r=this;const a=o(t,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(t,i,o),null):0===a?r.copy(null,i,null,null,null):r.copy(null,null,null,null,r.right.insert(t,i,o)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return F.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let o,r;if(o=this,i(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,i),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===i(t,o.key)){if(o.right.isEmpty())return F.EMPTY_NODE;r=o.right.min_(),o=o.copy(r.key,r.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,i))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class F{constructor(e,t=F.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new F(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,G.BLACK,null,null))}remove(e){return new F(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,G.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,o=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return o?o.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(o=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new on(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new on(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new on(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new on(this.root_,null,this.comparator_,!0,e)}}function nh(n,e){return Pe(n.name,e.name)}function io(n,e){return Pe(n,e)}F.EMPTY_NODE=new class th{copy(e,t,i,o,r){return this}insert(e,t,i){return new G(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Qr=function(n){return"number"==typeof n?"number:"+pr(n):"string:"+n},jr=function(n){if(n.isLeafNode()){const e=n.val();f("string"==typeof e||"number"==typeof e||"object"==typeof e&&ne(e,".sv"),"Priority must be a string or number.")}else f(n===oo||n.isEmpty(),"priority of unexpected type.");f(n===oo||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Jr,Kr,Yr,Ke=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,f(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),jr(this.priorityNode_)}static set __childrenNodeConstructor(t){Jr=t}static get __childrenNodeConstructor(){return Jr}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return y(t)?this:".priority"===v(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const o=v(t);return null===o?i:i.isEmpty()&&".priority"!==o?this:(f(".priority"!==o||1===_e(t),".priority must be the last token in a path"),this.updateImmediateChild(o,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(A(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Qr(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?pr(this.value_):this.value_,this.lazyHash_=cr(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(f(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,o=typeof this.value_,r=n.VALUE_TYPE_ORDER.indexOf(i),a=n.VALUE_TYPE_ORDER.indexOf(o);return f(r>=0,"Unknown leaf type: "+i),f(a>=0,"Unknown leaf type: "+o),r===a?"object"===o?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-r}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const I=new class rh extends tn{compare(e,t){const i=e.node.getPriority(),o=t.node.getPriority(),r=i.compareTo(o);return 0===r?Pe(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return w.MIN}maxPost(){return new w(J,new Ke("[PRIORITY-POST]",Yr))}makePost(e,t){const i=Kr(e);return new w(t,new Ke("[PRIORITY-POST]",i))}toString(){return".priority"}},ah=Math.log(2);class lh{constructor(e){this.count=parseInt(Math.log(e+1)/ah,10),this.current_=this.count-1;const o=(r=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const sn=function(n,e,t,i){n.sort(e);const o=function(c,u){const h=u-c;let d,p;if(0===h)return null;if(1===h)return d=n[c],p=t?t(d):d,new G(p,d.node,G.BLACK,null,null);{const _=parseInt(h/2,10)+c,g=o(c,_),x=o(_+1,u);return d=n[_],p=t?t(d):d,new G(p,d.node,G.BLACK,g,x)}},l=function(c){let u=null,h=null,d=n.length;const p=function(g,x){const k=d-g,Ce=d;d-=g;const Dn=o(k+1,Ce),ts=n[k],K_=t?t(ts):ts;_(new G(K_,ts.node,x,null,Dn))},_=function(g){u?(u.left=g,u=g):(h=g,u=g)};for(let g=0;g<c.count;++g){const x=c.nextBitIsOne(),k=Math.pow(2,c.count-(g+1));x?p(k,G.BLACK):(p(k,G.BLACK),p(k,G.RED))}return h}(new lh(n.length));return new F(i||e,l)};let so;const Ye={};class ce{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return f(Ye&&I,"ChildrenNode.ts has not been loaded"),so=so||new ce({".priority":Ye},{".priority":I}),so}get(e){const t=He(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof F?t:null}hasIndex(e){return ne(this.indexSet_,e.toString())}addIndex(e,t){f(e!==K,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let o=!1;const r=t.getIterator(w.Wrap);let l,a=r.getNext();for(;a;)o=o||e.isDefinedOn(a.node),i.push(a),a=r.getNext();l=o?sn(i,e.getCompare()):Ye;const c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;const h=Object.assign({},this.indexes_);return h[c]=l,new ce(h,u)}addToIndexes(e,t){const i=qt(this.indexes_,(o,r)=>{const a=He(this.indexSet_,r);if(f(a,"Missing index implementation for "+r),o===Ye){if(a.isDefinedOn(e.node)){const l=[],c=t.getIterator(w.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&l.push(u),u=c.getNext();return l.push(e),sn(l,a.getCompare())}return Ye}{const l=t.get(e.name);let c=o;return l&&(c=c.remove(new w(e.name,l))),c.insert(e,e.node)}});return new ce(i,this.indexSet_)}removeFromIndexes(e,t){const i=qt(this.indexes_,o=>{if(o===Ye)return o;{const r=t.get(e.name);return r?o.remove(new w(e.name,r)):o}});return new ce(i,this.indexSet_)}}let yt,m=(()=>{class n{constructor(t,i,o){this.children_=t,this.priorityNode_=i,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&jr(this.priorityNode_),this.children_.isEmpty()&&f(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return yt||(yt=new n(new F(io),null,ce.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||yt}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?yt:i}}getChild(t){const i=v(t);return null===i?this:this.getImmediateChild(i).getChild(A(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if(f(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const o=new w(t,i);let r,a;i.isEmpty()?(r=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(o,this.children_)):(r=this.children_.insert(t,i),a=this.indexMap_.addToIndexes(o,this.children_));const l=r.isEmpty()?yt:this.priorityNode_;return new n(r,l,a)}}updateChild(t,i){const o=v(t);if(null===o)return i;{f(".priority"!==v(t)||1===_e(t),".priority must be the last token in a path");const r=this.getImmediateChild(o).updateChild(A(t),i);return this.updateImmediateChild(o,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let o=0,r=0,a=!0;if(this.forEachChild(I,(l,c)=>{i[l]=c.val(t),o++,a&&n.INTEGER_REGEXP_.test(l)?r=Math.max(r,Number(l)):a=!1}),!t&&a&&r<2*o){const l=[];for(const c in i)l[c]=i[c];return l}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Qr(this.getPriority().val())+":"),this.forEachChild(I,(i,o)=>{const r=o.hash();""!==r&&(t+=":"+i+":"+r)}),this.lazyHash_=""===t?"":cr(t)}return this.lazyHash_}getPredecessorChildName(t,i,o){const r=this.resolveIndex_(o);if(r){const a=r.getPredecessorKey(new w(t,i));return a?a.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const o=i.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new w(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const o=i.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new w(i,this.children_.get(i)):null}forEachChild(t,i){const o=this.resolveIndex_(t);return o?o.inorderTraversal(r=>i(r.name,r.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const o=this.resolveIndex_(i);if(o)return o.getIteratorFrom(t,r=>r);{const r=this.children_.getIteratorFrom(t.name,w.Wrap);let a=r.peek();for(;null!=a&&i.compare(a,t)<0;)r.getNext(),a=r.peek();return r}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const o=this.resolveIndex_(i);if(o)return o.getReverseIteratorFrom(t,r=>r);{const r=this.children_.getReverseIteratorFrom(t.name,w.Wrap);let a=r.peek();for(;null!=a&&i.compare(a,t)>0;)r.getNext(),a=r.peek();return r}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===wt?-1:0}withIndex(t){if(t===K||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===K||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const o=this.getIterator(I),r=i.getIterator(I);let a=o.getNext(),l=r.getNext();for(;a&&l;){if(a.name!==l.name||!a.node.equals(l.node))return!1;a=o.getNext(),l=r.getNext()}return null===a&&null===l}return!1}return!1}}resolveIndex_(t){return t===K?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const wt=new class ch extends m{constructor(){super(new F(io),m.EMPTY_NODE,ce.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return m.EMPTY_NODE}isEmpty(){return!1}};function R(n,e=null){if(null===n)return m.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),f(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Ke(n,R(e));if(n instanceof Array){let t=m.EMPTY_NODE;return P(n,(i,o)=>{if(ne(n,i)&&"."!==i.substring(0,1)){const r=R(o);(r.isLeafNode()||!r.isEmpty())&&(t=t.updateImmediateChild(i,r))}}),t.updatePriority(R(e))}{const t=[];let i=!1;if(P(n,(a,l)=>{if("."!==a.substring(0,1)){const c=R(l);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),t.push(new w(a,c)))}}),0===t.length)return m.EMPTY_NODE;const r=sn(t,nh,a=>a.name,io);if(i){const a=sn(t,I.getCompare());return new m(r,R(e),new ce({".priority":a},{".priority":I}))}return new m(r,R(e),ce.Default)}}Object.defineProperties(w,{MIN:{value:new w(le,m.EMPTY_NODE)},MAX:{value:new w(J,wt)}}),$r.__EMPTY_NODE=m.EMPTY_NODE,Ke.__childrenNodeConstructor=m,function ih(n){oo=n}(wt),function sh(n){Yr=n}(wt),function oh(n){Kr=n}(R);class ro extends tn{constructor(e){super(),this.indexPath_=e,f(!y(e)&&".priority"!==v(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),o=this.extractChild(t.node),r=i.compareTo(o);return 0===r?Pe(e.name,t.name):r}makePost(e,t){const i=R(e),o=m.EMPTY_NODE.updateChild(this.indexPath_,i);return new w(t,o)}maxPost(){const e=m.EMPTY_NODE.updateChild(this.indexPath_,wt);return new w(J,e)}toString(){return mt(this.indexPath_,0).join("/")}}const ao=new class dh extends tn{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?Pe(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return w.MIN}maxPost(){return w.MAX}makePost(e,t){const i=R(e);return new w(t,i)}toString(){return".value"}};function ia(n){return{type:"value",snapshotNode:n}}function et(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function bt(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function xt(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class co{constructor(e){this.index_=e}updateChild(e,t,i,o,r,a){f(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(t);return l.getChild(o).equals(i.getChild(o))&&l.isEmpty()===i.isEmpty()||(null!=a&&(i.isEmpty()?e.hasChild(t)?a.trackChildChange(bt(t,l)):f(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?a.trackChildChange(et(t,i)):a.trackChildChange(xt(t,i,l))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(I,(o,r)=>{t.hasChild(o)||i.trackChildChange(bt(o,r))}),t.isLeafNode()||t.forEachChild(I,(o,r)=>{if(e.hasChild(o)){const a=e.getImmediateChild(o);a.equals(r)||i.trackChildChange(xt(o,r,a))}else i.trackChildChange(et(o,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?m.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ct{constructor(e){this.indexedFilter_=new co(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ct.getStartPost_(e),this.endPost_=Ct.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,i,o,r,a){return this.matches(new w(t,i))||(i=m.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,o,r,a)}updateFullNode(e,t,i){t.isLeafNode()&&(t=m.EMPTY_NODE);let o=t.withIndex(this.index_);o=o.updatePriority(m.EMPTY_NODE);const r=this;return t.forEachChild(I,(a,l)=>{r.matches(new w(a,l))||(o=o.updateImmediateChild(a,m.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class _h{constructor(e){this.rangedFilter_=new Ct(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,i,o,r,a){return this.rangedFilter_.matches(new w(t,i))||(i=m.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,o,r,a):this.fullLimitUpdateChild_(e,t,i,r,a)}updateFullNode(e,t,i){let o;if(t.isLeafNode()||t.isEmpty())o=m.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let r;o=m.EMPTY_NODE.withIndex(this.index_),r=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;r.hasNext()&&a<this.limit_;){const l=r.getNext();let c;if(c=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),l)<=0:this.index_.compare(l,this.rangedFilter_.getEndPost())<=0,!c)break;o=o.updateImmediateChild(l.name,l.node),a++}}else{let r,a,l,c;if(o=t.withIndex(this.index_),o=o.updatePriority(m.EMPTY_NODE),this.reverse_){c=o.getReverseIterator(this.index_),r=this.rangedFilter_.getEndPost(),a=this.rangedFilter_.getStartPost();const d=this.index_.getCompare();l=(p,_)=>d(_,p)}else c=o.getIterator(this.index_),r=this.rangedFilter_.getStartPost(),a=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();let u=0,h=!1;for(;c.hasNext();){const d=c.getNext();!h&&l(r,d)<=0&&(h=!0),h&&u<this.limit_&&l(d,a)<=0?u++:o=o.updateImmediateChild(d.name,m.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,o,r){let a;if(this.reverse_){const d=this.index_.getCompare();a=(p,_)=>d(_,p)}else a=this.index_.getCompare();const l=e;f(l.numChildren()===this.limit_,"");const c=new w(t,i),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(l.hasChild(t)){const d=l.getImmediateChild(t);let p=o.getChildAfterChild(this.index_,u,this.reverse_);for(;null!=p&&(p.name===t||l.hasChild(p.name));)p=o.getChildAfterChild(this.index_,p,this.reverse_);const _=null==p?1:a(p,c);if(h&&!i.isEmpty()&&_>=0)return r?.trackChildChange(xt(t,i,d)),l.updateImmediateChild(t,i);{r?.trackChildChange(bt(t,d));const x=l.updateImmediateChild(t,m.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(r?.trackChildChange(et(p.name,p.node)),x.updateImmediateChild(p.name,p.node)):x}}return i.isEmpty()?e:h&&a(u,c)>=0?(null!=r&&(r.trackChildChange(bt(u.name,u.node)),r.trackChildChange(et(t,i))),l.updateImmediateChild(t,i).updateImmediateChild(u.name,m.EMPTY_NODE)):e}}class uo{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=I}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return f(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return f(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:le}hasEnd(){return this.endSet_}getIndexEndValue(){return f(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return f(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:J}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return f(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===I}copy(){const e=new uo;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function oa(n){const e={};if(n.isDefault())return e;let t;return n.index_===I?t="$priority":n.index_===ao?t="$value":n.index_===K?t="$key":(f(n.index_ instanceof ro,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=D(t),n.startSet_&&(e.startAt=D(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+D(n.indexStartName_))),n.endSet_&&(e.endAt=D(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+D(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function sa(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==I&&(e.i=n.index_.toString()),e}class an extends Ur{constructor(e,t,i,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=o,this.log_=pt("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(f(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,o){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const a=an.getListenId_(e,i),l={};this.listens_[a]=l;const c=oa(e._queryParams);this.restRequest_(r+".json",c,(u,h)=>{let d=h;if(404===u&&(d=null,u=null),null===u&&this.onDataUpdate_(r,d,!1,i),He(this.listens_,a)===l){let p;p=u?401===u?"permission_denied":"rest_error:"+u:"ok",o(p,null)}})}unlisten(e,t){const i=an.getListenId_(e,t);delete this.listens_[i]}get(e){const t=oa(e._queryParams),i=e._path.toString(),o=new lt;return this.restRequest_(i+".json",t,(r,a)=>{let l=a;404===r&&(l=null,r=null),null===r?(this.onDataUpdate_(i,l,!1,null),o.resolve(l)):o.reject(new Error(l))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,r])=>{o&&o.accessToken&&(t.auth=o.accessToken),r&&r.token&&(t.ac=r.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+function Al(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}(t);this.log_("Sending REST request for "+a);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(i&&4===l.readyState){this.log_("REST Response for "+a+" received. status:",l.status,"response:",l.responseText);let c=null;if(l.status>=200&&l.status<300){try{c=ct(l.responseText)}catch{O("Failed to parse JSON response for "+a+": "+l.responseText)}i(null,c)}else 401!==l.status&&404!==l.status&&O("Got unsuccessful REST response for "+a+" Status: "+l.status),i(l.status);i=null}},l.open("GET",a,!0),l.send()})}}class wh{constructor(){this.rootNode_=m.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ln(){return{value:null,children:new Map}}function tt(n,e,t){if(y(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=v(e);n.children.has(i)||n.children.set(i,ln()),tt(n.children.get(i),e=A(e),t)}}function fo(n,e,t){null!==n.value?t(e,n.value):function bh(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,o)=>{fo(o,new T(e.toString()+"/"+i),t)})}class xh{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&P(this.last_,(i,o)=>{t[i]=t[i]-o}),this.last_=e,t}}class Eh{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new xh(e);const i=1e4+2e4*Math.random();ft(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;P(e,(o,r)=>{r>0&&ne(this.statsToReport_,o)&&(t[o]=r,i=!0)}),i&&this.server_.reportStats(t),ft(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var W=(()=>{return(n=W||(W={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",W;var n})();function vo(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class cn{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=W.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(y(this.path)){if(null!=this.affectedTree.value)return f(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new T(e));return new cn(C(),t,this.revert)}}return f(v(this.path)===e,"operationForChild called for unrelated child."),new cn(A(this.path),this.affectedTree,this.revert)}}class Tt{constructor(e,t){this.source=e,this.path=t,this.type=W.LISTEN_COMPLETE}operationForChild(e){return y(this.path)?new Tt(this.source,C()):new Tt(this.source,A(this.path))}}class Ze{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=W.OVERWRITE}operationForChild(e){return y(this.path)?new Ze(this.source,C(),this.snap.getImmediateChild(e)):new Ze(this.source,A(this.path),this.snap)}}class nt{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=W.MERGE}operationForChild(e){if(y(this.path)){const t=this.children.subtree(new T(e));return t.isEmpty()?null:t.value?new Ze(this.source,C(),t.value):new nt(this.source,C(),t)}return f(v(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new nt(this.source,A(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class fe{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(y(e))return this.isFullyInitialized()&&!this.filtered_;const t=v(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Ah{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Et(n,e,t,i,o,r){const a=i.filter(l=>l.type===t);a.sort((l,c)=>function kh(n,e,t){if(null==e.childName||null==t.childName)throw qe("Should only compare child_ events.");const i=new w(e.childName,e.snapshotNode),o=new w(t.childName,t.snapshotNode);return n.index_.compare(i,o)}(n,l,c)),a.forEach(l=>{const c=function Sh(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,l,r);o.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(c,n.query_))})})}function un(n,e){return{eventCache:n,serverCache:e}}function At(n,e,t,i){return un(new fe(e,t,i),n.serverCache)}function aa(n,e,t,i){return un(n.eventCache,new fe(e,t,i))}function dn(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Fe(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let yo;class S{constructor(e,t=(()=>(yo||(yo=new F(_d)),yo))()){this.value=e,this.children=t}static fromObject(e){let t=new S(null);return P(e,(i,o)=>{t=t.set(new T(i),o)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:C(),value:this.value};if(y(e))return null;{const i=v(e),o=this.children.get(i);if(null!==o){const r=o.findRootMostMatchingPathAndValue(A(e),t);return null!=r?{path:N(new T(i),r.path),value:r.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(y(e))return this;{const t=v(e),i=this.children.get(t);return null!==i?i.subtree(A(e)):new S(null)}}set(e,t){if(y(e))return new S(t,this.children);{const i=v(e),r=(this.children.get(i)||new S(null)).set(A(e),t),a=this.children.insert(i,r);return new S(this.value,a)}}remove(e){if(y(e))return this.children.isEmpty()?new S(null):new S(null,this.children);{const t=v(e),i=this.children.get(t);if(i){const o=i.remove(A(e));let r;return r=o.isEmpty()?this.children.remove(t):this.children.insert(t,o),null===this.value&&r.isEmpty()?new S(null):new S(this.value,r)}return this}}get(e){if(y(e))return this.value;{const t=v(e),i=this.children.get(t);return i?i.get(A(e)):null}}setTree(e,t){if(y(e))return t;{const i=v(e),r=(this.children.get(i)||new S(null)).setTree(A(e),t);let a;return a=r.isEmpty()?this.children.remove(i):this.children.insert(i,r),new S(this.value,a)}}fold(e){return this.fold_(C(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((o,r)=>{i[o]=r.fold_(N(e,o),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,C(),t)}findOnPath_(e,t,i){const o=!!this.value&&i(t,this.value);if(o)return o;if(y(e))return null;{const r=v(e),a=this.children.get(r);return a?a.findOnPath_(A(e),N(t,r),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,C(),t)}foreachOnPath_(e,t,i){if(y(e))return this;{this.value&&i(t,this.value);const o=v(e),r=this.children.get(o);return r?r.foreachOnPath_(A(e),N(t,o),i):new S(null)}}foreach(e){this.foreach_(C(),e)}foreach_(e,t){this.children.inorderTraversal((i,o)=>{o.foreach_(N(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class V{constructor(e){this.writeTree_=e}static empty(){return new V(new S(null))}}function It(n,e,t){if(y(e))return new V(new S(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const o=i.path;let r=i.value;const a=Z(o,e);return r=r.updateChild(a,t),new V(n.writeTree_.set(o,r))}{const o=new S(t),r=n.writeTree_.setTree(e,o);return new V(r)}}}function wo(n,e,t){let i=n;return P(t,(o,r)=>{i=It(i,N(e,o),r)}),i}function la(n,e){if(y(e))return V.empty();{const t=n.writeTree_.setTree(e,new S(null));return new V(t)}}function bo(n,e){return null!=Ue(n,e)}function Ue(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Z(t.path,e)):null}function ca(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(I,(i,o)=>{e.push(new w(i,o))}):n.writeTree_.children.inorderTraversal((i,o)=>{null!=o.value&&e.push(new w(i,o.value))}),e}function ge(n,e){if(y(e))return n;{const t=Ue(n,e);return new V(null!=t?new S(t):n.writeTree_.subtree(e))}}function xo(n){return n.writeTree_.isEmpty()}function it(n,e){return ua(C(),n.writeTree_,e)}function ua(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((o,r)=>{".priority"===o?(f(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):t=ua(N(n,o),r,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(N(n,".priority"),i)),t}}function hn(n,e){return fa(e,n)}function Lh(n,e){if(n.snap)return H(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&H(N(n.path,t),e))return!0;return!1}function Zh(n){return n.visible}function da(n,e,t){let i=V.empty();for(let o=0;o<n.length;++o){const r=n[o];if(e(r)){const a=r.path;let l;if(r.snap)H(t,a)?(l=Z(t,a),i=It(i,l,r.snap)):H(a,t)&&(l=Z(a,t),i=It(i,C(),r.snap.getChild(l)));else{if(!r.children)throw qe("WriteRecord should have .snap or .children");if(H(t,a))l=Z(t,a),i=wo(i,l,r.children);else if(H(a,t))if(l=Z(a,t),y(l))i=wo(i,C(),r.children);else{const c=He(r.children,v(l));if(c){const u=c.getChild(A(l));i=It(i,C(),u)}}}}}return i}function ha(n,e,t,i,o){if(i||o){const r=ge(n.visibleWrites,e);return!o&&xo(r)?t:o||null!=t||bo(r,C())?it(da(n.allWrites,function(u){return(u.visible||o)&&(!i||!~i.indexOf(u.writeId))&&(H(u.path,e)||H(e,u.path))},e),t||m.EMPTY_NODE):null}{const r=Ue(n.visibleWrites,e);if(null!=r)return r;{const a=ge(n.visibleWrites,e);return xo(a)?t:null!=t||bo(a,C())?it(a,t||m.EMPTY_NODE):null}}}function pn(n,e,t,i){return ha(n.writeTree,n.treePath,e,t,i)}function Co(n,e){return function Fh(n,e,t){let i=m.EMPTY_NODE;const o=Ue(n.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(I,(r,a)=>{i=i.updateImmediateChild(r,a)}),i;if(t){const r=ge(n.visibleWrites,e);return t.forEachChild(I,(a,l)=>{const c=it(ge(r,new T(a)),l);i=i.updateImmediateChild(a,c)}),ca(r).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}return ca(ge(n.visibleWrites,e)).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}(n.writeTree,n.treePath,e)}function pa(n,e,t,i){return function Uh(n,e,t,i,o){f(i||o,"Either existingEventSnap or existingServerSnap must exist");const r=N(e,t);if(bo(n.visibleWrites,r))return null;{const a=ge(n.visibleWrites,r);return xo(a)?o.getChild(t):it(a,o.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function _n(n,e){return function zh(n,e){return Ue(n.visibleWrites,e)}(n.writeTree,N(n.treePath,e))}function To(n,e,t){return function Bh(n,e,t,i){const o=N(e,t),r=Ue(n.visibleWrites,o);return null!=r?r:i.isCompleteForChild(t)?it(ge(n.visibleWrites,o),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function _a(n,e){return fa(N(n.treePath,e),n.writeTree)}function fa(n,e){return{treePath:n,writeTree:e}}class Gh{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;f("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),f(".priority"!==i,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(i);if(o){const r=o.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(i,xt(i,e.snapshotNode,o.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(i,bt(i,o.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(i,et(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==r)throw qe("Illegal combination of changes: "+e+" occurred after "+o);this.changeMap.set(i,xt(i,e.snapshotNode,o.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const ga=new class Vh{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class Eo{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new fe(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return To(this.writes_,e,i)}}getChildAfterChild(e,t,i){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Fe(this.viewCache_),r=function Wh(n,e,t,i,o,r){return function qh(n,e,t,i,o,r,a){let l;const c=ge(n.visibleWrites,e),u=Ue(c,C());if(null!=u)l=u;else{if(null==t)return[];l=it(c,t)}if(l=l.withIndex(a),l.isEmpty()||l.isLeafNode())return[];{const h=[],d=a.getCompare(),p=r?l.getReverseIteratorFrom(i,a):l.getIteratorFrom(i,a);let _=p.getNext();for(;_&&h.length<o;)0!==d(_,i)&&h.push(_),_=p.getNext();return h}}(n.writeTree,n.treePath,e,t,i,o,r)}(this.writes_,o,t,1,i,e);return 0===r.length?null:r[0]}}function ma(n,e,t,i,o,r){const a=e.eventCache;if(null!=_n(i,t))return e;{let l,c;if(y(t))if(f(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Fe(e),d=Co(i,u instanceof m?u:m.EMPTY_NODE);l=n.filter.updateFullNode(e.eventCache.getNode(),d,r)}else{const u=pn(i,Fe(e));l=n.filter.updateFullNode(e.eventCache.getNode(),u,r)}else{const u=v(t);if(".priority"===u){f(1===_e(t),"Can't have a priority with additional path components");const h=a.getNode();c=e.serverCache.getNode();const d=pa(i,t,h,c);l=null!=d?n.filter.updatePriority(h,d):a.getNode()}else{const h=A(t);let d;if(a.isCompleteForChild(u)){c=e.serverCache.getNode();const p=pa(i,t,a.getNode(),c);d=null!=p?a.getNode().getImmediateChild(u).updateChild(h,p):a.getNode().getImmediateChild(u)}else d=To(i,u,e.serverCache);l=null!=d?n.filter.updateChild(a.getNode(),u,d,h,o,r):a.getNode()}}return At(e,l,a.isFullyInitialized()||y(t),n.filter.filtersNodes())}}function fn(n,e,t,i,o,r,a,l){const c=e.serverCache;let u;const h=a?n.filter:n.filter.getIndexedFilter();if(y(t))u=h.updateFullNode(c.getNode(),i,null);else if(h.filtersNodes()&&!c.isFiltered()){const _=c.getNode().updateChild(t,i);u=h.updateFullNode(c.getNode(),_,null)}else{const _=v(t);if(!c.isCompleteForPath(t)&&_e(t)>1)return e;const g=A(t),k=c.getNode().getImmediateChild(_).updateChild(g,i);u=".priority"===_?h.updatePriority(c.getNode(),k):h.updateChild(c.getNode(),_,k,g,ga,null)}const d=aa(e,u,c.isFullyInitialized()||y(t),h.filtersNodes());return ma(n,d,t,o,new Eo(o,d,r),l)}function Ao(n,e,t,i,o,r,a){const l=e.eventCache;let c,u;const h=new Eo(o,e,r);if(y(t))u=n.filter.updateFullNode(e.eventCache.getNode(),i,a),c=At(e,u,!0,n.filter.filtersNodes());else{const d=v(t);if(".priority"===d)u=n.filter.updatePriority(e.eventCache.getNode(),i),c=At(e,u,l.isFullyInitialized(),l.isFiltered());else{const p=A(t),_=l.getNode().getImmediateChild(d);let g;if(y(p))g=i;else{const x=h.getCompleteChild(d);g=null!=x?".priority"===eo(p)&&x.getChild(Hr(p)).isEmpty()?x:x.updateChild(p,i):m.EMPTY_NODE}c=_.equals(g)?e:At(e,n.filter.updateChild(l.getNode(),d,g,p,h,a),l.isFullyInitialized(),n.filter.filtersNodes())}}return c}function va(n,e){return n.eventCache.isCompleteForChild(e)}function ya(n,e,t){return t.foreach((i,o)=>{e=e.updateChild(i,o)}),e}function Io(n,e,t,i,o,r,a,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u,c=e;u=y(t)?i:new S(null).setTree(t,i);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const g=ya(0,e.serverCache.getNode().getImmediateChild(d),p);c=fn(n,c,new T(d),g,o,r,a,l)}}),u.children.inorderTraversal((d,p)=>{const _=!e.serverCache.isCompleteForChild(d)&&null===p.value;if(!h.hasChild(d)&&!_){const x=ya(0,e.serverCache.getNode().getImmediateChild(d),p);c=fn(n,c,new T(d),x,o,r,a,l)}}),c}class tp{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,o=new co(i.getIndex()),r=function fh(n){return n.loadsAllData()?new co(n.getIndex()):n.hasLimit()?new _h(n):new Ct(n)}(i);this.processor_=function $h(n){return{filter:n}}(r);const a=t.serverCache,l=t.eventCache,c=o.updateFullNode(m.EMPTY_NODE,a.getNode(),null),u=r.updateFullNode(m.EMPTY_NODE,l.getNode(),null),h=new fe(c,a.isFullyInitialized(),o.filtersNodes()),d=new fe(u,l.isFullyInitialized(),r.filtersNodes());this.viewCache_=un(d,h),this.eventGenerator_=new Ah(this.query_)}get query(){return this.query_}}function op(n,e){const t=Fe(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!y(e)&&!t.getImmediateChild(v(e)).isEmpty())?t.getChild(e):null}function wa(n){return 0===n.eventRegistrations_.length}function ba(n,e,t){const i=[];if(t){f(null==e,"A cancel should cancel all event registrations.");const o=n.query._path;n.eventRegistrations_.forEach(r=>{const a=r.createCancelEvent(t,o);a&&i.push(a)})}if(e){let o=[];for(let r=0;r<n.eventRegistrations_.length;++r){const a=n.eventRegistrations_[r];if(a.matches(e)){if(e.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(r+1));break}}else o.push(a)}n.eventRegistrations_=o}else n.eventRegistrations_=[];return i}function xa(n,e,t,i){e.type===W.MERGE&&null!==e.source.queryId&&(f(Fe(n.viewCache_),"We should always have a full cache before handling merges"),f(dn(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,r=function jh(n,e,t,i,o){const r=new Gh;let a,l;if(t.type===W.OVERWRITE){const u=t;u.source.fromUser?a=Ao(n,e,u.path,u.snap,i,o,r):(f(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!y(u.path),a=fn(n,e,u.path,u.snap,i,o,l,r))}else if(t.type===W.MERGE){const u=t;u.source.fromUser?a=function Kh(n,e,t,i,o,r,a){let l=e;return i.foreach((c,u)=>{const h=N(t,c);va(e,v(h))&&(l=Ao(n,l,h,u,o,r,a))}),i.foreach((c,u)=>{const h=N(t,c);va(e,v(h))||(l=Ao(n,l,h,u,o,r,a))}),l}(n,e,u.path,u.children,i,o,r):(f(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),a=Io(n,e,u.path,u.children,i,o,l,r))}else if(t.type===W.ACK_USER_WRITE){const u=t;a=u.revert?function ep(n,e,t,i,o,r){let a;if(null!=_n(i,t))return e;{const l=new Eo(i,e,o),c=e.eventCache.getNode();let u;if(y(t)||".priority"===v(t)){let h;if(e.serverCache.isFullyInitialized())h=pn(i,Fe(e));else{const d=e.serverCache.getNode();f(d instanceof m,"serverChildren would be complete if leaf node"),h=Co(i,d)}u=n.filter.updateFullNode(c,h,r)}else{const h=v(t);let d=To(i,h,e.serverCache);null==d&&e.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),u=null!=d?n.filter.updateChild(c,h,d,A(t),l,r):e.eventCache.getNode().hasChild(h)?n.filter.updateChild(c,h,m.EMPTY_NODE,A(t),l,r):c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=pn(i,Fe(e)),a.isLeafNode()&&(u=n.filter.updateFullNode(u,a,r)))}return a=e.serverCache.isFullyInitialized()||null!=_n(i,C()),At(e,u,a,n.filter.filtersNodes())}}(n,e,u.path,i,o,r):function Yh(n,e,t,i,o,r,a){if(null!=_n(o,t))return e;const l=e.serverCache.isFiltered(),c=e.serverCache;if(null!=i.value){if(y(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return fn(n,e,t,c.getNode().getChild(t),o,r,l,a);if(y(t)){let u=new S(null);return c.getNode().forEachChild(K,(h,d)=>{u=u.set(new T(h),d)}),Io(n,e,t,u,o,r,l,a)}return e}{let u=new S(null);return i.foreach((h,d)=>{const p=N(t,h);c.isCompleteForPath(p)&&(u=u.set(h,c.getNode().getChild(p)))}),Io(n,e,t,u,o,r,l,a)}}(n,e,u.path,u.affectedTree,i,o,r)}else{if(t.type!==W.LISTEN_COMPLETE)throw qe("Unknown operation type: "+t.type);a=function Xh(n,e,t,i,o){const r=e.serverCache;return ma(n,aa(e,r.getNode(),r.isFullyInitialized()||y(t),r.isFiltered()),t,i,ga,o)}(n,e,t.path,i,r)}const c=r.getChanges();return function Jh(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const o=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=dn(n);(t.length>0||!n.eventCache.isFullyInitialized()||o&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&t.push(ia(dn(e)))}}(e,a,c),{viewCache:a,changes:c}}(n.processor_,o,e,t,i);return function Qh(n,e){f(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),f(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,r.viewCache),f(r.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=r.viewCache,Ca(n,r.changes,r.viewCache.eventCache.getNode(),null)}function Ca(n,e,t,i){return function Ih(n,e,t,i){const o=[],r=[];return e.forEach(a=>{"child_changed"===a.type&&n.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&r.push(function ph(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(a.childName,a.snapshotNode))}),Et(n,o,"child_removed",e,i,t),Et(n,o,"child_added",e,i,t),Et(n,o,"child_moved",r,i,t),Et(n,o,"child_changed",e,i,t),Et(n,o,"value",e,i,t),o}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let gn,vn;class Ta{constructor(){this.views=new Map}}function So(n,e,t,i){const o=e.source.queryId;if(null!==o){const r=n.views.get(o);return f(null!=r,"SyncTree gave us an op for an invalid query."),xa(r,e,t,i)}{let r=[];for(const a of n.views.values())r=r.concat(xa(a,e,t,i));return r}}function up(n,e,t,i,o,r){const a=function Ea(n,e,t,i,o){const a=n.views.get(e._queryIdentifier);if(!a){let l=pn(t,o?i:null),c=!1;l?c=!0:i instanceof m?(l=Co(t,i),c=!1):(l=m.EMPTY_NODE,c=!1);const u=un(new fe(l,c,!1),new fe(i,o,!1));return new tp(e,u)}return a}(n,e,i,o,r);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,a),function sp(n,e){n.eventRegistrations_.push(e)}(a,t),function rp(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(I,(r,a)=>{i.push(et(r,a))}),t.isFullyInitialized()&&i.push(ia(t.getNode())),Ca(n,i,t.getNode(),e)}(a,t)}function Aa(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function me(n,e){let t=null;for(const i of n.views.values())t=t||op(i,e);return t}function Ia(n,e){return e._queryParams.loadsAllData()?mn(n):n.views.get(e._queryIdentifier)}function Sa(n,e){return null!=Ia(n,e)}function ve(n){return null!=mn(n)}function mn(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let _p=1;class ka{constructor(e){this.listenProvider_=e,this.syncPointTree_=new S(null),this.pendingWriteTree_=function Hh(){return{visibleWrites:V.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ko(n,e,t,i,o){return function Rh(n,e,t,i,o){f(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:o}),o&&(n.visibleWrites=It(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,o),o?ot(n,new Ze({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function ye(n,e,t=!1){const i=function Mh(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function Ph(n,e){const t=n.allWrites.findIndex(l=>l.writeId===e);f(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let o=i.visible,r=!1,a=n.allWrites.length-1;for(;o&&a>=0;){const l=n.allWrites[a];l.visible&&(a>=t&&Lh(l,i.path)?o=!1:H(i.path,l.path)&&(r=!0)),a--}return!!o&&(r?(function Oh(n){n.visibleWrites=da(n.allWrites,Zh,C()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=la(n.visibleWrites,i.path):P(i.children,c=>{n.visibleWrites=la(n.visibleWrites,N(i.path,c))}),!0))}(n.pendingWriteTree_,e)){let r=new S(null);return null!=i.snap?r=r.set(C(),!0):P(i.children,a=>{r=r.set(new T(a),!0)}),ot(n,new cn(i.path,r,t))}return[]}function St(n,e,t){return ot(n,new Ze({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function yn(n,e,t,i,o=!1){const r=e._path,a=n.syncPointTree_.get(r);let l=[];if(a&&("default"===e._queryIdentifier||Sa(a,e))){const c=function dp(n,e,t,i){const o=e._queryIdentifier,r=[];let a=[];const l=ve(n);if("default"===o)for(const[c,u]of n.views.entries())a=a.concat(ba(u,t,i)),wa(u)&&(n.views.delete(c),u.query._queryParams.loadsAllData()||r.push(u.query));else{const c=n.views.get(o);c&&(a=a.concat(ba(c,t,i)),wa(c)&&(n.views.delete(o),c.query._queryParams.loadsAllData()||r.push(c.query)))}return l&&!ve(n)&&r.push(new(function lp(){return f(gn,"Reference.ts has not been loaded"),gn}())(e._repo,e._path)),{removed:r,events:a}}(a,e,t,i);(function cp(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(r));const u=c.removed;if(l=c.events,!o){const h=-1!==u.findIndex(p=>p._queryParams.loadsAllData()),d=n.syncPointTree_.findOnPath(r,(p,_)=>ve(_));if(h&&!d){const p=n.syncPointTree_.subtree(r);if(!p.isEmpty()){const _=function bp(n){return n.fold((e,t,i)=>{if(t&&ve(t))return[mn(t)];{let o=[];return t&&(o=Aa(t)),P(i,(r,a)=>{o=o.concat(a)}),o}})}(p);for(let g=0;g<_.length;++g){const x=_[g],k=x.query,Ce=Ma(n,x);n.listenProvider_.startListening(Nt(k),kt(n,k),Ce.hashFn,Ce.onComplete)}}}!d&&u.length>0&&!i&&(h?n.listenProvider_.stopListening(Nt(e),null):u.forEach(p=>{const _=n.queryToTagMap.get(bn(p));n.listenProvider_.stopListening(Nt(p),_)}))}!function xp(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const o=bn(i),r=n.queryToTagMap.get(o);n.queryToTagMap.delete(o),n.tagToQueryMap.delete(r)}}}(n,u)}return l}function No(n,e,t,i=!1){const o=e._path;let r=null,a=!1;n.syncPointTree_.foreachOnPath(o,(p,_)=>{const g=Z(p,o);r=r||me(_,g),a=a||ve(_)});let c,l=n.syncPointTree_.get(o);l?(a=a||ve(l),r=r||me(l,C())):(l=new Ta,n.syncPointTree_=n.syncPointTree_.set(o,l)),null!=r?c=!0:(c=!1,r=m.EMPTY_NODE,n.syncPointTree_.subtree(o).foreachChild((_,g)=>{const x=me(g,C());x&&(r=r.updateImmediateChild(_,x))}));const u=Sa(l,e);if(!u&&!e._queryParams.loadsAllData()){const p=bn(e);f(!n.queryToTagMap.has(p),"View does not exist, but we have a tag");const _=function Cp(){return _p++}();n.queryToTagMap.set(p,_),n.tagToQueryMap.set(_,p)}let d=up(l,e,t,hn(n.pendingWriteTree_,o),r,c);if(!u&&!a&&!i){const p=Ia(l,e);d=d.concat(function Tp(n,e,t){const i=e._path,o=kt(n,e),r=Ma(n,t),a=n.listenProvider_.startListening(Nt(e),o,r.hashFn,r.onComplete),l=n.syncPointTree_.subtree(i);if(o)f(!ve(l.value),"If we're adding a query, it shouldn't be shadowed");else{const c=l.fold((u,h,d)=>{if(!y(u)&&h&&ve(h))return[mn(h).query];{let p=[];return h&&(p=p.concat(Aa(h).map(_=>_.query))),P(d,(_,g)=>{p=p.concat(g)}),p}});for(let u=0;u<c.length;++u){const h=c[u];n.listenProvider_.stopListening(Nt(h),kt(n,h))}}return a}(n,e,p))}return d}function wn(n,e,t){const o=n.pendingWriteTree_,r=n.syncPointTree_.findOnPath(e,(a,l)=>{const u=me(l,Z(a,e));if(u)return u});return ha(o,e,r,t,!0)}function ot(n,e){return Ra(e,n.syncPointTree_,null,hn(n.pendingWriteTree_,C()))}function Ra(n,e,t,i){if(y(n.path))return Da(n,e,t,i);{const o=e.get(C());null==t&&null!=o&&(t=me(o,C()));let r=[];const a=v(n.path),l=n.operationForChild(a),c=e.children.get(a);if(c&&l){const u=t?t.getImmediateChild(a):null,h=_a(i,a);r=r.concat(Ra(l,c,u,h))}return o&&(r=r.concat(So(o,n,i,t))),r}}function Da(n,e,t,i){const o=e.get(C());null==t&&null!=o&&(t=me(o,C()));let r=[];return e.children.inorderTraversal((a,l)=>{const c=t?t.getImmediateChild(a):null,u=_a(i,a),h=n.operationForChild(a);h&&(r=r.concat(Da(h,l,c,u)))}),o&&(r=r.concat(So(o,n,i,t))),r}function Ma(n,e){const t=e.query,i=kt(n,t);return{hashFn:()=>(function np(n){return n.viewCache_.serverCache.getNode()}(e)||m.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return i?function vp(n,e,t){const i=Ro(n,t);if(i){const o=Do(i),r=o.path,a=o.queryId,l=Z(r,e);return Mo(n,r,new Tt(vo(a),l))}return[]}(n,t._path,i):function mp(n,e){return ot(n,new Tt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const r=function md(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(o,t);return yn(n,t,null,r)}}}}function kt(n,e){const t=bn(e);return n.queryToTagMap.get(t)}function bn(n){return n._path.toString()+"$"+n._queryIdentifier}function Ro(n,e){return n.tagToQueryMap.get(e)}function Do(n){const e=n.indexOf("$");return f(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new T(n.substr(0,e))}}function Mo(n,e,t){const i=n.syncPointTree_.get(e);return f(i,"Missing sync point for query tag that we're tracking"),So(i,t,hn(n.pendingWriteTree_,e),null)}function Nt(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function pp(){return f(vn,"Reference.ts has not been loaded"),vn}())(n._repo,n._path):n}class Po{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Po(t)}node(){return this.node_}}class Lo{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=N(this.path_,e);return new Lo(this.syncTree_,t)}node(){return wn(this.syncTree_,this.path_)}}const Pa=function(n,e,t){return n&&"object"==typeof n?(f(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Ap(n[".sv"],e,t):"object"==typeof n[".sv"]?Ip(n[".sv"],e):void f(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Ap=function(n,e,t){if("timestamp"===n)return t.timestamp;f(!1,"Unexpected server value: "+n)},Ip=function(n,e,t){n.hasOwnProperty("increment")||f(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&f(!1,"Unexpected increment value: "+i);const o=e.node();if(f(null!==o&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return i;const a=o.getValue();return"number"!=typeof a?i:a+i},Oo=function(n,e,t){return Zo(n,new Po(e),t)};function Zo(n,e,t){const i=n.getPriority().val(),o=Pa(i,e.getImmediateChild(".priority"),t);let r;if(n.isLeafNode()){const a=n,l=Pa(a.getValue(),e,t);return l!==a.getValue()||o!==a.getPriority().val()?new Ke(l,R(o)):n}{const a=n;return r=a,o!==a.getPriority().val()&&(r=r.updatePriority(new Ke(o))),a.forEachChild(I,(l,c)=>{const u=Zo(c,e.getImmediateChild(l),t);u!==c&&(r=r.updateImmediateChild(l,u))}),r}}class Fo{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function xn(n,e){let t=e instanceof T?e:new T(e),i=n,o=v(t);for(;null!==o;){const r=He(i.node.children,o)||{children:{},childCount:0};i=new Fo(o,i,r),t=A(t),o=v(t)}return i}function Be(n){return n.node.value}function Uo(n,e){n.node.value=e,Bo(n)}function Oa(n){return n.node.childCount>0}function Cn(n,e){P(n.node.children,(t,i)=>{e(new Fo(t,n,i))})}function Za(n,e,t,i){t&&!i&&e(n),Cn(n,o=>{Za(o,e,!0,i)}),t&&i&&e(n)}function Rt(n){return new T(null===n.parent?n.name:Rt(n.parent)+"/"+n.name)}function Bo(n){null!==n.parent&&function Np(n,e,t){const i=function Sp(n){return void 0===Be(n)&&!Oa(n)}(t),o=ne(n.node.children,e);i&&o?(delete n.node.children[e],n.node.childCount--,Bo(n)):!i&&!o&&(n.node.children[e]=t.node,n.node.childCount++,Bo(n))}(n.parent,n.name,n)}const Rp=/[\[\].#$\/\u0000-\u001F\u007F]/,Dp=/[\[\].#$\u0000-\u001F\u007F]/,zo=10485760,Tn=function(n){return"string"==typeof n&&0!==n.length&&!Rp.test(n)},Fa=function(n){return"string"==typeof n&&0!==n.length&&!Dp.test(n)},Mt=function(n,e,t){const i=t instanceof T?new Qd(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Le(i));if("function"==typeof e)throw new Error(n+"contains a function "+Le(i)+" with contents = "+e.toString());if(Jt(e))throw new Error(n+"contains "+e.toString()+" "+Le(i));if("string"==typeof e&&e.length>zo/3&&Wt(e)>zo)throw new Error(n+"contains a string greater than "+zo+" utf8 bytes "+Le(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let o=!1,r=!1;if(P(e,(a,l)=>{if(".value"===a)o=!0;else if(".priority"!==a&&".sv"!==a&&(r=!0,!Tn(a)))throw new Error(n+" contains an invalid key ("+a+") "+Le(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function jd(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Wt(e),Wr(n)})(i,a),Mt(n,l,i),function Jd(n){const e=n.parts_.pop();n.byteLength_-=Wt(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),o&&r)throw new Error(n+' contains ".value" child '+Le(i)+" in addition to actual children.")}},Ho=function(n,e,t,i){if(!(i&&void 0===t||Fa(t)))throw new Error(We(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')};class Op{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function En(n,e){let t=null;for(let i=0;i<e.length;i++){const o=e[i],r=o.getPath();null!==t&&!to(r,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:r}),t.events.push(o)}t&&n.eventLists_.push(t)}function za(n,e,t){En(n,t),qa(n,i=>to(i,e))}function B(n,e,t){En(n,t),qa(n,i=>H(i,e)||H(e,i))}function qa(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const o=n.eventLists_[i];o&&(e(o.path)?(Zp(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Zp(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();Me&&M("event: "+t.toString()),je(i)}}}class Up{constructor(e,t,i,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Op,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ln(),this.transactionQueueTree_=new Fo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Wa(n){const t=n.infoData_.getNode(new T(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Lt(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Wa(n)})}function Ga(n,e,t,i,o){n.dataUpdateCount++;const r=new T(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let a=[];if(o)if(i){const c=qt(t,u=>R(u));a=function yp(n,e,t,i){const o=Ro(n,i);if(o){const r=Do(o),a=r.path,l=r.queryId,c=Z(a,e),u=S.fromObject(t);return Mo(n,a,new nt(vo(l),c,u))}return[]}(n.serverSyncTree_,r,c,o)}else{const c=R(t);a=function Na(n,e,t,i){const o=Ro(n,i);if(null!=o){const r=Do(o),a=r.path,l=r.queryId,c=Z(a,e);return Mo(n,a,new Ze(vo(l),c,t))}return[]}(n.serverSyncTree_,r,c,o)}else if(i){const c=qt(t,u=>R(u));a=function gp(n,e,t){const i=S.fromObject(t);return ot(n,new nt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,r,c)}else{const c=R(t);a=St(n.serverSyncTree_,r,c)}let l=r;a.length>0&&(l=rt(n,r)),B(n.eventQueue_,l,a)}function Va(n,e){Wo(n,"connected",e),!1===e&&function Wp(n){st(n,"onDisconnectEvents");const e=Lt(n),t=ln();fo(n.onDisconnect_,C(),(o,r)=>{const a=function(n,e,t,i){return Zo(e,new Lo(t,n),i)}(o,r,n.serverSyncTree_,e);tt(t,o,a)});let i=[];fo(t,C(),(o,r)=>{i=i.concat(St(n.serverSyncTree_,o,r));const a=Qo(n,o);rt(n,a)}),n.onDisconnect_=ln(),B(n.eventQueue_,C(),i)}(n)}function Wo(n,e,t){const i=new T("/.info/"+e),o=R(t);n.infoData_.updateSnapshot(i,o);const r=St(n.infoSyncTree_,i,o);B(n.eventQueue_,i,r)}function An(n){return n.nextWriteId_++}function Go(n,e,t,i,o){st(n,"set",{path:e.toString(),value:t,priority:i});const r=Lt(n),a=R(t,i),l=wn(n.serverSyncTree_,e),c=Oo(a,l,r),u=An(n),h=ko(n.serverSyncTree_,e,c,u,!0);En(n.eventQueue_,h),n.server_.put(e.toString(),a.val(!0),(p,_)=>{const g="ok"===p;g||O("set at "+e+" failed: "+p);const x=ye(n.serverSyncTree_,u,!g);B(n.eventQueue_,e,x),function we(n,e,t,i){e&&je(()=>{if("ok"===t)e(null);else{const o=(t||"error").toUpperCase();let r=o;i&&(r+=": "+i);const a=new Error(r);a.code=o,e(a)}})}(0,o,p,_)});const d=Qo(n,e);rt(n,d),B(n.eventQueue_,d,[])}function Vo(n,e,t){let i;i=".info"===v(e._path)?yn(n.infoSyncTree_,e,t):yn(n.serverSyncTree_,e,t),za(n.eventQueue_,e._path,i)}function st(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),M(t,...e)}function $o(n,e,t){return wn(n.serverSyncTree_,e,t)||m.EMPTY_NODE}function In(n,e=n.transactionQueueTree_){if(e||Sn(n,e),Be(e)){const t=Ja(n,e);f(t.length>0,"Sending zero length transaction queue"),t.every(o=>0===o.status)&&function Kp(n,e,t){const i=t.map(u=>u.currentWriteId),o=$o(n,e,i);let r=o;const a=o.hash();for(let u=0;u<t.length;u++){const h=t[u];f(0===h.status,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Z(e,h.path);r=r.updateChild(d,h.currentOutputSnapshotRaw)}const l=r.val(!0),c=e;n.server_.put(c.toString(),l,u=>{st(n,"transaction put response",{path:c.toString(),status:u});let h=[];if("ok"===u){const d=[];for(let p=0;p<t.length;p++)t[p].status=2,h=h.concat(ye(n.serverSyncTree_,t[p].currentWriteId)),t[p].onComplete&&d.push(()=>t[p].onComplete(null,!0,t[p].currentOutputSnapshotResolved)),t[p].unwatcher();Sn(n,xn(n.transactionQueueTree_,e)),In(n,n.transactionQueueTree_),B(n.eventQueue_,e,h);for(let p=0;p<d.length;p++)je(d[p])}else{if("datastale"===u)for(let d=0;d<t.length;d++)t[d].status=3===t[d].status?4:0;else{O("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=u}rt(n,e)}},a)}(n,Rt(e),t)}else Oa(e)&&Cn(e,t=>{In(n,t)})}function rt(n,e){const t=ja(n,e),i=Rt(t);return function Yp(n,e,t){if(0===e.length)return;const i=[];let o=[];const a=e.filter(l=>0===l.status).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const c=e[l],u=Z(t,c.path);let d,h=!1;if(f(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,d=c.abortReason,o=o.concat(ye(n.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,d="maxretry",o=o.concat(ye(n.serverSyncTree_,c.currentWriteId,!0));else{const p=$o(n,c.path,a);c.currentInputSnapshot=p;const _=e[l].update(p.val());if(void 0!==_){Mt("transaction failed: Data returned ",_,c.path);let g=R(_);"object"==typeof _&&null!=_&&ne(_,".priority")||(g=g.updatePriority(p.getPriority()));const k=c.currentWriteId,Ce=Lt(n),Dn=Oo(g,p,Ce);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=Dn,c.currentWriteId=An(n),a.splice(a.indexOf(k),1),o=o.concat(ko(n.serverSyncTree_,c.path,Dn,c.currentWriteId,c.applyLocally)),o=o.concat(ye(n.serverSyncTree_,k,!0))}else h=!0,d="nodata",o=o.concat(ye(n.serverSyncTree_,c.currentWriteId,!0))}B(n.eventQueue_,t,o),o=[],h&&(e[l].status=2,setTimeout(e[l].unwatcher,Math.floor(0)),e[l].onComplete&&i.push("nodata"===d?()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot):()=>e[l].onComplete(new Error(d),!1,null)))}Sn(n,n.transactionQueueTree_);for(let l=0;l<i.length;l++)je(i[l]);In(n,n.transactionQueueTree_)}(n,Ja(n,t),i),i}function ja(n,e){let t,i=n.transactionQueueTree_;for(t=v(e);null!==t&&void 0===Be(i);)i=xn(i,t),t=v(e=A(e));return i}function Ja(n,e){const t=[];return Ka(n,e,t),t.sort((i,o)=>i.order-o.order),t}function Ka(n,e,t){const i=Be(e);if(i)for(let o=0;o<i.length;o++)t.push(i[o]);Cn(e,o=>{Ka(n,o,t)})}function Sn(n,e){const t=Be(e);if(t){let i=0;for(let o=0;o<t.length;o++)2!==t[o].status&&(t[i]=t[o],i++);t.length=i,Uo(e,t.length>0?t:void 0)}Cn(e,i=>{Sn(n,i)})}function Qo(n,e){const t=Rt(ja(n,e)),i=xn(n.transactionQueueTree_,e);return function kp(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,o=>{jo(n,o)}),jo(n,i),Za(i,o=>{jo(n,o)}),t}function jo(n,e){const t=Be(e);if(t){const i=[];let o=[],r=-1;for(let a=0;a<t.length;a++)3===t[a].status||(1===t[a].status?(f(r===a-1,"All SENT items should be at beginning of queue."),r=a,t[a].status=3,t[a].abortReason="set"):(f(0===t[a].status,"Unexpected transaction status in abort"),t[a].unwatcher(),o=o.concat(ye(n.serverSyncTree_,t[a].currentWriteId,!0)),t[a].onComplete&&i.push(t[a].onComplete.bind(null,new Error("set"),!1,null))));-1===r?Uo(e,void 0):t.length=r+1,B(n.eventQueue_,Rt(e),o);for(let a=0;a<i.length;a++)je(i[a])}}const Jo=function(n,e){const t=t_(n),i=t.namespace;return"firebase.com"===t.domain&&j(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&j("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&O("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Qi(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new T(t.pathString)}},t_=function(n){let e="",t="",i="",o="",r="",a=!0,l="https",c=443;if("string"==typeof n){let u=n.indexOf("//");u>=0&&(l=n.substring(0,u-1),n=n.substring(u+2));let h=n.indexOf("/");-1===h&&(h=n.length);let d=n.indexOf("?");-1===d&&(d=n.length),e=n.substring(0,Math.min(h,d)),h<d&&(o=function Xp(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let o=t[i];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}(n.substring(h,d)));const p=function e_(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):O(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,d)));u=e.indexOf(":"),u>=0?(a="https"===l||"wss"===l,c=parseInt(e.substring(u+1),10)):u=e.length;const _=e.slice(0,u);if("localhost"===_.toLowerCase())t="localhost";else if(_.split(".").length<=2)t=_;else{const g=e.indexOf(".");i=e.substring(0,g).toLowerCase(),t=e.substring(g+1),r=i}"ns"in p&&(r=p.ns)}return{host:e,port:c,domain:t,subdomain:i,secure:a,scheme:l,pathString:o,namespace:r}};class Ya{constructor(e,t,i,o){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=o}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+D(this.snapshot.exportVal())}}class Xa{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Ko{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return f(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class z{constructor(e,t,i,o){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=o}get key(){return y(this._path)?null:eo(this._path)}get ref(){return new $(this._repo,this._path)}get _queryIdentifier(){const e=sa(this._queryParams),t=Gi(e);return"{}"===t?"default":t}get _queryObject(){return sa(this._queryParams)}isEqual(e){if(!((e=Ae(e))instanceof z))return!1;const t=this._repo===e._repo,i=to(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Vd(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class $ extends z{constructor(e,t){super(e,t,new uo,!1)}get parent(){const e=Hr(this._path);return null===e?null:new $(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ze{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new T(e),i=at(this.ref,e);return new ze(this._node.getChild(t),i,I)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,o)=>e(new ze(o,at(this.ref,i),I)))}hasChild(e){const t=new T(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Yo(n,e){return(n=Ae(n))._checkNotDeleted("ref"),void 0!==e?at(n._root,e):n._root}function at(n,e){return null===v((n=Ae(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Ho("child","path",t,!1)):Ho("child","path",e,!1),new $(n._repo,N(n._path,e));var t}function Xo(n,e){(function(n,e){if(".info"===v(e))throw new Error(n+" failed = Can't modify data under /.info/")})("set",(n=Ae(n))._path),function(n,e,t,i){i&&void 0===e||Mt(We(n,"value"),e,t)}("set",e,n._path,!1);const t=new lt;return Go(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}class Ot{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new Ya("value",this,new ze(e.snapshotNode,new $(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Xa(this,e,t):null}matches(e){return e instanceof Ot&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Rn{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Xa(this,e,t):null}createEvent(e,t){f(null!=e.childName,"Child events should have a childName.");const i=at(new $(t._repo,t._path),e.childName),o=t._queryParams.getIndex();return new Ya(e.type,this,new ze(e.snapshotNode,i,o),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Rn&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function el(n,e,t,i){return function Zt(n,e,t,i,o){let r;if("object"==typeof i&&(r=void 0,o=i),"function"==typeof i&&(r=i),o&&o.onlyOnce){const c=t,u=(h,d)=>{Vo(n._repo,n,l),c(h,d)};u.userCallback=t.userCallback,u.context=t.context,t=u}const a=new Ko(t,r||void 0),l="value"===e?new Ot(a):new Rn(e,a);return function Qp(n,e,t){let i;i=".info"===v(e._path)?No(n.infoSyncTree_,e,t):No(n.serverSyncTree_,e,t),za(n.eventQueue_,e._path,i)}(n._repo,n,l),()=>Vo(n._repo,n,l)}(n,"value",e,t,i)}(function ap(n){f(!gn,"__referenceConstructor has already been defined"),gn=n})($),function hp(n){f(!vn,"__referenceConstructor has already been defined"),vn=n}($);const es={};function __(n,e,t,i,o){let r=i||n.options.databaseURL;void 0===r&&(n.options.projectId||j("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),M("Using default host for project ",n.options.projectId),r=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c,u,a=Jo(r,o),l=a.repoInfo;typeof process<"u"&&process.env&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(c=!0,r=`http://${u}?ns=${l.namespace}`,a=Jo(r,o),l=a.repoInfo):c=!a.repoInfo.secure;const h=o&&c?new gt(gt.OWNER):new bd(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Tn(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Fa(n)}(t))throw new Error(We(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",a),y(a.path)||j("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function g_(n,e,t,i){let o=es[e.name];o||(o={},es[e.name]=o);let r=o[n.toURLString()];return r&&j("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new Up(n,false,t,i),o[n.toURLString()]=r,r}(l,n,h,new wd(n.name,t));return new v_(d,n)}class v_{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Bp(n,e,t){if(n.stats_=Ki(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new an(n.repoInfo_,(i,o,r,a)=>{Ga(n,i,o,r,a)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Va(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{D(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Oe(n.repoInfo_,e,(i,o,r,a)=>{Ga(n,i,o,r,a)},i=>{Va(n,i)},i=>{!function zp(n,e){P(e,(t,i)=>{Wo(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function Td(n,e){const t=n.toString();return Ji[t]||(Ji[t]=e()),Ji[t]}(n.repoInfo_,()=>new Eh(n.stats_,n.server_)),n.infoData_=new wh,n.infoSyncTree_=new ka({startListening:(i,o,r,a)=>{let l=[];const c=n.infoData_.getNode(i._path);return c.isEmpty()||(l=St(n.infoSyncTree_,i._path,c),setTimeout(()=>{a("ok")},0)),l},stopListening:()=>{}}),Wo(n,"connected",!1),n.serverSyncTree_=new ka({startListening:(i,o,r,a)=>(n.server_.listen(i,r,o,(l,c)=>{const u=a(l,c);B(n.eventQueue_,i._path,u)}),[]),stopListening:(i,o)=>{n.server_.unlisten(i,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new $(this._repo,C())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function f_(n,e){const t=es[e];(!t||t[n.key]!==n)&&j(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function Qa(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&j("Cannot call "+e+" on a deleted database.")}}function sl(n=Cs(),e){const t=Ge(n,"database").getImmediate({identifier:e}),i=(n=>{var e,t;return null===(t=null===(e=On())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t.database})();if(i){const[o,r]=i.split(":");!function y_(n,e,t,i={}){(n=Ae(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&j("Cannot call useEmulator() after instance has already been initialized.");const o=n._repoInternal;let r;if(o.repoInfo_.nodeAdmin)i.mockUserToken&&j('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),r=new gt(gt.OWNER);else if(i.mockUserToken){const a="string"==typeof i.mockUserToken?i.mockUserToken:function wl(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i=e||"demo-project",o=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ft(JSON.stringify({alg:"none",type:"JWT"})),Ft(JSON.stringify(a)),""].join(".")}(i.mockUserToken,n.app.options.projectId);r=new gt(a)}!function p_(n,e,t,i){n.repoInfo_=new Qi(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(o,e,t,r)}(t,o,parseInt(r,10))}return t}Oe.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Oe.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function w_(n){(function cd(n){qi=n})("9.11.0"),he(new ie("database",(e,{instanceIdentifier:t})=>__(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),Q(sr,"0.13.7",n),Q(sr,"0.13.7","esm2017")}();var xe=q(578),s=q(1571),C_=q(3597),rl=q(4818);const T_=["workarea"];function E_(n,e){if(1&n){const t=s.EpF();s.ynx(0),s.TgZ(1,"div",122)(2,"h4"),s._uU(3,"Path"),s.qZA(),s.TgZ(4,"div",96)(5,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(7),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement,"x"))}),s.TgZ(6,"input",123,124),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(7),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement,"x",+o.value))}),s.qZA(),s.TgZ(8,"span"),s._uU(9,"X"),s.qZA()(),s.TgZ(10,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(12),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement,"y"))}),s.TgZ(11,"input",123,125),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(12),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement,"y",+o.value))}),s.qZA(),s.TgZ(13,"span"),s._uU(14,"Y"),s.qZA()()()(),s.BQk()}if(2&n){const t=s.oxw(2);s.xp6(6),s.Q6J("value",t.selectedElement.x),s.xp6(5),s.Q6J("value",t.selectedElement.y)}}function A_(n,e){if(1&n){const t=s.EpF();s.ynx(0),s.TgZ(1,"div",126)(2,"h4"),s._uU(3,"Rectangle"),s.qZA(),s.TgZ(4,"div",96)(5,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(7),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement,"x"))}),s.TgZ(6,"input",123,127),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(7),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement,"x",+o.value))}),s.qZA(),s.TgZ(8,"span"),s._uU(9,"X"),s.qZA()(),s.TgZ(10,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(12),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement,"y"))}),s.TgZ(11,"input",123,128),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(12),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement,"y",+o.value))}),s.qZA(),s.TgZ(13,"span"),s._uU(14,"Y"),s.qZA()(),s.TgZ(15,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(17),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement.options,"width"))}),s.TgZ(16,"input",123,129),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(17),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement.options,"width",+o.value))}),s.qZA(),s.TgZ(18,"span",100),s._uU(19,"Width"),s.qZA()(),s.TgZ(20,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(22),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement.options,"height"))}),s.TgZ(21,"input",123,130),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(22),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement.options,"height",+o.value))}),s.qZA(),s.TgZ(23,"span",100),s._uU(24,"Height"),s.qZA()()()(),s.BQk()}if(2&n){const t=s.oxw(2);s.xp6(6),s.Q6J("value",t.selectedElement.x),s.xp6(5),s.Q6J("value",t.selectedElement.y),s.xp6(5),s.Q6J("value",t.selectedElement.options.width),s.xp6(5),s.Q6J("value",t.selectedElement.options.height)}}function I_(n,e){if(1&n){const t=s.EpF();s.ynx(0),s.TgZ(1,"div",131)(2,"h4"),s._uU(3,"Image"),s.qZA(),s.TgZ(4,"div",96)(5,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(7),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement,"x"))}),s.TgZ(6,"input",132,133),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(7),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement,"x",+o.value))}),s.qZA(),s.TgZ(8,"span"),s._uU(9,"X"),s.qZA()(),s.TgZ(10,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(12),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement,"y"))}),s.TgZ(11,"input",134,135),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(12),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement,"y",+o.value))}),s.qZA(),s.TgZ(13,"span"),s._uU(14,"Y"),s.qZA()(),s.TgZ(15,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(17),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement.options,"width"))}),s.TgZ(16,"input",123,136),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(17),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement.options,"width",+o.value))}),s.qZA(),s.TgZ(18,"span",100),s._uU(19,"Width"),s.qZA()(),s.TgZ(20,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(22),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement.options,"height"))}),s.TgZ(21,"input",123,137),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(22),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement.options,"height",+o.value))}),s.qZA(),s.TgZ(23,"span",100),s._uU(24,"Height"),s.qZA()()()(),s.BQk()}if(2&n){const t=s.oxw(2);s.xp6(6),s.Q6J("value",t.selectedElement.x),s.xp6(5),s.Q6J("value",t.selectedElement.y),s.xp6(5),s.Q6J("value",t.selectedElement.options.width),s.xp6(5),s.Q6J("value",t.selectedElement.options.height)}}function S_(n,e){if(1&n){const t=s.EpF();s.ynx(0),s.TgZ(1,"div",138)(2,"h4"),s._uU(3,"Ellipse"),s.qZA(),s.TgZ(4,"div",96)(5,"label",139),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(7),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement.options,"cx"))}),s.TgZ(6,"input",140,141),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(7),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement.options,"cx",+o.value))}),s.qZA(),s.TgZ(8,"span"),s._uU(9,"X"),s.qZA()(),s.TgZ(10,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(12),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement.options,"cy"))}),s.TgZ(11,"input",142,143),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(12),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement.options,"cy",+o.value))}),s.qZA(),s.TgZ(13,"span"),s._uU(14,"Y"),s.qZA()(),s.TgZ(15,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(17),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement.options,"rx"))}),s.TgZ(16,"input",144,145),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(17),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement.options,"rx",+o.value))}),s.qZA(),s.TgZ(18,"span"),s._uU(19,"Radius X"),s.qZA()(),s.TgZ(20,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(22),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement.options,"ry"))}),s.TgZ(21,"input",146,147),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(22),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement.options,"ry",+o.value))}),s.qZA(),s.TgZ(23,"span"),s._uU(24,"Radius Y"),s.qZA()()()(),s.BQk()}if(2&n){const t=s.oxw(2);s.xp6(6),s.Q6J("value",t.selectedElement.options.cx),s.xp6(5),s.Q6J("value",t.selectedElement.options.cy),s.xp6(5),s.Q6J("value",t.selectedElement.options.rx),s.xp6(5),s.Q6J("value",t.selectedElement.options.ry)}}function k_(n,e){if(1&n){const t=s.EpF();s.ynx(0),s.TgZ(1,"div",148)(2,"h4"),s._uU(3,"Line"),s.qZA(),s.TgZ(4,"div",96)(5,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(7),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement.options,"x1"))}),s.TgZ(6,"input",149,150),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(7),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement.options,"x1",+o.value))}),s.qZA(),s.TgZ(8,"span"),s._uU(9,"Start X"),s.qZA()(),s.TgZ(10,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(12),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement.options,"y1"))}),s.TgZ(11,"input",151,152),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(12),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement.options,"y1",+o.value))}),s.qZA(),s.TgZ(13,"span"),s._uU(14,"Start Y"),s.qZA()(),s.TgZ(15,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(17),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement.options,"x2"))}),s.TgZ(16,"input",153,154),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(17),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement.options,"x2",+o.value))}),s.qZA(),s.TgZ(18,"span"),s._uU(19,"End X"),s.qZA()(),s.TgZ(20,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(22),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement.options,"y2"))}),s.TgZ(21,"input",155,156),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(22),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement.options,"y2",+o.value))}),s.qZA(),s.TgZ(23,"span"),s._uU(24,"End Y"),s.qZA()()()(),s.BQk()}if(2&n){const t=s.oxw(2);s.xp6(6),s.Q6J("value",t.selectedElement.options.x1),s.xp6(5),s.Q6J("value",t.selectedElement.options.y1),s.xp6(5),s.Q6J("value",t.selectedElement.options.x2),s.xp6(5),s.Q6J("value",t.selectedElement.options.y2)}}function N_(n,e){if(1&n){const t=s.EpF();s.ynx(0),s.TgZ(1,"div",157)(2,"h4"),s._uU(3,"Text"),s.qZA(),s.TgZ(4,"div",96)(5,"label",158)(6,"input",159,160),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(7),r=s.oxw(2);return s.KtG(r.selectedElement.value=o.value)}),s.qZA(),s.TgZ(8,"span"),s._uU(9,"Content"),s.qZA()(),s.TgZ(10,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(12),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement,"x"))}),s.TgZ(11,"input",161,162),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(12),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement,"x",+o.value))}),s.qZA(),s.TgZ(13,"span"),s._uU(14,"X"),s.qZA()(),s.TgZ(15,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(17),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement,"y"))}),s.TgZ(16,"input",163,164),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(17),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement,"y",+o.value))}),s.qZA(),s.TgZ(18,"span"),s._uU(19,"Y"),s.qZA()(),s.TgZ(20,"div",165)(21,"span"),s._uU(22,"Font"),s.qZA(),s.TgZ(23,"div",166),s._uU(24),s.qZA(),s._UZ(25,"div",118)(26,"input",167),s.TgZ(27,"select",168,169),s.NdJ("change",function(){s.CHM(t);const o=s.MAs(28),r=s.oxw(2);return s.KtG(r.selectedElement.options.fontFamily=o.value)}),s.TgZ(29,"option",170),s._uU(30,"Arial"),s.qZA(),s.TgZ(31,"option",171),s._uU(32,"Arial Black"),s.qZA(),s.TgZ(33,"option",172),s._uU(34,"Comic Sans MS"),s.qZA(),s.TgZ(35,"option",173),s._uU(36,"Courier New"),s.qZA(),s.TgZ(37,"option",174),s._uU(38,"Georgia"),s.qZA(),s.TgZ(39,"option",175),s._uU(40,"Impact"),s.qZA(),s.TgZ(41,"option",176),s._uU(42,"Lucida Console"),s.qZA(),s.TgZ(43,"option",177),s._uU(44,"Lucida Sans Unicode"),s.qZA(),s.TgZ(45,"option",178),s._uU(46,"Monospace"),s.qZA(),s.TgZ(47,"option",179),s._uU(48,"Palatino Linotype"),s.qZA(),s.TgZ(49,"option",180),s._uU(50,"Sans-serif"),s.qZA(),s.TgZ(51,"option",181),s._uU(52,"Serif"),s.qZA(),s.TgZ(53,"option",182),s._uU(54,"Tahoma"),s.qZA(),s.TgZ(55,"option",183),s._uU(56,"Times New Roman"),s.qZA(),s.TgZ(57,"option",184),s._uU(58,"Trebuchet MS"),s.qZA(),s.TgZ(59,"option",185),s._uU(60,"Verdana"),s.qZA()()(),s.TgZ(61,"div",186)(62,"span"),s._uU(63,"Font Style"),s.qZA(),s.TgZ(64,"div",187),s.NdJ("click",function(){s.CHM(t);const o=s.oxw(2);return s.KtG(o.toggleFontWeight())}),s._uU(65,"B"),s.qZA(),s.TgZ(66,"div",188),s.NdJ("click",function(){s.CHM(t);const o=s.oxw(2);return s.KtG(o.toggleFontStyle())}),s._uU(67,"i "),s.qZA()(),s.TgZ(68,"label",189),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(70),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement.options,"fontSize"))}),s.TgZ(69,"input",190,191),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(70),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement.options,"fontSize",+o.value))}),s.qZA(),s.TgZ(71,"span",192),s._uU(72,"Font Size"),s.qZA()()()(),s.BQk()}if(2&n){const t=s.oxw(2);s.xp6(6),s.Q6J("value",t.selectedElement.value),s.xp6(5),s.Q6J("value",t.selectedElement.x),s.xp6(5),s.Q6J("value",t.selectedElement.y),s.xp6(7),s.Udp("font-family",t.selectedElement.options.fontFamily),s.xp6(1),s.hij(" ",t.selectedElement.options.fontFamily,""),s.xp6(3),s.Q6J("value",t.selectedElement.options.fontFamily),s.xp6(37),s.ekj("active","bold"===t.selectedElement.options.fontWeight),s.xp6(2),s.ekj("active","italic"===t.selectedElement.options.fontStyle),s.xp6(3),s.Q6J("value",t.selectedElement.options.fontSize)}}function R_(n,e){if(1&n){const t=s.EpF();s.ynx(0),s.TgZ(1,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(3),r=s.oxw(2);return s.KtG(r.onDragDown(o,r.selectedElement.options,"rx"))}),s.TgZ(2,"input",193,194),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(3),r=s.oxw(2);return s.KtG(r.setNumberValue(r.selectedElement.options,"rx",+o.value))}),s.qZA(),s.TgZ(4,"span",100),s._uU(5,"Roundness"),s.qZA(),s._UZ(6,"div",195),s.qZA(),s.BQk()}if(2&n){const t=s.oxw(2);s.xp6(2),s.Q6J("value",t.selectedElement.options.rx)}}function D_(n,e){1&n&&(s.ynx(0),s._uU(1,"\xb7\xb7\xb7"),s.BQk())}function M_(n,e){1&n&&(s.ynx(0),s._uU(1,"- -"),s.BQk())}function P_(n,e){1&n&&(s.ynx(0),s._uU(1,"-\xb7-"),s.BQk())}function L_(n,e){1&n&&(s.ynx(0),s._uU(1,"-\xb7\xb7-"),s.BQk())}function O_(n,e){1&n&&(s.ynx(0),s._uU(1,"\u2014"),s.BQk())}function Z_(n,e){1&n&&s.GkF(0)}function F_(n,e){if(1&n&&(s.ynx(0),s.YNc(1,Z_,1,0,"ng-container",196),s.BQk()),2&n){s.oxw(2);const t=s.MAs(47);s.xp6(1),s.Q6J("ngTemplateOutlet",t)}}function U_(n,e){if(1&n){const t=s.EpF();s.ynx(0)(1,93),s.YNc(2,E_,15,2,"ng-container",94),s.YNc(3,A_,25,4,"ng-container",94),s.YNc(4,I_,25,4,"ng-container",94),s.YNc(5,S_,25,4,"ng-container",94),s.YNc(6,k_,25,4,"ng-container",94),s.YNc(7,N_,73,12,"ng-container",94),s.TgZ(8,"div",95)(9,"div",96)(10,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(12),r=s.oxw();return s.KtG(r.onDragDown(o,r.selectedElement,"rotation"))}),s.TgZ(11,"input",98,99),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(12),r=s.oxw();return s.KtG(r.setNumberValue(r.selectedElement,"rotation",+o.value))}),s.qZA(),s.TgZ(13,"span",100),s._uU(14,"Rotation"),s.qZA(),s.TgZ(15,"div",101),s._UZ(16,"div",102),s.qZA()(),s.TgZ(17,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(19),r=s.oxw();return s.KtG(r.onDragDown(o,r.selectedElement,"opacity"))}),s.TgZ(18,"input",103,104),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(19),r=s.oxw();return s.KtG(r.setNumberValue(r.selectedElement,"opacity",+o.value))}),s.qZA(),s.TgZ(20,"span",105),s._uU(21,"Opacity"),s.qZA()(),s.YNc(22,R_,7,1,"ng-container",94),s.qZA()(),s.TgZ(23,"div",106)(24,"h4"),s._uU(25,"Stroke"),s.qZA(),s.TgZ(26,"div",96)(27,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(29),r=s.oxw();return s.KtG(r.onDragDown(o,r.selectedElement.options,"strokeWidth"))}),s.TgZ(28,"input",107,108),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(29),r=s.oxw();return s.KtG(r.setNumberValue(r.selectedElement.options,"strokeWidth",+o.value))}),s.qZA(),s.TgZ(30,"span",100),s._uU(31,"Width"),s.qZA(),s._UZ(32,"div",109),s.qZA(),s.TgZ(33,"div",110)(34,"span"),s._uU(35,"Dash"),s.qZA(),s.TgZ(36,"select",111,112),s.NdJ("change",function(){s.CHM(t);const o=s.MAs(37),r=s.oxw();return s.KtG(r.selectedElement.options.dasharray=o.value)}),s.TgZ(38,"option",113),s._uU(39,"\u2014"),s.qZA(),s.TgZ(40,"option",114),s._uU(41,"\xb7\xb7\xb7"),s.qZA(),s.TgZ(42,"option",115),s._uU(43,"- -"),s.qZA(),s.TgZ(44,"option",116),s._uU(45,"-\xb7-"),s.qZA(),s.TgZ(46,"option",117),s._uU(47,"-\xb7\xb7-"),s.qZA()(),s._UZ(48,"div",118),s.TgZ(49,"label",119),s.ynx(50,93),s.YNc(51,D_,2,0,"ng-container",94),s.YNc(52,M_,2,0,"ng-container",94),s.YNc(53,P_,2,0,"ng-container",94),s.YNc(54,L_,2,0,"ng-container",94),s.YNc(55,O_,2,0,"ng-container",120),s.BQk(),s.qZA()(),s.TgZ(56,"label",121)(57,"span",100),s._uU(58,"Stroke Join"),s.qZA()(),s.TgZ(59,"label",121)(60,"span",100),s._uU(61,"Stroke Cap"),s.qZA()()()(),s.YNc(62,F_,2,1,"ng-container",120),s.BQk()()}if(2&n){const t=s.oxw();s.xp6(1),s.Q6J("ngSwitch",t.selectedElement.type),s.xp6(1),s.Q6J("ngSwitchCase",t.elementTypeEnum.BRUSH),s.xp6(1),s.Q6J("ngSwitchCase",t.elementTypeEnum.RECT),s.xp6(1),s.Q6J("ngSwitchCase",t.elementTypeEnum.IMAGE),s.xp6(1),s.Q6J("ngSwitchCase",t.elementTypeEnum.ELLIPSE),s.xp6(1),s.Q6J("ngSwitchCase",t.elementTypeEnum.LINE),s.xp6(1),s.Q6J("ngSwitchCase",t.elementTypeEnum.TEXT),s.xp6(4),s.Q6J("value",t.selectedElement.rotation),s.xp6(4),s.Akn("transform: rotate("+t.selectedElement.rotation+"deg);"),s.xp6(3),s.Q6J("value",t.selectedElement.opacity),s.xp6(4),s.Q6J("ngSwitchCase",t.elementTypeEnum.RECT),s.xp6(6),s.Q6J("value",t.selectedElement.options.strokeWidth),s.xp6(8),s.Q6J("value",t.selectedElement.options.dasharray),s.xp6(14),s.Q6J("ngSwitch",t.selectedElement.options.dasharray),s.xp6(1),s.Q6J("ngSwitchCase","2,2"),s.xp6(1),s.Q6J("ngSwitchCase","5,5"),s.xp6(1),s.Q6J("ngSwitchCase","5,2,2,2"),s.xp6(1),s.Q6J("ngSwitchCase","5,2,2,2,2,2")}}function B_(n,e){1&n&&s.GkF(0)}function z_(n,e){if(1&n&&(s.ynx(0),s.YNc(1,B_,1,0,"ng-container",196),s.BQk()),2&n){s.oxw();const t=s.MAs(47);s.xp6(1),s.Q6J("ngTemplateOutlet",t)}}function q_(n,e){1&n&&(s.ynx(0),s._uU(1,"\xb7\xb7\xb7"),s.BQk())}function H_(n,e){1&n&&(s.ynx(0),s._uU(1,"- -"),s.BQk())}function W_(n,e){1&n&&(s.ynx(0),s._uU(1,"-\xb7-"),s.BQk())}function G_(n,e){1&n&&(s.ynx(0),s._uU(1,"-\xb7\xb7-"),s.BQk())}function V_(n,e){1&n&&(s.ynx(0),s._uU(1,"\u2014"),s.BQk())}function $_(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",197)(1,"h4"),s._uU(2,"Whiteboard"),s.qZA(),s.TgZ(3,"div",96)(4,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(6),r=s.oxw();return s.KtG(r.onDragDown(o,r.options,"canvasWidth"))}),s.TgZ(5,"input",198,199),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(6),r=s.oxw();return r.setNumberValue(r.options,"canvasWidth",+o.value),s.KtG(r.updateOptions())}),s.qZA(),s.TgZ(7,"span",100),s._uU(8,"Width"),s.qZA()(),s.TgZ(9,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(11),r=s.oxw();return s.KtG(r.onDragDown(o,r.options,"canvasHeight"))}),s.TgZ(10,"input",198,200),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(11),r=s.oxw();return r.setNumberValue(r.options,"canvasHeight",+o.value),s.KtG(r.updateOptions())}),s.qZA(),s.TgZ(12,"span",100),s._uU(13,"Height"),s.qZA()(),s.TgZ(14,"label",201)(15,"span"),s._uU(16,"Color"),s.qZA(),s.TgZ(17,"div",202)(18,"div",203),s.NdJ("change",function(o){s.CHM(t);const r=s.oxw();return s.KtG(r.options.backgroundColor=o)}),s.TgZ(19,"div",61),s._UZ(20,"div",204),s.TgZ(21,"div",205),s.O4$(),s.TgZ(22,"svg",206),s._UZ(23,"rect",207),s.qZA()()()()()(),s.kcU(),s.TgZ(24,"div",208)(25,"span"),s._uU(26,"Sizes"),s.qZA(),s.TgZ(27,"select",209,210),s.NdJ("change",function(){s.CHM(t);const o=s.MAs(28),r=s.oxw();return s.KtG(r.setSizeResolution(o.value))}),s.TgZ(29,"option",211),s._uU(30,"Custom"),s.qZA(),s.TgZ(31,"option",212),s._uU(32,"Fit to Content"),s.qZA(),s.TgZ(33,"optgroup",213)(34,"option",214),s._uU(35,"Twitter Post (1012 \xd7 506)"),s.qZA(),s.TgZ(36,"option",215),s._uU(37,"Twitter Header (1500 \xd7 500)"),s.qZA(),s.TgZ(38,"option",216),s._uU(39,"Facebook Post (1200 \xd7 630)"),s.qZA(),s.TgZ(40,"option",217),s._uU(41,"Facebook Cover (820 \xd7 312)"),s.qZA(),s.TgZ(42,"option",218),s._uU(43,"Instagram Post (1080 \xd7 1080)"),s.qZA(),s.TgZ(44,"option",219),s._uU(45,"Instagram Story (1080 \xd7 1920)"),s.qZA(),s.TgZ(46,"option",220),s._uU(47,"Dribble Shot (400 \xd7 300)"),s.qZA(),s.TgZ(48,"option",221),s._uU(49,"Dribble Shot HD (800 \xd7 600)"),s.qZA(),s.TgZ(50,"option",222),s._uU(51,"LinkedIn Cover (1584 \xd7 396)"),s.qZA()(),s.TgZ(52,"optgroup",223)(53,"option",224),s._uU(54,"16:9 (1920 \xd7 1080)"),s.qZA(),s.TgZ(55,"option",225),s._uU(56,"4:3 (1024 \xd7 768)"),s.qZA()(),s.TgZ(57,"optgroup",226)(58,"option",227),s._uU(59,"Desktop (1140 \xd7 1024)"),s.qZA(),s.TgZ(60,"option",228),s._uU(61,"MacBook (834 \xd7 1194)"),s.qZA(),s.TgZ(62,"option",229),s._uU(63,"MacBook Pro (1024 \xd7 1366)"),s.qZA(),s.TgZ(64,"option",230),s._uU(65,"Surface Book (1440 \xd7 990)"),s.qZA(),s.TgZ(66,"option",231),s._uU(67,"iMac (1368 \xd7 912)"),s.qZA()(),s.TgZ(68,"optgroup",232)(69,"option",233),s._uU(70,"iPad Mini (768 \xd7 1024)"),s.qZA(),s.TgZ(71,"option",228),s._uU(72,'iPad Pro 11" (834 \xd7 1194)'),s.qZA(),s.TgZ(73,"option",229),s._uU(74,'iPad Pro 12.9" (1024 \xd7 1366)'),s.qZA(),s.TgZ(75,"option",230),s._uU(76,"Surface Pro 3 (1440 \xd7 990)"),s.qZA(),s.TgZ(77,"option",231),s._uU(78,"Surface Pro 4 (1368 \xd7 912)"),s.qZA()(),s.TgZ(79,"optgroup",234)(80,"option",235),s._uU(81,"iPhone 11 ProMax (414 \xd7 896)"),s.qZA(),s.TgZ(82,"option",236),s._uU(83,"iPhone 11 Pro / X (375 \xd7 812)"),s.qZA(),s.TgZ(84,"option",237),s._uU(85,"iPhone 8 Plus (414 \xd7 736)"),s.qZA(),s.TgZ(86,"option",238),s._uU(87,"iPhone 8 (375 \xd7 667)"),s.qZA(),s.TgZ(88,"option",239),s._uU(89,"Google Pixel 2 (411 \xd7 731)"),s.qZA(),s.TgZ(90,"option",240),s._uU(91,"Google Pixel XL (411 \xd7 823)"),s.qZA(),s.TgZ(92,"option",241),s._uU(93,"Android (360 \xd7 640)"),s.qZA()(),s.TgZ(94,"optgroup",242)(95,"option",243),s._uU(96,"A4 (595 \xd7 842)"),s.qZA(),s.TgZ(97,"option",244),s._uU(98,"A5 (420 \xd7 595)"),s.qZA(),s.TgZ(99,"option",245),s._uU(100,"A6 (297 \xd7 420)"),s.qZA(),s.TgZ(101,"option",246),s._uU(102,"Letter (612 \xd7 792) "),s.qZA(),s.TgZ(103,"option",247),s._uU(104,"Tabloid (792 \xd7 1224)"),s.qZA()()(),s._UZ(105,"div",118),s.TgZ(106,"label",248),s._uU(107),s.qZA()()(),s.TgZ(108,"div",106)(109,"h4"),s._uU(110,"Stroke"),s.qZA(),s.TgZ(111,"div",96)(112,"label",97),s.NdJ("mousedown",function(){s.CHM(t);const o=s.MAs(114),r=s.oxw();return s.KtG(r.onDragDown(o,r.options,"strokeWidth"))}),s.TgZ(113,"input",107,108),s.NdJ("input",function(){s.CHM(t);const o=s.MAs(114),r=s.oxw();return s.KtG(r.setNumberValue(r.options,"strokeWidth",+o.value))}),s.qZA(),s.TgZ(115,"span",100),s._uU(116,"Width"),s.qZA(),s._UZ(117,"div",109),s.qZA(),s.TgZ(118,"div",110)(119,"span"),s._uU(120,"Dash"),s.qZA(),s.TgZ(121,"select",111,112),s.NdJ("change",function(){s.CHM(t);const o=s.MAs(122),r=s.oxw();return r.options.dasharray=o.value,s.KtG(r.updateOptions())}),s.TgZ(123,"option",113),s._uU(124,"\u2014"),s.qZA(),s.TgZ(125,"option",114),s._uU(126,"\xb7\xb7\xb7"),s.qZA(),s.TgZ(127,"option",115),s._uU(128,"- -"),s.qZA(),s.TgZ(129,"option",116),s._uU(130,"-\xb7-"),s.qZA(),s.TgZ(131,"option",117),s._uU(132,"-\xb7\xb7-"),s.qZA()(),s._UZ(133,"div",118),s.TgZ(134,"label",119),s.ynx(135,93),s.YNc(136,q_,2,0,"ng-container",94),s.YNc(137,H_,2,0,"ng-container",94),s.YNc(138,W_,2,0,"ng-container",94),s.YNc(139,G_,2,0,"ng-container",94),s.YNc(140,V_,2,0,"ng-container",120),s.BQk(),s.qZA()(),s.TgZ(141,"label",121)(142,"span",100),s._uU(143,"Stroke Join"),s.qZA()(),s.TgZ(144,"label",121)(145,"span",100),s._uU(146,"Stroke Cap"),s.qZA()()()()()}if(2&n){const t=s.MAs(28),i=s.oxw();s.xp6(5),s.Q6J("value",i.options.canvasWidth),s.xp6(5),s.Q6J("value",i.options.canvasHeight),s.xp6(13),s.uIk("fill",i.options.backgroundColor),s.xp6(84),s.Oqu(t.value),s.xp6(6),s.Q6J("value",i.options.strokeWidth),s.xp6(8),s.Q6J("value",i.options.dasharray),s.xp6(14),s.Q6J("ngSwitch",i.options.dasharray),s.xp6(1),s.Q6J("ngSwitchCase","2,2"),s.xp6(1),s.Q6J("ngSwitchCase","5,5"),s.xp6(1),s.Q6J("ngSwitchCase","5,2,2,2"),s.xp6(1),s.Q6J("ngSwitchCase","5,2,2,2,2,2")}}const Q_=[{path:"",component:(()=>{class n{constructor(t){this._whiteboardService=t,this.data=[],this.toolsEnum=Te.e9,this.elementTypeEnum=Te.DQ,this.selectedTool=Te.e9.BRUSH,this.options={strokeColor:"#ec407a",strokeWidth:5,fill:"#000",backgroundColor:"#fff",canvasHeight:600,canvasWidth:800},this.formatTypes=Te.a5,this.outerWidth=1200,this.outerHeight=750,this.zoom=1,this.x=0,this.y=0,this.loading=!1}ngOnInit(){const t=xs({apiKey:xe.N.apiKey,authDomain:xe.N.authDomain,projectId:xe.N.projectId,storageBucket:xe.N.storageBucket,messagingSenderId:xe.N.messagingSenderId,appId:xe.N.appId,measurementId:xe.N.measurementId,databaseURL:xe.N.databaseURL});!function sd(n=Cs()){const e=Ge(n=Ae(n),Qt);return e.isInitialized()?e.getImmediate():function rd(n,e={}){const t=Ge(n,Qt);if(t.isInitialized()){const o=t.getImmediate();if(Ht(e,t.getOptions()))return o;throw U.create("already-initialized")}return t.initialize({options:e})}(n)}(t);const o=Yo(sl(t),"data/");this.loading=!0,el(o,r=>{this.loading=!1;const a=r.val();this.data=a||[]})}ngAfterViewInit(){setTimeout(()=>{this.calculateSize()},0)}onDataChange(t){this.loading||(this.data=t,Xo(Yo(sl(),"data/"),t))}calculateSize(){const t=this.workarea.nativeElement,i={w:this.options.canvasWidth,h:this.options.canvasHeight};let o=t.clientWidth,r=t.clientHeight;const a=o,l=r,c=this.zoom;o=Math.max(a,i.w*c*2),r=Math.max(l,i.h*c*2);const h=o/2-a/2,d=r/2-l/2;this.outerWidth=o,this.outerHeight=r,this.updateSize(i.w,i.h),setTimeout(()=>{t.scrollLeft=h,t.scrollTop=d},0)}updateSize(t,i){this.options.canvasWidth=t,this.options.canvasHeight=i;const o=this.zoom,l=this.outerWidth/2-t*o/2,c=this.outerHeight/2-i*o/2;setTimeout(()=>{this.x=l,this.y=c},0)}zoomWheel(t){const i=t;(i.altKey||i.ctrlKey)&&(t.preventDefault(),this.setZoom(Math.trunc(100*this.zoom-i.deltaY/100*(i.altKey?10:5))))}setZoom(t){const i=this.zoom;let o=+t/100;o<.001&&(o=.1);const r={w:this.options.canvasWidth,h:this.options.canvasHeight};let a=null;null!=a&&window.cancelAnimationFrame(a);const l=Date.now(),u=o-i,h=()=>{let p=(Date.now()-l)/500;p=Math.pow(p-1,3)+1,this.zoom=i+u*p,this.updateSize(r.w,r.h),p<1&&p>-.9?a=requestAnimationFrame(h):(this.zoom=o,this.updateSize(r.w,r.h))};h()}setSizeResolution(t){let i=this.options.canvasWidth,o=this.options.canvasHeight;console.log(t);const r=[];if(r[0]=parseInt(t.split("x")[0]),r[1]=parseInt(t.split("x")[1]),"Custom"==t)return;"content"==t&&(r[0]=100,r[1]=100);const a=r[0]-i,l=r[1]-o;let c=null;null!=c&&window.cancelAnimationFrame(c);const u=Date.now(),d=()=>{let _=(Date.now()-u)/500;_=Math.pow(_-1,3)+1,i=parseInt((r[0]-a+_*a).toFixed(0)),o=parseInt((r[1]-l+_*l).toFixed(0)),this.updateSize(i,o),_<1&&_>-.9?c=requestAnimationFrame(d):this.updateSize(i,o)};d()}onDragDown(t,i,o){const r=t.min?parseInt(t.min,10):null,a=t.max?parseInt(t.max,10):null,l=parseInt(t.step,10);let c=200;r&&a&&(c=a-r>0?(a-r)/l:200);const u=c/70*l;let h=0,d=parseInt(t.value,10);const p=g=>{0===h&&(h=g.pageY);const x=-1*(g.pageY-h);h=g.pageY;let k=x*u*1;k.toFixed(l<1?1:0),k=Math.floor(Number(d)+Number(k)),null!==a&&(k=Math.min(k,a)),null!==r&&(k=Math.max(k,r)),d=k,i[o]=d,t.value=d.toString()},_=()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",_)};document.addEventListener("mousemove",p),document.addEventListener("mouseup",_)}setNumberValue(t,i,o){isNaN(o)||(t[i]=o)}toggleFontWeight(){this.selectedElement.options.fontWeight="normal"===this.selectedElement.options.fontWeight?"bold":"normal"}toggleFontStyle(){this.selectedElement.options.fontStyle="normal"===this.selectedElement.options.fontStyle?"italic":"normal"}newDocument(){this._whiteboardService.erase()}saveAs(t){this._whiteboardService.save(t)}addImage(t){if(t){const i=t.files;if(i){const o=new FileReader;o.onload=r=>{this._whiteboardService.addImage(r.target.result)},o.readAsDataURL(i[0])}}}undo(){this._whiteboardService.undo()}redo(){this._whiteboardService.redo()}colorChange(t,i){this.selectedElement?this.selectedElement.options[t]=i:(this.options[t]=i,this.updateOptions())}swapColors(){[this.options.fill,this.options.strokeColor]=[this.options.strokeColor,this.options.fill],this.updateOptions()}updateOptions(){this.options=Object.assign({},this.options)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(Te.vK))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-whiteboard-live-app"]],viewQuery:function(t,i){if(1&t&&s.Gf(T_,5),2&t){let o;s.iGM(o=s.CRH())&&(i.workarea=o.first)}},features:[s._Bn([Te.vK])],decls:130,vars:38,consts:[[1,"editor"],["id","rulers"],["id","ruler_corner"],["id","ruler_x"],["id","ruler_y"],["id","workarea",1,"select",2,"overflow","scroll",3,"mousewheel"],["workarea",""],["id","svgcanvas"],[3,"data","selectedTool","options","strokeWidth","zoom","canvasHeight","canvasWidth","x","y","fullScreen","strokeColor","fill","backgroundColor","dataChange","selectElement","toolChanged"],["whiteboard",""],["id","menu_bar",1,"active"],[1,"menu"],["title","New document",1,"menu_title",3,"click"],["viewBox","0 0 16 16","width","20","height","20"],["fill","#565a66","d","m9.5 1.1l3.4 3.5l.1.4v2h-1V6H8V2H3v11h4v1H2.5l-.5-.5v-12l.5-.5h6.7l.3.1zM9 2v3h2.9L9 2zm4 14h-1v-3H9v-1h3V9h1v3h3v1h-3v3z"],["title","Save Board",1,"menu_title"],["viewBox","0 0 20 20","width","20","height","20"],["d","M12.984 12.656l2.625-2.578 1.406 1.406-5.016 5.016-5.016-5.016 1.406-1.406 2.625 2.578v-9.656h1.969v9.656zM18.984 12h2.016v6.984q0 0.797-0.609 1.406t-1.406 0.609h-13.969q-0.797 0-1.406-0.609t-0.609-1.406v-6.984h2.016v6.984h13.969v-6.984z","fill","#565a66"],["id","file_menu",1,"menu_list","inverted-undo"],[1,"menu_item",3,"click"],["title","Add image",1,"menu_title"],["fill","#565a66","d","M4 5h13v7h2V5c0-1.103-.897-2-2-2H4c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h8v-2H4V5z"],["fill","#565a66","d","m8 11l-3 4h11l-4-6l-3 4z"],["fill","#565a66","d","M19 14h-2v3h-3v2h3v3h2v-3h3v-2h-3z"],["type","file",1,"file-input",3,"change"],["title","Undo",1,"menu_title",3,"click"],["fill","#565a66","d","M9 10h6c1.654 0 3 1.346 3 3s-1.346 3-3 3h-3v2h3c2.757 0 5-2.243 5-5s-2.243-5-5-5H9V5L4 9l5 4v-3z"],["title","Redo",1,"menu_title",3,"click"],["fill","#565a66","d","M9 18h3v-2H9c-1.654 0-3-1.346-3-3s1.346-3 3-3h6v3l5-4l-5-4v3H9c-2.757 0-5 2.243-5 5s2.243 5 5 5z"],["id","panels",1,"tools_panel"],[4,"ngIf"],["main_context_panel",""],["id","tools_left",1,"tools_panel"],["title","Select Tool",1,"tool_button",3,"click"],["viewBox","0 0 24 24","width","24","height","24"],["d","M17.15 20.76l-2.94 1.5-3.68-6-4.41 3V1.24l12.5 12.01-4.41 1.5 2.94 6z"],["title","Brush Tool",1,"tool_button",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","24","viewBox","0 0 24 24","width","24",2,"transform","scale(-1, 1)"],["d","M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"],["title","Image Tool",1,"tool_button",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","24","viewBox","0 0 24 24","width","24"],["d","M0 0h24v24H0z","fill","none"],["d","M17 7l-5 5 5 5V7zm-2 9.17L12.83 12 15 9.83 17.17 12 15 14.17zM3 3v18h18V3H3zm16 16H5V5h14v14z"],["title","Line Tool",1,"tool_button",3,"click"],["viewBox","0 0 27 27","xmlns","http://www.w3.org/2000/svg","width","24","height","24"],["d","M 3 1 L 26 24 L 24 26 L 1 3 L 3 1 Z"],["title","Square/Rect Tool",1,"tool_button",3,"click"],["d","M 0 8 L 0 24 L 24 24 L 25 8 L 0 8 Z"],["title","Ellipse/Circle Tool",1,"tool_button",3,"click"],["cx","13","cy","13","rx","13","ry","9"],["title","Text Tool",1,"tool_button",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","24","viewBox","2 2 20 20","width","27","height","27"],["d","M5 4v3h5.5v12h3V7H19V4z"],["title","Eraser Tool",1,"tool_button",3,"click"],["d","M19 13H5v-2h14v2z"],["id","color_tools"],["id","tool_switch","title","Switch stroke and fill colors [X]",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 11 11"],["d","M3.01 2A6 6 0 019 8h1.83l-2.91 2.91L5 8h2a4 4 0 00-3.99-4v1.93L.1 3.02 3.01.1V2z"],["id","tool_fill","ngx-colors-trigger","",1,"color_tool","active",3,"change"],["title","Change fill color",1,"icon_label"],[1,"color_block"],["id","fill_bg"],["id","fill_color",1,"color_block"],["xmlns","http://www.w3.org/2000/svg","width","100%"],["width","100%","height","100%","opacity","1"],["id","tool_stroke","ngx-colors-trigger","",1,"color_tool",3,"change"],["title","Change stroke color",1,"icon_label"],["id","stroke_bg"],["id","stroke_color","title","Change stroke color",1,"color_block"],["id","tools_bottom",1,"tools_panel"],["id","zoom_select",3,"change"],["zoomSelect",""],["value","6"],["value","12"],["value","16"],["value","25"],["value","50"],["value","75"],["value","100","selected","selected"],["value","150"],["value","200"],["value","300"],["value","400"],["value","600"],["value","800"],["value","1600"],["id","zoom_panel","title","Change zoom level",1,"toolset"],["id","zoom_label",1,"select-input"],["id","zoomLabel",1,"zoom_tool","icon_label"],["xmlns","http://www.w3.org/2000/svg","height","24","viewBox","2 2 20 20","width","27"],["d","M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"],["id","zoom","type","text","readonly","readonly",3,"value"],[3,"ngSwitch"],[4,"ngSwitchCase"],["id","selected_panel",1,"context_panel",2,"display","block"],[1,"draginputs"],[1,"draginput",3,"mousedown"],["step","2","min","-180","max","180","type","text",1,"attr_changer",3,"value","input"],["angle",""],[1,"icon_label"],["id","tool_angle_indicator",1,"angle"],["id","tool_angle_indicator_cursor",1,"angle-cursor"],["step","5","min","0","max","100","type","text",1,"attr_changer",3,"value","input"],["group_opacity",""],["id","group_opacityLabel",1,"icon_label"],["id","stroke_panel",1,"context_panel",2,"display","block"],["size","2","value","1","data-attr","stroke-width","min","0","max","99","step","1",3,"value","input"],["stroke_width",""],[1,"draginput_cursor",2,"top","68.9394px"],[1,"stroke_tool","draginput"],["id","stroke_style",3,"value","change"],["dasharray",""],["selected","selected","value","none"],["value","2,2"],["value","5,5"],["value","5,2,2,2"],["value","5,2,2,2,2,2"],[1,"caret"],["id","stroke_style_label"],[4,"ngSwitchDefault"],[2,"display","none"],["id","path_panel",1,"context_panel","clearfix",2,"display","block"],["type","text","min","","max","","step","1",1,"attr_changer",3,"value","input"],["path_x",""],["path_y",""],["id","rect_panel",1,"context_panel",2,"display","block"],["rect_x",""],["rect_y",""],["rect_width",""],["rect_height",""],["id","image_panel",1,"context_panel","clearfix",2,"display","block"],["title","Change X coordinate","type","text","min","","max","","step","1",1,"attr_changer",3,"value","input"],["image_x",""],["title","Change Y coordinate","type","text","min","","max","","step","1",1,"attr_changer",3,"value","input"],["image_y",""],["image_width",""],["image_height",""],["id","ellipse_panel",1,"context_panel",2,"display","block"],["id","tool_ellipse_cx",1,"draginput",3,"mousedown"],["title","Change ellipse's cx coordinate","type","text","min","","max","","step","1",1,"attr_changer",3,"value","input"],["ellipse_cx",""],["title","Change ellipse's cy coordinate","type","text","min","","max","","step","1",1,"attr_changer",3,"value","input"],["ellipse_cy",""],["title","Change ellipse's x radius","type","text","min","","max","","step","1",1,"attr_changer",3,"value","input"],["ellipse_rx",""],["title","Change ellipse's y radius","type","text","min","","max","","step","1",1,"attr_changer",3,"value","input"],["ellipse_ry",""],["id","line_panel",1,"context_panel","clearfix",2,"display","block"],["type","text","min","","max","","step","1","title","Change line's starting x coordinate",1,"attr_changer",3,"value","input"],["line_x1",""],["type","text","min","","max","","step","1","title","Change line's starting y coordinate",1,"attr_changer",3,"value","input"],["line_y1",""],["type","text","min","","max","","step","1","title","Change line's ending x coordinate",1,"attr_changer",3,"value","input"],["line_x2",""],["type","text","min","","max","","step","1","title","Change line's ending y coordinate",1,"attr_changer",3,"value","input"],["line_y2",""],["id","text_panel",1,"context_panel",2,"display","block"],["data-title","Change Content",1,"draginput","twocol","textcontent"],["id","text","type","text",3,"value","input"],["text",""],["type","text","min","","max","","step","1","title","Change text x coordinate",1,"attr_changer",3,"value","input"],["text_x",""],["type","text","min","","max","","step","1","title","Change text y coordinate",1,"attr_changer",3,"value","input"],["text_y",""],["id","tool_font_family",1,"toolset","draginput","twocol"],["id","preview_font"],["id","font_family","data-title","Change Font Family","size","12","type","hidden"],["id","font_family_dropdown",3,"value","change"],["font_family",""],["value","Arial"],["value","Arial Black"],["value","Comic Sans MS"],["value","Courier New"],["value","Georgia"],["value","Impact"],["value","Lucida Console"],["value","Lucida Sans Unicode"],["value","monospace","selected",""],["value","Palatino Linotype"],["value","sans-serif","selected",""],["value","serif","selected",""],["value","Tahoma"],["value","Times New Roman"],["value","Trebuchet MS"],["value","Verdana"],[1,"draginput","font_style"],["id","tool_bold","data-title","Bold Text [B]",3,"click"],["id","tool_italic","data-title","Italic Text [I]",3,"click"],["id","tool_font_size","data-title","Change Font Size",1,"draginput",3,"mousedown"],["type","text","min","0","max","","step","1","title","Change text font size",1,"attr_changer",3,"value","input"],["font_size",""],["id","font_sizeLabel",1,"icon_label"],["type","text","step","5","min","0","max","100",1,"attr_changer",3,"value","input"],["rect_rx",""],[1,"draginput_cursor",2,"top","70px"],[4,"ngTemplateOutlet"],["id","canvas_panel",1,"context_panel"],["type","text","min","10","max","","step","1","pattern","[0-9]*",3,"value","input"],["canvas_width",""],["canvas_height",""],["data-title","Change canvas color",1,"draginput"],["id","color_canvas_tools"],["id","tool_canvas","ngx-colors-trigger","",1,"color_tool","active",3,"change"],["id","canvas_bg"],["id","canvas_color"],["xmlns","http://www.w3.org/2000/svg","width","60.5"],["width","100%","height","100%"],[1,"draginput"],[3,"change"],["resolution",""],["id","selectedPredefined","selected","selected"],["id","fitToContent","value","content"],["label","Social Media"],["value","1012x506"],["value","1500x500"],["value","1200x630"],["value","820x312"],["value","1080x1080"],["value","1080x1920"],["value","400x300"],["value","800x600"],["value","1584x396"],["label","Presentation"],["value","1920x1080"],["value","1024x768"],["label","Desktop"],["value","1140x1024"],["value","834x1194"],["value","1024x1366"],["value","1440x990"],["value","1368x912"],["label","Tablet"],["value","768x1024"],["label","Phone"],["value","414x896"],["value","375x812"],["value","414x736"],["value","375x667"],["value","411x731"],["value","411x823"],["value","360x640"],["label","Paper"],["value","595x842"],["value","420x595"],["value","297x420"],["value","612x792"],["value","792x1224"],["id","resolution_label"]],template:function(t,i){if(1&t){const o=s.EpF();s.TgZ(0,"div",0)(1,"div",1),s._UZ(2,"div",2)(3,"div",3)(4,"div",4),s.qZA(),s.TgZ(5,"div",5,6),s.NdJ("mousewheel",function(a){return i.zoomWheel(a)}),s.TgZ(7,"div",7)(8,"ng-whiteboard",8,9),s.NdJ("dataChange",function(a){return i.onDataChange(a)})("selectElement",function(a){return i.selectedElement=a})("toolChanged",function(a){return i.selectedTool=a}),s.qZA()()(),s.TgZ(10,"div",10)(11,"div",11)(12,"div",12),s.NdJ("click",function(){return i.newDocument()}),s.O4$(),s.TgZ(13,"svg",13),s._UZ(14,"path",14),s.qZA()()(),s.kcU(),s.TgZ(15,"div",11)(16,"div",15),s.O4$(),s.TgZ(17,"svg",16),s._UZ(18,"path",17),s.qZA()(),s.kcU(),s.TgZ(19,"div",18)(20,"div",19),s.NdJ("click",function(){return i.saveAs(i.formatTypes.Png)}),s._uU(21,"Save as PNG"),s.qZA(),s.TgZ(22,"div",19),s.NdJ("click",function(){return i.saveAs(i.formatTypes.Jpeg)}),s._uU(23,"Save as JPEG"),s.qZA(),s.TgZ(24,"div",19),s.NdJ("click",function(){return i.saveAs(i.formatTypes.Svg)}),s._uU(25,"Save as SVG"),s.qZA(),s.TgZ(26,"div",19),s.NdJ("click",function(){return i.saveAs(i.formatTypes.Base64)}),s._uU(27,"Copy Base-64"),s.qZA()()(),s.TgZ(28,"div",11)(29,"label",20),s.O4$(),s.TgZ(30,"svg",16),s._UZ(31,"path",21)(32,"path",22)(33,"path",23),s.qZA(),s.kcU(),s.TgZ(34,"input",24),s.NdJ("change",function(a){return i.addImage(a.target)}),s.qZA()()(),s.TgZ(35,"div",11)(36,"div",25),s.NdJ("click",function(){return i.undo()}),s.O4$(),s.TgZ(37,"svg",16),s._UZ(38,"path",26),s.qZA()()(),s.kcU(),s.TgZ(39,"div",11)(40,"div",27),s.NdJ("click",function(){return i.redo()}),s.O4$(),s.TgZ(41,"svg",16),s._UZ(42,"path",28),s.qZA()()()(),s.kcU(),s.TgZ(43,"div",29),s.YNc(44,U_,63,19,"ng-container",30),s.YNc(45,z_,2,1,"ng-container",30),s.YNc(46,$_,147,11,"ng-template",null,31,s.W1O),s.qZA(),s.TgZ(48,"div",32)(49,"div",33),s.NdJ("click",function(){return i.selectedTool=i.toolsEnum.SELECT}),s.O4$(),s.TgZ(50,"svg",34),s._UZ(51,"path",35),s.qZA()(),s.kcU(),s.TgZ(52,"div",36),s.NdJ("click",function(){return i.selectedTool=i.toolsEnum.BRUSH}),s.O4$(),s.TgZ(53,"svg",37),s._UZ(54,"path",38),s.qZA()(),s.kcU(),s.TgZ(55,"div",39),s.NdJ("click",function(){return i.selectedTool=i.toolsEnum.IMAGE}),s.O4$(),s.TgZ(56,"svg",40),s._UZ(57,"path",41)(58,"path",42),s.qZA()(),s.kcU(),s.TgZ(59,"div",43),s.NdJ("click",function(){return i.selectedTool=i.toolsEnum.LINE}),s.O4$(),s.TgZ(60,"svg",44),s._UZ(61,"path",45),s.qZA()(),s.kcU(),s.TgZ(62,"div",46),s.NdJ("click",function(){return i.selectedTool=i.toolsEnum.RECT}),s.O4$(),s.TgZ(63,"svg",44),s._UZ(64,"path",47),s.qZA()(),s.kcU(),s.TgZ(65,"div",48),s.NdJ("click",function(){return i.selectedTool=i.toolsEnum.ELLIPSE}),s.O4$(),s.TgZ(66,"svg",44),s._UZ(67,"ellipse",49),s.qZA()(),s.kcU(),s.TgZ(68,"div",50),s.NdJ("click",function(){return i.selectedTool=i.toolsEnum.TEXT}),s.O4$(),s.TgZ(69,"svg",51),s._UZ(70,"path",52),s.qZA()(),s.kcU(),s.TgZ(71,"div",53),s.NdJ("click",function(){return i.selectedTool=i.toolsEnum.ERASER}),s.O4$(),s.TgZ(72,"svg",40),s._UZ(73,"path",41)(74,"path",54),s.qZA()(),s.kcU(),s.TgZ(75,"div",55)(76,"div",56),s.NdJ("click",function(){return i.swapColors()}),s.O4$(),s.TgZ(77,"svg",57),s._UZ(78,"path",58),s.qZA()(),s.kcU(),s.TgZ(79,"div",59),s.NdJ("change",function(a){return i.colorChange("fill",a)}),s._UZ(80,"label",60),s.TgZ(81,"div",61),s._UZ(82,"div",62),s.TgZ(83,"div",63),s.O4$(),s.TgZ(84,"svg",64),s._UZ(85,"rect",65),s.qZA()()()(),s.kcU(),s.TgZ(86,"div",66),s.NdJ("change",function(a){return i.colorChange("strokeColor",a)}),s._UZ(87,"label",67),s.TgZ(88,"div",61),s._UZ(89,"div",68),s.TgZ(90,"div",69),s.O4$(),s.TgZ(91,"svg",64),s._UZ(92,"rect",65),s.qZA()()()()()(),s.kcU(),s.TgZ(93,"div",70)(94,"select",71,72),s.NdJ("change",function(){s.CHM(o);const a=s.MAs(95);return s.KtG(i.setZoom(a.value))}),s.TgZ(96,"option",73),s._uU(97,"6%"),s.qZA(),s.TgZ(98,"option",74),s._uU(99,"12%"),s.qZA(),s.TgZ(100,"option",75),s._uU(101,"16%"),s.qZA(),s.TgZ(102,"option",76),s._uU(103,"25%"),s.qZA(),s.TgZ(104,"option",77),s._uU(105,"50%"),s.qZA(),s.TgZ(106,"option",78),s._uU(107,"75%"),s.qZA(),s.TgZ(108,"option",79),s._uU(109,"100%"),s.qZA(),s.TgZ(110,"option",80),s._uU(111,"150%"),s.qZA(),s.TgZ(112,"option",81),s._uU(113,"200%"),s.qZA(),s.TgZ(114,"option",82),s._uU(115,"300%"),s.qZA(),s.TgZ(116,"option",83),s._uU(117,"400%"),s.qZA(),s.TgZ(118,"option",84),s._uU(119,"600%"),s.qZA(),s.TgZ(120,"option",85),s._uU(121,"800%"),s.qZA(),s.TgZ(122,"option",86),s._uU(123,"1600%"),s.qZA()(),s.TgZ(124,"div",87)(125,"div",88)(126,"span",89),s.O4$(),s.TgZ(127,"svg",90),s._UZ(128,"path",91),s.qZA()(),s.kcU(),s._UZ(129,"input",92),s.qZA()()()()}2&t&&(s.xp6(7),s.Udp("width",i.outerWidth,"px")("height",i.outerHeight,"px"),s.xp6(1),s.Q6J("data",i.data)("selectedTool",i.selectedTool)("options",i.options)("strokeWidth",i.options.strokeWidth)("zoom",i.zoom)("canvasHeight",i.options.canvasHeight)("canvasWidth",i.options.canvasWidth)("x",i.x)("y",i.y)("fullScreen",!1)("strokeColor",i.options.strokeColor)("fill",i.options.fill)("backgroundColor",i.options.backgroundColor),s.xp6(36),s.Q6J("ngIf",i.selectedElement),s.xp6(1),s.Q6J("ngIf",!i.selectedElement),s.xp6(4),s.ekj("active",i.selectedTool===i.toolsEnum.SELECT),s.xp6(3),s.ekj("active",i.selectedTool===i.toolsEnum.BRUSH),s.xp6(3),s.ekj("active",i.selectedTool===i.toolsEnum.IMAGE),s.xp6(4),s.ekj("active",i.selectedTool===i.toolsEnum.LINE),s.xp6(3),s.ekj("active",i.selectedTool===i.toolsEnum.RECT),s.xp6(3),s.ekj("active",i.selectedTool===i.toolsEnum.ELLIPSE),s.xp6(3),s.ekj("active",i.selectedTool===i.toolsEnum.TEXT),s.xp6(3),s.ekj("active",i.selectedTool===i.toolsEnum.ERASER),s.xp6(14),s.uIk("fill",i.options.fill),s.xp6(7),s.uIk("fill",i.options.strokeColor),s.xp6(37),s.Q6J("value",100*i.zoom+"%"))},dependencies:[ee.O5,ee.tP,ee.RF,ee.n9,ee.ED,C_.v,rl.u_],styles:['@charset "UTF-8";.demo{width:100%;height:768px;border:2px dashed #ccc;background:#fff;overflow:hidden;position:relative}.editor{--z0: #111827;--z1: #1e2433;--a1: #421f24;--b1: #45322a;--c1: #1c3b3b;--z2: #2b313f;--z3: #393e4c;--z4: #474c59;--z5: #565a66;--z6: #656974;--z7: #747782;--a7: #d4100b;--z8: #848790;--z9: #94969f;--z10: #a4a6ae;--z12: #c5c7cc;--z13: #d6d8db;--z14: #e7e9eb;--z15: #f9fafb;--d0: #152239;--d1: #1a3050;--d4: #1e5a9d;--d6: #1779d4;--d7: #0b89f0;--d8: #3797ff;--d9: #62a3ff;--d13: #c3d4fd;--d14: #d7e2fd;--d15: #eaeffc;-webkit-font-smoothing:antialiased;--shadow-bg: 0 var(--x2) var(--x4) var(--z0);--shadow: 0 var(--x1) var(--x8) rgba(0, 0, 0, .4);--accent1: var(--d1);--accent4: var(--d4);--accent6: var(--d6);--accent7: var(--d7);--accent8: var(--d8);--accent9: var(--d9);--accent13: var(--d13);--accent14: var(--d14);--accent15: var(--d15);--x1: 4px;--x2: 8px;--x3: 12px;--x4: 16px;--x5: 20px;--x6: 24px;--x7: 28px;--x8: 32px;--x9: 36px;--x10: 40px;--x12: 48px;--x13: 52px;--x16: 64px;--mono-font: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;--panel-width: calc(var(--x10) * 2 * 2 + var(--x1));--transition-duration: .2s;--transition: all var(--transition-duration) ease}.editor{background:var(--z1);font:14px/120% -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;margin:0;padding:0}::selection{background:#000;color:#fff}::-moz-selection{background:#000;color:#fff}.editor{overscroll-behavior-x:none;overflow:hidden;width:100%;height:100%}::-webkit-scrollbar{width:var(--x1);height:var(--x1);background:transparent;position:absolute}::-webkit-scrollbar-track{border-radius:10px;background:transparent}::-webkit-scrollbar-thumb{border-radius:10px;background:var(--z3)}::-webkit-scrollbar-corner{background:transparent}input[type=submit],input[type=button],button{background:var(--accent7);color:var(--z15);border-radius:var(--x1);padding:var(--x2) var(--x4);border:none;line-height:140%;font-size:16px;font-weight:550;cursor:pointer}input[type=submit]:hover,input[type=button]:hover,button:hover{background:var(--accent9)}input[type=submit]:active,input[type=button]:active,button:active{box-shadow:0 0 0 var(--x1) var(--accent14);outline:none}input[type=submit]:focus,input[type=button]:focus,button:focus{outline:none}button.cancel,input.Cancel,input.cancel,input.jGraduate_Cancel,button.cancel{-webkit-appearance:none;background-color:var(--z12);color:var(--z3);margin:0}#canvas_panel{display:block}#tool_bold span,#tool_italic span{position:absolute;width:100%;height:100%;top:0;left:0;background:#ccc;opacity:0}#tools_bottom{position:absolute;left:var(--x12);right:0;bottom:0;height:var(--x10);overflow:visible}.clearfix:before,.clearfix:after{content:"";display:table}.clearfix:after{clear:both}#color_canvas_tools,#fill_bg,#stroke_bg{background:var(--z15) url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMAQMAAABsu86kAAAAA3NCSVQICAjb4U/gAAAABlBMVEXu7u7///8o06qaAAAACXBIWXMAAAsSAAALEgHS3X78AAAAFXRFWHRDcmVhdGlvbiBUaW1lADcvMjIvMTL7FNdCAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M1cbXjNgAAABFJREFUCJljYP7AgIb+MKAhAM8/C5vWL6zSAAAAAElFTkSuQmCC) top left repeat}#color_canvas_tools{width:60px;height:40px;margin:23px 5px 5px;position:relative;overflow:hidden}#color_canvas_tools{display:block}#stroke_style_label{font-size:30px;margin-top:33px;letter-spacing:-1px}.stroke_tool .caret{top:60%}.draginputs{display:flex;flex-direction:row;justify-content:flex-start;flex-wrap:wrap}.draginput{background-color:var(--z2);border-radius:var(--x1);width:calc(50% - var(--x2));height:calc(var(--x9) * 2);display:block;position:relative;margin:0 var(--x2) var(--x2) 0;overflow:hidden;transition:var(--transition);box-shadow:none}.dragging .draginput{pointer-events:none}.dragging .draginput.active{pointer-events:all;box-shadow:none}.draginput:hover{background-color:var(--z3);transition:none;box-shadow:var(--shadow-bg)}.draginput:hover span,.draginput.active span{color:var(--z15)}.draginput:hover input,.draginput.active input{color:var(--accent8)}.draginput.active,.draginput.active:hover{background-color:var(--z0)}.draginput.active:hover{transition:none}.draginput .caret{border:solid transparent 5px;border-top-color:var(--z9);position:absolute;width:0;height:0;right:5px;margin-top:-2px;top:50%}.draginput label{margin:28px 10px 0 5px;font-size:14px;color:var(--z15);font-weight:700}.draginput label#resolution_label,.draginput label#seg_type_label{font:700 12px/110% sans-serif;position:absolute;left:auto;right:10px;z-index:0;text-align:right}.draginput label#seg_type_label{margin-top:40px}.draginput label#seg_type_label .caret{top:66%}.draginput label#resolution_label .pull{position:relative;left:-15px}.draginput label#resolution_label span{right:-13px;left:auto;font-size:16px;top:2px;font-weight:700;color:#fff}.draginput input{border:none;background:transparent;font:24px/normal sans-serif;text-align:center;color:var(--accent7);padding:30px 0 16px;width:100%;height:24px;position:relative;z-index:2}.draginput input::selection{background:var(--accent9)}.draginput.text-input input,.draginput.text-input input:hover,.draginput.text-input input:active{cursor:text}.draginput.text-input input{text-align:left;text-indent:var(--x2)}.draginput.textcontent input{cursor:text;text-align:left;text-indent:var(--x2)}.draginput.textcontent input,.draginput.textcontent input:hover,.draginput.textcontent input:active{cursor:text}.draginput input,.draginput input:hover,.draginput input:active{cursor:grab;cursor:-moz-grab}.draginput input[type=checkbox],.draginput input[type=checkbox]:hover,.draginput input[type=checkbox]:active{cursor:pointer}.draginput input:invalid{color:var(--a7)}.draginput span{font:12px/130% sans-serif;color:var(--z8);display:block;position:absolute;top:5px;left:5px;text-align:left;white-space:nowrap;z-index:1}.draginput select{-webkit-appearance:none;opacity:0;display:block;position:absolute;height:100%;width:100%;margin:0;z-index:1;top:0;left:0;cursor:pointer}.draginput:hover .draginput_cursor{border-color:var(--accent6)}.draginput_cursor{position:absolute;top:50%;width:100%;border-top:solid var(--accent4) 1px;z-index:0}.draginput input[readonly=readonly]{-webkit-appearance:none;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.draginput input:focus{background:var(--accent7);color:var(--accent15);outline:none;box-shadow:0 0 5px 2px var(--accent7)}.draginput input:focus+span{z-index:10;color:var(--z15)}.draginput .push_bottom{bottom:0;position:absolute}.draginput .angle{width:var(--x12);height:var(--x12);border-radius:var(--x12);background-color:var(--z3);position:absolute;bottom:var(--x1);left:14px}.editor.dragging .draginput .angle{background-color:var(--z1)}.draginput:hover .angle{background:var(--z4)}.draginput .angle-cursor{width:4px;height:25px;border-top:solid var(--accent7) 3px;position:absolute;margin:0 0 0 23px;transform-origin:50% 0}#menu_bar{padding:0 0 0 var(--x12);position:relative;z-index:2;height:var(--x8);display:flex}#menu_bar .menu:hover .menu_list{display:block}.menu{position:relative;z-index:5;color:var(--z3);display:inline-block}.menu_title{cursor:pointer;display:inline-block;z-index:10;color:var(--z15);position:relative;line-height:var(--x8);padding:0 var(--x3);vertical-align:top}.menu .menu_title:hover{background:var(--z2)}.menu_list .separator{margin:var(--x1) 0;border-top:solid var(--z14) 1px}.menu_list{position:absolute;left:0;top:var(--x8);white-space:nowrap;background:var(--z15);padding:var(--x2) 0;border-radius:0 var(--x2) var(--x2) var(--x2);box-shadow:var(--shadow)}#menu_bar.active .menu.open .menu_title{background:var(--z15);color:var(--z1)}.menu .menu_list{display:none;position:absolute}.menu_list .menu_item{position:relative;overflow:hidden;line-height:var(--x6);padding:var(--x1) var(--x16) var(--x1) var(--x6);cursor:pointer;color:var(--z3)}.file-input{-webkit-appearance:none;position:absolute;opacity:0;cursor:pointer;left:0;right:0;top:0;bottom:0;display:block;background:red;z-index:100}.menu_list .menu_item.tool_button{background:transparent;border:none;margin:0;padding:var(--x1) var(--x16) var(--x1) var(--x6);height:auto;width:auto}.menu_list .menu_item.push_button_pressed:before{content:"\\2714";position:absolute;display:block;left:6px;top:var(--x1)}.menu_list .menu_item:hover,.menu_list .menu_item.push_button_pressed:hover{background:var(--accent15);color:#000}.menu_list .menu_item.disabled:hover,.menu_list .menu_item.push_button_pressed.disabled:hover{background:transparent;color:var(--z3)}.menu_list .menu_item.push_button_pressed{background:transparent;border:none;width:auto;height:auto;margin:0}.menu_list .menu_item span{display:block;position:absolute;right:var(--x2);padding:0 var(--x2);background:var(--z14);top:50%;transform:translateY(-50%);text-align:center;font-size:12px;line-height:var(--x6);border-radius:var(--x1);font-weight:600}.menu_list .menu_item:not(.disabled):hover span{background:var(--accent13)}.menu-right button:hover svg{fill:var(--z12)}.menu-right svg{fill:var(--z5)}#logo svg{pointer-events:none;margin-top:var(--x2);fill:var(--z7)}#logo svg path:last-child{fill:var(--z13)}#logo:hover svg{fill:var(--z9)}#logo svg path:last-child{fill:var(--z15)}#rulers>div{position:absolute;background:var(--z2);z-index:1;overflow:hidden;-webkit-font-smoothing:none}#rulers #ruler_corner{top:var(--x8);left:var(--x12);width:var(--x4);height:var(--x4);z-index:2;border-radius:var(--x2) 0 0 0}#ruler_x{height:var(--x4);top:var(--x8);left:var(--x12);right:calc(var(--panel-width) + var(--x4));overflow:hidden;border-radius:var(--x2)}#ruler_y{width:var(--x4);top:var(--x8);left:var(--x12);bottom:var(--x10);overflow:hidden;border-radius:var(--x2)}#ruler_x>div,#ruler_y>div{overflow:hidden}#stroke_color:after{content:"";position:absolute;display:block;left:var(--x1);right:var(--x1);top:var(--x1);bottom:var(--x1);background:var(--z1);box-shadow:0 0 0 1px var(--z13)}#tool_switch{cursor:pointer;width:11px;height:11px;position:absolute;top:-5px;right:0;cursor:nwse-resize}#tool_switch svg{fill:var(--z6)}#tool_switch:hover svg{fill:var(--z15)}.color_block{width:var(--x5);height:var(--x5);overflow:hidden;border:solid var(--z12) 1px;cursor:pointer}.color_block svg{width:22px;height:22px}#tool_stroke .color_block>div{position:absolute;bottom:0;right:0}#color_tools{position:relative;width:48px;height:48px;margin:12px 6px 0}#color_tools{width:auto;height:auto}#tool_fill{position:absolute;top:0;left:0;z-index:1}#tool_stroke{top:14px;left:14px}#tool_fill,#tool_stroke,#tool_canvas{box-shadow:0 0 0 1px var(--z0);position:absolute}#tool_canvas .color_block{width:58px;height:38px}#tool_canvas .color_block svg{width:auto;height:auto}#shape_cats>div{padding:0 var(--x4);background:var(--z14);color:var(--z6);height:var(--x7);line-height:var(--x7);transition:background-color .1s ease}#svgcanvas{background-color:var(--z2);display:block;width:100%;height:100%}#workarea{display:block;position:absolute;top:var(--x8);left:var(--x12);bottom:var(--x10);right:calc(var(--panel-width) + var(--x4));background-color:var(--z2);overflow:auto;align-items:center;justify-content:center;transition:transform .5s cubic-bezier(.13,.66,.24,.92);border-radius:var(--x2);box-shadow:var(--shadow-bg)}#tools_left{position:absolute;border-right:none;width:var(--x12);top:var(--x8);bottom:0;left:0;z-index:4}.tool_button{height:var(--x12);width:var(--x12);cursor:pointer;line-height:60px;text-align:center;transform:scale(.8)}.tool_button:hover{transform:scale(1)}.tool_button:hover svg{fill:var(--z13)}.tool_button.active{transform:scale(1.4)}.tool_button svg{vertical-align:center;fill:var(--z5)}.tool_button.active svg{fill:var(--accent8)}.tool_button.active svg{fill:var(--accent7)}.tool_button.disabled svg{background-color:#aaa;cursor:not-allowed;fill:var(--z3);pointer-events:none}#tool_rect svg{position:relative;top:-1px;left:1px}#tool_ellipse svg{position:relative;top:2px;left:1px}.select-input{margin:var(--x2) 0;position:relative}.select-input:after{content:"\\2193";font-weight:700;position:absolute;right:var(--x6);top:50%;color:var(--z7);transform:translateY(-50%)}.select-input select{-webkit-appearance:none;background-color:var(--z3);color:var(--z14);height:var(--x8);display:block;width:calc(100% - var(--x2));padding:0 var(--x4);border:none;border-radius:var(--x1)}.select-input select:focus{outline:none;box-shadow:0 0 0 1px var(--accent7)}#panels{position:absolute;box-sizing:border-box;width:var(--panel-width);right:var(--x1);top:var(--x5);bottom:0;border-bottom:none;overflow:auto;padding:0}.context_panel{display:none}.context_panel h4{color:var(--z15);font-weight:400;margin:0;padding:10px 0 5px}.context_panel label{display:block;color:var(--z13);white-space:nowrap}#align_tools{display:none}.align_buttons{margin-bottom:var(--x2)}.align_button,.align_button *{transition:var(--transition)}.align_button:hover,.align_button:hover *{transition:none}.align_button{float:left;height:var(--x13);width:var(--x13);line-height:var(--x16);text-align:center;cursor:pointer;position:relative}.align_button:hover{background-color:var(--z0);border-color:var(--z3)}.align_button svg{fill:var(--z10)}.align_button:hover svg{fill:var(--z15);transition:none}.align_button:nth-child(1){border-radius:var(--x1) 0 0 0}.align_button:nth-child(3){border-radius:0 var(--x1) 0 0}.align_button:nth-child(4){border-radius:0 0 0 var(--x1)}.align_button:nth-child(6){border-radius:0 0 var(--x1) 0}.align_buttons .push_button{display:block;float:left}#tool_bold,#tool_italic{font:700 20px/35px serif;text-align:center;position:absolute;padding:0;color:var(--z13);background:transparent;border:none;margin:0;width:50%;top:var(--x8);line-height:var(--x10);bottom:0;border-top:solid var(--z1) 2px;cursor:pointer}#tool_bold{right:0}#tool_italic{border-right:solid var(--z1) 2px;line-height:var(--x9);left:0;font-weight:700;font-style:italic;font-size:24px}#tool_bold:hover,#tool_italic:hover{color:var(--z15);background-color:var(--z3)}#tool_bold.disabled,#tool_italic.disabled{opacity:1;color:var(--z4);pointer-events:none}#tool_bold.active,#tool_italic.active{color:#50a0ff}#preview_font{color:var(--z15);font-size:2em;line-height:80px;padding:0 var(--x2);white-space:nowrap}#preview_font+.caret{right:var(--x2)}.draginput:hover #preview_font:after{border-right-color:var(--z3);background:linear-gradient(to right,rgba(0,0,0,0),var(--z3))}#preview_font:after{content:"";position:absolute;right:0;top:3px;bottom:3px;width:15px;border-right:solid var(--z2) 10px;background:linear-gradient(to right,rgba(0,0,0,0),var(--z2))}#zoom_panel,#zoom_select{padding:var(--x2) 0;right:calc(var(--panel-width) + var(--x2));position:absolute;cursor:pointer;width:100px}#zoom_label:after{content:""}#zoom_select{opacity:0;z-index:100}#zoom_select:hover+div{opacity:1}#zoom_label{position:absolute;background:transparent;width:100%;margin:0}#zoom_panel .caret{margin-top:-5px}#zoom_label img,#zoom_label svg{width:var(--x4);height:var(--x4)}#zoomLabel{width:var(--x4);height:var(--x4);cursor:pointer}#zoomLabel svg{fill:var(--z10);position:relative;top:2px}#zoom_label input{-webkit-appearance:none;color:var(--z10);font-size:13px;height:auto;width:var(--x12);padding:0;cursor:default;position:absolute;background:transparent;border:none;top:2px;left:var(--x6);pointer-events:none}#zoom_label select{-webkit-appearance:none;position:absolute;top:0;left:0;bottom:0;right:0}#zoom_label span{top:0;left:0}\n'],encapsulation:3}),n})()}];let j_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[is.Bz.forChild(Q_),is.Bz]}),n})(),J_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[ee.ez,j_,Te.ZK,rl.To]}),n})()},9163:ns=>{function ue(q){var ee=new Error("Cannot find module '"+q+"'");throw ee.code="MODULE_NOT_FOUND",ee}ue.keys=()=>[],ue.resolve=ue,ue.id=9163,ns.exports=ue}}]);