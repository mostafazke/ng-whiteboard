"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[700],{700:(sf,tr,Q)=>{Q.r(tr),Q.d(tr,{LiveAppModule:()=>tf});var Be=Q(6814),nr=Q(4487),Ce=Q(5185),b=Q(9671);const f=function(n,e){if(!n)throw ze(e)},ze=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},ir=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=63&s|128):55296==(64512&s)&&i+1<n.length&&56320==(64512&n.charCodeAt(i+1))?(s=65536+((1023&s)<<10)+(1023&n.charCodeAt(++i)),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=63&s|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=63&s|128)}return e},Pn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const o=n[s],a=s+1<n.length,l=a?n[s+1]:0,c=s+2<n.length,u=c?n[s+2]:0;let p=(15&l)<<2|u>>6,_=63&u;c||(_=64,a||(p=64)),i.push(t[o>>2],t[(3&o)<<4|l>>4],t[p],t[_])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ir(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[i++]=String.fromCharCode((31&s)<<6|63&o)}else if(s>239&&s<365){const c=((7&s)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(1023&c))}else{const o=n[t++],a=n[t++];e[i++]=String.fromCharCode((15&s)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],l=s<n.length?t[n.charAt(s)]:0;++s;const u=s<n.length?t[n.charAt(s)]:64;++s;const d=s<n.length?t[n.charAt(s)]:64;if(++s,null==o||null==l||null==u||null==d)throw new ol;i.push(o<<2|l>>4),64!==u&&(i.push(l<<4&240|u>>2),64!==d&&i.push(u<<6&192|d))}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ol extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sr=function(n){const e=ir(n);return Pn.encodeByteArray(e,!0)},Ft=function(n){return sr(n).replace(/\./g,"")},Ln=function(n){try{return Pn.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function al(n){return rr(void 0,n)}function rr(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!ll(t)||(n[t]=rr(n[t],e[t]));return n}function ll(n){return"__proto__"!==n}const Ut=()=>{try{return function cl(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Ln(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},or=()=>{var n;return null===(n=Ut())||void 0===n?void 0:n.config};class ot{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,i))}}}function ar(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(function Bt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}())}function lr(){try{return"object"==typeof indexedDB}catch{return!1}}function cr(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e((null===(o=s.error)||void 0===o?void 0:o.message)||"")}}catch(t){e(t)}})}class xe extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zt.prototype.create)}}class zt{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],a=o?function bl(n,e){return n.replace(Cl,(t,i)=>{const s=e[i];return null!=s?String(s):`<${i}?>`})}(o,i):"Error";return new xe(s,`${this.serviceName}: ${a} (${s}).`,i)}}const Cl=/\{\$([^}]+)}/g;function at(n){return JSON.parse(n)}function D(n){return JSON.stringify(n)}const qt=function(n){let e={},t={},i={},s="";try{const o=n.split(".");e=at(Ln(o[0])||""),t=at(Ln(o[1])||""),s=o[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:s}};function ie(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function qe(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function ur(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ht(n,e,t){const i={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=e.call(t,n[s],s,n));return i}function Wt(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const o=n[s],a=e[s];if(dr(o)&&dr(a)){if(!Wt(o,a))return!1}else if(o!==a)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function dr(n){return null!==n&&"object"==typeof n}class Al{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)i[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)i[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const p=i[d-3]^i[d-8]^i[d-14]^i[d-16];i[d]=4294967295&(p<<1|p>>>31)}let u,h,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(u=l^o&(a^l),h=1518500249):(u=o^a^l,h=1859775393):d<60?(u=o&a|l&(o|a),h=2400959708):(u=o^a^l,h=3395469782);const p=(s<<5|s>>>27)+u+c+h+i[d]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=p}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const i=t-this.blockSize;let s=0;const o=this.buf_;let a=this.inbuf_;for(;s<t;){if(0===a)for(;s<=i;)this.compress_(e,s),s+=this.blockSize;if("string"==typeof e){for(;s<t;)if(o[a]=e.charCodeAt(s),++a,++s,a===this.blockSize){this.compress_(o),a=0;break}}else for(;s<t;)if(o[a]=e[s],++a,++s,a===this.blockSize){this.compress_(o),a=0;break}}this.inbuf_=a,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=255&t,t/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[s]>>o&255,++i;return e}}function He(n,e){return`${n} failed: ${e} argument `}const Gt=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e},Nl=1e3,Rl=2,Dl=144e5,Ml=.5;function hr(n,e=Nl,t=Rl){const i=e*Math.pow(t,n),s=Math.round(Ml*i*(Math.random()-.5)*2);return Math.min(Dl,i+s)}function Te(n){return n&&n._delegate?n._delegate:n}class se{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ee="[DEFAULT]";class Ll{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new ot;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),s=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(s)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Zl(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ee})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=Ee){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,b.Z)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Ee){return this.instances.has(e)}getOptions(e=Ee){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,a]of this.instancesDeferred.entries())i===this.normalizeInstanceIdentifier(o)&&a.resolve(s);return s}onInit(e,t){var i;const s=this.normalizeInstanceIdentifier(t),o=null!==(i=this.onInitCallbacks.get(s))&&void 0!==i?i:new Set;o.add(e),this.onInitCallbacks.set(s,o);const a=this.instances.get(s);return a&&e(a,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Ee?void 0:n),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}var n;return i||null}normalizeInstanceIdentifier(e=Ee){return this.component?this.component.multipleInstances?e:Ee:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fl{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ll(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Zn=[];var A=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(A||{});const pr={debug:A.DEBUG,verbose:A.VERBOSE,info:A.INFO,warn:A.WARN,error:A.ERROR,silent:A.SILENT},Ul=A.INFO,Bl={[A.DEBUG]:"log",[A.VERBOSE]:"log",[A.INFO]:"info",[A.WARN]:"warn",[A.ERROR]:"error"},zl=(n,e,...t)=>{if(e<n.logLevel)return;const i=(new Date).toISOString(),s=Bl[e];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[s](`[${i}]  ${n.name}:`,...t)};class Fn{constructor(e){this.name=e,this._logLevel=Ul,this._logHandler=zl,this._userLogHandler=null,Zn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in A))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?pr[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,A.DEBUG,...e),this._logHandler(this,A.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,A.VERBOSE,...e),this._logHandler(this,A.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,A.INFO,...e),this._logHandler(this,A.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,A.WARN,...e),this._logHandler(this,A.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,A.ERROR,...e),this._logHandler(this,A.ERROR,...e)}}const ql=(n,e)=>e.some(t=>n instanceof t);let _r,fr;const gr=new WeakMap,Un=new WeakMap,mr=new WeakMap,Bn=new WeakMap,zn=new WeakMap;let qn={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return Un.get(n);if("objectStoreNames"===e)return n.objectStoreNames||mr.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return le(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function jl(n){return"function"==typeof n?function Ql(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Wl(){return fr||(fr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Hn(this),e),le(gr.get(this))}:function(...e){return le(n.apply(Hn(this),e))}:function(e,...t){const i=n.call(Hn(this),e,...t);return mr.set(i,e.sort?e.sort():[e]),le(i)}}(n):(n instanceof IDBTransaction&&function Vl(n){if(Un.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),s()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});Un.set(n,e)}(n),ql(n,function Hl(){return _r||(_r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,qn):n)}function le(n){if(n instanceof IDBRequest)return function Gl(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(le(n.result)),s()},a=()=>{i(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&gr.set(t,n)}).catch(()=>{}),zn.set(e,n),e}(n);if(Bn.has(n))return Bn.get(n);const e=jl(n);return e!==n&&(Bn.set(n,e),zn.set(e,n)),e}const Hn=n=>zn.get(n);function vr(n,e,{blocked:t,upgrade:i,blocking:s,terminated:o}={}){const a=indexedDB.open(n,e),l=le(a);return i&&a.addEventListener("upgradeneeded",c=>{i(le(a.result),c.oldVersion,c.newVersion,le(a.transaction),c)}),t&&a.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{o&&c.addEventListener("close",()=>o()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Jl=["get","getKey","getAll","getAllKeys","count"],Kl=["put","add","delete","clear"],Wn=new Map;function yr(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(Wn.get(e))return Wn.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=Kl.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!Jl.includes(t))return;const o=function(){var a=(0,b.Z)(function*(l,...c){const u=this.transaction(l,s?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(c.shift())),(yield Promise.all([h[t](...c),s&&u.done]))[0]});return function(c){return a.apply(this,arguments)}}();return Wn.set(e,o),o}!function $l(n){qn=n(qn)}(n=>({...n,get:(e,t,i)=>yr(e,t)||n.get(e,t,i),has:(e,t)=>!!yr(e,t)||n.has(e,t)}));class Yl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function Xl(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}return null}).filter(t=>t).join(" ")}}const Vt="@firebase/app",Ae=new Fn("@firebase/app"),$t="[DEFAULT]",Ac={[Vt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Ie=new Map,lt=new Map,ct=new Map;function wr(n,e){try{n.container.addComponent(e)}catch(t){Ae.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ce(n){const e=n.name;if(ct.has(e))return Ae.debug(`There were multiple attempts to register component ${e}.`),!1;ct.set(e,n);for(const t of Ie.values())wr(t,n);for(const t of lt.values())wr(t,n);return!0}function We(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const q=new zt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class kc{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new se("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw q.create("app-deleted",{appName:this._name})}}function br(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:$t,automaticDataCollectionEnabled:!1},e),s=i.name;if("string"!=typeof s||!s)throw q.create("bad-app-name",{appName:String(s)});if(t||(t=or()),!t)throw q.create("no-options");const o=Ie.get(s);if(o){if(Wt(t,o.options)&&Wt(i,o.config))return o;throw q.create("duplicate-app",{appName:s})}const a=new Fl(s);for(const c of ct.values())a.addComponent(c);const l=new kc(t,i,a);return Ie.set(s,l),l}function Cr(n=$t){const e=Ie.get(n);if(!e&&n===$t&&or())return br();if(!e)throw q.create("no-app",{appName:n});return e}function W(n,e,t){var i;let s=null!==(i=Ac[n])&&void 0!==i?i:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const l=[`Unable to register library "${s}" with version "${e}":`];return o&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Ae.warn(l.join(" "))}ce(new se(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const Mc="firebase-heartbeat-database",Pc=1,ut="firebase-heartbeat-store";let $n=null;function xr(){return $n||($n=vr(Mc,Pc,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(ut)}catch(t){console.warn(t)}}}).catch(n=>{throw q.create("idb-open",{originalErrorMessage:n.message})})),$n}function Qn(){return(Qn=(0,b.Z)(function*(n){try{const t=(yield xr()).transaction(ut),i=yield t.objectStore(ut).get(Er(n));return yield t.done,i}catch(e){if(e instanceof xe)Ae.warn(e.message);else{const t=q.create("idb-get",{originalErrorMessage:e?.message});Ae.warn(t.message)}}})).apply(this,arguments)}function Tr(n,e){return jn.apply(this,arguments)}function jn(){return(jn=(0,b.Z)(function*(n,e){try{const i=(yield xr()).transaction(ut,"readwrite");yield i.objectStore(ut).put(e,Er(n)),yield i.done}catch(t){if(t instanceof xe)Ae.warn(t.message);else{const i=q.create("idb-set",{originalErrorMessage:t?.message});Ae.warn(i.message)}}})).apply(this,arguments)}function Er(n){return`${n.name}!${n.options.appId}`}class Fc{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Bc(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){var e=this;return(0,b.Z)(function*(){var t,i;const o=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Ar();if((null!=(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(e._heartbeatsCache=yield e._heartbeatsCachePromise,null!=(null===(i=e._heartbeatsCache)||void 0===i?void 0:i.heartbeats)))&&e._heartbeatsCache.lastSentHeartbeatDate!==a&&!e._heartbeatsCache.heartbeats.some(l=>l.date===a))return e._heartbeatsCache.heartbeats.push({date:a,agent:o}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(l=>{const c=new Date(l.date).valueOf();return Date.now()-c<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,b.Z)(function*(){var t;if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const i=Ar(),{heartbeatsToSend:s,unsentEntries:o}=function Uc(n,e=1024){const t=[];let i=n.slice();for(const s of n){const o=t.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),Ir(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Ir(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}(e._heartbeatsCache.heartbeats),a=Ft(JSON.stringify({version:2,heartbeats:s}));return e._heartbeatsCache.lastSentHeartbeatDate=i,o.length>0?(e._heartbeatsCache.heartbeats=o,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),a})()}}function Ar(){return(new Date).toISOString().substring(0,10)}class Bc{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,b.Z)(function*(){return!!lr()&&cr().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,b.Z)(function*(){if(yield e._canUseIndexedDBPromise){const i=yield function Lc(n){return Qn.apply(this,arguments)}(e.app);return i?.heartbeats?i:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return(0,b.Z)(function*(){var i;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return Tr(t.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,b.Z)(function*(){var i;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return Tr(t.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function Ir(n){return Ft(JSON.stringify({version:2,heartbeats:n})).length}!function zc(n){ce(new se("platform-logger",e=>new Yl(e),"PRIVATE")),ce(new se("heartbeat",e=>new Fc(e),"PRIVATE")),W(Vt,"0.10.5",n),W(Vt,"0.10.5","esm2017"),W("fire-js","")}(""),W("firebase","10.12.2","app");const Sr="@firebase/installations",Jn="0.6.7",kr=1e4,Nr=`w:${Jn}`,Rr="FIS_v2",Wc="https://firebaseinstallations.googleapis.com/v1",Gc=36e5,re=new zt("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Dr(n){return n instanceof xe&&n.code.includes("request-failed")}function Kn({projectId:n}){return`${Wc}/projects/${n}/installations`}function Mr(n){return{token:n.token,requestStatus:2,expiresIn:jc(n.expiresIn),creationTime:Date.now()}}function Yn(n,e){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,b.Z)(function*(n,e){const i=(yield e.json()).error;return re.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})).apply(this,arguments)}function Pr({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function ei(n){return ti.apply(this,arguments)}function ti(){return(ti=(0,b.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function jc(n){return Number(n.replace("s","000"))}function ni(){return(ni=(0,b.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=Kn(n),s=Pr(n),o=e.getImmediate({optional:!0});if(o){const u=yield o.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const l={method:"POST",headers:s,body:JSON.stringify({fid:t,authVersion:Rr,appId:n.appId,sdkVersion:Nr})},c=yield ei(()=>fetch(i,l));if(c.ok){const u=yield c.json();return{fid:u.fid||t,registrationStatus:2,refreshToken:u.refreshToken,authToken:Mr(u.authToken)}}throw yield Yn("Create Installation",c)})).apply(this,arguments)}function Or(n){return new Promise(e=>{setTimeout(e,n)})}const Xc=/^[cdef][\w-]{21}$/,ii="";function eu(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function tu(n){return function Yc(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return Xc.test(t)?t:ii}catch{return ii}}function Ge(n){return`${n.appName}!${n.appId}`}const Ve=new Map;function Zr(n,e){const t=Ge(n);Fr(t,e),function su(n,e){const t=function Ur(){return!Se&&"BroadcastChannel"in self&&(Se=new BroadcastChannel("[Firebase] FID Change"),Se.onmessage=n=>{Fr(n.data.key,n.data.fid)}),Se}();t&&t.postMessage({key:n,fid:e}),function Br(){0===Ve.size&&Se&&(Se.close(),Se=null)}()}(t,e)}function Fr(n,e){const t=Ve.get(n);if(t)for(const i of t)i(e)}let Se=null;const ru="firebase-installations-database",ou=1,ke="firebase-installations-store";let si=null;function ri(){return si||(si=vr(ru,ou,{upgrade:(n,e)=>{0===e&&n.createObjectStore(ke)}})),si}function Qt(n,e){return oi.apply(this,arguments)}function oi(){return(oi=(0,b.Z)(function*(n,e){const t=Ge(n),s=(yield ri()).transaction(ke,"readwrite"),o=s.objectStore(ke),a=yield o.get(t);return yield o.put(e,t),yield s.done,(!a||a.fid!==e.fid)&&Zr(n,e.fid),e})).apply(this,arguments)}function ai(n){return li.apply(this,arguments)}function li(){return(li=(0,b.Z)(function*(n){const e=Ge(n),i=(yield ri()).transaction(ke,"readwrite");yield i.objectStore(ke).delete(e),yield i.done})).apply(this,arguments)}function dt(n,e){return ci.apply(this,arguments)}function ci(){return(ci=(0,b.Z)(function*(n,e){const t=Ge(n),s=(yield ri()).transaction(ke,"readwrite"),o=s.objectStore(ke),a=yield o.get(t),l=e(a);return void 0===l?yield o.delete(t):yield o.put(l,t),yield s.done,l&&(!a||a.fid!==l.fid)&&Zr(n,l.fid),l})).apply(this,arguments)}function ui(n){return di.apply(this,arguments)}function di(){return di=(0,b.Z)(function*(n){let e;const t=yield dt(n.appConfig,i=>{const s=function au(n){return qr(n||{fid:eu(),registrationStatus:0})}(i),o=function lu(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(re.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function cu(n,e){return hi.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:uu(n)}:{installationEntry:e}}(n,s);return e=o.registrationPromise,o.installationEntry});return t.fid===ii?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),di.apply(this,arguments)}function hi(){return hi=(0,b.Z)(function*(n,e){try{const t=yield function Kc(n,e){return ni.apply(this,arguments)}(n,e);return Qt(n.appConfig,t)}catch(t){throw Dr(t)&&409===t.customData.serverCode?yield ai(n.appConfig):yield Qt(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),hi.apply(this,arguments)}function uu(n){return pi.apply(this,arguments)}function pi(){return(pi=(0,b.Z)(function*(n){let e=yield zr(n.appConfig);for(;1===e.registrationStatus;)yield Or(100),e=yield zr(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:i}=yield ui(n);return i||t}return e})).apply(this,arguments)}function zr(n){return dt(n,e=>{if(!e)throw re.create("installation-not-found");return qr(e)})}function qr(n){return function du(n){return 1===n.registrationStatus&&n.registrationTime+kr<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function _i(){return(_i=(0,b.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const i=function pu(n,{fid:e}){return`${Kn(n)}/${e}/authTokens:generate`}(n,t),s=function Lr(n,{refreshToken:e}){const t=Pr(n);return t.append("Authorization",function Jc(n){return`${Rr} ${n}`}(e)),t}(n,t),o=e.getImmediate({optional:!0});if(o){const u=yield o.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const l={method:"POST",headers:s,body:JSON.stringify({installation:{sdkVersion:Nr,appId:n.appId}})},c=yield ei(()=>fetch(i,l));if(c.ok)return Mr(yield c.json());throw yield Yn("Generate Auth Token",c)})).apply(this,arguments)}function fi(n){return gi.apply(this,arguments)}function gi(){return gi=(0,b.Z)(function*(n,e=!1){let t;const i=yield dt(n.appConfig,o=>{if(!Wr(o))throw re.create("not-registered");const a=o.authToken;if(!e&&function gu(n){return 2===n.requestStatus&&!function mu(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Gc}(n)}(a))return o;if(1===a.requestStatus)return t=function _u(n,e){return mi.apply(this,arguments)}(n,e),o;{if(!navigator.onLine)throw re.create("app-offline");const l=function vu(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(o);return t=function fu(n,e){return vi.apply(this,arguments)}(n,l),l}});return t?yield t:i.authToken}),gi.apply(this,arguments)}function mi(){return(mi=(0,b.Z)(function*(n,e){let t=yield Hr(n.appConfig);for(;1===t.authToken.requestStatus;)yield Or(100),t=yield Hr(n.appConfig);const i=t.authToken;return 0===i.requestStatus?fi(n,e):i})).apply(this,arguments)}function Hr(n){return dt(n,e=>{if(!Wr(e))throw re.create("not-registered");return function yu(n){return 1===n.requestStatus&&n.requestTime+kr<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function vi(){return vi=(0,b.Z)(function*(n,e){try{const t=yield function hu(n,e){return _i.apply(this,arguments)}(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return yield Qt(n.appConfig,i),t}catch(t){if(!Dr(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Qt(n.appConfig,i)}else yield ai(n.appConfig);throw t}}),vi.apply(this,arguments)}function Wr(n){return void 0!==n&&2===n.registrationStatus}function yi(){return(yi=(0,b.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:i}=yield ui(e);return i?i.catch(console.error):fi(e).catch(console.error),t.fid})).apply(this,arguments)}function wi(){return wi=(0,b.Z)(function*(n,e=!1){const t=n;return yield function Cu(n){return bi.apply(this,arguments)}(t),(yield fi(t,e)).token}),wi.apply(this,arguments)}function bi(){return(bi=(0,b.Z)(function*(n){const{registrationPromise:e}=yield ui(n);e&&(yield e)})).apply(this,arguments)}function Ti(n){return re.create("missing-app-config-values",{valueName:n})}const Gr="installations",Iu=n=>{const e=n.getProvider("app").getImmediate(),t=function Eu(n){if(!n||!n.options)throw Ti("App Configuration");if(!n.name)throw Ti("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Ti(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:We(e,"heartbeat"),_delete:()=>Promise.resolve()}},Su=n=>{const t=We(n.getProvider("app").getImmediate(),Gr).getImmediate();return{getId:()=>function wu(n){return yi.apply(this,arguments)}(t),getToken:s=>function bu(n){return wi.apply(this,arguments)}(t,s)}};(function ku(){ce(new se(Gr,Iu,"PUBLIC")),ce(new se("installations-internal",Su,"PRIVATE"))})(),W(Sr,Jn),W(Sr,Jn,"esm2017");const jt="analytics",Nu="firebase_id",Ru="origin",Du=6e4,Mu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ei="https://www.googletagmanager.com/gtag/js",M=new Fn("@firebase/analytics"),Z=new zt("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Lu(n){if(!n.startsWith(Ei)){const e=Z.create("invalid-gtag-resource",{gtagURL:n});return M.warn(e.message),""}return n}function Vr(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Ai(){return(Ai=(0,b.Z)(function*(n,e,t,i,s,o){const a=i[s];try{if(a)yield e[a];else{const c=(yield Vr(t)).find(u=>u.measurementId===s);c&&(yield e[c.appId])}}catch(l){M.error(l)}n("config",s,o)})).apply(this,arguments)}function Ii(){return(Ii=(0,b.Z)(function*(n,e,t,i,s){try{let o=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=yield Vr(t);for(const c of a){const u=l.find(d=>d.measurementId===c),h=u&&e[u.appId];if(!h){o=[];break}o.push(h)}}0===o.length&&(o=Object.values(e)),yield Promise.all(o),n("event",i,s||{})}catch(o){M.error(o)}})).apply(this,arguments)}const Wu=30,$r=new class Vu{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function $u(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Si(){return(Si=(0,b.Z)(function*(n){var e;const{appId:t,apiKey:i}=n,s={method:"GET",headers:$u(i)},o=Mu.replace("{app-id}",t),a=yield fetch(o,s);if(200!==a.status&&304!==a.status){let l="";try{const c=yield a.json();null!==(e=c.error)&&void 0!==e&&e.message&&(l=c.error.message)}catch{}throw Z.create("config-fetch-failed",{httpStatus:a.status,responseMessage:l})}return a.json()})).apply(this,arguments)}function ki(){return(ki=(0,b.Z)(function*(n,e=$r,t){const{appId:i,apiKey:s,measurementId:o}=n.options;if(!i)throw Z.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw Z.create("no-api-key")}const a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Yu;return setTimeout((0,b.Z)(function*(){l.abort()}),void 0!==t?t:Du),Qr({appId:i,apiKey:s,measurementId:o},a,l,e)})).apply(this,arguments)}function Qr(n,e,t){return Ni.apply(this,arguments)}function Ni(){return Ni=(0,b.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},i,s=$r){var o;const{appId:a,measurementId:l}=n;try{yield function Ju(n,e){return new Promise((t,i)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(o),i(Z.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(i,e)}catch(c){if(l)return M.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:a,measurementId:l};throw c}try{const c=yield function Qu(n){return Si.apply(this,arguments)}(n);return s.deleteThrottleMetadata(a),c}catch(c){const u=c;if(!function Ku(n){if(!(n instanceof xe&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(u)){if(s.deleteThrottleMetadata(a),l)return M.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:a,measurementId:l};throw c}const h=503===Number(null===(o=u?.customData)||void 0===o?void 0:o.httpStatus)?hr(t,s.intervalMillis,Wu):hr(t,s.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:t+1};return s.setThrottleMetadata(a,d),M.debug(`Calling attemptFetch again in ${h} millis`),Qr(n,d,i,s)}}),Ni.apply(this,arguments)}class Yu{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Ri,Fi;function Di(){return(Di=(0,b.Z)(function*(n,e,t,i,s){if(s&&s.global)n("event",t,i);else{const o=yield e;n("event",t,Object.assign(Object.assign({},i),{send_to:o}))}})).apply(this,arguments)}function Ui(){return(Ui=(0,b.Z)(function*(){if(!lr())return M.warn(Z.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield cr()}catch(n){return M.warn(Z.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function Bi(){return Bi=(0,b.Z)(function*(n,e,t,i,s,o,a){var l;const c=function ju(n){return ki.apply(this,arguments)}(n);c.then(_=>{t[_.measurementId]=_.appId,n.options.measurementId&&_.measurementId!==n.options.measurementId&&M.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>M.error(_)),e.push(c);const u=function rd(){return Ui.apply(this,arguments)}().then(_=>{if(_)return i.getId()}),[h,d]=yield Promise.all([c,u]);(function Hu(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Ei)&&t.src.includes(n))return t;return null})(o)||function Zu(n,e){const t=function Ou(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:Lu}),i=document.createElement("script"),s=`${Ei}?l=${n}&id=${e}`;i.src=t?t?.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}(o,h.measurementId),Fi&&(s("consent","default",Fi),function jr(n){Fi=n}(void 0)),s("js",new Date);const p=null!==(l=a?.config)&&void 0!==l?l:{};return p[Ru]="firebase",p.update=!0,null!=d&&(p[Nu]=d),s("config",h.measurementId,p),Ri&&(s("set",Ri),function Jr(n){Ri=n}(void 0)),h.measurementId}),Bi.apply(this,arguments)}class ad{constructor(e){this.app=e}_delete(){return delete j[this.app.options.appId],Promise.resolve()}}let j={},Kr=[];const Yr={};let eo,J,Jt="dataLayer",zi=!1;function cd(n,e,t){!function ld(){const n=[];if(function ml(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}()&&n.push("This is a browser extension environment."),function yl(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,s)=>`(${s+1}) ${i}`).join(" "),t=Z.create("invalid-analytics-context",{errorInfo:e});M.warn(t.message)}}();const i=n.options.appId;if(!i)throw Z.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Z.create("no-api-key");M.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=j[i])throw Z.create("already-exists",{id:i});if(!zi){!function Fu(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(Jt);const{wrappedGtag:o,gtagCore:a}=function qu(n,e,t,i,s){let o=function(...a){window[i].push(arguments)};return window[s]&&"function"==typeof window[s]&&(o=window[s]),window[s]=function zu(n,e,t,i){function o(){return o=(0,b.Z)(function*(a,...l){try{if("event"===a){const[c,u]=l;yield function Bu(n,e,t,i,s){return Ii.apply(this,arguments)}(n,e,t,c,u)}else if("config"===a){const[c,u]=l;yield function Uu(n,e,t,i,s,o){return Ai.apply(this,arguments)}(n,e,t,i,c,u)}else if("consent"===a){const[c,u]=l;n("consent",c,u)}else if("get"===a){const[c,u,h]=l;n("get",c,u,h)}else if("set"===a){const[c]=l;n("set",c)}else n(a,...l)}catch(c){M.error(c)}}),o.apply(this,arguments)}return function s(a){return o.apply(this,arguments)}}(o,n,e,t),{gtagCore:o,wrappedGtag:window[s]}}(j,Kr,Yr,Jt,"gtag");J=o,eo=a,zi=!0}return j[i]=function od(n,e,t,i,s,o,a){return Bi.apply(this,arguments)}(n,Kr,Yr,e,eo,Jt,t),new ad(n)}const to="@firebase/analytics";!function pd(){ce(new se(jt,(e,{options:t})=>cd(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),ce(new se("analytics-internal",function n(e){try{const t=e.getProvider(jt).getImmediate();return{logEvent:(i,s,o)=>function hd(n,e,t,i){n=Te(n),function Xu(n,e,t,i,s){return Di.apply(this,arguments)}(J,j[n.app.options.appId],e,t,i).catch(s=>M.error(s))}(t,i,s,o)}}catch(t){throw Z.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),W(to,"0.10.4"),W(to,"0.10.4","esm2017")}();const io="@firebase/database";let Wi="";class _d{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),D(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:at(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class fd{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return ie(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const oo=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new _d(e)}}catch{}return new fd},Ne=oo("localStorage"),Gi=oo("sessionStorage"),$e=new Fn("@firebase/database"),ao=function(){let n=1;return function(){return n++}}(),lo=function(n){const e=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);if(s>=55296&&s<=56319){const o=s-55296;i++,f(i<n.length,"Surrogate pair missing trail surrogate."),s=65536+(o<<10)+(n.charCodeAt(i)-56320)}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=63&s|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=63&s|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=63&s|128)}return e}(n),t=new Al;t.update(e);const i=t.digest();return Pn.encodeByteArray(i)},ht=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=ht.apply(null,i):e+="object"==typeof i?D(i):i,e+=" "}return e};let Re=null,co=!0;const P=function(...n){if(!0===co&&(co=!1,null===Re&&!0===Gi.get("logging_enabled")&&function(n,e){f(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?($e.logLevel=A.VERBOSE,Re=$e.log.bind($e),e&&Gi.set("logging_enabled",!0)):"function"==typeof n?Re=n:(Re=null,Gi.remove("logging_enabled"))}(!0)),Re){const e=ht.apply(null,n);Re(e)}},pt=function(n){return function(...e){P(n,...e)}},Vi=function(...n){const e="FIREBASE INTERNAL ERROR: "+ht(...n);$e.error(e)},K=function(...n){const e=`FIREBASE FATAL ERROR: ${ht(...n)}`;throw $e.error(e),new Error(e)},O=function(...n){const e="FIREBASE WARNING: "+ht(...n);$e.warn(e)},Kt=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ue="[MIN_NAME]",oe="[MAX_NAME]",De=function(n,e){if(n===e)return 0;if(n===ue||e===oe)return-1;if(e===ue||n===oe)return 1;{const t=_o(n),i=_o(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},vd=function(n,e){return n===e?0:n<e?-1:1},_t=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+D(e))},$i=function(n){if("object"!=typeof n||null===n)return D(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=D(e[i]),t+=":",t+=$i(n[e[i]]);return t+="}",t},ho=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let s=0;s<t;s+=e)i.push(n.substring(s,s+e>t?t:s+e));return i};function L(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const po=function(n){f(!Kt(n),"Invalid JSON number");const i=1023;let s,o,a,l,c;0===n?(o=0,a=0,s=1/n==-1/0?1:0):(s=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(l=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=l+i,a=Math.round(n*Math.pow(2,52-l)-Math.pow(2,52))):(o=0,a=Math.round(n/Math.pow(2,-1074))));const u=[];for(c=52;c;c-=1)u.push(a%2?1:0),a=Math.floor(a/2);for(c=11;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(s?1:0),u.reverse();const h=u.join("");let d="";for(c=0;c<64;c+=8){let p=parseInt(h.substr(c,8),2).toString(16);1===p.length&&(p="0"+p),d+=p}return d.toLowerCase()},Cd=new RegExp("^-?(0*)\\d{1,10}$"),_o=function(n){if(Cd.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Qe=function(n){try{n()}catch(e){setTimeout(()=>{throw O("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},ft=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Ad{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){O(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Id{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(P("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',O(e)}}let gt=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const yo=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Co="websocket",xo="long_polling";class ji{constructor(e,t,i,s,o=!1,a="",l=!1,c=!1){this.secure=t,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=a,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ne.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ne.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function To(n,e,t){let i;if(f("string"==typeof e,"typeof type must == string"),f("object"==typeof t,"typeof params must == object"),e===Co)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==xo)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Sd(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const s=[];return L(t,(o,a)=>{s.push(o+"="+a)}),i+s.join("&")}class kd{constructor(){this.counters_={}}incrementCounter(e,t=1){ie(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return al(this.counters_)}}const Ji={},Ki={};function Yi(n){const e=n.toString();return Ji[e]||(Ji[e]=new kd),Ji[e]}class Rd{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&Qe(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class de{constructor(e,t,i,s,o,a,l){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.transportSessionId=a,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=pt(e),this.stats_=Yi(t),this.urlFn=c=>(this.appCheckToken&&(c.ac=this.appCheckToken),To(t,xo,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Rd(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Xi((...o)=>{const[a,l,c,u,h]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===a)this.id=l,this.password=c;else{if("close"!==a)throw new Error("Unrecognized command received: "+a);l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[a,l]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(a,l)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&yo.test(location.hostname)&&(i.r="f");const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){de.forceAllow_=!0}static forceDisallow(){de.forceDisallow_=!0}static isAvailable(){return!(!de.forceAllow_&&(de.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=D(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=sr(t),s=ho(i,1840);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=D(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Xi{constructor(e,t,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=ao(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Xi.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(l){P("frame writing exception"),l.stack&&P(l.stack),P(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||P("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const a=this.pendingSegs.shift();i=i+"&seg"+s+"="+a.seg+"&ts"+s+"="+a.ts+"&d"+s+"="+a.d,s++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(s),i()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||"loaded"===s||"complete"===s)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{P("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let Xt=null;typeof MozWebSocket<"u"?Xt=MozWebSocket:typeof WebSocket<"u"&&(Xt=WebSocket);let je=(()=>{class n{constructor(t,i,s,o,a,l,c){this.connId=t,this.applicationId=s,this.appCheckToken=o,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=pt(this.connId),this.stats_=Yi(i),this.connURL=n.connectionURL_(i,l,c,o,s),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,s,o,a){const l={v:"5"};return typeof location<"u"&&location.hostname&&yo.test(location.hostname)&&(l.r="f"),i&&(l.s=i),s&&(l.ls=s),o&&(l.ac=o),a&&(l.p=a),To(t,Co,l)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ne.set("previous_websocket_failure",!0);try{let s;0,this.mySock=new Xt(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const o=s.message||s.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const s=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&null!==Xt&&!n.forceDisallow_}static previouslyFailed(){return Ne.isInMemoryStorage||!0===Ne.get("previous_websocket_failure")}markConnectionHealthy(){Ne.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const s=at(i);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(f(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const s=this.extractFrameCount_(i);null!==s&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();const i=D(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const s=ho(i,16384);s.length>1&&this.sendString_(String(s.length));for(let o=0;o<s.length;o++)this.sendString_(s[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Ro=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[de,je]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=je&&je.isAvailable();let s=i&&!je.previouslyFailed();if(t.webSocketOnly&&(i||O("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[je];else{const o=this.transports_=[];for(const a of n.ALL_TRANSPORTS)a&&a.isAvailable()&&o.push(a);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Fo{constructor(e,t,i,s,o,a,l,c,u,h){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=a,this.onReady_=l,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=pt("c:"+this.id+":"),this.transportManager_=new Ro(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=ft(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=_t("t",e),i=_t("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=_t("t",e),i=_t("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=_t("t",e);if("d"in e){const i=e.d;if("h"===t){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?Vi("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Vi("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&O("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),ft(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ft(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ne.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Uo{put(e,t,i,s){}merge(e,t,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class Bo{constructor(e){this.allowedEvents_=e,this.listeners_={},f(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const s=this.getInitialEvent(e);s&&t.apply(i,s)}off(e,t,i){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let o=0;o<s.length;o++)if(s[o].callback===t&&(!i||i===s[o].context))return void s.splice(o,1)}validateEventType_(e){f(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class en extends Bo{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ar()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new en}getInitialEvent(e){return f("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class T{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function x(){return new T("")}function v(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function he(n){return n.pieces_.length-n.pieceNum_}function E(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new T(n.pieces_,e)}function ts(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function mt(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Ho(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new T(e,0)}function N(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof T)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&t.push(i[s])}return new T(t,0)}function y(n){return n.pieceNum_>=n.pieces_.length}function F(n,e){const t=v(n),i=v(e);if(null===t)return e;if(t===i)return F(E(n),E(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function ns(n,e){if(he(n)!==he(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function H(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(he(n)>he(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class eh{constructor(e,t){this.errorPrefix_=t,this.parts_=mt(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Gt(this.parts_[i]);Wo(this)}}function Wo(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Me(n))}function Me(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class is extends Bo{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new is}getInitialEvent(e){return f("visible"===e,"Unknown event type: "+e),[this.visible_]}}const vt=1e3;let nn,Pe=(()=>{class n extends Uo{constructor(t,i,s,o,a,l,c,u){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=s,this.onConnectStatus_=o,this.onServerInfoUpdate_=a,this.authTokenProvider_=l,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=n.nextPersistentConnectionId_++,this.log_=pt("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=vt,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");is.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&en.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,s){const o=++this.requestNumber_,a={r:o,a:t,b:i};this.log_(D(a)),f(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),s&&(this.requestCBHash_[o]=s)}get(t){this.initConnection_();const i=new ot,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:l=>{const c=l.d;"ok"===l.s?i.resolve(c):i.reject(c)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,s,o){this.initConnection_();const a=t._queryIdentifier,l=t._path.toString();this.log_("Listen called for "+l+" "+a),this.listens.has(l)||this.listens.set(l,new Map),f(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),f(!this.listens.get(l).has(a),"listen() called twice for same path/queryId.");const c={onComplete:o,hashFn:i,query:t,tag:s};this.listens.get(l).set(a,c),this.connected_&&this.sendListen_(c)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})}sendListen_(t){const i=t.query,s=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+s+" for "+o);const a={p:s};t.tag&&(a.q=i._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,c=>{const u=c.d,h=c.s;n.warnOnListenWarnings_(u,i),(this.listens.get(s)&&this.listens.get(s).get(o))===t&&(this.log_("listen response",c),"ok"!==h&&this.removeListen_(s,o),t.onComplete&&t.onComplete(h,u))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&ie(t,"w")){const s=qe(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',a=i._path.toString();O(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=qt(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=function(n){const t=qt(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",s={cred:t};null===this.authOverride_?s.noauth=!0:"object"==typeof this.authOverride_&&(s.authvar=this.authOverride_),this.sendRequest(i,s,o=>{const a=o.s,l=o.d||"error";this.authToken_===t&&("ok"===a?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,s=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,s)})}unlisten(t,i){const s=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+o),f(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,o)&&this.connected_&&this.sendUnlisten_(s,o,t._queryObject,i)}sendUnlisten_(t,i,s,o){this.log_("Unlisten on "+t+" for "+i);const a={p:t};o&&(a.q=s,a.t=o),this.sendRequest("n",a)}onDisconnectPut(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:s})}onDisconnectMerge(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:s})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,s,o){const a={p:i,d:s};this.log_("onDisconnect "+t,a),this.sendRequest(t,a,l=>{o&&setTimeout(()=>{o(l.s,l.d)},Math.floor(0))})}put(t,i,s,o){this.putInternal("p",t,i,s,o)}merge(t,i,s,o){this.putInternal("m",t,i,s,o)}putInternal(t,i,s,o,a){this.initConnection_();const l={p:i,d:s};void 0!==a&&(l.h=a),this.outstandingPuts_.push({action:t,request:l,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,s,a=>{this.log_(i+" response",a),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(a.s,a.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,s=>{"ok"!==s.s&&this.log_("reportStats","Error sending stats: "+s.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+D(t));const i=t.r,s=this.requestCBHash_[i];s&&(delete this.requestCBHash_[i],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):Vi("Unrecognized action received from server: "+D(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){f(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=vt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=vt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,b.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),s=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),a=t.id+":"+n.nextConnectionId_++,l=t.lastSessionId;let c=!1,u=null;const h=function(){u?u.close():(c=!0,o())};t.realtime_={close:h,sendRequest:function(_){f(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(_)}};const p=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[_,g]=yield Promise.all([t.authTokenProvider_.getToken(p),t.appCheckTokenProvider_.getToken(p)]);c?P("getToken() completed but was canceled"):(P("getToken() completed. Creating connection."),t.authToken_=_&&_.accessToken,t.appCheckToken_=g&&g.token,u=new Fo(a,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,s,o,C=>{O(C+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},l))}catch(_){t.log_("Failed to get token: "+_),c||(t.repoInfo_.nodeAdmin&&O(_),h())}}})()}interrupt(t){P("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){P("Resuming connection for reason: "+t),delete this.interruptReasons_[t],ur(this.interruptReasons_)&&(this.reconnectDelay_=vt,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let s;s=i?i.map(a=>$i(a)).join("$"):"default";const o=this.removeListen_(t,s);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,i){const s=new T(t).toString();let o;if(this.listens.has(s)){const a=this.listens.get(s);o=a.get(i),a.delete(i),0===a.size&&this.listens.delete(s)}else o=void 0;return o}onAuthRevoked_(t,i){P("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){P("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+Wi.replace(/\./g,"-")]=1,ar()?t["framework.cordova"]=1:function vl(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=en.getInstance().currentlyOnline();return ur(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class w{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new w(e,t)}}class tn{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new w(ue,e),s=new w(ue,t);return 0!==this.compare(i,s)}minPost(){return w.MIN}}class $o extends tn{static get __EMPTY_NODE(){return nn}static set __EMPTY_NODE(e){nn=e}compare(e,t){return De(e.name,t.name)}isDefinedOn(e){throw ze("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return w.MIN}maxPost(){return new w(oe,nn)}makePost(e,t){return f("string"==typeof e,"KeyIndex indexValue must always be a string."),new w(e,nn)}toString(){return".key"}}const Y=new $o;class sn{constructor(e,t,i,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,s&&(a*=-1),a<0)e=this.isReverse_?e.left:e.right;else{if(0===a){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let rs,G=(()=>{class n{constructor(t,i,s,o,a){this.key=t,this.value=i,this.color=s??n.RED,this.left=o??U.EMPTY_NODE,this.right=a??U.EMPTY_NODE}copy(t,i,s,o,a){return new n(t??this.key,i??this.value,s??this.color,o??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,s){let o=this;const a=s(t,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(t,i,s),null):0===a?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(t,i,s)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return U.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let s,o;if(s=this,i(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,i),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),0===i(t,s.key)){if(s.right.isEmpty())return U.EMPTY_NODE;o=s.right.min_(),s=s.copy(o.key,o.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,i))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class U{constructor(e,t=U.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new U(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,G.BLACK,null,null))}remove(e){return new U(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,G.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,s=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(s=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new sn(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new sn(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new sn(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new sn(this.root_,null,this.comparator_,!0,e)}}function lh(n,e){return De(n.name,e.name)}function ss(n,e){return De(n,e)}U.EMPTY_NODE=new class ah{copy(e,t,i,s,o){return this}insert(e,t,i){return new G(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Qo=function(n){return"number"==typeof n?"number:"+po(n):"string:"+n},jo=function(n){if(n.isLeafNode()){const e=n.val();f("string"==typeof e||"number"==typeof e||"object"==typeof e&&ie(e,".sv"),"Priority must be a string or number.")}else f(n===rs||n.isEmpty(),"priority of unexpected type.");f(n===rs||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Jo,Ko,Yo,Je=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,f(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),jo(this.priorityNode_)}static set __childrenNodeConstructor(t){Jo=t}static get __childrenNodeConstructor(){return Jo}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return y(t)?this:".priority"===v(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const s=v(t);return null===s?i:i.isEmpty()&&".priority"!==s?this:(f(".priority"!==s||1===he(t),".priority must be the last token in a path"),this.updateImmediateChild(s,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(E(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Qo(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?po(this.value_):this.value_,this.lazyHash_=lo(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(f(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,s=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(i),a=n.VALUE_TYPE_ORDER.indexOf(s);return f(o>=0,"Unknown leaf type: "+i),f(a>=0,"Unknown leaf type: "+s),o===a?"object"===s?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const I=new class hh extends tn{compare(e,t){const i=e.node.getPriority(),s=t.node.getPriority(),o=i.compareTo(s);return 0===o?De(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return w.MIN}maxPost(){return new w(oe,new Je("[PRIORITY-POST]",Yo))}makePost(e,t){const i=Ko(e);return new w(t,new Je("[PRIORITY-POST]",i))}toString(){return".priority"}},ph=Math.log(2);class _h{constructor(e){this.count=parseInt(Math.log(e+1)/ph,10),this.current_=this.count-1;const s=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const rn=function(n,e,t,i){n.sort(e);const s=function(c,u){const h=u-c;let d,p;if(0===h)return null;if(1===h)return d=n[c],p=t?t(d):d,new G(p,d.node,G.BLACK,null,null);{const _=parseInt(h/2,10)+c,g=s(c,_),C=s(_+1,u);return d=n[_],p=t?t(d):d,new G(p,d.node,G.BLACK,g,C)}},l=function(c){let u=null,h=null,d=n.length;const p=function(g,C){const k=d-g,be=d;d-=g;const Dn=s(k+1,be),er=n[k],nf=t?t(er):er;_(new G(nf,er.node,C,null,Dn))},_=function(g){u?(u.left=g,u=g):(h=g,u=g)};for(let g=0;g<c.count;++g){const C=c.nextBitIsOne(),k=Math.pow(2,c.count-(g+1));C?p(k,G.BLACK):(p(k,G.BLACK),p(k,G.RED))}return h}(new _h(n.length));return new U(i||e,l)};let os;const Ke={};class ae{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return f(Ke&&I,"ChildrenNode.ts has not been loaded"),os=os||new ae({".priority":Ke},{".priority":I}),os}get(e){const t=qe(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof U?t:null}hasIndex(e){return ie(this.indexSet_,e.toString())}addIndex(e,t){f(e!==Y,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const o=t.getIterator(w.Wrap);let l,a=o.getNext();for(;a;)s=s||e.isDefinedOn(a.node),i.push(a),a=o.getNext();l=s?rn(i,e.getCompare()):Ke;const c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;const h=Object.assign({},this.indexes_);return h[c]=l,new ae(h,u)}addToIndexes(e,t){const i=Ht(this.indexes_,(s,o)=>{const a=qe(this.indexSet_,o);if(f(a,"Missing index implementation for "+o),s===Ke){if(a.isDefinedOn(e.node)){const l=[],c=t.getIterator(w.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&l.push(u),u=c.getNext();return l.push(e),rn(l,a.getCompare())}return Ke}{const l=t.get(e.name);let c=s;return l&&(c=c.remove(new w(e.name,l))),c.insert(e,e.node)}});return new ae(i,this.indexSet_)}removeFromIndexes(e,t){const i=Ht(this.indexes_,s=>{if(s===Ke)return s;{const o=t.get(e.name);return o?s.remove(new w(e.name,o)):s}});return new ae(i,this.indexSet_)}}let yt,m=(()=>{class n{constructor(t,i,s){this.children_=t,this.priorityNode_=i,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&jo(this.priorityNode_),this.children_.isEmpty()&&f(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return yt||(yt=new n(new U(ss),null,ae.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||yt}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?yt:i}}getChild(t){const i=v(t);return null===i?this:this.getImmediateChild(i).getChild(E(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if(f(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const s=new w(t,i);let o,a;i.isEmpty()?(o=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(s,this.children_)):(o=this.children_.insert(t,i),a=this.indexMap_.addToIndexes(s,this.children_));const l=o.isEmpty()?yt:this.priorityNode_;return new n(o,l,a)}}updateChild(t,i){const s=v(t);if(null===s)return i;{f(".priority"!==v(t)||1===he(t),".priority must be the last token in a path");const o=this.getImmediateChild(s).updateChild(E(t),i);return this.updateImmediateChild(s,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let s=0,o=0,a=!0;if(this.forEachChild(I,(l,c)=>{i[l]=c.val(t),s++,a&&n.INTEGER_REGEXP_.test(l)?o=Math.max(o,Number(l)):a=!1}),!t&&a&&o<2*s){const l=[];for(const c in i)l[c]=i[c];return l}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Qo(this.getPriority().val())+":"),this.forEachChild(I,(i,s)=>{const o=s.hash();""!==o&&(t+=":"+i+":"+o)}),this.lazyHash_=""===t?"":lo(t)}return this.lazyHash_}getPredecessorChildName(t,i,s){const o=this.resolveIndex_(s);if(o){const a=o.getPredecessorKey(new w(t,i));return a?a.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.minKey();return s&&s.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new w(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.maxKey();return s&&s.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new w(i,this.children_.get(i)):null}forEachChild(t,i){const s=this.resolveIndex_(t);return s?s.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,w.Wrap);let a=o.peek();for(;null!=a&&i.compare(a,t)<0;)o.getNext(),a=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,w.Wrap);let a=o.peek();for(;null!=a&&i.compare(a,t)>0;)o.getNext(),a=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===wt?-1:0}withIndex(t){if(t===Y||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Y||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const s=this.getIterator(I),o=i.getIterator(I);let a=s.getNext(),l=o.getNext();for(;a&&l;){if(a.name!==l.name||!a.node.equals(l.node))return!1;a=s.getNext(),l=o.getNext()}return null===a&&null===l}return!1}return!1}}resolveIndex_(t){return t===Y?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const wt=new class fh extends m{constructor(){super(new U(ss),m.EMPTY_NODE,ae.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return m.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(w,{MIN:{value:new w(ue,m.EMPTY_NODE)},MAX:{value:new w(oe,wt)}}),$o.__EMPTY_NODE=m.EMPTY_NODE,Je.__childrenNodeConstructor=m,function ch(n){rs=n}(wt),function dh(n){Yo=n}(wt);const gh=!0;function R(n,e=null){if(null===n)return m.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),f(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Je(n,R(e));if(n instanceof Array||!gh){let t=m.EMPTY_NODE;return L(n,(i,s)=>{if(ie(n,i)&&"."!==i.substring(0,1)){const o=R(s);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(i,o))}}),t.updatePriority(R(e))}{const t=[];let i=!1;if(L(n,(a,l)=>{if("."!==a.substring(0,1)){const c=R(l);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),t.push(new w(a,c)))}}),0===t.length)return m.EMPTY_NODE;const o=rn(t,lh,a=>a.name,ss);if(i){const a=rn(t,I.getCompare());return new m(o,R(e),new ae({".priority":a},{".priority":I}))}return new m(o,R(e),ae.Default)}}!function uh(n){Ko=n}(R);class as extends tn{constructor(e){super(),this.indexPath_=e,f(!y(e)&&".priority"!==v(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),s=this.extractChild(t.node),o=i.compareTo(s);return 0===o?De(e.name,t.name):o}makePost(e,t){const i=R(e),s=m.EMPTY_NODE.updateChild(this.indexPath_,i);return new w(t,s)}maxPost(){const e=m.EMPTY_NODE.updateChild(this.indexPath_,wt);return new w(oe,e)}toString(){return mt(this.indexPath_,0).join("/")}}const ls=new class mh extends tn{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?De(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return w.MIN}maxPost(){return w.MAX}makePost(e,t){const i=R(e);return new w(t,i)}toString(){return".value"}};function Xo(n){return{type:"value",snapshotNode:n}}function Ye(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function bt(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Ct(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class cs{constructor(e){this.index_=e}updateChild(e,t,i,s,o,a){f(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(t);return l.getChild(s).equals(i.getChild(s))&&l.isEmpty()===i.isEmpty()||(null!=a&&(i.isEmpty()?e.hasChild(t)?a.trackChildChange(bt(t,l)):f(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?a.trackChildChange(Ye(t,i)):a.trackChildChange(Ct(t,i,l))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(I,(s,o)=>{t.hasChild(s)||i.trackChildChange(bt(s,o))}),t.isLeafNode()||t.forEachChild(I,(s,o)=>{if(e.hasChild(s)){const a=e.getImmediateChild(s);a.equals(o)||i.trackChildChange(Ct(s,o,a))}else i.trackChildChange(Ye(s,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?m.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class xt{constructor(e){this.indexedFilter_=new cs(e.getIndex()),this.index_=e.getIndex(),this.startPost_=xt.getStartPost_(e),this.endPost_=xt.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,s,o,a){return this.matches(new w(t,i))||(i=m.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,s,o,a)}updateFullNode(e,t,i){t.isLeafNode()&&(t=m.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(m.EMPTY_NODE);const o=this;return t.forEachChild(I,(a,l)=>{o.matches(new w(a,l))||(s=s.updateImmediateChild(a,m.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class yh{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new xt(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,s,o,a){return this.rangedFilter_.matches(new w(t,i))||(i=m.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,s,o,a):this.fullLimitUpdateChild_(e,t,i,o,a)}updateFullNode(e,t,i){let s;if(t.isLeafNode()||t.isEmpty())s=m.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;s=m.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;o.hasNext()&&a<this.limit_;){const l=o.getNext();if(this.withinDirectionalStart(l)){if(!this.withinDirectionalEnd(l))break;s=s.updateImmediateChild(l.name,l.node),a++}}}else{let o;s=t.withIndex(this.index_),s=s.updatePriority(m.EMPTY_NODE),o=this.reverse_?s.getReverseIterator(this.index_):s.getIterator(this.index_);let a=0;for(;o.hasNext();){const l=o.getNext();a<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?a++:s=s.updateImmediateChild(l.name,m.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,s,o){let a;if(this.reverse_){const d=this.index_.getCompare();a=(p,_)=>d(_,p)}else a=this.index_.getCompare();const l=e;f(l.numChildren()===this.limit_,"");const c=new w(t,i),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(l.hasChild(t)){const d=l.getImmediateChild(t);let p=s.getChildAfterChild(this.index_,u,this.reverse_);for(;null!=p&&(p.name===t||l.hasChild(p.name));)p=s.getChildAfterChild(this.index_,p,this.reverse_);const _=null==p?1:a(p,c);if(h&&!i.isEmpty()&&_>=0)return o?.trackChildChange(Ct(t,i,d)),l.updateImmediateChild(t,i);{o?.trackChildChange(bt(t,d));const C=l.updateImmediateChild(t,m.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(o?.trackChildChange(Ye(p.name,p.node)),C.updateImmediateChild(p.name,p.node)):C}}return i.isEmpty()?e:h&&a(u,c)>=0?(null!=o&&(o.trackChildChange(bt(u.name,u.node)),o.trackChildChange(Ye(t,i))),l.updateImmediateChild(t,i).updateImmediateChild(u.name,m.EMPTY_NODE)):e}}class us{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=I}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return f(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return f(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ue}hasEnd(){return this.endSet_}getIndexEndValue(){return f(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return f(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:oe}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return f(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===I}copy(){const e=new us;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ea(n){const e={};if(n.isDefault())return e;let t;if(n.index_===I?t="$priority":n.index_===ls?t="$value":n.index_===Y?t="$key":(f(n.index_ instanceof as,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=D(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=D(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+D(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=D(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+D(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function ta(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==I&&(e.i=n.index_.toString()),e}class an extends Uo{constructor(e,t,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=pt("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(f(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,s){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const a=an.getListenId_(e,i),l={};this.listens_[a]=l;const c=ea(e._queryParams);this.restRequest_(o+".json",c,(u,h)=>{let d=h;if(404===u&&(d=null,u=null),null===u&&this.onDataUpdate_(o,d,!1,i),qe(this.listens_,a)===l){let p;p=u?401===u?"permission_denied":"rest_error:"+u:"ok",s(p,null)}})}unlisten(e,t){const i=an.getListenId_(e,t);delete this.listens_[i]}get(e){const t=ea(e._queryParams),i=e._path.toString(),s=new ot;return this.restRequest_(i+".json",t,(o,a)=>{let l=a;404===o&&(l=null,o=null),null===o?(this.onDataUpdate_(i,l,!1,null),s.resolve(l)):s.reject(new Error(l))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(t.auth=s.accessToken),o&&o.token&&(t.ac=o.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+function El(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}(t);this.log_("Sending REST request for "+a);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(i&&4===l.readyState){this.log_("REST Response for "+a+" received. status:",l.status,"response:",l.responseText);let c=null;if(l.status>=200&&l.status<300){try{c=at(l.responseText)}catch{O("Failed to parse JSON response for "+a+": "+l.responseText)}i(null,c)}else 401!==l.status&&404!==l.status&&O("Got unsuccessful REST response for "+a+" Status: "+l.status),i(l.status);i=null}},l.open("GET",a,!0),l.send()})}}class Eh{constructor(){this.rootNode_=m.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ln(){return{value:null,children:new Map}}function Xe(n,e,t){if(y(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=v(e);n.children.has(i)||n.children.set(i,ln()),Xe(n.children.get(i),e=E(e),t)}}function _s(n,e,t){null!==n.value?t(e,n.value):function Ah(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,s)=>{_s(s,new T(e.toString()+"/"+i),t)})}class Ih{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&L(this.last_,(i,s)=>{t[i]=t[i]-s}),this.last_=e,t}}class Nh{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Ih(e);const i=1e4+2e4*Math.random();ft(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;L(e,(s,o)=>{o>0&&ie(this.statsToReport_,s)&&(t[s]=o,i=!0)}),i&&this.server_.reportStats(t),ft(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var X=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(X||{});function ms(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class cn{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=X.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(y(this.path)){if(null!=this.affectedTree.value)return f(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new T(e));return new cn(x(),t,this.revert)}}return f(v(this.path)===e,"operationForChild called for unrelated child."),new cn(E(this.path),this.affectedTree,this.revert)}}class Tt{constructor(e,t){this.source=e,this.path=t,this.type=X.LISTEN_COMPLETE}operationForChild(e){return y(this.path)?new Tt(this.source,x()):new Tt(this.source,E(this.path))}}class Le{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=X.OVERWRITE}operationForChild(e){return y(this.path)?new Le(this.source,x(),this.snap.getImmediateChild(e)):new Le(this.source,E(this.path),this.snap)}}class et{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=X.MERGE}operationForChild(e){if(y(this.path)){const t=this.children.subtree(new T(e));return t.isEmpty()?null:t.value?new Le(this.source,x(),t.value):new et(this.source,x(),t)}return f(v(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new et(this.source,E(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class pe{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(y(e))return this.isFullyInitialized()&&!this.filtered_;const t=v(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Rh{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Et(n,e,t,i,s,o){const a=i.filter(l=>l.type===t);a.sort((l,c)=>function Ph(n,e,t){if(null==e.childName||null==t.childName)throw ze("Should only compare child_ events.");const i=new w(e.childName,e.snapshotNode),s=new w(t.childName,t.snapshotNode);return n.index_.compare(i,s)}(n,l,c)),a.forEach(l=>{const c=function Mh(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,l,o);s.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(c,n.query_))})})}function un(n,e){return{eventCache:n,serverCache:e}}function At(n,e,t,i){return un(new pe(e,t,i),n.serverCache)}function ia(n,e,t,i){return un(n.eventCache,new pe(e,t,i))}function dn(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Oe(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let vs;class S{constructor(e,t=(()=>(vs||(vs=new U(vd)),vs))()){this.value=e,this.children=t}static fromObject(e){let t=new S(null);return L(e,(i,s)=>{t=t.set(new T(i),s)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:x(),value:this.value};if(y(e))return null;{const i=v(e),s=this.children.get(i);if(null!==s){const o=s.findRootMostMatchingPathAndValue(E(e),t);return null!=o?{path:N(new T(i),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(y(e))return this;{const t=v(e),i=this.children.get(t);return null!==i?i.subtree(E(e)):new S(null)}}set(e,t){if(y(e))return new S(t,this.children);{const i=v(e),o=(this.children.get(i)||new S(null)).set(E(e),t),a=this.children.insert(i,o);return new S(this.value,a)}}remove(e){if(y(e))return this.children.isEmpty()?new S(null):new S(null,this.children);{const t=v(e),i=this.children.get(t);if(i){const s=i.remove(E(e));let o;return o=s.isEmpty()?this.children.remove(t):this.children.insert(t,s),null===this.value&&o.isEmpty()?new S(null):new S(this.value,o)}return this}}get(e){if(y(e))return this.value;{const t=v(e),i=this.children.get(t);return i?i.get(E(e)):null}}setTree(e,t){if(y(e))return t;{const i=v(e),o=(this.children.get(i)||new S(null)).setTree(E(e),t);let a;return a=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new S(this.value,a)}}fold(e){return this.fold_(x(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((s,o)=>{i[s]=o.fold_(N(e,s),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,x(),t)}findOnPath_(e,t,i){const s=!!this.value&&i(t,this.value);if(s)return s;if(y(e))return null;{const o=v(e),a=this.children.get(o);return a?a.findOnPath_(E(e),N(t,o),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,x(),t)}foreachOnPath_(e,t,i){if(y(e))return this;{this.value&&i(t,this.value);const s=v(e),o=this.children.get(s);return o?o.foreachOnPath_(E(e),N(t,s),i):new S(null)}}foreach(e){this.foreach_(x(),e)}foreach_(e,t){this.children.inorderTraversal((i,s)=>{s.foreach_(N(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class V{constructor(e){this.writeTree_=e}static empty(){return new V(new S(null))}}function It(n,e,t){if(y(e))return new V(new S(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const s=i.path;let o=i.value;const a=F(s,e);return o=o.updateChild(a,t),new V(n.writeTree_.set(s,o))}{const s=new S(t),o=n.writeTree_.setTree(e,s);return new V(o)}}}function ys(n,e,t){let i=n;return L(t,(s,o)=>{i=It(i,N(e,s),o)}),i}function sa(n,e){if(y(e))return V.empty();{const t=n.writeTree_.setTree(e,new S(null));return new V(t)}}function ws(n,e){return null!=Ze(n,e)}function Ze(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(F(t.path,e)):null}function ra(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(I,(i,s)=>{e.push(new w(i,s))}):n.writeTree_.children.inorderTraversal((i,s)=>{null!=s.value&&e.push(new w(i,s.value))}),e}function _e(n,e){if(y(e))return n;{const t=Ze(n,e);return new V(null!=t?new S(t):n.writeTree_.subtree(e))}}function bs(n){return n.writeTree_.isEmpty()}function tt(n,e){return oa(x(),n.writeTree_,e)}function oa(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((s,o)=>{".priority"===s?(f(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):t=oa(N(n,s),o,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(N(n,".priority"),i)),t}}function hn(n,e){return da(e,n)}function Bh(n,e){if(n.snap)return H(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&H(N(n.path,t),e))return!0;return!1}function qh(n){return n.visible}function aa(n,e,t){let i=V.empty();for(let s=0;s<n.length;++s){const o=n[s];if(e(o)){const a=o.path;let l;if(o.snap)H(t,a)?(l=F(t,a),i=It(i,l,o.snap)):H(a,t)&&(l=F(a,t),i=It(i,x(),o.snap.getChild(l)));else{if(!o.children)throw ze("WriteRecord should have .snap or .children");if(H(t,a))l=F(t,a),i=ys(i,l,o.children);else if(H(a,t))if(l=F(a,t),y(l))i=ys(i,x(),o.children);else{const c=qe(o.children,v(l));if(c){const u=c.getChild(E(l));i=It(i,x(),u)}}}}}return i}function la(n,e,t,i,s){if(i||s){const o=_e(n.visibleWrites,e);return!s&&bs(o)?t:s||null!=t||ws(o,x())?tt(aa(n.allWrites,function(u){return(u.visible||s)&&(!i||!~i.indexOf(u.writeId))&&(H(u.path,e)||H(e,u.path))},e),t||m.EMPTY_NODE):null}{const o=Ze(n.visibleWrites,e);if(null!=o)return o;{const a=_e(n.visibleWrites,e);return bs(a)?t:null!=t||ws(a,x())?tt(a,t||m.EMPTY_NODE):null}}}function pn(n,e,t,i){return la(n.writeTree,n.treePath,e,t,i)}function Cs(n,e){return function Hh(n,e,t){let i=m.EMPTY_NODE;const s=Ze(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(I,(o,a)=>{i=i.updateImmediateChild(o,a)}),i;if(t){const o=_e(n.visibleWrites,e);return t.forEachChild(I,(a,l)=>{const c=tt(_e(o,new T(a)),l);i=i.updateImmediateChild(a,c)}),ra(o).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}return ra(_e(n.visibleWrites,e)).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}(n.writeTree,n.treePath,e)}function ca(n,e,t,i){return function Wh(n,e,t,i,s){f(i||s,"Either existingEventSnap or existingServerSnap must exist");const o=N(e,t);if(ws(n.visibleWrites,o))return null;{const a=_e(n.visibleWrites,o);return bs(a)?s.getChild(t):tt(a,s.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function _n(n,e){return function Vh(n,e){return Ze(n.visibleWrites,e)}(n.writeTree,N(n.treePath,e))}function xs(n,e,t){return function Gh(n,e,t,i){const s=N(e,t),o=Ze(n.visibleWrites,s);return null!=o?o:i.isCompleteForChild(t)?tt(_e(n.visibleWrites,s),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function ua(n,e){return da(N(n.treePath,e),n.writeTree)}function da(n,e){return{treePath:n,writeTree:e}}class Jh{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;f("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),f(".priority"!==i,"Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const o=s.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(i,Ct(i,e.snapshotNode,s.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(i,bt(i,s.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(i,Ye(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw ze("Illegal combination of changes: "+e+" occurred after "+s);this.changeMap.set(i,Ct(i,e.snapshotNode,s.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const ha=new class Kh{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class Ts{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new pe(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return xs(this.writes_,e,i)}}getChildAfterChild(e,t,i){const s=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Oe(this.viewCache_),o=function jh(n,e,t,i,s,o){return function $h(n,e,t,i,s,o,a){let l;const c=_e(n.visibleWrites,e),u=Ze(c,x());if(null!=u)l=u;else{if(null==t)return[];l=tt(c,t)}if(l=l.withIndex(a),l.isEmpty()||l.isLeafNode())return[];{const h=[],d=a.getCompare(),p=o?l.getReverseIteratorFrom(i,a):l.getIteratorFrom(i,a);let _=p.getNext();for(;_&&h.length<s;)0!==d(_,i)&&h.push(_),_=p.getNext();return h}}(n.writeTree,n.treePath,e,t,i,s,o)}(this.writes_,s,t,1,i,e);return 0===o.length?null:o[0]}}function pa(n,e,t,i,s,o){const a=e.eventCache;if(null!=_n(i,t))return e;{let l,c;if(y(t))if(f(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Oe(e),d=Cs(i,u instanceof m?u:m.EMPTY_NODE);l=n.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{const u=pn(i,Oe(e));l=n.filter.updateFullNode(e.eventCache.getNode(),u,o)}else{const u=v(t);if(".priority"===u){f(1===he(t),"Can't have a priority with additional path components");const h=a.getNode();c=e.serverCache.getNode();const d=ca(i,t,h,c);l=null!=d?n.filter.updatePriority(h,d):a.getNode()}else{const h=E(t);let d;if(a.isCompleteForChild(u)){c=e.serverCache.getNode();const p=ca(i,t,a.getNode(),c);d=null!=p?a.getNode().getImmediateChild(u).updateChild(h,p):a.getNode().getImmediateChild(u)}else d=xs(i,u,e.serverCache);l=null!=d?n.filter.updateChild(a.getNode(),u,d,h,s,o):a.getNode()}}return At(e,l,a.isFullyInitialized()||y(t),n.filter.filtersNodes())}}function fn(n,e,t,i,s,o,a,l){const c=e.serverCache;let u;const h=a?n.filter:n.filter.getIndexedFilter();if(y(t))u=h.updateFullNode(c.getNode(),i,null);else if(h.filtersNodes()&&!c.isFiltered()){const _=c.getNode().updateChild(t,i);u=h.updateFullNode(c.getNode(),_,null)}else{const _=v(t);if(!c.isCompleteForPath(t)&&he(t)>1)return e;const g=E(t),k=c.getNode().getImmediateChild(_).updateChild(g,i);u=".priority"===_?h.updatePriority(c.getNode(),k):h.updateChild(c.getNode(),_,k,g,ha,null)}const d=ia(e,u,c.isFullyInitialized()||y(t),h.filtersNodes());return pa(n,d,t,s,new Ts(s,d,o),l)}function Es(n,e,t,i,s,o,a){const l=e.eventCache;let c,u;const h=new Ts(s,e,o);if(y(t))u=n.filter.updateFullNode(e.eventCache.getNode(),i,a),c=At(e,u,!0,n.filter.filtersNodes());else{const d=v(t);if(".priority"===d)u=n.filter.updatePriority(e.eventCache.getNode(),i),c=At(e,u,l.isFullyInitialized(),l.isFiltered());else{const p=E(t),_=l.getNode().getImmediateChild(d);let g;if(y(p))g=i;else{const C=h.getCompleteChild(d);g=null!=C?".priority"===ts(p)&&C.getChild(Ho(p)).isEmpty()?C:C.updateChild(p,i):m.EMPTY_NODE}c=_.equals(g)?e:At(e,n.filter.updateChild(l.getNode(),d,g,p,h,a),l.isFullyInitialized(),n.filter.filtersNodes())}}return c}function _a(n,e){return n.eventCache.isCompleteForChild(e)}function fa(n,e,t){return t.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function As(n,e,t,i,s,o,a,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u,c=e;u=y(t)?i:new S(null).setTree(t,i);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const g=fa(0,e.serverCache.getNode().getImmediateChild(d),p);c=fn(n,c,new T(d),g,s,o,a,l)}}),u.children.inorderTraversal((d,p)=>{const _=!e.serverCache.isCompleteForChild(d)&&null===p.value;if(!h.hasChild(d)&&!_){const C=fa(0,e.serverCache.getNode().getImmediateChild(d),p);c=fn(n,c,new T(d),C,s,o,a,l)}}),c}class op{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new cs(i.getIndex()),o=function wh(n){return n.loadsAllData()?new cs(n.getIndex()):n.hasLimit()?new yh(n):new xt(n)}(i);this.processor_=function Yh(n){return{filter:n}}(o);const a=t.serverCache,l=t.eventCache,c=s.updateFullNode(m.EMPTY_NODE,a.getNode(),null),u=o.updateFullNode(m.EMPTY_NODE,l.getNode(),null),h=new pe(c,a.isFullyInitialized(),s.filtersNodes()),d=new pe(u,l.isFullyInitialized(),o.filtersNodes());this.viewCache_=un(d,h),this.eventGenerator_=new Rh(this.query_)}get query(){return this.query_}}function cp(n,e){const t=Oe(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!y(e)&&!t.getImmediateChild(v(e)).isEmpty())?t.getChild(e):null}function ga(n){return 0===n.eventRegistrations_.length}function ma(n,e,t){const i=[];if(t){f(null==e,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(o=>{const a=o.createCancelEvent(t,s);a&&i.push(a)})}if(e){let s=[];for(let o=0;o<n.eventRegistrations_.length;++o){const a=n.eventRegistrations_[o];if(a.matches(e)){if(e.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(o+1));break}}else s.push(a)}n.eventRegistrations_=s}else n.eventRegistrations_=[];return i}function va(n,e,t,i){e.type===X.MERGE&&null!==e.source.queryId&&(f(Oe(n.viewCache_),"We should always have a full cache before handling merges"),f(dn(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,o=function ep(n,e,t,i,s){const o=new Jh;let a,l;if(t.type===X.OVERWRITE){const u=t;u.source.fromUser?a=Es(n,e,u.path,u.snap,i,s,o):(f(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!y(u.path),a=fn(n,e,u.path,u.snap,i,s,l,o))}else if(t.type===X.MERGE){const u=t;u.source.fromUser?a=function np(n,e,t,i,s,o,a){let l=e;return i.foreach((c,u)=>{const h=N(t,c);_a(e,v(h))&&(l=Es(n,l,h,u,s,o,a))}),i.foreach((c,u)=>{const h=N(t,c);_a(e,v(h))||(l=Es(n,l,h,u,s,o,a))}),l}(n,e,u.path,u.children,i,s,o):(f(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),a=As(n,e,u.path,u.children,i,s,l,o))}else if(t.type===X.ACK_USER_WRITE){const u=t;a=u.revert?function rp(n,e,t,i,s,o){let a;if(null!=_n(i,t))return e;{const l=new Ts(i,e,s),c=e.eventCache.getNode();let u;if(y(t)||".priority"===v(t)){let h;if(e.serverCache.isFullyInitialized())h=pn(i,Oe(e));else{const d=e.serverCache.getNode();f(d instanceof m,"serverChildren would be complete if leaf node"),h=Cs(i,d)}u=n.filter.updateFullNode(c,h,o)}else{const h=v(t);let d=xs(i,h,e.serverCache);null==d&&e.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),u=null!=d?n.filter.updateChild(c,h,d,E(t),l,o):e.eventCache.getNode().hasChild(h)?n.filter.updateChild(c,h,m.EMPTY_NODE,E(t),l,o):c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=pn(i,Oe(e)),a.isLeafNode()&&(u=n.filter.updateFullNode(u,a,o)))}return a=e.serverCache.isFullyInitialized()||null!=_n(i,x()),At(e,u,a,n.filter.filtersNodes())}}(n,e,u.path,i,s,o):function ip(n,e,t,i,s,o,a){if(null!=_n(s,t))return e;const l=e.serverCache.isFiltered(),c=e.serverCache;if(null!=i.value){if(y(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return fn(n,e,t,c.getNode().getChild(t),s,o,l,a);if(y(t)){let u=new S(null);return c.getNode().forEachChild(Y,(h,d)=>{u=u.set(new T(h),d)}),As(n,e,t,u,s,o,l,a)}return e}{let u=new S(null);return i.foreach((h,d)=>{const p=N(t,h);c.isCompleteForPath(p)&&(u=u.set(h,c.getNode().getChild(p)))}),As(n,e,t,u,s,o,l,a)}}(n,e,u.path,u.affectedTree,i,s,o)}else{if(t.type!==X.LISTEN_COMPLETE)throw ze("Unknown operation type: "+t.type);a=function sp(n,e,t,i,s){const o=e.serverCache;return pa(n,ia(e,o.getNode(),o.isFullyInitialized()||y(t),o.isFiltered()),t,i,ha,s)}(n,e,t.path,i,o)}const c=o.getChanges();return function tp(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=dn(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&t.push(Xo(dn(e)))}}(e,a,c),{viewCache:a,changes:c}}(n.processor_,s,e,t,i);return function Xh(n,e){f(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),f(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),f(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,ya(n,o.changes,o.viewCache.eventCache.getNode(),null)}function ya(n,e,t,i){return function Dh(n,e,t,i){const s=[],o=[];return e.forEach(a=>{"child_changed"===a.type&&n.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&o.push(function vh(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(a.childName,a.snapshotNode))}),Et(n,s,"child_removed",e,i,t),Et(n,s,"child_added",e,i,t),Et(n,s,"child_moved",o,i,t),Et(n,s,"child_changed",e,i,t),Et(n,s,"value",e,i,t),s}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let gn,vn;class wa{constructor(){this.views=new Map}}function Is(n,e,t,i){const s=e.source.queryId;if(null!==s){const o=n.views.get(s);return f(null!=o,"SyncTree gave us an op for an invalid query."),va(o,e,t,i)}{let o=[];for(const a of n.views.values())o=o.concat(va(a,e,t,i));return o}}function fp(n,e,t,i,s,o){const a=function ba(n,e,t,i,s){const a=n.views.get(e._queryIdentifier);if(!a){let l=pn(t,s?i:null),c=!1;l?c=!0:i instanceof m?(l=Cs(t,i),c=!1):(l=m.EMPTY_NODE,c=!1);const u=un(new pe(l,c,!1),new pe(i,s,!1));return new op(e,u)}return a}(n,e,i,s,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,a),function up(n,e){n.eventRegistrations_.push(e)}(a,t),function dp(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(I,(o,a)=>{i.push(Ye(o,a))}),t.isFullyInitialized()&&i.push(Xo(t.getNode())),ya(n,i,t.getNode(),e)}(a,t)}function Ca(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function fe(n,e){let t=null;for(const i of n.views.values())t=t||cp(i,e);return t}function xa(n,e){return e._queryParams.loadsAllData()?mn(n):n.views.get(e._queryIdentifier)}function Ta(n,e){return null!=xa(n,e)}function ge(n){return null!=mn(n)}function mn(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let yp=1;class Ea{constructor(e){this.listenProvider_=e,this.syncPointTree_=new S(null),this.pendingWriteTree_=function Qh(){return{visibleWrites:V.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ss(n,e,t,i,s){return function Oh(n,e,t,i,s){f(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===s&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:s}),s&&(n.visibleWrites=It(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,s),s?nt(n,new Le({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function me(n,e,t=!1){const i=function Fh(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function Uh(n,e){const t=n.allWrites.findIndex(l=>l.writeId===e);f(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let s=i.visible,o=!1,a=n.allWrites.length-1;for(;s&&a>=0;){const l=n.allWrites[a];l.visible&&(a>=t&&Bh(l,i.path)?s=!1:H(i.path,l.path)&&(o=!0)),a--}return!!s&&(o?(function zh(n){n.visibleWrites=aa(n.allWrites,qh,x()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=sa(n.visibleWrites,i.path):L(i.children,c=>{n.visibleWrites=sa(n.visibleWrites,N(i.path,c))}),!0))}(n.pendingWriteTree_,e)){let o=new S(null);return null!=i.snap?o=o.set(x(),!0):L(i.children,a=>{o=o.set(new T(a),!0)}),nt(n,new cn(i.path,o,t))}return[]}function St(n,e,t){return nt(n,new Le({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function yn(n,e,t,i,s=!1){const o=e._path,a=n.syncPointTree_.get(o);let l=[];if(a&&("default"===e._queryIdentifier||Ta(a,e))){const c=function gp(n,e,t,i){const s=e._queryIdentifier,o=[];let a=[];const l=ge(n);if("default"===s)for(const[c,u]of n.views.entries())a=a.concat(ma(u,t,i)),ga(u)&&(n.views.delete(c),u.query._queryParams.loadsAllData()||o.push(u.query));else{const c=n.views.get(s);c&&(a=a.concat(ma(c,t,i)),ga(c)&&(n.views.delete(s),c.query._queryParams.loadsAllData()||o.push(c.query)))}return l&&!ge(n)&&o.push(new(function pp(){return f(gn,"Reference.ts has not been loaded"),gn}())(e._repo,e._path)),{removed:o,events:a}}(a,e,t,i);(function _p(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const u=c.removed;if(l=c.events,!s){const h=-1!==u.findIndex(p=>p._queryParams.loadsAllData()),d=n.syncPointTree_.findOnPath(o,(p,_)=>ge(_));if(h&&!d){const p=n.syncPointTree_.subtree(o);if(!p.isEmpty()){const _=function Ap(n){return n.fold((e,t,i)=>{if(t&&ge(t))return[mn(t)];{let s=[];return t&&(s=Ca(t)),L(i,(o,a)=>{s=s.concat(a)}),s}})}(p);for(let g=0;g<_.length;++g){const C=_[g],k=C.query,be=ka(n,C);n.listenProvider_.startListening(Nt(k),kt(n,k),be.hashFn,be.onComplete)}}}!d&&u.length>0&&!i&&(h?n.listenProvider_.stopListening(Nt(e),null):u.forEach(p=>{const _=n.queryToTagMap.get(bn(p));n.listenProvider_.stopListening(Nt(p),_)}))}!function Ip(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const s=bn(i),o=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(o)}}}(n,u)}return l}function ks(n,e,t,i=!1){const s=e._path;let o=null,a=!1;n.syncPointTree_.foreachOnPath(s,(p,_)=>{const g=F(p,s);o=o||fe(_,g),a=a||ge(_)});let c,l=n.syncPointTree_.get(s);l?(a=a||ge(l),o=o||fe(l,x())):(l=new wa,n.syncPointTree_=n.syncPointTree_.set(s,l)),null!=o?c=!0:(c=!1,o=m.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((_,g)=>{const C=fe(g,x());C&&(o=o.updateImmediateChild(_,C))}));const u=Ta(l,e);if(!u&&!e._queryParams.loadsAllData()){const p=bn(e);f(!n.queryToTagMap.has(p),"View does not exist, but we have a tag");const _=function Sp(){return yp++}();n.queryToTagMap.set(p,_),n.tagToQueryMap.set(_,p)}let d=fp(l,e,t,hn(n.pendingWriteTree_,s),o,c);if(!u&&!a&&!i){const p=xa(l,e);d=d.concat(function kp(n,e,t){const i=e._path,s=kt(n,e),o=ka(n,t),a=n.listenProvider_.startListening(Nt(e),s,o.hashFn,o.onComplete),l=n.syncPointTree_.subtree(i);if(s)f(!ge(l.value),"If we're adding a query, it shouldn't be shadowed");else{const c=l.fold((u,h,d)=>{if(!y(u)&&h&&ge(h))return[mn(h).query];{let p=[];return h&&(p=p.concat(Ca(h).map(_=>_.query))),L(d,(_,g)=>{p=p.concat(g)}),p}});for(let u=0;u<c.length;++u){const h=c[u];n.listenProvider_.stopListening(Nt(h),kt(n,h))}}return a}(n,e,p))}return d}function wn(n,e,t){const s=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(a,l)=>{const u=fe(l,F(a,e));if(u)return u});return la(s,e,o,t,!0)}function nt(n,e){return Ia(e,n.syncPointTree_,null,hn(n.pendingWriteTree_,x()))}function Ia(n,e,t,i){if(y(n.path))return Sa(n,e,t,i);{const s=e.get(x());null==t&&null!=s&&(t=fe(s,x()));let o=[];const a=v(n.path),l=n.operationForChild(a),c=e.children.get(a);if(c&&l){const u=t?t.getImmediateChild(a):null,h=ua(i,a);o=o.concat(Ia(l,c,u,h))}return s&&(o=o.concat(Is(s,n,i,t))),o}}function Sa(n,e,t,i){const s=e.get(x());null==t&&null!=s&&(t=fe(s,x()));let o=[];return e.children.inorderTraversal((a,l)=>{const c=t?t.getImmediateChild(a):null,u=ua(i,a),h=n.operationForChild(a);h&&(o=o.concat(Sa(h,l,c,u)))}),s&&(o=o.concat(Is(s,n,i,t))),o}function ka(n,e){const t=e.query,i=kt(n,t);return{hashFn:()=>(function ap(n){return n.viewCache_.serverCache.getNode()}(e)||m.EMPTY_NODE).hash(),onComplete:s=>{if("ok"===s)return i?function xp(n,e,t){const i=Ns(n,t);if(i){const s=Rs(i),o=s.path,a=s.queryId,l=F(o,e);return Ds(n,o,new Tt(ms(a),l))}return[]}(n,t._path,i):function Cp(n,e){return nt(n,new Tt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function bd(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(s,t);return yn(n,t,null,o)}}}}function kt(n,e){const t=bn(e);return n.queryToTagMap.get(t)}function bn(n){return n._path.toString()+"$"+n._queryIdentifier}function Ns(n,e){return n.tagToQueryMap.get(e)}function Rs(n){const e=n.indexOf("$");return f(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new T(n.substr(0,e))}}function Ds(n,e,t){const i=n.syncPointTree_.get(e);return f(i,"Missing sync point for query tag that we're tracking"),Is(i,t,hn(n.pendingWriteTree_,e),null)}function Nt(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function vp(){return f(vn,"Reference.ts has not been loaded"),vn}())(n._repo,n._path):n}class Ms{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Ms(t)}node(){return this.node_}}class Ps{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=N(this.path_,e);return new Ps(this.syncTree_,t)}node(){return wn(this.syncTree_,this.path_)}}const Np=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},Na=function(n,e,t){return n&&"object"==typeof n?(f(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Rp(n[".sv"],e,t):"object"==typeof n[".sv"]?Dp(n[".sv"],e):void f(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Rp=function(n,e,t){if("timestamp"===n)return t.timestamp;f(!1,"Unexpected server value: "+n)},Dp=function(n,e,t){n.hasOwnProperty("increment")||f(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&f(!1,"Unexpected increment value: "+i);const s=e.node();if(f(null!==s&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const a=s.getValue();return"number"!=typeof a?i:a+i},Ra=function(n,e,t,i){return Os(e,new Ps(t,n),i)},Ls=function(n,e,t){return Os(n,new Ms(e),t)};function Os(n,e,t){const i=n.getPriority().val(),s=Na(i,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const a=n,l=Na(a.getValue(),e,t);return l!==a.getValue()||s!==a.getPriority().val()?new Je(l,R(s)):n}{const a=n;return o=a,s!==a.getPriority().val()&&(o=o.updatePriority(new Je(s))),a.forEachChild(I,(l,c)=>{const u=Os(c,e.getImmediateChild(l),t);u!==c&&(o=o.updateImmediateChild(l,u))}),o}}class Zs{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function Cn(n,e){let t=e instanceof T?e:new T(e),i=n,s=v(t);for(;null!==s;){const o=qe(i.node.children,s)||{children:{},childCount:0};i=new Zs(s,i,o),t=E(t),s=v(t)}return i}function Fe(n){return n.node.value}function Fs(n,e){n.node.value=e,Us(n)}function Da(n){return n.node.childCount>0}function xn(n,e){L(n.node.children,(t,i)=>{e(new Zs(t,n,i))})}function Ma(n,e,t,i){t&&!i&&e(n),xn(n,s=>{Ma(s,e,!0,i)}),t&&i&&e(n)}function Rt(n){return new T(null===n.parent?n.name:Rt(n.parent)+"/"+n.name)}function Us(n){null!==n.parent&&function Lp(n,e,t){const i=function Mp(n){return void 0===Fe(n)&&!Da(n)}(t),s=ie(n.node.children,e);i&&s?(delete n.node.children[e],n.node.childCount--,Us(n)):!i&&!s&&(n.node.children[e]=t.node,n.node.childCount++,Us(n))}(n.parent,n.name,n)}const Op=/[\[\].#$\/\u0000-\u001F\u007F]/,Zp=/[\[\].#$\u0000-\u001F\u007F]/,Bs=10485760,Tn=function(n){return"string"==typeof n&&0!==n.length&&!Op.test(n)},Pa=function(n){return"string"==typeof n&&0!==n.length&&!Zp.test(n)},Mt=function(n,e,t){const i=t instanceof T?new eh(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Me(i));if("function"==typeof e)throw new Error(n+"contains a function "+Me(i)+" with contents = "+e.toString());if(Kt(e))throw new Error(n+"contains "+e.toString()+" "+Me(i));if("string"==typeof e&&e.length>Bs/3&&Gt(e)>Bs)throw new Error(n+"contains a string greater than "+Bs+" utf8 bytes "+Me(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let s=!1,o=!1;if(L(e,(a,l)=>{if(".value"===a)s=!0;else if(".priority"!==a&&".sv"!==a&&(o=!0,!Tn(a)))throw new Error(n+" contains an invalid key ("+a+") "+Me(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function th(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Gt(e),Wo(n)})(i,a),Mt(n,l,i),function nh(n){const e=n.parts_.pop();n.byteLength_-=Gt(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),s&&o)throw new Error(n+' contains ".value" child '+Me(i)+" in addition to actual children.")}},qs=function(n,e,t,i){if(!(i&&void 0===t||Pa(t)))throw new Error(He(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Bp=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),qs(n,e,t,i)};class zp{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function En(n,e){let t=null;for(let i=0;i<e.length;i++){const s=e[i],o=s.getPath();null!==t&&!ns(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(s)}t&&n.eventLists_.push(t)}function Za(n,e,t){En(n,t),Fa(n,i=>ns(i,e))}function B(n,e,t){En(n,t),Fa(n,i=>H(i,e)||H(e,i))}function Fa(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const s=n.eventLists_[i];s&&(e(s.path)?(qp(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function qp(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();Re&&P("event: "+t.toString()),Qe(i)}}}const Hp=25;class Wp{constructor(e,t,i,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zp,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ln(),this.transactionQueueTree_=new Zs,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Ba(n){const t=n.infoData_.getNode(new T(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Lt(n){return Np({timestamp:Ba(n)})}function za(n,e,t,i,s){n.dataUpdateCount++;const o=new T(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let a=[];if(s)if(i){const c=Ht(t,u=>R(u));a=function Tp(n,e,t,i){const s=Ns(n,i);if(s){const o=Rs(s),a=o.path,l=o.queryId,c=F(a,e),u=S.fromObject(t);return Ds(n,a,new et(ms(l),c,u))}return[]}(n.serverSyncTree_,o,c,s)}else{const c=R(t);a=function Aa(n,e,t,i){const s=Ns(n,i);if(null!=s){const o=Rs(s),a=o.path,l=o.queryId,c=F(a,e);return Ds(n,a,new Le(ms(l),c,t))}return[]}(n.serverSyncTree_,o,c,s)}else if(i){const c=Ht(t,u=>R(u));a=function bp(n,e,t){const i=S.fromObject(t);return nt(n,new et({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,o,c)}else{const c=R(t);a=St(n.serverSyncTree_,o,c)}let l=o;a.length>0&&(l=st(n,o)),B(n.eventQueue_,l,a)}function qa(n,e){Hs(n,"connected",e),!1===e&&function jp(n){it(n,"onDisconnectEvents");const e=Lt(n),t=ln();_s(n.onDisconnect_,x(),(s,o)=>{const a=Ra(s,o,n.serverSyncTree_,e);Xe(t,s,a)});let i=[];_s(t,x(),(s,o)=>{i=i.concat(St(n.serverSyncTree_,s,o));const a=$s(n,s);st(n,a)}),n.onDisconnect_=ln(),B(n.eventQueue_,x(),i)}(n)}function Hs(n,e,t){const i=new T("/.info/"+e),s=R(t);n.infoData_.updateSnapshot(i,s);const o=St(n.infoSyncTree_,i,s);B(n.eventQueue_,i,o)}function An(n){return n.nextWriteId_++}function Ws(n,e,t,i,s){it(n,"set",{path:e.toString(),value:t,priority:i});const o=Lt(n),a=R(t,i),l=wn(n.serverSyncTree_,e),c=Ls(a,l,o),u=An(n),h=Ss(n.serverSyncTree_,e,c,u,!0);En(n.eventQueue_,h),n.server_.put(e.toString(),a.val(!0),(p,_)=>{const g="ok"===p;g||O("set at "+e+" failed: "+p);const C=me(n.serverSyncTree_,u,!g);B(n.eventQueue_,e,C),function ve(n,e,t,i){e&&Qe(()=>{if("ok"===t)e(null);else{const s=(t||"error").toUpperCase();let o=s;i&&(o+=": "+i);const a=new Error(o);a.code=s,e(a)}})}(0,s,p,_)});const d=$s(n,e);st(n,d),B(n.eventQueue_,d,[])}function Gs(n,e,t){let i;i=".info"===v(e._path)?yn(n.infoSyncTree_,e,t):yn(n.serverSyncTree_,e,t),Za(n.eventQueue_,e._path,i)}function it(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),P(t,...e)}function Vs(n,e,t){return wn(n.serverSyncTree_,e,t)||m.EMPTY_NODE}function In(n,e=n.transactionQueueTree_){if(e||Sn(n,e),Fe(e)){const t=Va(n,e);f(t.length>0,"Sending zero length transaction queue"),t.every(s=>0===s.status)&&function n_(n,e,t){const i=t.map(u=>u.currentWriteId),s=Vs(n,e,i);let o=s;const a=s.hash();for(let u=0;u<t.length;u++){const h=t[u];f(0===h.status,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=F(e,h.path);o=o.updateChild(d,h.currentOutputSnapshotRaw)}const l=o.val(!0),c=e;n.server_.put(c.toString(),l,u=>{it(n,"transaction put response",{path:c.toString(),status:u});let h=[];if("ok"===u){const d=[];for(let p=0;p<t.length;p++)t[p].status=2,h=h.concat(me(n.serverSyncTree_,t[p].currentWriteId)),t[p].onComplete&&d.push(()=>t[p].onComplete(null,!0,t[p].currentOutputSnapshotResolved)),t[p].unwatcher();Sn(n,Cn(n.transactionQueueTree_,e)),In(n,n.transactionQueueTree_),B(n.eventQueue_,e,h);for(let p=0;p<d.length;p++)Qe(d[p])}else{if("datastale"===u)for(let d=0;d<t.length;d++)t[d].status=3===t[d].status?4:0;else{O("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=u}st(n,e)}},a)}(n,Rt(e),t)}else Da(e)&&xn(e,t=>{In(n,t)})}function st(n,e){const t=Ga(n,e),i=Rt(t);return function i_(n,e,t){if(0===e.length)return;const i=[];let s=[];const a=e.filter(l=>0===l.status).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const c=e[l],u=F(t,c.path);let d,h=!1;if(f(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,d=c.abortReason,s=s.concat(me(n.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=Hp)h=!0,d="maxretry",s=s.concat(me(n.serverSyncTree_,c.currentWriteId,!0));else{const p=Vs(n,c.path,a);c.currentInputSnapshot=p;const _=e[l].update(p.val());if(void 0!==_){Mt("transaction failed: Data returned ",_,c.path);let g=R(_);"object"==typeof _&&null!=_&&ie(_,".priority")||(g=g.updatePriority(p.getPriority()));const k=c.currentWriteId,be=Lt(n),Dn=Ls(g,p,be);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=Dn,c.currentWriteId=An(n),a.splice(a.indexOf(k),1),s=s.concat(Ss(n.serverSyncTree_,c.path,Dn,c.currentWriteId,c.applyLocally)),s=s.concat(me(n.serverSyncTree_,k,!0))}else h=!0,d="nodata",s=s.concat(me(n.serverSyncTree_,c.currentWriteId,!0))}B(n.eventQueue_,t,s),s=[],h&&(e[l].status=2,setTimeout(e[l].unwatcher,Math.floor(0)),e[l].onComplete&&i.push("nodata"===d?()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot):()=>e[l].onComplete(new Error(d),!1,null)))}Sn(n,n.transactionQueueTree_);for(let l=0;l<i.length;l++)Qe(i[l]);In(n,n.transactionQueueTree_)}(n,Va(n,t),i),i}function Ga(n,e){let t,i=n.transactionQueueTree_;for(t=v(e);null!==t&&void 0===Fe(i);)i=Cn(i,t),t=v(e=E(e));return i}function Va(n,e){const t=[];return $a(n,e,t),t.sort((i,s)=>i.order-s.order),t}function $a(n,e,t){const i=Fe(e);if(i)for(let s=0;s<i.length;s++)t.push(i[s]);xn(e,s=>{$a(n,s,t)})}function Sn(n,e){const t=Fe(e);if(t){let i=0;for(let s=0;s<t.length;s++)2!==t[s].status&&(t[i]=t[s],i++);t.length=i,Fs(e,t.length>0?t:void 0)}xn(e,i=>{Sn(n,i)})}function $s(n,e){const t=Rt(Ga(n,e)),i=Cn(n.transactionQueueTree_,e);return function Pp(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,s=>{Qs(n,s)}),Qs(n,i),Ma(i,s=>{Qs(n,s)}),t}function Qs(n,e){const t=Fe(e);if(t){const i=[];let s=[],o=-1;for(let a=0;a<t.length;a++)3===t[a].status||(1===t[a].status?(f(o===a-1,"All SENT items should be at beginning of queue."),o=a,t[a].status=3,t[a].abortReason="set"):(f(0===t[a].status,"Unexpected transaction status in abort"),t[a].unwatcher(),s=s.concat(me(n.serverSyncTree_,t[a].currentWriteId,!0)),t[a].onComplete&&i.push(t[a].onComplete.bind(null,new Error("set"),!1,null))));-1===o?Fs(e,void 0):t.length=o+1,B(n.eventQueue_,Rt(e),s);for(let a=0;a<i.length;a++)Qe(i[a])}}const js=function(n,e){const t=o_(n),i=t.namespace;return"firebase.com"===t.domain&&K(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&K("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&O("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ji(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new T(t.pathString)}},o_=function(n){let e="",t="",i="",s="",o="",a=!0,l="https",c=443;if("string"==typeof n){let u=n.indexOf("//");u>=0&&(l=n.substring(0,u-1),n=n.substring(u+2));let h=n.indexOf("/");-1===h&&(h=n.length);let d=n.indexOf("?");-1===d&&(d=n.length),e=n.substring(0,Math.min(h,d)),h<d&&(s=function s_(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let s=t[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}(n.substring(h,d)));const p=function r_(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):O(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,d)));u=e.indexOf(":"),u>=0?(a="https"===l||"wss"===l,c=parseInt(e.substring(u+1),10)):u=e.length;const _=e.slice(0,u);if("localhost"===_.toLowerCase())t="localhost";else if(_.split(".").length<=2)t=_;else{const g=e.indexOf(".");i=e.substring(0,g).toLowerCase(),t=e.substring(g+1),o=i}"ns"in p&&(o=p.ns)}return{host:e,port:c,domain:t,subdomain:i,secure:a,scheme:l,pathString:s,namespace:o}};class ja{constructor(e,t,i,s){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=s}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+D(this.snapshot.exportVal())}}class Ja{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Js{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return f(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class z{constructor(e,t,i,s){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=s}get key(){return y(this._path)?null:ts(this._path)}get ref(){return new $(this._repo,this._path)}get _queryIdentifier(){const e=ta(this._queryParams),t=$i(e);return"{}"===t?"default":t}get _queryObject(){return ta(this._queryParams)}isEqual(e){if(!((e=Te(e))instanceof z))return!1;const t=this._repo===e._repo,i=ns(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Yd(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class $ extends z{constructor(e,t){super(e,t,new us,!1)}get parent(){const e=Ho(this._path);return null===e?null:new $(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ue{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new T(e),i=rt(this.ref,e);return new Ue(this._node.getChild(t),i,I)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,s)=>e(new Ue(s,rt(this.ref,i),I)))}hasChild(e){const t=new T(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ks(n,e){return(n=Te(n))._checkNotDeleted("ref"),void 0!==e?rt(n._root,e):n._root}function rt(n,e){return null===v((n=Te(n))._path)?Bp("child","path",e,!1):qs("child","path",e,!1),new $(n._repo,N(n._path,e))}function Ys(n,e){(function(n,e){if(".info"===v(e))throw new Error(n+" failed = Can't modify data under /.info/")})("set",(n=Te(n))._path),function(n,e,t,i){i&&void 0===e||Mt(He(n,"value"),e,t)}("set",e,n._path,!1);const t=new ot;return Ws(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}class Ot{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new ja("value",this,new Ue(e.snapshotNode,new $(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Ja(this,e,t):null}matches(e){return e instanceof Ot&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Rn{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Ja(this,e,t):null}createEvent(e,t){f(null!=e.childName,"Child events should have a childName.");const i=rt(new $(t._repo,t._path),e.childName),s=t._queryParams.getIndex();return new ja(e.type,this,new Ue(e.snapshotNode,i,s),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Rn&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Ka(n,e,t,i){return function Zt(n,e,t,i,s){let o;if("object"==typeof i&&(o=void 0,s=i),"function"==typeof i&&(o=i),s&&s.onlyOnce){const c=t,u=(h,d)=>{Gs(n._repo,n,l),c(h,d)};u.userCallback=t.userCallback,u.context=t.context,t=u}const a=new Js(t,o||void 0),l="value"===e?new Ot(a):new Rn(e,a);return function Xp(n,e,t){let i;i=".info"===v(e._path)?ks(n.infoSyncTree_,e,t):ks(n.serverSyncTree_,e,t),Za(n.eventQueue_,e._path,i)}(n._repo,n,l),()=>Gs(n._repo,n,l)}(n,"value",e,t,i)}(function hp(n){f(!gn,"__referenceConstructor has already been defined"),gn=n})($),function mp(n){f(!vn,"__referenceConstructor has already been defined"),vn=n}($);const Xs={};function tl(n,e,t,i,s){let o=i||n.options.databaseURL;void 0===o&&(n.options.projectId||K("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),P("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c,u,a=js(o,s),l=a.repoInfo;typeof process<"u"&&process.env&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(c=!0,o=`http://${u}?ns=${l.namespace}`,a=js(o,s),l=a.repoInfo):c=!a.repoInfo.secure;const h=s&&c?new gt(gt.OWNER):new Id(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Tn(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Pa(n)}(t))throw new Error(He(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",a),y(a.path)||K("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function b_(n,e,t,i){let s=Xs[e.name];s||(s={},Xs[e.name]=s);let o=s[n.toURLString()];return o&&K("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Wp(n,false,t,i),s[n.toURLString()]=o,o}(l,n,h,new Ad(n.name,t));return new x_(d,n)}class x_{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Gp(n,e,t){if(n.stats_=Yi(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new an(n.repoInfo_,(i,s,o,a)=>{za(n,i,s,o,a)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>qa(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{D(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Pe(n.repoInfo_,e,(i,s,o,a)=>{za(n,i,s,o,a)},i=>{qa(n,i)},i=>{!function Vp(n,e){L(e,(t,i)=>{Hs(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function Nd(n,e){const t=n.toString();return Ki[t]||(Ki[t]=e()),Ki[t]}(n.repoInfo_,()=>new Nh(n.stats_,n.server_)),n.infoData_=new Eh,n.infoSyncTree_=new Ea({startListening:(i,s,o,a)=>{let l=[];const c=n.infoData_.getNode(i._path);return c.isEmpty()||(l=St(n.infoSyncTree_,i._path,c),setTimeout(()=>{a("ok")},0)),l},stopListening:()=>{}}),Hs(n,"connected",!1),n.serverSyncTree_=new Ea({startListening:(i,s,o,a)=>(n.server_.listen(i,o,s,(l,c)=>{const u=a(l,c);B(n.eventQueue_,i._path,u)}),[]),stopListening:(i,s)=>{n.server_.unlisten(i,s)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new $(this._repo,x())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function w_(n,e){const t=Xs[e];(!t||t[n.key]!==n)&&K(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function Wa(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&K("Cannot call "+e+" on a deleted database.")}}function il(n=Cr(),e){const t=We(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=(n=>{const e=(n=>{var e,t;return null===(t=null===(e=Ut())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]})(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),i]:[e.substring(0,t),i]})("database");i&&function T_(n,e,t,i={}){(n=Te(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&K("Cannot call useEmulator() after instance has already been initialized.");const s=n._repoInternal;let o;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&K('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new gt(gt.OWNER);else if(i.mockUserToken){const a="string"==typeof i.mockUserToken?i.mockUserToken:function fl(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ft(JSON.stringify({alg:"none",type:"JWT"})),Ft(JSON.stringify(a)),""].join(".")}(i.mockUserToken,n.app.options.projectId);o=new gt(a)}!function y_(n,e,t,i){n.repoInfo_=new ji(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(s,e,t,o)}(t,...i)}return t}Pe.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Pe.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function E_(n){(function ro(n){Wi=n})("10.12.2"),ce(new se("database",(e,{instanceIdentifier:t})=>tl(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),W(io,"1.0.5",n),W(io,"1.0.5","esm2017")}();var we=Q(8424),r=Q(4769),S_=Q(5133),sl=Q(7341);const k_=["workarea"];function N_(n,e){if(1&n){const t=r.EpF();r.ynx(0),r.TgZ(1,"div",122)(2,"h4"),r._uU(3,"Path"),r.qZA(),r.TgZ(4,"div",96)(5,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(7),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement,"x"))}),r.TgZ(6,"input",123,124),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(7),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement,"x",+s.value))}),r.qZA(),r.TgZ(8,"span"),r._uU(9,"X"),r.qZA()(),r.TgZ(10,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(12),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement,"y"))}),r.TgZ(11,"input",123,125),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(12),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement,"y",+s.value))}),r.qZA(),r.TgZ(13,"span"),r._uU(14,"Y"),r.qZA()()()(),r.BQk()}if(2&n){const t=r.oxw(2);r.xp6(6),r.Q6J("value",t.selectedElement.x),r.xp6(5),r.Q6J("value",t.selectedElement.y)}}function R_(n,e){if(1&n){const t=r.EpF();r.ynx(0),r.TgZ(1,"div",126)(2,"h4"),r._uU(3,"Rectangle"),r.qZA(),r.TgZ(4,"div",96)(5,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(7),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement,"x"))}),r.TgZ(6,"input",123,127),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(7),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement,"x",+s.value))}),r.qZA(),r.TgZ(8,"span"),r._uU(9,"X"),r.qZA()(),r.TgZ(10,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(12),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement,"y"))}),r.TgZ(11,"input",123,128),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(12),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement,"y",+s.value))}),r.qZA(),r.TgZ(13,"span"),r._uU(14,"Y"),r.qZA()(),r.TgZ(15,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(17),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement.options,"width"))}),r.TgZ(16,"input",123,129),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(17),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement.options,"width",+s.value))}),r.qZA(),r.TgZ(18,"span",100),r._uU(19,"Width"),r.qZA()(),r.TgZ(20,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(22),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement.options,"height"))}),r.TgZ(21,"input",123,130),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(22),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement.options,"height",+s.value))}),r.qZA(),r.TgZ(23,"span",100),r._uU(24,"Height"),r.qZA()()()(),r.BQk()}if(2&n){const t=r.oxw(2);r.xp6(6),r.Q6J("value",t.selectedElement.x),r.xp6(5),r.Q6J("value",t.selectedElement.y),r.xp6(5),r.Q6J("value",t.selectedElement.options.width),r.xp6(5),r.Q6J("value",t.selectedElement.options.height)}}function D_(n,e){if(1&n){const t=r.EpF();r.ynx(0),r.TgZ(1,"div",131)(2,"h4"),r._uU(3,"Image"),r.qZA(),r.TgZ(4,"div",96)(5,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(7),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement,"x"))}),r.TgZ(6,"input",132,133),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(7),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement,"x",+s.value))}),r.qZA(),r.TgZ(8,"span"),r._uU(9,"X"),r.qZA()(),r.TgZ(10,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(12),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement,"y"))}),r.TgZ(11,"input",134,135),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(12),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement,"y",+s.value))}),r.qZA(),r.TgZ(13,"span"),r._uU(14,"Y"),r.qZA()(),r.TgZ(15,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(17),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement.options,"width"))}),r.TgZ(16,"input",123,136),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(17),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement.options,"width",+s.value))}),r.qZA(),r.TgZ(18,"span",100),r._uU(19,"Width"),r.qZA()(),r.TgZ(20,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(22),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement.options,"height"))}),r.TgZ(21,"input",123,137),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(22),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement.options,"height",+s.value))}),r.qZA(),r.TgZ(23,"span",100),r._uU(24,"Height"),r.qZA()()()(),r.BQk()}if(2&n){const t=r.oxw(2);r.xp6(6),r.Q6J("value",t.selectedElement.x),r.xp6(5),r.Q6J("value",t.selectedElement.y),r.xp6(5),r.Q6J("value",t.selectedElement.options.width),r.xp6(5),r.Q6J("value",t.selectedElement.options.height)}}function M_(n,e){if(1&n){const t=r.EpF();r.ynx(0),r.TgZ(1,"div",138)(2,"h4"),r._uU(3,"Ellipse"),r.qZA(),r.TgZ(4,"div",96)(5,"label",139),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(7),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement.options,"cx"))}),r.TgZ(6,"input",140,141),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(7),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement.options,"cx",+s.value))}),r.qZA(),r.TgZ(8,"span"),r._uU(9,"X"),r.qZA()(),r.TgZ(10,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(12),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement.options,"cy"))}),r.TgZ(11,"input",142,143),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(12),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement.options,"cy",+s.value))}),r.qZA(),r.TgZ(13,"span"),r._uU(14,"Y"),r.qZA()(),r.TgZ(15,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(17),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement.options,"rx"))}),r.TgZ(16,"input",144,145),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(17),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement.options,"rx",+s.value))}),r.qZA(),r.TgZ(18,"span"),r._uU(19,"Radius X"),r.qZA()(),r.TgZ(20,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(22),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement.options,"ry"))}),r.TgZ(21,"input",146,147),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(22),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement.options,"ry",+s.value))}),r.qZA(),r.TgZ(23,"span"),r._uU(24,"Radius Y"),r.qZA()()()(),r.BQk()}if(2&n){const t=r.oxw(2);r.xp6(6),r.Q6J("value",t.selectedElement.options.cx),r.xp6(5),r.Q6J("value",t.selectedElement.options.cy),r.xp6(5),r.Q6J("value",t.selectedElement.options.rx),r.xp6(5),r.Q6J("value",t.selectedElement.options.ry)}}function P_(n,e){if(1&n){const t=r.EpF();r.ynx(0),r.TgZ(1,"div",148)(2,"h4"),r._uU(3,"Line"),r.qZA(),r.TgZ(4,"div",96)(5,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(7),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement.options,"x1"))}),r.TgZ(6,"input",149,150),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(7),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement.options,"x1",+s.value))}),r.qZA(),r.TgZ(8,"span"),r._uU(9,"Start X"),r.qZA()(),r.TgZ(10,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(12),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement.options,"y1"))}),r.TgZ(11,"input",151,152),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(12),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement.options,"y1",+s.value))}),r.qZA(),r.TgZ(13,"span"),r._uU(14,"Start Y"),r.qZA()(),r.TgZ(15,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(17),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement.options,"x2"))}),r.TgZ(16,"input",153,154),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(17),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement.options,"x2",+s.value))}),r.qZA(),r.TgZ(18,"span"),r._uU(19,"End X"),r.qZA()(),r.TgZ(20,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(22),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement.options,"y2"))}),r.TgZ(21,"input",155,156),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(22),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement.options,"y2",+s.value))}),r.qZA(),r.TgZ(23,"span"),r._uU(24,"End Y"),r.qZA()()()(),r.BQk()}if(2&n){const t=r.oxw(2);r.xp6(6),r.Q6J("value",t.selectedElement.options.x1),r.xp6(5),r.Q6J("value",t.selectedElement.options.y1),r.xp6(5),r.Q6J("value",t.selectedElement.options.x2),r.xp6(5),r.Q6J("value",t.selectedElement.options.y2)}}function L_(n,e){if(1&n){const t=r.EpF();r.ynx(0),r.TgZ(1,"div",157)(2,"h4"),r._uU(3,"Text"),r.qZA(),r.TgZ(4,"div",96)(5,"label",158)(6,"input",159,160),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(7),o=r.oxw(2);return r.KtG(o.selectedElement.value=s.value)}),r.qZA(),r.TgZ(8,"span"),r._uU(9,"Content"),r.qZA()(),r.TgZ(10,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(12),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement,"x"))}),r.TgZ(11,"input",161,162),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(12),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement,"x",+s.value))}),r.qZA(),r.TgZ(13,"span"),r._uU(14,"X"),r.qZA()(),r.TgZ(15,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(17),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement,"y"))}),r.TgZ(16,"input",163,164),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(17),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement,"y",+s.value))}),r.qZA(),r.TgZ(18,"span"),r._uU(19,"Y"),r.qZA()(),r.TgZ(20,"div",165)(21,"span"),r._uU(22,"Font"),r.qZA(),r.TgZ(23,"div",166),r._uU(24),r.qZA(),r._UZ(25,"div",118)(26,"input",167),r.TgZ(27,"select",168,169),r.NdJ("change",function(){r.CHM(t);const s=r.MAs(28),o=r.oxw(2);return r.KtG(o.selectedElement.options.fontFamily=s.value)}),r.TgZ(29,"option",170),r._uU(30,"Arial"),r.qZA(),r.TgZ(31,"option",171),r._uU(32,"Arial Black"),r.qZA(),r.TgZ(33,"option",172),r._uU(34,"Comic Sans MS"),r.qZA(),r.TgZ(35,"option",173),r._uU(36,"Courier New"),r.qZA(),r.TgZ(37,"option",174),r._uU(38,"Georgia"),r.qZA(),r.TgZ(39,"option",175),r._uU(40,"Impact"),r.qZA(),r.TgZ(41,"option",176),r._uU(42,"Lucida Console"),r.qZA(),r.TgZ(43,"option",177),r._uU(44,"Lucida Sans Unicode"),r.qZA(),r.TgZ(45,"option",178),r._uU(46,"Monospace"),r.qZA(),r.TgZ(47,"option",179),r._uU(48,"Palatino Linotype"),r.qZA(),r.TgZ(49,"option",180),r._uU(50,"Sans-serif"),r.qZA(),r.TgZ(51,"option",181),r._uU(52,"Serif"),r.qZA(),r.TgZ(53,"option",182),r._uU(54,"Tahoma"),r.qZA(),r.TgZ(55,"option",183),r._uU(56,"Times New Roman"),r.qZA(),r.TgZ(57,"option",184),r._uU(58,"Trebuchet MS"),r.qZA(),r.TgZ(59,"option",185),r._uU(60,"Verdana"),r.qZA()()(),r.TgZ(61,"div",186)(62,"span"),r._uU(63,"Font Style"),r.qZA(),r.TgZ(64,"div",187),r.NdJ("click",function(){r.CHM(t);const s=r.oxw(2);return r.KtG(s.toggleFontWeight())}),r._uU(65," B "),r.qZA(),r.TgZ(66,"div",188),r.NdJ("click",function(){r.CHM(t);const s=r.oxw(2);return r.KtG(s.toggleFontStyle())}),r._uU(67," i "),r.qZA()(),r.TgZ(68,"label",189),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(70),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement.options,"fontSize"))}),r.TgZ(69,"input",190,191),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(70),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement.options,"fontSize",+s.value))}),r.qZA(),r.TgZ(71,"span",192),r._uU(72,"Font Size"),r.qZA()()()(),r.BQk()}if(2&n){const t=r.oxw(2);r.xp6(6),r.Q6J("value",t.selectedElement.value),r.xp6(5),r.Q6J("value",t.selectedElement.x),r.xp6(5),r.Q6J("value",t.selectedElement.y),r.xp6(7),r.Udp("font-family",t.selectedElement.options.fontFamily),r.xp6(1),r.hij(" ",t.selectedElement.options.fontFamily," "),r.xp6(3),r.Q6J("value",t.selectedElement.options.fontFamily),r.xp6(37),r.ekj("active","bold"===t.selectedElement.options.fontWeight),r.xp6(2),r.ekj("active","italic"===t.selectedElement.options.fontStyle),r.xp6(3),r.Q6J("value",t.selectedElement.options.fontSize)}}function O_(n,e){if(1&n){const t=r.EpF();r.ynx(0),r.TgZ(1,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(3),o=r.oxw(2);return r.KtG(o.onDragDown(s,o.selectedElement.options,"rx"))}),r.TgZ(2,"input",193,194),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(3),o=r.oxw(2);return r.KtG(o.setNumberValue(o.selectedElement.options,"rx",+s.value))}),r.qZA(),r.TgZ(4,"span",100),r._uU(5,"Roundness"),r.qZA(),r._UZ(6,"div",195),r.qZA(),r.BQk()}if(2&n){const t=r.oxw(2);r.xp6(2),r.Q6J("value",t.selectedElement.options.rx)}}function Z_(n,e){1&n&&(r.ynx(0),r._uU(1,"\xb7\xb7\xb7"),r.BQk())}function F_(n,e){1&n&&(r.ynx(0),r._uU(1,"- -"),r.BQk())}function U_(n,e){1&n&&(r.ynx(0),r._uU(1,"-\xb7-"),r.BQk())}function B_(n,e){1&n&&(r.ynx(0),r._uU(1,"-\xb7\xb7-"),r.BQk())}function z_(n,e){1&n&&(r.ynx(0),r._uU(1,"\u2014"),r.BQk())}function q_(n,e){1&n&&r.GkF(0)}function H_(n,e){if(1&n&&(r.ynx(0),r.YNc(1,q_,1,0,"ng-container",196),r.BQk()),2&n){r.oxw(2);const t=r.MAs(47);r.xp6(1),r.Q6J("ngTemplateOutlet",t)}}function W_(n,e){if(1&n){const t=r.EpF();r.ynx(0)(1,93),r.YNc(2,N_,15,2,"ng-container",94),r.YNc(3,R_,25,4,"ng-container",94),r.YNc(4,D_,25,4,"ng-container",94),r.YNc(5,M_,25,4,"ng-container",94),r.YNc(6,P_,25,4,"ng-container",94),r.YNc(7,L_,73,12,"ng-container",94),r.TgZ(8,"div",95)(9,"div",96)(10,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(12),o=r.oxw();return r.KtG(o.onDragDown(s,o.selectedElement,"rotation"))}),r.TgZ(11,"input",98,99),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(12),o=r.oxw();return r.KtG(o.setNumberValue(o.selectedElement,"rotation",+s.value))}),r.qZA(),r.TgZ(13,"span",100),r._uU(14,"Rotation"),r.qZA(),r.TgZ(15,"div",101),r._UZ(16,"div",102),r.qZA()(),r.TgZ(17,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(19),o=r.oxw();return r.KtG(o.onDragDown(s,o.selectedElement,"opacity"))}),r.TgZ(18,"input",103,104),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(19),o=r.oxw();return r.KtG(o.setNumberValue(o.selectedElement,"opacity",+s.value))}),r.qZA(),r.TgZ(20,"span",105),r._uU(21,"Opacity"),r.qZA()(),r.YNc(22,O_,7,1,"ng-container",94),r.qZA()(),r.TgZ(23,"div",106)(24,"h4"),r._uU(25,"Stroke"),r.qZA(),r.TgZ(26,"div",96)(27,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(29),o=r.oxw();return r.KtG(o.onDragDown(s,o.selectedElement.options,"strokeWidth"))}),r.TgZ(28,"input",107,108),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(29),o=r.oxw();return r.KtG(o.setNumberValue(o.selectedElement.options,"strokeWidth",+s.value))}),r.qZA(),r.TgZ(30,"span",100),r._uU(31,"Width"),r.qZA(),r._UZ(32,"div",109),r.qZA(),r.TgZ(33,"div",110)(34,"span"),r._uU(35,"Dash"),r.qZA(),r.TgZ(36,"select",111,112),r.NdJ("change",function(){r.CHM(t);const s=r.MAs(37),o=r.oxw();return r.KtG(o.selectedElement.options.dasharray=s.value)}),r.TgZ(38,"option",113),r._uU(39,"\u2014"),r.qZA(),r.TgZ(40,"option",114),r._uU(41,"\xb7\xb7\xb7"),r.qZA(),r.TgZ(42,"option",115),r._uU(43,"- -"),r.qZA(),r.TgZ(44,"option",116),r._uU(45,"-\xb7-"),r.qZA(),r.TgZ(46,"option",117),r._uU(47,"-\xb7\xb7-"),r.qZA()(),r._UZ(48,"div",118),r.TgZ(49,"label",119),r.ynx(50,93),r.YNc(51,Z_,2,0,"ng-container",94),r.YNc(52,F_,2,0,"ng-container",94),r.YNc(53,U_,2,0,"ng-container",94),r.YNc(54,B_,2,0,"ng-container",94),r.YNc(55,z_,2,0,"ng-container",120),r.BQk(),r.qZA()(),r.TgZ(56,"label",121)(57,"span",100),r._uU(58,"Stroke Join"),r.qZA()(),r.TgZ(59,"label",121)(60,"span",100),r._uU(61,"Stroke Cap"),r.qZA()()()(),r.YNc(62,H_,2,1,"ng-container",120),r.BQk()()}if(2&n){const t=r.oxw();r.xp6(1),r.Q6J("ngSwitch",t.selectedElement.type),r.xp6(1),r.Q6J("ngSwitchCase",t.elementTypeEnum.BRUSH),r.xp6(1),r.Q6J("ngSwitchCase",t.elementTypeEnum.RECT),r.xp6(1),r.Q6J("ngSwitchCase",t.elementTypeEnum.IMAGE),r.xp6(1),r.Q6J("ngSwitchCase",t.elementTypeEnum.ELLIPSE),r.xp6(1),r.Q6J("ngSwitchCase",t.elementTypeEnum.LINE),r.xp6(1),r.Q6J("ngSwitchCase",t.elementTypeEnum.TEXT),r.xp6(4),r.Q6J("value",t.selectedElement.rotation),r.xp6(4),r.Akn("transform: rotate("+t.selectedElement.rotation+"deg);"),r.xp6(3),r.Q6J("value",t.selectedElement.opacity),r.xp6(4),r.Q6J("ngSwitchCase",t.elementTypeEnum.RECT),r.xp6(6),r.Q6J("value",t.selectedElement.options.strokeWidth),r.xp6(8),r.Q6J("value",t.selectedElement.options.dasharray),r.xp6(14),r.Q6J("ngSwitch",t.selectedElement.options.dasharray),r.xp6(1),r.Q6J("ngSwitchCase","2,2"),r.xp6(1),r.Q6J("ngSwitchCase","5,5"),r.xp6(1),r.Q6J("ngSwitchCase","5,2,2,2"),r.xp6(1),r.Q6J("ngSwitchCase","5,2,2,2,2,2")}}function G_(n,e){1&n&&r.GkF(0)}function V_(n,e){if(1&n&&(r.ynx(0),r.YNc(1,G_,1,0,"ng-container",196),r.BQk()),2&n){r.oxw();const t=r.MAs(47);r.xp6(1),r.Q6J("ngTemplateOutlet",t)}}function $_(n,e){1&n&&(r.ynx(0),r._uU(1,"\xb7\xb7\xb7"),r.BQk())}function Q_(n,e){1&n&&(r.ynx(0),r._uU(1,"- -"),r.BQk())}function j_(n,e){1&n&&(r.ynx(0),r._uU(1,"-\xb7-"),r.BQk())}function J_(n,e){1&n&&(r.ynx(0),r._uU(1,"-\xb7\xb7-"),r.BQk())}function K_(n,e){1&n&&(r.ynx(0),r._uU(1,"\u2014"),r.BQk())}function Y_(n,e){if(1&n){const t=r.EpF();r.TgZ(0,"div",197)(1,"h4"),r._uU(2,"Whiteboard"),r.qZA(),r.TgZ(3,"div",96)(4,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(6),o=r.oxw();return r.KtG(o.onDragDown(s,o.options,"canvasWidth"))}),r.TgZ(5,"input",198,199),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(6),o=r.oxw();return o.setNumberValue(o.options,"canvasWidth",+s.value),r.KtG(o.updateOptions())}),r.qZA(),r.TgZ(7,"span",100),r._uU(8,"Width"),r.qZA()(),r.TgZ(9,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(11),o=r.oxw();return r.KtG(o.onDragDown(s,o.options,"canvasHeight"))}),r.TgZ(10,"input",198,200),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(11),o=r.oxw();return o.setNumberValue(o.options,"canvasHeight",+s.value),r.KtG(o.updateOptions())}),r.qZA(),r.TgZ(12,"span",100),r._uU(13,"Height"),r.qZA()(),r.TgZ(14,"label",201)(15,"span"),r._uU(16,"Color"),r.qZA(),r.TgZ(17,"div",202)(18,"div",203),r.NdJ("change",function(s){r.CHM(t);const o=r.oxw();return r.KtG(o.options.backgroundColor=s)}),r.TgZ(19,"div",61),r._UZ(20,"div",204),r.TgZ(21,"div",205),r.O4$(),r.TgZ(22,"svg",206),r._UZ(23,"rect",207),r.qZA()()()()()(),r.kcU(),r.TgZ(24,"div",208)(25,"span"),r._uU(26,"Sizes"),r.qZA(),r.TgZ(27,"select",209,210),r.NdJ("change",function(){r.CHM(t);const s=r.MAs(28),o=r.oxw();return r.KtG(o.setSizeResolution(s.value))}),r.TgZ(29,"option",211),r._uU(30,"Custom"),r.qZA(),r.TgZ(31,"option",212),r._uU(32,"Fit to Content"),r.qZA(),r.TgZ(33,"optgroup",213)(34,"option",214),r._uU(35,"Twitter Post (1012 \xd7 506)"),r.qZA(),r.TgZ(36,"option",215),r._uU(37,"Twitter Header (1500 \xd7 500)"),r.qZA(),r.TgZ(38,"option",216),r._uU(39,"Facebook Post (1200 \xd7 630)"),r.qZA(),r.TgZ(40,"option",217),r._uU(41,"Facebook Cover (820 \xd7 312)"),r.qZA(),r.TgZ(42,"option",218),r._uU(43,"Instagram Post (1080 \xd7 1080)"),r.qZA(),r.TgZ(44,"option",219),r._uU(45,"Instagram Story (1080 \xd7 1920)"),r.qZA(),r.TgZ(46,"option",220),r._uU(47,"Dribble Shot (400 \xd7 300)"),r.qZA(),r.TgZ(48,"option",221),r._uU(49,"Dribble Shot HD (800 \xd7 600)"),r.qZA(),r.TgZ(50,"option",222),r._uU(51,"LinkedIn Cover (1584 \xd7 396)"),r.qZA()(),r.TgZ(52,"optgroup",223)(53,"option",224),r._uU(54,"16:9 (1920 \xd7 1080)"),r.qZA(),r.TgZ(55,"option",225),r._uU(56,"4:3 (1024 \xd7 768)"),r.qZA()(),r.TgZ(57,"optgroup",226)(58,"option",227),r._uU(59,"Desktop (1140 \xd7 1024)"),r.qZA(),r.TgZ(60,"option",228),r._uU(61,"MacBook (834 \xd7 1194)"),r.qZA(),r.TgZ(62,"option",229),r._uU(63,"MacBook Pro (1024 \xd7 1366)"),r.qZA(),r.TgZ(64,"option",230),r._uU(65,"Surface Book (1440 \xd7 990)"),r.qZA(),r.TgZ(66,"option",231),r._uU(67,"iMac (1368 \xd7 912)"),r.qZA()(),r.TgZ(68,"optgroup",232)(69,"option",233),r._uU(70,"iPad Mini (768 \xd7 1024)"),r.qZA(),r.TgZ(71,"option",228),r._uU(72,'iPad Pro 11" (834 \xd7 1194)'),r.qZA(),r.TgZ(73,"option",229),r._uU(74,'iPad Pro 12.9" (1024 \xd7 1366)'),r.qZA(),r.TgZ(75,"option",230),r._uU(76,"Surface Pro 3 (1440 \xd7 990)"),r.qZA(),r.TgZ(77,"option",231),r._uU(78,"Surface Pro 4 (1368 \xd7 912)"),r.qZA()(),r.TgZ(79,"optgroup",234)(80,"option",235),r._uU(81,"iPhone 11 ProMax (414 \xd7 896)"),r.qZA(),r.TgZ(82,"option",236),r._uU(83,"iPhone 11 Pro / X (375 \xd7 812)"),r.qZA(),r.TgZ(84,"option",237),r._uU(85,"iPhone 8 Plus (414 \xd7 736)"),r.qZA(),r.TgZ(86,"option",238),r._uU(87,"iPhone 8 (375 \xd7 667)"),r.qZA(),r.TgZ(88,"option",239),r._uU(89,"Google Pixel 2 (411 \xd7 731)"),r.qZA(),r.TgZ(90,"option",240),r._uU(91,"Google Pixel XL (411 \xd7 823)"),r.qZA(),r.TgZ(92,"option",241),r._uU(93,"Android (360 \xd7 640)"),r.qZA()(),r.TgZ(94,"optgroup",242)(95,"option",243),r._uU(96,"A4 (595 \xd7 842)"),r.qZA(),r.TgZ(97,"option",244),r._uU(98,"A5 (420 \xd7 595)"),r.qZA(),r.TgZ(99,"option",245),r._uU(100,"A6 (297 \xd7 420)"),r.qZA(),r.TgZ(101,"option",246),r._uU(102,"Letter (612 \xd7 792)"),r.qZA(),r.TgZ(103,"option",247),r._uU(104,"Tabloid (792 \xd7 1224)"),r.qZA()()(),r._UZ(105,"div",118),r.TgZ(106,"label",248),r._uU(107),r.qZA()()(),r.TgZ(108,"div",106)(109,"h4"),r._uU(110,"Stroke"),r.qZA(),r.TgZ(111,"div",96)(112,"label",97),r.NdJ("mousedown",function(){r.CHM(t);const s=r.MAs(114),o=r.oxw();return r.KtG(o.onDragDown(s,o.options,"strokeWidth"))}),r.TgZ(113,"input",107,108),r.NdJ("input",function(){r.CHM(t);const s=r.MAs(114),o=r.oxw();return r.KtG(o.setNumberValue(o.options,"strokeWidth",+s.value))}),r.qZA(),r.TgZ(115,"span",100),r._uU(116,"Width"),r.qZA(),r._UZ(117,"div",109),r.qZA(),r.TgZ(118,"div",110)(119,"span"),r._uU(120,"Dash"),r.qZA(),r.TgZ(121,"select",111,112),r.NdJ("change",function(){r.CHM(t);const s=r.MAs(122),o=r.oxw();return o.options.dasharray=s.value,r.KtG(o.updateOptions())}),r.TgZ(123,"option",113),r._uU(124,"\u2014"),r.qZA(),r.TgZ(125,"option",114),r._uU(126,"\xb7\xb7\xb7"),r.qZA(),r.TgZ(127,"option",115),r._uU(128,"- -"),r.qZA(),r.TgZ(129,"option",116),r._uU(130,"-\xb7-"),r.qZA(),r.TgZ(131,"option",117),r._uU(132,"-\xb7\xb7-"),r.qZA()(),r._UZ(133,"div",118),r.TgZ(134,"label",119),r.ynx(135,93),r.YNc(136,$_,2,0,"ng-container",94),r.YNc(137,Q_,2,0,"ng-container",94),r.YNc(138,j_,2,0,"ng-container",94),r.YNc(139,J_,2,0,"ng-container",94),r.YNc(140,K_,2,0,"ng-container",120),r.BQk(),r.qZA()(),r.TgZ(141,"label",121)(142,"span",100),r._uU(143,"Stroke Join"),r.qZA()(),r.TgZ(144,"label",121)(145,"span",100),r._uU(146,"Stroke Cap"),r.qZA()()()()()}if(2&n){const t=r.MAs(28),i=r.oxw();r.xp6(5),r.Q6J("value",i.options.canvasWidth),r.xp6(5),r.Q6J("value",i.options.canvasHeight),r.xp6(13),r.uIk("fill",i.options.backgroundColor),r.xp6(84),r.Oqu(t.value),r.xp6(6),r.Q6J("value",i.options.strokeWidth),r.xp6(8),r.Q6J("value",i.options.dasharray),r.xp6(14),r.Q6J("ngSwitch",i.options.dasharray),r.xp6(1),r.Q6J("ngSwitchCase","2,2"),r.xp6(1),r.Q6J("ngSwitchCase","5,5"),r.xp6(1),r.Q6J("ngSwitchCase","5,2,2,2"),r.xp6(1),r.Q6J("ngSwitchCase","5,2,2,2,2,2")}}const X_=[{path:"",component:(()=>{class n{constructor(t){this._whiteboardService=t,this.data=[],this.toolsEnum=Ce.e9,this.elementTypeEnum=Ce.DQ,this.selectedTool=Ce.e9.BRUSH,this.selectedElement=null,this.options={strokeColor:"#ec407a",strokeWidth:5,fill:"#000",backgroundColor:"#fff",canvasHeight:600,canvasWidth:800,dasharray:""},this.formatTypes=Ce.a5,this.outerWidth=1200,this.outerHeight=750,this.zoom=1,this.x=0,this.y=0,this.loading=!1}ngOnInit(){const t=br({apiKey:we.N.apiKey,authDomain:we.N.authDomain,projectId:we.N.projectId,storageBucket:we.N.storageBucket,messagingSenderId:we.N.messagingSenderId,appId:we.N.appId,measurementId:we.N.measurementId,databaseURL:we.N.databaseURL});!function ud(n=Cr()){const e=We(n=Te(n),jt);return e.isInitialized()?e.getImmediate():function dd(n,e={}){const t=We(n,jt);if(t.isInitialized()){const s=t.getImmediate();if(Wt(e,t.getOptions()))return s;throw Z.create("already-initialized")}return t.initialize({options:e})}(n)}(t);const s=Ks(il(t),"data/");this.loading=!0,Ka(s,o=>{this.loading=!1;const a=o.val();this.data=a||[]})}ngAfterViewInit(){setTimeout(()=>{this.calculateSize()},0)}onDataChange(t){this.loading||(this.data=t,Ys(Ks(il(),"data/"),t))}calculateSize(){const t=this.workarea.nativeElement,i={w:this.options.canvasWidth,h:this.options.canvasHeight};let s=t.clientWidth,o=t.clientHeight;const a=s,l=o,c=this.zoom;s=Math.max(a,i.w*c*2),o=Math.max(l,i.h*c*2);const h=s/2-a/2,d=o/2-l/2;this.outerWidth=s,this.outerHeight=o,this.updateSize(i.w,i.h),setTimeout(()=>{t.scrollLeft=h,t.scrollTop=d},0)}updateSize(t,i){this.options.canvasWidth=t,this.options.canvasHeight=i;const s=this.zoom,l=this.outerWidth/2-t*s/2,c=this.outerHeight/2-i*s/2;setTimeout(()=>{this.x=l,this.y=c},0)}zoomWheel(t){const i=t;(i.altKey||i.ctrlKey)&&(t.preventDefault(),this.setZoom(Math.trunc(100*this.zoom-i.deltaY/100*(i.altKey?10:5))))}setZoom(t){const i=this.zoom;let s=+t/100;s<.001&&(s=.1);const o={w:this.options.canvasWidth,h:this.options.canvasHeight};let a=null;null!=a&&window.cancelAnimationFrame(a);const l=Date.now(),u=s-i,h=()=>{let p=(Date.now()-l)/500;p=Math.pow(p-1,3)+1,this.zoom=i+u*p,this.updateSize(o.w,o.h),p<1&&p>-.9?a=requestAnimationFrame(h):(this.zoom=s,this.updateSize(o.w,o.h))};h()}setSizeResolution(t){let i=this.options.canvasWidth,s=this.options.canvasHeight;const o=[];if(o[0]=parseInt(t.split("x")[0]),o[1]=parseInt(t.split("x")[1]),"Custom"==t)return;"content"==t&&(o[0]=100,o[1]=100);const a=o[0]-i,l=o[1]-s;let c=null;null!=c&&window.cancelAnimationFrame(c);const u=Date.now(),d=()=>{let _=(Date.now()-u)/500;_=Math.pow(_-1,3)+1,i=parseInt((o[0]-a+_*a).toFixed(0)),s=parseInt((o[1]-l+_*l).toFixed(0)),this.updateSize(i,s),_<1&&_>-.9?c=requestAnimationFrame(d):this.updateSize(i,s)};d()}onDragDown(t,i,s){const o=t.min?parseInt(t.min,10):null,a=t.max?parseInt(t.max,10):null,l=parseInt(t.step,10);let c=200;o&&a&&(c=a-o>0?(a-o)/l:200);const u=c/70*l;let h=0,d=parseInt(t.value,10);const p=g=>{0===h&&(h=g.pageY);const C=-1*(g.pageY-h);h=g.pageY;let k=C*u*1;k.toFixed(l<1?1:0),k=Math.floor(Number(d)+Number(k)),null!==a&&(k=Math.min(k,a)),null!==o&&(k=Math.max(k,o)),d=k,i[s]=d,t.value=d.toString()},_=()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",_)};document.addEventListener("mousemove",p),document.addEventListener("mouseup",_)}setNumberValue(t,i,s){isNaN(s)||(t[i]=s)}toggleFontWeight(){this.selectedElement&&(this.selectedElement.options.fontWeight="normal"===this.selectedElement.options.fontWeight?"bold":"normal")}toggleFontStyle(){this.selectedElement&&(this.selectedElement.options.fontStyle="normal"===this.selectedElement.options.fontStyle?"italic":"normal")}newDocument(){this._whiteboardService.erase()}saveAs(t){this._whiteboardService.save(t)}addImage(t){if(t){const i=t.files;if(i){const s=new FileReader;s.onload=o=>{this._whiteboardService.addImage(o.target.result)},s.readAsDataURL(i[0])}}}undo(){this._whiteboardService.undo()}redo(){this._whiteboardService.redo()}colorChange(t,i){this.selectedElement?this.selectedElement.options[t]=i:(this.options[t]=i,this.updateOptions())}swapColors(){[this.options.fill,this.options.strokeColor]=[this.options.strokeColor,this.options.fill],this.updateOptions()}updateOptions(){this.options=Object.assign({},this.options)}setSelectedElement(t){this.selectedElement=t}static#e=this.\u0275fac=function(i){return new(i||n)(r.Y36(Ce.vK))};static#t=this.\u0275cmp=r.Xpm({type:n,selectors:[["app-whiteboard-live-app"]],viewQuery:function(i,s){if(1&i&&r.Gf(k_,5),2&i){let o;r.iGM(o=r.CRH())&&(s.workarea=o.first)}},features:[r._Bn([Ce.vK])],decls:130,vars:38,consts:[[1,"editor"],["id","rulers"],["id","ruler_corner"],["id","ruler_x"],["id","ruler_y"],["id","workarea",1,"select",2,"overflow","scroll",3,"mousewheel"],["workarea",""],["id","svgcanvas"],[3,"data","selectedTool","options","strokeWidth","zoom","canvasHeight","canvasWidth","x","y","fullScreen","strokeColor","fill","backgroundColor","dataChange","selectElement","toolChanged"],["whiteboard",""],["id","menu_bar",1,"active"],[1,"menu"],["title","New document",1,"menu_title",3,"click"],["viewBox","0 0 16 16","width","20","height","20"],["fill","#565a66","d","m9.5 1.1l3.4 3.5l.1.4v2h-1V6H8V2H3v11h4v1H2.5l-.5-.5v-12l.5-.5h6.7l.3.1zM9 2v3h2.9L9 2zm4 14h-1v-3H9v-1h3V9h1v3h3v1h-3v3z"],["title","Save Board",1,"menu_title"],["viewBox","0 0 20 20","width","20","height","20"],["d","M12.984 12.656l2.625-2.578 1.406 1.406-5.016 5.016-5.016-5.016 1.406-1.406 2.625 2.578v-9.656h1.969v9.656zM18.984 12h2.016v6.984q0 0.797-0.609 1.406t-1.406 0.609h-13.969q-0.797 0-1.406-0.609t-0.609-1.406v-6.984h2.016v6.984h13.969v-6.984z","fill","#565a66"],["id","file_menu",1,"menu_list","inverted-undo"],[1,"menu_item",3,"click"],["title","Add image",1,"menu_title"],["fill","#565a66","d","M4 5h13v7h2V5c0-1.103-.897-2-2-2H4c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h8v-2H4V5z"],["fill","#565a66","d","m8 11l-3 4h11l-4-6l-3 4z"],["fill","#565a66","d","M19 14h-2v3h-3v2h3v3h2v-3h3v-2h-3z"],["type","file",1,"file-input",3,"change"],["title","Undo",1,"menu_title",3,"click"],["fill","#565a66","d","M9 10h6c1.654 0 3 1.346 3 3s-1.346 3-3 3h-3v2h3c2.757 0 5-2.243 5-5s-2.243-5-5-5H9V5L4 9l5 4v-3z"],["title","Redo",1,"menu_title",3,"click"],["fill","#565a66","d","M9 18h3v-2H9c-1.654 0-3-1.346-3-3s1.346-3 3-3h6v3l5-4l-5-4v3H9c-2.757 0-5 2.243-5 5s2.243 5 5 5z"],["id","panels",1,"tools_panel"],[4,"ngIf"],["main_context_panel",""],["id","tools_left",1,"tools_panel"],["title","Select Tool",1,"tool_button",3,"click"],["viewBox","0 0 24 24","width","24","height","24"],["d","M17.15 20.76l-2.94 1.5-3.68-6-4.41 3V1.24l12.5 12.01-4.41 1.5 2.94 6z"],["title","Brush Tool",1,"tool_button",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","24","viewBox","0 0 24 24","width","24",2,"transform","scale(-1, 1)"],["d","M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"],["title","Image Tool",1,"tool_button",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","24","viewBox","0 0 24 24","width","24"],["d","M0 0h24v24H0z","fill","none"],["d","M17 7l-5 5 5 5V7zm-2 9.17L12.83 12 15 9.83 17.17 12 15 14.17zM3 3v18h18V3H3zm16 16H5V5h14v14z"],["title","Line Tool",1,"tool_button",3,"click"],["viewBox","0 0 27 27","xmlns","http://www.w3.org/2000/svg","width","24","height","24"],["d","M 3 1 L 26 24 L 24 26 L 1 3 L 3 1 Z"],["title","Square/Rect Tool",1,"tool_button",3,"click"],["d","M 0 8 L 0 24 L 24 24 L 25 8 L 0 8 Z"],["title","Ellipse/Circle Tool",1,"tool_button",3,"click"],["cx","13","cy","13","rx","13","ry","9"],["title","Text Tool",1,"tool_button",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","24","viewBox","2 2 20 20","width","27","height","27"],["d","M5 4v3h5.5v12h3V7H19V4z"],["title","Eraser Tool",1,"tool_button",3,"click"],["d","M19 13H5v-2h14v2z"],["id","color_tools"],["id","tool_switch","title","Switch stroke and fill colors [X]",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 11 11"],["d","M3.01 2A6 6 0 019 8h1.83l-2.91 2.91L5 8h2a4 4 0 00-3.99-4v1.93L.1 3.02 3.01.1V2z"],["id","tool_fill","ngx-colors-trigger","",1,"color_tool","active",3,"change"],["title","Change fill color",1,"icon_label"],[1,"color_block"],["id","fill_bg"],["id","fill_color",1,"color_block"],["xmlns","http://www.w3.org/2000/svg","width","100%"],["width","100%","height","100%","opacity","1"],["id","tool_stroke","ngx-colors-trigger","",1,"color_tool",3,"change"],["title","Change stroke color",1,"icon_label"],["id","stroke_bg"],["id","stroke_color","title","Change stroke color",1,"color_block"],["id","tools_bottom",1,"tools_panel"],["id","zoom_select",3,"change"],["zoomSelect",""],["value","6"],["value","12"],["value","16"],["value","25"],["value","50"],["value","75"],["value","100","selected","selected"],["value","150"],["value","200"],["value","300"],["value","400"],["value","600"],["value","800"],["value","1600"],["id","zoom_panel","title","Change zoom level",1,"toolset"],["id","zoom_label",1,"select-input"],["id","zoomLabel",1,"zoom_tool","icon_label"],["xmlns","http://www.w3.org/2000/svg","height","24","viewBox","2 2 20 20","width","27"],["d","M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"],["id","zoom","type","text","readonly","readonly",3,"value"],[3,"ngSwitch"],[4,"ngSwitchCase"],["id","selected_panel",1,"context_panel",2,"display","block"],[1,"draginputs"],[1,"draginput",3,"mousedown"],["step","2","min","-180","max","180","type","text",1,"attr_changer",3,"value","input"],["angle",""],[1,"icon_label"],["id","tool_angle_indicator",1,"angle"],["id","tool_angle_indicator_cursor",1,"angle-cursor"],["step","5","min","0","max","100","type","text",1,"attr_changer",3,"value","input"],["group_opacity",""],["id","group_opacityLabel",1,"icon_label"],["id","stroke_panel",1,"context_panel",2,"display","block"],["size","2","value","1","data-attr","stroke-width","min","0","max","99","step","1",3,"value","input"],["stroke_width",""],[1,"draginput_cursor",2,"top","68.9394px"],[1,"stroke_tool","draginput"],["id","stroke_style",3,"value","change"],["dasharray",""],["selected","selected","value","none"],["value","2,2"],["value","5,5"],["value","5,2,2,2"],["value","5,2,2,2,2,2"],[1,"caret"],["id","stroke_style_label"],[4,"ngSwitchDefault"],[2,"display","none"],["id","path_panel",1,"context_panel","clearfix",2,"display","block"],["type","text","min","","max","","step","1",1,"attr_changer",3,"value","input"],["path_x",""],["path_y",""],["id","rect_panel",1,"context_panel",2,"display","block"],["rect_x",""],["rect_y",""],["rect_width",""],["rect_height",""],["id","image_panel",1,"context_panel","clearfix",2,"display","block"],["title","Change X coordinate","type","text","min","","max","","step","1",1,"attr_changer",3,"value","input"],["image_x",""],["title","Change Y coordinate","type","text","min","","max","","step","1",1,"attr_changer",3,"value","input"],["image_y",""],["image_width",""],["image_height",""],["id","ellipse_panel",1,"context_panel",2,"display","block"],["id","tool_ellipse_cx",1,"draginput",3,"mousedown"],["title","Change ellipse's cx coordinate","type","text","min","","max","","step","1",1,"attr_changer",3,"value","input"],["ellipse_cx",""],["title","Change ellipse's cy coordinate","type","text","min","","max","","step","1",1,"attr_changer",3,"value","input"],["ellipse_cy",""],["title","Change ellipse's x radius","type","text","min","","max","","step","1",1,"attr_changer",3,"value","input"],["ellipse_rx",""],["title","Change ellipse's y radius","type","text","min","","max","","step","1",1,"attr_changer",3,"value","input"],["ellipse_ry",""],["id","line_panel",1,"context_panel","clearfix",2,"display","block"],["type","text","min","","max","","step","1","title","Change line's starting x coordinate",1,"attr_changer",3,"value","input"],["line_x1",""],["type","text","min","","max","","step","1","title","Change line's starting y coordinate",1,"attr_changer",3,"value","input"],["line_y1",""],["type","text","min","","max","","step","1","title","Change line's ending x coordinate",1,"attr_changer",3,"value","input"],["line_x2",""],["type","text","min","","max","","step","1","title","Change line's ending y coordinate",1,"attr_changer",3,"value","input"],["line_y2",""],["id","text_panel",1,"context_panel",2,"display","block"],["data-title","Change Content",1,"draginput","twocol","textcontent"],["id","text","type","text",3,"value","input"],["text",""],["type","text","min","","max","","step","1","title","Change text x coordinate",1,"attr_changer",3,"value","input"],["text_x",""],["type","text","min","","max","","step","1","title","Change text y coordinate",1,"attr_changer",3,"value","input"],["text_y",""],["id","tool_font_family",1,"toolset","draginput","twocol"],["id","preview_font"],["id","font_family","data-title","Change Font Family","size","12","type","hidden"],["id","font_family_dropdown",3,"value","change"],["font_family",""],["value","Arial"],["value","Arial Black"],["value","Comic Sans MS"],["value","Courier New"],["value","Georgia"],["value","Impact"],["value","Lucida Console"],["value","Lucida Sans Unicode"],["value","monospace","selected",""],["value","Palatino Linotype"],["value","sans-serif","selected",""],["value","serif","selected",""],["value","Tahoma"],["value","Times New Roman"],["value","Trebuchet MS"],["value","Verdana"],[1,"draginput","font_style"],["id","tool_bold","data-title","Bold Text [B]",3,"click"],["id","tool_italic","data-title","Italic Text [I]",3,"click"],["id","tool_font_size","data-title","Change Font Size",1,"draginput",3,"mousedown"],["type","text","min","0","max","","step","1","title","Change text font size",1,"attr_changer",3,"value","input"],["font_size",""],["id","font_sizeLabel",1,"icon_label"],["type","text","step","5","min","0","max","100",1,"attr_changer",3,"value","input"],["rect_rx",""],[1,"draginput_cursor",2,"top","70px"],[4,"ngTemplateOutlet"],["id","canvas_panel",1,"context_panel"],["type","text","min","10","max","","step","1","pattern","[0-9]*",3,"value","input"],["canvas_width",""],["canvas_height",""],["data-title","Change canvas color",1,"draginput"],["id","color_canvas_tools"],["id","tool_canvas","ngx-colors-trigger","",1,"color_tool","active",3,"change"],["id","canvas_bg"],["id","canvas_color"],["xmlns","http://www.w3.org/2000/svg","width","60.5"],["width","100%","height","100%"],[1,"draginput"],[3,"change"],["resolution",""],["id","selectedPredefined","selected","selected"],["id","fitToContent","value","content"],["label","Social Media"],["value","1012x506"],["value","1500x500"],["value","1200x630"],["value","820x312"],["value","1080x1080"],["value","1080x1920"],["value","400x300"],["value","800x600"],["value","1584x396"],["label","Presentation"],["value","1920x1080"],["value","1024x768"],["label","Desktop"],["value","1140x1024"],["value","834x1194"],["value","1024x1366"],["value","1440x990"],["value","1368x912"],["label","Tablet"],["value","768x1024"],["label","Phone"],["value","414x896"],["value","375x812"],["value","414x736"],["value","375x667"],["value","411x731"],["value","411x823"],["value","360x640"],["label","Paper"],["value","595x842"],["value","420x595"],["value","297x420"],["value","612x792"],["value","792x1224"],["id","resolution_label"]],template:function(i,s){if(1&i){const o=r.EpF();r.TgZ(0,"div",0)(1,"div",1),r._UZ(2,"div",2)(3,"div",3)(4,"div",4),r.qZA(),r.TgZ(5,"div",5,6),r.NdJ("mousewheel",function(l){return s.zoomWheel(l)}),r.TgZ(7,"div",7)(8,"ng-whiteboard",8,9),r.NdJ("dataChange",function(l){return s.onDataChange(l)})("selectElement",function(l){return s.setSelectedElement(l)})("toolChanged",function(l){return s.selectedTool=l}),r.qZA()()(),r.TgZ(10,"div",10)(11,"div",11)(12,"div",12),r.NdJ("click",function(){return s.newDocument()}),r.O4$(),r.TgZ(13,"svg",13),r._UZ(14,"path",14),r.qZA()()(),r.kcU(),r.TgZ(15,"div",11)(16,"div",15),r.O4$(),r.TgZ(17,"svg",16),r._UZ(18,"path",17),r.qZA()(),r.kcU(),r.TgZ(19,"div",18)(20,"div",19),r.NdJ("click",function(){return s.saveAs(s.formatTypes.Png)}),r._uU(21,"Save as PNG"),r.qZA(),r.TgZ(22,"div",19),r.NdJ("click",function(){return s.saveAs(s.formatTypes.Jpeg)}),r._uU(23,"Save as JPEG"),r.qZA(),r.TgZ(24,"div",19),r.NdJ("click",function(){return s.saveAs(s.formatTypes.Svg)}),r._uU(25,"Save as SVG"),r.qZA(),r.TgZ(26,"div",19),r.NdJ("click",function(){return s.saveAs(s.formatTypes.Base64)}),r._uU(27,"Copy Base-64"),r.qZA()()(),r.TgZ(28,"div",11)(29,"label",20),r.O4$(),r.TgZ(30,"svg",16),r._UZ(31,"path",21)(32,"path",22)(33,"path",23),r.qZA(),r.kcU(),r.TgZ(34,"input",24),r.NdJ("change",function(l){return s.addImage(l.target)}),r.qZA()()(),r.TgZ(35,"div",11)(36,"div",25),r.NdJ("click",function(){return s.undo()}),r.O4$(),r.TgZ(37,"svg",16),r._UZ(38,"path",26),r.qZA()()(),r.kcU(),r.TgZ(39,"div",11)(40,"div",27),r.NdJ("click",function(){return s.redo()}),r.O4$(),r.TgZ(41,"svg",16),r._UZ(42,"path",28),r.qZA()()()(),r.kcU(),r.TgZ(43,"div",29),r.YNc(44,W_,63,19,"ng-container",30),r.YNc(45,V_,2,1,"ng-container",30),r.YNc(46,Y_,147,11,"ng-template",null,31,r.W1O),r.qZA(),r.TgZ(48,"div",32)(49,"div",33),r.NdJ("click",function(){return s.selectedTool=s.toolsEnum.SELECT}),r.O4$(),r.TgZ(50,"svg",34),r._UZ(51,"path",35),r.qZA()(),r.kcU(),r.TgZ(52,"div",36),r.NdJ("click",function(){return s.selectedTool=s.toolsEnum.BRUSH}),r.O4$(),r.TgZ(53,"svg",37),r._UZ(54,"path",38),r.qZA()(),r.kcU(),r.TgZ(55,"div",39),r.NdJ("click",function(){return s.selectedTool=s.toolsEnum.IMAGE}),r.O4$(),r.TgZ(56,"svg",40),r._UZ(57,"path",41)(58,"path",42),r.qZA()(),r.kcU(),r.TgZ(59,"div",43),r.NdJ("click",function(){return s.selectedTool=s.toolsEnum.LINE}),r.O4$(),r.TgZ(60,"svg",44),r._UZ(61,"path",45),r.qZA()(),r.kcU(),r.TgZ(62,"div",46),r.NdJ("click",function(){return s.selectedTool=s.toolsEnum.RECT}),r.O4$(),r.TgZ(63,"svg",44),r._UZ(64,"path",47),r.qZA()(),r.kcU(),r.TgZ(65,"div",48),r.NdJ("click",function(){return s.selectedTool=s.toolsEnum.ELLIPSE}),r.O4$(),r.TgZ(66,"svg",44),r._UZ(67,"ellipse",49),r.qZA()(),r.kcU(),r.TgZ(68,"div",50),r.NdJ("click",function(){return s.selectedTool=s.toolsEnum.TEXT}),r.O4$(),r.TgZ(69,"svg",51),r._UZ(70,"path",52),r.qZA()(),r.kcU(),r.TgZ(71,"div",53),r.NdJ("click",function(){return s.selectedTool=s.toolsEnum.ERASER}),r.O4$(),r.TgZ(72,"svg",40),r._UZ(73,"path",41)(74,"path",54),r.qZA()(),r.kcU(),r.TgZ(75,"div",55)(76,"div",56),r.NdJ("click",function(){return s.swapColors()}),r.O4$(),r.TgZ(77,"svg",57),r._UZ(78,"path",58),r.qZA()(),r.kcU(),r.TgZ(79,"div",59),r.NdJ("change",function(l){return s.colorChange("fill",l)}),r._UZ(80,"label",60),r.TgZ(81,"div",61),r._UZ(82,"div",62),r.TgZ(83,"div",63),r.O4$(),r.TgZ(84,"svg",64),r._UZ(85,"rect",65),r.qZA()()()(),r.kcU(),r.TgZ(86,"div",66),r.NdJ("change",function(l){return s.colorChange("strokeColor",l)}),r._UZ(87,"label",67),r.TgZ(88,"div",61),r._UZ(89,"div",68),r.TgZ(90,"div",69),r.O4$(),r.TgZ(91,"svg",64),r._UZ(92,"rect",65),r.qZA()()()()()(),r.kcU(),r.TgZ(93,"div",70)(94,"select",71,72),r.NdJ("change",function(){r.CHM(o);const l=r.MAs(95);return r.KtG(s.setZoom(l.value))}),r.TgZ(96,"option",73),r._uU(97,"6%"),r.qZA(),r.TgZ(98,"option",74),r._uU(99,"12%"),r.qZA(),r.TgZ(100,"option",75),r._uU(101,"16%"),r.qZA(),r.TgZ(102,"option",76),r._uU(103,"25%"),r.qZA(),r.TgZ(104,"option",77),r._uU(105,"50%"),r.qZA(),r.TgZ(106,"option",78),r._uU(107,"75%"),r.qZA(),r.TgZ(108,"option",79),r._uU(109,"100%"),r.qZA(),r.TgZ(110,"option",80),r._uU(111,"150%"),r.qZA(),r.TgZ(112,"option",81),r._uU(113,"200%"),r.qZA(),r.TgZ(114,"option",82),r._uU(115,"300%"),r.qZA(),r.TgZ(116,"option",83),r._uU(117,"400%"),r.qZA(),r.TgZ(118,"option",84),r._uU(119,"600%"),r.qZA(),r.TgZ(120,"option",85),r._uU(121,"800%"),r.qZA(),r.TgZ(122,"option",86),r._uU(123,"1600%"),r.qZA()(),r.TgZ(124,"div",87)(125,"div",88)(126,"span",89),r.O4$(),r.TgZ(127,"svg",90),r._UZ(128,"path",91),r.qZA()(),r.kcU(),r._UZ(129,"input",92),r.qZA()()()()}2&i&&(r.xp6(7),r.Udp("width",s.outerWidth,"px")("height",s.outerHeight,"px"),r.xp6(1),r.Q6J("data",s.data)("selectedTool",s.selectedTool)("options",s.options)("strokeWidth",s.options.strokeWidth)("zoom",s.zoom)("canvasHeight",s.options.canvasHeight)("canvasWidth",s.options.canvasWidth)("x",s.x)("y",s.y)("fullScreen",!1)("strokeColor",s.options.strokeColor)("fill",s.options.fill)("backgroundColor",s.options.backgroundColor),r.xp6(36),r.Q6J("ngIf",s.selectedElement),r.xp6(1),r.Q6J("ngIf",!s.selectedElement),r.xp6(4),r.ekj("active",s.selectedTool===s.toolsEnum.SELECT),r.xp6(3),r.ekj("active",s.selectedTool===s.toolsEnum.BRUSH),r.xp6(3),r.ekj("active",s.selectedTool===s.toolsEnum.IMAGE),r.xp6(4),r.ekj("active",s.selectedTool===s.toolsEnum.LINE),r.xp6(3),r.ekj("active",s.selectedTool===s.toolsEnum.RECT),r.xp6(3),r.ekj("active",s.selectedTool===s.toolsEnum.ELLIPSE),r.xp6(3),r.ekj("active",s.selectedTool===s.toolsEnum.TEXT),r.xp6(3),r.ekj("active",s.selectedTool===s.toolsEnum.ERASER),r.xp6(14),r.uIk("fill",s.options.fill),r.xp6(7),r.uIk("fill",s.options.strokeColor),r.xp6(37),r.Q6J("value",100*s.zoom+"%"))},dependencies:[Be.O5,Be.tP,Be.RF,Be.n9,Be.ED,S_.v,sl.u_],styles:['@charset "UTF-8";.demo{width:100%;height:768px;border:2px dashed #ccc;background:#fff;overflow:hidden;position:relative}.editor{--z0: #111827;--z1: #1e2433;--a1: #421f24;--b1: #45322a;--c1: #1c3b3b;--z2: #2b313f;--z3: #393e4c;--z4: #474c59;--z5: #565a66;--z6: #656974;--z7: #747782;--a7: #d4100b;--z8: #848790;--z9: #94969f;--z10: #a4a6ae;--z12: #c5c7cc;--z13: #d6d8db;--z14: #e7e9eb;--z15: #f9fafb;--d0: #152239;--d1: #1a3050;--d4: #1e5a9d;--d6: #1779d4;--d7: #0b89f0;--d8: #3797ff;--d9: #62a3ff;--d13: #c3d4fd;--d14: #d7e2fd;--d15: #eaeffc;-webkit-font-smoothing:antialiased;--shadow-bg: 0 var(--x2) var(--x4) var(--z0);--shadow: 0 var(--x1) var(--x8) rgba(0, 0, 0, .4);--accent1: var(--d1);--accent4: var(--d4);--accent6: var(--d6);--accent7: var(--d7);--accent8: var(--d8);--accent9: var(--d9);--accent13: var(--d13);--accent14: var(--d14);--accent15: var(--d15);--x1: 4px;--x2: 8px;--x3: 12px;--x4: 16px;--x5: 20px;--x6: 24px;--x7: 28px;--x8: 32px;--x9: 36px;--x10: 40px;--x12: 48px;--x13: 52px;--x16: 64px;--mono-font: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;--panel-width: calc(var(--x10) * 2 * 2 + var(--x1));--transition-duration: .2s;--transition: all var(--transition-duration) ease}.editor{background:var(--z1);font:14px/120% -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;margin:0;padding:0}::selection{background:#000;color:#fff}::-moz-selection{background:#000;color:#fff}.editor{overscroll-behavior-x:none;overflow:hidden;width:100%;height:100%}::-webkit-scrollbar{width:var(--x1);height:var(--x1);background:transparent;position:absolute}::-webkit-scrollbar-track{border-radius:10px;background:transparent}::-webkit-scrollbar-thumb{border-radius:10px;background:var(--z3)}::-webkit-scrollbar-corner{background:transparent}input[type=submit],input[type=button],button{background:var(--accent7);color:var(--z15);border-radius:var(--x1);padding:var(--x2) var(--x4);border:none;line-height:140%;font-size:16px;font-weight:550;cursor:pointer}input[type=submit]:hover,input[type=button]:hover,button:hover{background:var(--accent9)}input[type=submit]:active,input[type=button]:active,button:active{box-shadow:0 0 0 var(--x1) var(--accent14);outline:none}input[type=submit]:focus,input[type=button]:focus,button:focus{outline:none}button.cancel,input.Cancel,input.cancel,input.jGraduate_Cancel{-webkit-appearance:none;background-color:var(--z12);color:var(--z3);margin:0}#canvas_panel{display:block}#tool_bold span,#tool_italic span{position:absolute;width:100%;height:100%;top:0;left:0;background:#ccc;opacity:0}#tools_bottom{position:absolute;left:var(--x12);right:0;bottom:0;height:var(--x10);overflow:visible}.clearfix:before,.clearfix:after{content:"";display:table}.clearfix:after{clear:both}#color_canvas_tools,#fill_bg,#stroke_bg{background:var(--z15) url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMAQMAAABsu86kAAAAA3NCSVQICAjb4U/gAAAABlBMVEXu7u7///8o06qaAAAACXBIWXMAAAsSAAALEgHS3X78AAAAFXRFWHRDcmVhdGlvbiBUaW1lADcvMjIvMTL7FNdCAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M1cbXjNgAAABFJREFUCJljYP7AgIb+MKAhAM8/C5vWL6zSAAAAAElFTkSuQmCC) top left repeat}#color_canvas_tools{width:60px;height:40px;margin:23px 5px 5px;position:relative;overflow:hidden}#color_canvas_tools{display:block}#stroke_style_label{font-size:30px;margin-top:33px;letter-spacing:-1px}.stroke_tool .caret{top:60%}.draginputs{display:flex;flex-direction:row;justify-content:flex-start;flex-wrap:wrap}.draginput{background-color:var(--z2);border-radius:var(--x1);width:calc(50% - var(--x2));height:calc(var(--x9) * 2);display:block;position:relative;margin:0 var(--x2) var(--x2) 0;overflow:hidden;transition:var(--transition);box-shadow:none}.dragging .draginput{pointer-events:none}.dragging .draginput.active{pointer-events:all;box-shadow:none}.draginput:hover{background-color:var(--z3);transition:none;box-shadow:var(--shadow-bg)}.draginput:hover span,.draginput.active span{color:var(--z15)}.draginput:hover input,.draginput.active input{color:var(--accent8)}.draginput.active,.draginput.active:hover{background-color:var(--z0)}.draginput.active:hover{transition:none}.draginput .caret{border:solid transparent 5px;border-top-color:var(--z9);position:absolute;width:0;height:0;right:5px;margin-top:-2px;top:50%}.draginput label{margin:28px 10px 0 5px;font-size:14px;color:var(--z15);font-weight:700}.draginput label#resolution_label,.draginput label#seg_type_label{font:700 12px/110% sans-serif;position:absolute;left:auto;right:10px;z-index:0;text-align:right}.draginput label#seg_type_label{margin-top:40px}.draginput label#seg_type_label .caret{top:66%}.draginput label#resolution_label .pull{position:relative;left:-15px}.draginput label#resolution_label span{right:-13px;left:auto;font-size:16px;top:2px;font-weight:700;color:#fff}.draginput input{border:none;background:transparent;font:24px/normal sans-serif;text-align:center;color:var(--accent7);padding:30px 0 16px;width:100%;height:24px;position:relative;z-index:2}.draginput input::selection{background:var(--accent9)}.draginput.text-input input,.draginput.text-input input:hover,.draginput.text-input input:active{cursor:text}.draginput.text-input input{text-align:left;text-indent:var(--x2)}.draginput.textcontent input{cursor:text;text-align:left;text-indent:var(--x2)}.draginput.textcontent input,.draginput.textcontent input:hover,.draginput.textcontent input:active{cursor:text}.draginput input,.draginput input:hover,.draginput input:active{cursor:grab;cursor:-moz-grab}.draginput input[type=checkbox],.draginput input[type=checkbox]:hover,.draginput input[type=checkbox]:active{cursor:pointer}.draginput input:invalid{color:var(--a7)}.draginput span{font:12px/130% sans-serif;color:var(--z8);display:block;position:absolute;top:5px;left:5px;text-align:left;white-space:nowrap;z-index:1}.draginput select{-webkit-appearance:none;opacity:0;display:block;position:absolute;height:100%;width:100%;margin:0;z-index:1;top:0;left:0;cursor:pointer}.draginput:hover .draginput_cursor{border-color:var(--accent6)}.draginput_cursor{position:absolute;top:50%;width:100%;border-top:solid var(--accent4) 1px;z-index:0}.draginput input[readonly=readonly]{-webkit-appearance:none;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.draginput input:focus{background:var(--accent7);color:var(--accent15);outline:none;box-shadow:0 0 5px 2px var(--accent7)}.draginput input:focus+span{z-index:10;color:var(--z15)}.draginput .push_bottom{bottom:0;position:absolute}.draginput .angle{width:var(--x12);height:var(--x12);border-radius:var(--x12);background-color:var(--z3);position:absolute;bottom:var(--x1);left:14px}.editor.dragging .draginput .angle{background-color:var(--z1)}.draginput:hover .angle{background:var(--z4)}.draginput .angle-cursor{width:4px;height:25px;border-top:solid var(--accent7) 3px;position:absolute;margin:0 0 0 23px;transform-origin:50% 0}#menu_bar{padding:0 0 0 var(--x12);position:relative;z-index:2;height:var(--x8);display:flex}#menu_bar .menu:hover .menu_list{display:block}.menu{position:relative;z-index:5;color:var(--z3);display:inline-block}.menu_title{cursor:pointer;display:inline-block;z-index:10;color:var(--z15);position:relative;line-height:var(--x8);padding:0 var(--x3);vertical-align:top}.menu .menu_title:hover{background:var(--z2)}.menu_list .separator{margin:var(--x1) 0;border-top:solid var(--z14) 1px}.menu_list{position:absolute;left:0;top:var(--x8);white-space:nowrap;background:var(--z15);padding:var(--x2) 0;border-radius:0 var(--x2) var(--x2) var(--x2);box-shadow:var(--shadow)}#menu_bar.active .menu.open .menu_title{background:var(--z15);color:var(--z1)}.menu .menu_list{display:none;position:absolute}.menu_list .menu_item{position:relative;overflow:hidden;line-height:var(--x6);padding:var(--x1) var(--x16) var(--x1) var(--x6);cursor:pointer;color:var(--z3)}.file-input{-webkit-appearance:none;position:absolute;opacity:0;cursor:pointer;inset:0;display:block;background:red;z-index:100}.menu_list .menu_item.tool_button{background:transparent;border:none;margin:0;padding:var(--x1) var(--x16) var(--x1) var(--x6);height:auto;width:auto}.menu_list .menu_item.push_button_pressed:before{content:"\\2714";position:absolute;display:block;left:6px;top:var(--x1)}.menu_list .menu_item:hover,.menu_list .menu_item.push_button_pressed:hover{background:var(--accent15);color:#000}.menu_list .menu_item.disabled:hover,.menu_list .menu_item.push_button_pressed.disabled:hover{background:transparent;color:var(--z3)}.menu_list .menu_item.push_button_pressed{background:transparent;border:none;width:auto;height:auto;margin:0}.menu_list .menu_item span{display:block;position:absolute;right:var(--x2);padding:0 var(--x2);background:var(--z14);top:50%;transform:translateY(-50%);text-align:center;font-size:12px;line-height:var(--x6);border-radius:var(--x1);font-weight:600}.menu_list .menu_item:not(.disabled):hover span{background:var(--accent13)}.menu-right button:hover svg{fill:var(--z12)}.menu-right svg{fill:var(--z5)}#logo svg{pointer-events:none;margin-top:var(--x2);fill:var(--z7)}#logo svg path:last-child{fill:var(--z13)}#logo:hover svg{fill:var(--z9)}#logo svg path:last-child{fill:var(--z15)}#rulers>div{position:absolute;background:var(--z2);z-index:1;overflow:hidden;-webkit-font-smoothing:none}#rulers #ruler_corner{top:var(--x8);left:var(--x12);width:var(--x4);height:var(--x4);z-index:2;border-radius:var(--x2) 0 0 0}#ruler_x{height:var(--x4);top:var(--x8);left:var(--x12);right:calc(var(--panel-width) + var(--x4));overflow:hidden;border-radius:var(--x2)}#ruler_y{width:var(--x4);top:var(--x8);left:var(--x12);bottom:var(--x10);overflow:hidden;border-radius:var(--x2)}#ruler_x>div,#ruler_y>div{overflow:hidden}#stroke_color:after{content:"";position:absolute;display:block;left:var(--x1);right:var(--x1);top:var(--x1);bottom:var(--x1);background:var(--z1);box-shadow:0 0 0 1px var(--z13)}#tool_switch{cursor:pointer;width:11px;height:11px;position:absolute;top:-5px;right:0;cursor:nwse-resize}#tool_switch svg{fill:var(--z6)}#tool_switch:hover svg{fill:var(--z15)}.color_block{width:var(--x5);height:var(--x5);overflow:hidden;border:solid var(--z12) 1px;cursor:pointer}.color_block svg{width:22px;height:22px}#tool_stroke .color_block>div{position:absolute;bottom:0;right:0}#color_tools{position:relative;width:48px;height:48px;margin:12px 6px 0}#color_tools{width:auto;height:auto}#tool_fill{position:absolute;top:0;left:0;z-index:1}#tool_stroke{top:14px;left:14px}#tool_fill,#tool_stroke,#tool_canvas{box-shadow:0 0 0 1px var(--z0);position:absolute}#tool_canvas .color_block{width:58px;height:38px}#tool_canvas .color_block svg{width:auto;height:auto}#shape_cats>div{padding:0 var(--x4);background:var(--z14);color:var(--z6);height:var(--x7);line-height:var(--x7);transition:background-color .1s ease}#svgcanvas{background-color:var(--z2);display:block;width:100%;height:100%}#workarea{display:block;position:absolute;top:var(--x8);left:var(--x12);bottom:var(--x10);right:calc(var(--panel-width) + var(--x4));background-color:var(--z2);overflow:auto;align-items:center;justify-content:center;transition:transform .5s cubic-bezier(.13,.66,.24,.92);border-radius:var(--x2);box-shadow:var(--shadow-bg)}#tools_left{position:absolute;border-right:none;width:var(--x12);top:var(--x8);bottom:0;left:0;z-index:4}.tool_button{height:var(--x12);width:var(--x12);cursor:pointer;line-height:60px;text-align:center;transform:scale(.8)}.tool_button:hover{transform:scale(1)}.tool_button:hover svg{fill:var(--z13)}.tool_button.active{transform:scale(1.4)}.tool_button svg{vertical-align:center;fill:var(--z5)}.tool_button.active svg{fill:var(--accent8)}.tool_button.active svg{fill:var(--accent7)}.tool_button.disabled svg{background-color:#aaa;cursor:not-allowed;fill:var(--z3);pointer-events:none}#tool_rect svg{position:relative;top:-1px;left:1px}#tool_ellipse svg{position:relative;top:2px;left:1px}.select-input{margin:var(--x2) 0;position:relative}.select-input:after{content:"\\2193";font-weight:700;position:absolute;right:var(--x6);top:50%;color:var(--z7);transform:translateY(-50%)}.select-input select{-webkit-appearance:none;background-color:var(--z3);color:var(--z14);height:var(--x8);display:block;width:calc(100% - var(--x2));padding:0 var(--x4);border:none;border-radius:var(--x1)}.select-input select:focus{outline:none;box-shadow:0 0 0 1px var(--accent7)}#panels{position:absolute;box-sizing:border-box;width:var(--panel-width);right:var(--x1);top:var(--x5);bottom:0;border-bottom:none;overflow:auto;padding:0}.context_panel{display:none}.context_panel h4{color:var(--z15);font-weight:400;margin:0;padding:10px 0 5px}.context_panel label{display:block;color:var(--z13);white-space:nowrap}#align_tools{display:none}.align_buttons{margin-bottom:var(--x2)}.align_button,.align_button *{transition:var(--transition)}.align_button:hover,.align_button:hover *{transition:none}.align_button{float:left;height:var(--x13);width:var(--x13);line-height:var(--x16);text-align:center;cursor:pointer;position:relative}.align_button:hover{background-color:var(--z0);border-color:var(--z3)}.align_button svg{fill:var(--z10)}.align_button:hover svg{fill:var(--z15);transition:none}.align_button:nth-child(1){border-radius:var(--x1) 0 0 0}.align_button:nth-child(3){border-radius:0 var(--x1) 0 0}.align_button:nth-child(4){border-radius:0 0 0 var(--x1)}.align_button:nth-child(6){border-radius:0 0 var(--x1) 0}.align_buttons .push_button{display:block;float:left}#tool_bold,#tool_italic{font:700 20px/35px serif;text-align:center;position:absolute;padding:0;color:var(--z13);background:transparent;border:none;margin:0;width:50%;top:var(--x8);line-height:var(--x10);bottom:0;border-top:solid var(--z1) 2px;cursor:pointer}#tool_bold{right:0}#tool_italic{border-right:solid var(--z1) 2px;line-height:var(--x9);left:0;font-weight:700;font-style:italic;font-size:24px}#tool_bold:hover,#tool_italic:hover{color:var(--z15);background-color:var(--z3)}#tool_bold.disabled,#tool_italic.disabled{opacity:1;color:var(--z4);pointer-events:none}#tool_bold.active,#tool_italic.active{color:#50a0ff}#preview_font{color:var(--z15);font-size:2em;line-height:80px;padding:0 var(--x2);white-space:nowrap}#preview_font+.caret{right:var(--x2)}.draginput:hover #preview_font:after{border-right-color:var(--z3);background:linear-gradient(to right,rgba(0,0,0,0),var(--z3))}#preview_font:after{content:"";position:absolute;right:0;top:3px;bottom:3px;width:15px;border-right:solid var(--z2) 10px;background:linear-gradient(to right,rgba(0,0,0,0),var(--z2))}#zoom_panel,#zoom_select{padding:var(--x2) 0;right:calc(var(--panel-width) + var(--x2));position:absolute;cursor:pointer;width:100px}#zoom_label:after{content:""}#zoom_select{opacity:0;z-index:100}#zoom_select:hover+div{opacity:1}#zoom_label{position:absolute;background:transparent;width:100%;margin:0}#zoom_panel .caret{margin-top:-5px}#zoom_label img,#zoom_label svg{width:var(--x4);height:var(--x4)}#zoomLabel{width:var(--x4);height:var(--x4);cursor:pointer}#zoomLabel svg{fill:var(--z10);position:relative;top:2px}#zoom_label input{-webkit-appearance:none;color:var(--z10);font-size:13px;height:auto;width:var(--x12);padding:0;cursor:default;position:absolute;background:transparent;border:none;top:2px;left:var(--x6);pointer-events:none}#zoom_label select{-webkit-appearance:none;position:absolute;inset:0}#zoom_label span{top:0;left:0}\n'],encapsulation:3})}return n})()}];let ef=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=r.oAB({type:n});static#n=this.\u0275inj=r.cJS({imports:[nr.Bz.forChild(X_),nr.Bz]})}return n})(),tf=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=r.oAB({type:n});static#n=this.\u0275inj=r.cJS({imports:[Be.ez,ef,Ce.ZK,sl.To]})}return n})()}}]);