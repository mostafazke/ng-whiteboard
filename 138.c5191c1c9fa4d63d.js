"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[138],{4138:(Af,oo,U)=>{U.r(oo),U.d(oo,{LiveAppModule:()=>Tf});var Be=U(6814),ro=U(4487),ao=U(5556),pl=U(5686),_l=U(9165),lo=U(8915),w=U(9671);const f=function(n,e){if(!n)throw ze(e)},ze=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},co=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=63&s|128):55296==(64512&s)&&i+1<n.length&&56320==(64512&n.charCodeAt(i+1))?(s=65536+((1023&s)<<10)+(1023&n.charCodeAt(++i)),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=63&s|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=63&s|128)}return e},Rn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const r=n[s],a=s+1<n.length,l=a?n[s+1]:0,c=s+2<n.length,u=c?n[s+2]:0;let p=(15&l)<<2|u>>6,_=63&u;c||(_=64,a||(p=64)),i.push(t[r>>2],t[(3&r)<<4|l>>4],t[p],t[_])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(co(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=n[t++];e[i++]=String.fromCharCode((31&s)<<6|63&r)}else if(s>239&&s<365){const c=((7&s)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(1023&c))}else{const r=n[t++],a=n[t++];e[i++]=String.fromCharCode((15&s)<<12|(63&r)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const r=t[n.charAt(s++)],l=s<n.length?t[n.charAt(s)]:0;++s;const u=s<n.length?t[n.charAt(s)]:64;++s;const h=s<n.length?t[n.charAt(s)]:64;if(++s,null==r||null==l||null==u||null==h)throw new gl;i.push(r<<2|l>>4),64!==u&&(i.push(l<<4&240|u>>2),64!==h&&i.push(u<<6&192|h))}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class gl extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uo=function(n){const e=co(n);return Rn.encodeByteArray(e,!0)},Ot=function(n){return uo(n).replace(/\./g,"")},Mn=function(n){try{return Rn.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ml(n){return ho(void 0,n)}function ho(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!vl(t)||(n[t]=ho(n[t],e[t]));return n}function vl(n){return"__proto__"!==n}const Zt=()=>{try{return function yl(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Mn(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},po=()=>{var n;return null===(n=Zt())||void 0===n?void 0:n.config};class rt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,i))}}}function _o(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(function Ft(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}())}function fo(){try{return"object"==typeof indexedDB}catch{return!1}}function go(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var r;e((null===(r=s.error)||void 0===r?void 0:r.message)||"")}}catch(t){e(t)}})}class Ce extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,Ce.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ut.prototype.create)}}class Ut{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,r=this.errors[e],a=r?function Dl(n,e){return n.replace(Rl,(t,i)=>{const s=e[i];return null!=s?String(s):`<${i}?>`})}(r,i):"Error";return new Ce(s,`${this.serviceName}: ${a} (${s}).`,i)}}const Rl=/\{\$([^}]+)}/g;function at(n){return JSON.parse(n)}function R(n){return JSON.stringify(n)}const Bt=function(n){let e={},t={},i={},s="";try{const r=n.split(".");e=at(Mn(r[0])||""),t=at(Mn(r[1])||""),s=r[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:s}};function ne(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function qe(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function mo(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function zt(n,e,t){const i={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=e.call(t,n[s],s,n));return i}function qt(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const r=n[s],a=e[s];if(vo(r)&&vo(a)){if(!qt(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function vo(n){return null!==n&&"object"==typeof n}class Ol{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if("string"==typeof e)for(let h=0;h<16;h++)i[h]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let h=0;h<16;h++)i[h]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let h=16;h<80;h++){const p=i[h-3]^i[h-8]^i[h-14]^i[h-16];i[h]=4294967295&(p<<1|p>>>31)}let u,d,s=this.chain_[0],r=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let h=0;h<80;h++){h<40?h<20?(u=l^r&(a^l),d=1518500249):(u=r^a^l,d=1859775393):h<60?(u=r&a|l&(r|a),d=2400959708):(u=r^a^l,d=3395469782);const p=(s<<5|s>>>27)+u+c+d+i[h]&4294967295;c=l,l=a,a=4294967295&(r<<30|r>>>2),r=s,s=p}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const i=t-this.blockSize;let s=0;const r=this.buf_;let a=this.inbuf_;for(;s<t;){if(0===a)for(;s<=i;)this.compress_(e,s),s+=this.blockSize;if("string"==typeof e){for(;s<t;)if(r[a]=e.charCodeAt(s),++a,++s,a===this.blockSize){this.compress_(r),a=0;break}}else for(;s<t;)if(r[a]=e[s],++a,++s,a===this.blockSize){this.compress_(r),a=0;break}}this.inbuf_=a,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=255&t,t/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let r=24;r>=0;r-=8)e[i]=this.chain_[s]>>r&255,++i;return e}}function He(n,e){return`${n} failed: ${e} argument `}const Ht=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e},Bl=1e3,zl=2,ql=144e5,Hl=.5;function yo(n,e=Bl,t=zl){const i=e*Math.pow(t,n),s=Math.round(Hl*i*(Math.random()-.5)*2);return Math.min(ql,i+s)}function Te(n){return n&&n._delegate?n._delegate:n}class ie{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ee="[DEFAULT]";class Gl{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new rt;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),s=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(s)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function $l(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ee})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=Ee){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,w.Z)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Ee){return this.instances.has(e)}getOptions(e=Ee){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[r,a]of this.instancesDeferred.entries())i===this.normalizeInstanceIdentifier(r)&&a.resolve(s);return s}onInit(e,t){var i;const s=this.normalizeInstanceIdentifier(t),r=null!==(i=this.onInitCallbacks.get(s))&&void 0!==i?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const a=this.instances.get(s);return a&&e(a,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Ee?void 0:n),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}var n;return i||null}normalizeInstanceIdentifier(e=Ee){return this.component?this.component.multipleInstances?e:Ee:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class jl{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Gl(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ln=[];var A=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(A||{});const wo={debug:A.DEBUG,verbose:A.VERBOSE,info:A.INFO,warn:A.WARN,error:A.ERROR,silent:A.SILENT},Ql=A.INFO,Jl={[A.DEBUG]:"log",[A.VERBOSE]:"log",[A.INFO]:"info",[A.WARN]:"warn",[A.ERROR]:"error"},Kl=(n,e,...t)=>{if(e<n.logLevel)return;const i=(new Date).toISOString(),s=Jl[e];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[s](`[${i}]  ${n.name}:`,...t)};class On{constructor(e){this.name=e,this._logLevel=Ql,this._logHandler=Kl,this._userLogHandler=null,Ln.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in A))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?wo[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,A.DEBUG,...e),this._logHandler(this,A.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,A.VERBOSE,...e),this._logHandler(this,A.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,A.INFO,...e),this._logHandler(this,A.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,A.WARN,...e),this._logHandler(this,A.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,A.ERROR,...e),this._logHandler(this,A.ERROR,...e)}}const Yl=(n,e)=>e.some(t=>n instanceof t);let bo,xo;const Co=new WeakMap,Zn=new WeakMap,To=new WeakMap,Fn=new WeakMap,Un=new WeakMap;let Bn={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return Zn.get(n);if("objectStoreNames"===e)return n.objectStoreNames||To.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return le(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function oc(n){return"function"==typeof n?function sc(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ec(){return xo||(xo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(zn(this),e),le(Co.get(this))}:function(...e){return le(n.apply(zn(this),e))}:function(e,...t){const i=n.call(zn(this),e,...t);return To.set(i,e.sort?e.sort():[e]),le(i)}}(n):(n instanceof IDBTransaction&&function nc(n){if(Zn.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",a),n.removeEventListener("abort",a)},r=()=>{t(),s()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",r),n.addEventListener("error",a),n.addEventListener("abort",a)});Zn.set(n,e)}(n),Yl(n,function Xl(){return bo||(bo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Bn):n)}function le(n){if(n instanceof IDBRequest)return function tc(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",r),n.removeEventListener("error",a)},r=()=>{t(le(n.result)),s()},a=()=>{i(n.error),s()};n.addEventListener("success",r),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Co.set(t,n)}).catch(()=>{}),Un.set(e,n),e}(n);if(Fn.has(n))return Fn.get(n);const e=oc(n);return e!==n&&(Fn.set(n,e),Un.set(e,n)),e}const zn=n=>Un.get(n),ac=["get","getKey","getAll","getAllKeys","count"],lc=["put","add","delete","clear"],qn=new Map;function Eo(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(qn.get(e))return qn.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=lc.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!ac.includes(t))return;const r=function(){var a=(0,w.Z)(function*(l,...c){const u=this.transaction(l,s?"readwrite":"readonly");let d=u.store;return i&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),s&&u.done]))[0]});return function(c){return a.apply(this,arguments)}}();return qn.set(e,r),r}!function ic(n){Bn=n(Bn)}(n=>({...n,get:(e,t,i)=>Eo(e,t)||n.get(e,t,i),has:(e,t)=>!!Eo(e,t)||n.has(e,t)}));class cc{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function uc(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}return null}).filter(t=>t).join(" ")}}const Hn="@firebase/app",Ae=new On("@firebase/app"),Wt="[DEFAULT]",Oc={[Hn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ie=new Map,Gt=new Map;function Zc(n,e){try{n.container.addComponent(e)}catch(t){Ae.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ce(n){const e=n.name;if(Gt.has(e))return Ae.debug(`There were multiple attempts to register component ${e}.`),!1;Gt.set(e,n);for(const t of Ie.values())Zc(t,n);return!0}function We(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const se=new Ut("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Uc{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ie("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw se.create("app-deleted",{appName:this._name})}}function Io(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:Wt,automaticDataCollectionEnabled:!1},e),s=i.name;if("string"!=typeof s||!s)throw se.create("bad-app-name",{appName:String(s)});if(t||(t=po()),!t)throw se.create("no-options");const r=Ie.get(s);if(r){if(qt(t,r.options)&&qt(i,r.config))return r;throw se.create("duplicate-app",{appName:s})}const a=new jl(s);for(const c of Gt.values())a.addComponent(c);const l=new Uc(t,i,a);return Ie.set(s,l),l}function So(n=Wt){const e=Ie.get(n);if(!e&&n===Wt&&po())return Io();if(!e)throw se.create("no-app",{appName:n});return e}function $(n,e,t){var i;let s=null!==(i=Oc[n])&&void 0!==i?i:n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const l=[`Unable to register library "${s}" with version "${e}":`];return r&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Ae.warn(l.join(" "))}ce(new ie(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const zc="firebase-heartbeat-database",qc=1,lt="firebase-heartbeat-store";let Gn=null;function ko(){return Gn||(Gn=function rc(n,e,{blocked:t,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(n,e),l=le(a);return i&&a.addEventListener("upgradeneeded",c=>{i(le(a.result),c.oldVersion,c.newVersion,le(a.transaction),c)}),t&&a.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{r&&c.addEventListener("close",()=>r()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}(zc,qc,{upgrade:(n,e)=>{0===e&&n.createObjectStore(lt)}}).catch(n=>{throw se.create("idb-open",{originalErrorMessage:n.message})})),Gn}function Vn(){return(Vn=(0,w.Z)(function*(n){try{return yield(yield ko()).transaction(lt).objectStore(lt).get(Do(n))}catch(e){if(e instanceof Ce)Ae.warn(e.message);else{const t=se.create("idb-get",{originalErrorMessage:e?.message});Ae.warn(t.message)}}})).apply(this,arguments)}function No(n,e){return $n.apply(this,arguments)}function $n(){return($n=(0,w.Z)(function*(n,e){try{const i=(yield ko()).transaction(lt,"readwrite");yield i.objectStore(lt).put(e,Do(n)),yield i.done}catch(t){if(t instanceof Ce)Ae.warn(t.message);else{const i=se.create("idb-set",{originalErrorMessage:t?.message});Ae.warn(i.message)}}})).apply(this,arguments)}function Do(n){return`${n.name}!${n.options.appId}`}class Vc{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new jc(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){var e=this;return(0,w.Z)(function*(){const i=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ro();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==s&&!e._heartbeatsCache.heartbeats.some(r=>r.date===s))return e._heartbeatsCache.heartbeats.push({date:s,agent:i}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(r=>{const a=new Date(r.date).valueOf();return Date.now()-a<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,w.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=Ro(),{heartbeatsToSend:i,unsentEntries:s}=function $c(n,e=1024){const t=[];let i=n.slice();for(const s of n){const r=t.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),Mo(t)>e){r.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Mo(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}(e._heartbeatsCache.heartbeats),r=Ot(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(e._heartbeatsCache.heartbeats=s,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),r})()}}function Ro(){return(new Date).toISOString().substring(0,10)}class jc{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,w.Z)(function*(){return!!fo()&&go().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,w.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function Hc(n){return Vn.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,w.Z)(function*(){var i;if(yield t._canUseIndexedDBPromise){const r=yield t.read();return No(t.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,w.Z)(function*(){var i;if(yield t._canUseIndexedDBPromise){const r=yield t.read();return No(t.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}})()}}function Mo(n){return Ot(JSON.stringify({version:2,heartbeats:n})).length}!function Qc(n){ce(new ie("platform-logger",e=>new cc(e),"PRIVATE")),ce(new ie("heartbeat",e=>new Vc(e),"PRIVATE")),$(Hn,"0.9.13",n),$(Hn,"0.9.13","esm2017"),$("fire-js","")}(""),$("firebase","9.23.0","app");const Yc=(n,e)=>e.some(t=>n instanceof t);let Po,Lo;const Oo=new WeakMap,jn=new WeakMap,Zo=new WeakMap,Qn=new WeakMap,Jn=new WeakMap;let Kn={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return jn.get(n);if("objectStoreNames"===e)return n.objectStoreNames||Zo.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ue(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function ou(n){return"function"==typeof n?function su(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function eu(){return Lo||(Lo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Yn(this),e),ue(Oo.get(this))}:function(...e){return ue(n.apply(Yn(this),e))}:function(e,...t){const i=n.call(Yn(this),e,...t);return Zo.set(i,e.sort?e.sort():[e]),ue(i)}}(n):(n instanceof IDBTransaction&&function nu(n){if(jn.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",a),n.removeEventListener("abort",a)},r=()=>{t(),s()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",r),n.addEventListener("error",a),n.addEventListener("abort",a)});jn.set(n,e)}(n),Yc(n,function Xc(){return Po||(Po=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Kn):n)}function ue(n){if(n instanceof IDBRequest)return function tu(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",r),n.removeEventListener("error",a)},r=()=>{t(ue(n.result)),s()},a=()=>{i(n.error),s()};n.addEventListener("success",r),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Oo.set(t,n)}).catch(()=>{}),Jn.set(e,n),e}(n);if(Qn.has(n))return Qn.get(n);const e=ou(n);return e!==n&&(Qn.set(n,e),Jn.set(e,n)),e}const Yn=n=>Jn.get(n),au=["get","getKey","getAll","getAllKeys","count"],lu=["put","add","delete","clear"],Xn=new Map;function Fo(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(Xn.get(e))return Xn.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=lu.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!au.includes(t))return;const r=function(){var a=(0,w.Z)(function*(l,...c){const u=this.transaction(l,s?"readwrite":"readonly");let d=u.store;return i&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),s&&u.done]))[0]});return function(c){return a.apply(this,arguments)}}();return Xn.set(e,r),r}!function iu(n){Kn=n(Kn)}(n=>({...n,get:(e,t,i)=>Fo(e,t)||n.get(e,t,i),has:(e,t)=>!!Fo(e,t)||n.has(e,t)}));const Uo="@firebase/installations",ei="0.6.4",Bo=1e4,zo=`w:${ei}`,qo="FIS_v2",cu="https://firebaseinstallations.googleapis.com/v1",uu=36e5,oe=new Ut("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ho(n){return n instanceof Ce&&n.code.includes("request-failed")}function ti({projectId:n}){return`${cu}/projects/${n}/installations`}function Wo(n){return{token:n.token,requestStatus:2,expiresIn:_u(n.expiresIn),creationTime:Date.now()}}function ni(n,e){return ii.apply(this,arguments)}function ii(){return(ii=(0,w.Z)(function*(n,e){const i=(yield e.json()).error;return oe.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})).apply(this,arguments)}function Go({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function si(n){return oi.apply(this,arguments)}function oi(){return(oi=(0,w.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function _u(n){return Number(n.replace("s","000"))}function ri(){return(ri=(0,w.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=ti(n),s=Go(n),r=e.getImmediate({optional:!0});if(r){const u=yield r.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const l={method:"POST",headers:s,body:JSON.stringify({fid:t,authVersion:qo,appId:n.appId,sdkVersion:zo})},c=yield si(()=>fetch(i,l));if(c.ok){const u=yield c.json();return{fid:u.fid||t,registrationStatus:2,refreshToken:u.refreshToken,authToken:Wo(u.authToken)}}throw yield ni("Create Installation",c)})).apply(this,arguments)}function $o(n){return new Promise(e=>{setTimeout(e,n)})}const vu=/^[cdef][\w-]{21}$/,ai="";function yu(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function wu(n){return function mu(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return vu.test(t)?t:ai}catch{return ai}}function Ge(n){return`${n.appName}!${n.appId}`}const Ve=new Map;function jo(n,e){const t=Ge(n);Qo(t,e),function Cu(n,e){const t=function Jo(){return!Se&&"BroadcastChannel"in self&&(Se=new BroadcastChannel("[Firebase] FID Change"),Se.onmessage=n=>{Qo(n.data.key,n.data.fid)}),Se}();t&&t.postMessage({key:n,fid:e}),function Ko(){0===Ve.size&&Se&&(Se.close(),Se=null)}()}(t,e)}function Qo(n,e){const t=Ve.get(n);if(t)for(const i of t)i(e)}let Se=null;const Tu="firebase-installations-database",Eu=1,ke="firebase-installations-store";let li=null;function ci(){return li||(li=function ru(n,e,{blocked:t,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(n,e),l=ue(a);return i&&a.addEventListener("upgradeneeded",c=>{i(ue(a.result),c.oldVersion,c.newVersion,ue(a.transaction))}),t&&a.addEventListener("blocked",()=>t()),l.then(c=>{r&&c.addEventListener("close",()=>r()),s&&c.addEventListener("versionchange",()=>s())}).catch(()=>{}),l}(Tu,Eu,{upgrade:(n,e)=>{0===e&&n.createObjectStore(ke)}})),li}function Vt(n,e){return ui.apply(this,arguments)}function ui(){return(ui=(0,w.Z)(function*(n,e){const t=Ge(n),s=(yield ci()).transaction(ke,"readwrite"),r=s.objectStore(ke),a=yield r.get(t);return yield r.put(e,t),yield s.done,(!a||a.fid!==e.fid)&&jo(n,e.fid),e})).apply(this,arguments)}function di(n){return hi.apply(this,arguments)}function hi(){return(hi=(0,w.Z)(function*(n){const e=Ge(n),i=(yield ci()).transaction(ke,"readwrite");yield i.objectStore(ke).delete(e),yield i.done})).apply(this,arguments)}function ct(n,e){return pi.apply(this,arguments)}function pi(){return(pi=(0,w.Z)(function*(n,e){const t=Ge(n),s=(yield ci()).transaction(ke,"readwrite"),r=s.objectStore(ke),a=yield r.get(t),l=e(a);return void 0===l?yield r.delete(t):yield r.put(l,t),yield s.done,l&&(!a||a.fid!==l.fid)&&jo(n,l.fid),l})).apply(this,arguments)}function _i(n){return fi.apply(this,arguments)}function fi(){return fi=(0,w.Z)(function*(n){let e;const t=yield ct(n.appConfig,i=>{const s=function Au(n){return Xo(n||{fid:yu(),registrationStatus:0})}(i),r=function Iu(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(oe.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function Su(n,e){return gi.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:ku(n)}:{installationEntry:e}}(n,s);return e=r.registrationPromise,r.installationEntry});return t.fid===ai?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),fi.apply(this,arguments)}function gi(){return gi=(0,w.Z)(function*(n,e){try{const t=yield function gu(n,e){return ri.apply(this,arguments)}(n,e);return Vt(n.appConfig,t)}catch(t){throw Ho(t)&&409===t.customData.serverCode?yield di(n.appConfig):yield Vt(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),gi.apply(this,arguments)}function ku(n){return mi.apply(this,arguments)}function mi(){return(mi=(0,w.Z)(function*(n){let e=yield Yo(n.appConfig);for(;1===e.registrationStatus;)yield $o(100),e=yield Yo(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:i}=yield _i(n);return i||t}return e})).apply(this,arguments)}function Yo(n){return ct(n,e=>{if(!e)throw oe.create("installation-not-found");return Xo(e)})}function Xo(n){return function Nu(n){return 1===n.registrationStatus&&n.registrationTime+Bo<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function vi(){return(vi=(0,w.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const i=function Ru(n,{fid:e}){return`${ti(n)}/${e}/authTokens:generate`}(n,t),s=function Vo(n,{refreshToken:e}){const t=Go(n);return t.append("Authorization",function fu(n){return`${qo} ${n}`}(e)),t}(n,t),r=e.getImmediate({optional:!0});if(r){const u=yield r.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const l={method:"POST",headers:s,body:JSON.stringify({installation:{sdkVersion:zo,appId:n.appId}})},c=yield si(()=>fetch(i,l));if(c.ok)return Wo(yield c.json());throw yield ni("Generate Auth Token",c)})).apply(this,arguments)}function yi(n){return wi.apply(this,arguments)}function wi(){return wi=(0,w.Z)(function*(n,e=!1){let t;const i=yield ct(n.appConfig,r=>{if(!tr(r))throw oe.create("not-registered");const a=r.authToken;if(!e&&function Lu(n){return 2===n.requestStatus&&!function Ou(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+uu}(n)}(a))return r;if(1===a.requestStatus)return t=function Mu(n,e){return bi.apply(this,arguments)}(n,e),r;{if(!navigator.onLine)throw oe.create("app-offline");const l=function Zu(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(r);return t=function Pu(n,e){return xi.apply(this,arguments)}(n,l),l}});return t?yield t:i.authToken}),wi.apply(this,arguments)}function bi(){return(bi=(0,w.Z)(function*(n,e){let t=yield er(n.appConfig);for(;1===t.authToken.requestStatus;)yield $o(100),t=yield er(n.appConfig);const i=t.authToken;return 0===i.requestStatus?yi(n,e):i})).apply(this,arguments)}function er(n){return ct(n,e=>{if(!tr(e))throw oe.create("not-registered");return function Fu(n){return 1===n.requestStatus&&n.requestTime+Bo<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function xi(){return xi=(0,w.Z)(function*(n,e){try{const t=yield function Du(n,e){return vi.apply(this,arguments)}(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return yield Vt(n.appConfig,i),t}catch(t){if(!Ho(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Vt(n.appConfig,i)}else yield di(n.appConfig);throw t}}),xi.apply(this,arguments)}function tr(n){return void 0!==n&&2===n.registrationStatus}function Ci(){return(Ci=(0,w.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:i}=yield _i(e);return i?i.catch(console.error):yi(e).catch(console.error),t.fid})).apply(this,arguments)}function Ti(){return Ti=(0,w.Z)(function*(n,e=!1){const t=n;return yield function zu(n){return Ei.apply(this,arguments)}(t),(yield yi(t,e)).token}),Ti.apply(this,arguments)}function Ei(){return(Ei=(0,w.Z)(function*(n){const{registrationPromise:e}=yield _i(n);e&&(yield e)})).apply(this,arguments)}function Si(n){return oe.create("missing-app-config-values",{valueName:n})}const nr="installations",Vu=n=>{const e=n.getProvider("app").getImmediate(),t=function Wu(n){if(!n||!n.options)throw Si("App Configuration");if(!n.name)throw Si("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Si(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:We(e,"heartbeat"),_delete:()=>Promise.resolve()}},$u=n=>{const t=We(n.getProvider("app").getImmediate(),nr).getImmediate();return{getId:()=>function Uu(n){return Ci.apply(this,arguments)}(t),getToken:s=>function Bu(n){return Ti.apply(this,arguments)}(t,s)}};(function ju(){ce(new ie(nr,Vu,"PUBLIC")),ce(new ie("installations-internal",$u,"PRIVATE"))})(),$(Uo,ei),$(Uo,ei,"esm2017");const $t="analytics",Qu="firebase_id",Ju="origin",Ku=6e4,Yu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ki="https://www.googletagmanager.com/gtag/js",M=new On("@firebase/analytics"),Z=new Ut("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function ed(n){if(!n.startsWith(ki)){const e=Z.create("invalid-gtag-resource",{gtagURL:n});return M.warn(e.message),""}return n}function ir(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Ni(){return(Ni=(0,w.Z)(function*(n,e,t,i,s,r){const a=i[s];try{if(a)yield e[a];else{const c=(yield ir(t)).find(u=>u.measurementId===s);c&&(yield e[c.appId])}}catch(l){M.error(l)}n("config",s,r)})).apply(this,arguments)}function Di(){return(Di=(0,w.Z)(function*(n,e,t,i,s){try{let r=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=yield ir(t);for(const c of a){const u=l.find(h=>h.measurementId===c),d=u&&e[u.appId];if(!d){r=[];break}r.push(d)}}0===r.length&&(r=Object.values(e)),yield Promise.all(r),n("event",i,s||{})}catch(r){M.error(r)}})).apply(this,arguments)}const cd=30,sr=new class dd{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function hd(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Ri(){return(Ri=(0,w.Z)(function*(n){var e;const{appId:t,apiKey:i}=n,s={method:"GET",headers:hd(i)},r=Yu.replace("{app-id}",t),a=yield fetch(r,s);if(200!==a.status&&304!==a.status){let l="";try{const c=yield a.json();null!==(e=c.error)&&void 0!==e&&e.message&&(l=c.error.message)}catch{}throw Z.create("config-fetch-failed",{httpStatus:a.status,responseMessage:l})}return a.json()})).apply(this,arguments)}function Mi(){return(Mi=(0,w.Z)(function*(n,e=sr,t){const{appId:i,apiKey:s,measurementId:r}=n.options;if(!i)throw Z.create("no-app-id");if(!s){if(r)return{measurementId:r,appId:i};throw Z.create("no-api-key")}const a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new md;return setTimeout((0,w.Z)(function*(){l.abort()}),void 0!==t?t:Ku),or({appId:i,apiKey:s,measurementId:r},a,l,e)})).apply(this,arguments)}function or(n,e,t){return Pi.apply(this,arguments)}function Pi(){return Pi=(0,w.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},i,s=sr){var r;const{appId:a,measurementId:l}=n;try{yield function fd(n,e){return new Promise((t,i)=>{const s=Math.max(e-Date.now(),0),r=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(r),i(Z.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(i,e)}catch(c){if(l)return M.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:a,measurementId:l};throw c}try{const c=yield function pd(n){return Ri.apply(this,arguments)}(n);return s.deleteThrottleMetadata(a),c}catch(c){const u=c;if(!function gd(n){if(!(n instanceof Ce&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(u)){if(s.deleteThrottleMetadata(a),l)return M.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:a,measurementId:l};throw c}const d=503===Number(null===(r=u?.customData)||void 0===r?void 0:r.httpStatus)?yo(t,s.intervalMillis,cd):yo(t,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:t+1};return s.setThrottleMetadata(a,h),M.debug(`Calling attemptFetch again in ${d} millis`),or(n,h,i,s)}}),Pi.apply(this,arguments)}class md{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Li,qi;function Oi(){return(Oi=(0,w.Z)(function*(n,e,t,i,s){if(s&&s.global)n("event",t,i);else{const r=yield e;n("event",t,Object.assign(Object.assign({},i),{send_to:r}))}})).apply(this,arguments)}function Hi(){return(Hi=(0,w.Z)(function*(){if(!fo())return M.warn(Z.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield go()}catch(n){return M.warn(Z.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function Wi(){return Wi=(0,w.Z)(function*(n,e,t,i,s,r,a){var l;const c=function _d(n){return Mi.apply(this,arguments)}(n);c.then(_=>{t[_.measurementId]=_.appId,n.options.measurementId&&_.measurementId!==n.options.measurementId&&M.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>M.error(_)),e.push(c);const u=function Td(){return Hi.apply(this,arguments)}().then(_=>{if(_)return i.getId()}),[d,h]=yield Promise.all([c,u]);(function ld(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(ki)&&t.src.includes(n))return t;return null})(r)||function nd(n,e){const t=function td(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:ed}),i=document.createElement("script"),s=`${ki}?l=${n}&id=${e}`;i.src=t?t?.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}(r,d.measurementId),qi&&(s("consent","default",qi),function rr(n){qi=n}(void 0)),s("js",new Date);const p=null!==(l=a?.config)&&void 0!==l?l:{};return p[Ju]="firebase",p.update=!0,null!=h&&(p[Qu]=h),s("config",d.measurementId,p),Li&&(s("set",Li),function ar(n){Li=n}(void 0)),d.measurementId}),Wi.apply(this,arguments)}class Ad{constructor(e){this.app=e}_delete(){return delete j[this.app.options.appId],Promise.resolve()}}let j={},lr=[];const cr={};let dr,Q,jt="dataLayer",Gi=!1;function Sd(n,e,t){!function Id(){const n=[];if(function Il(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}()&&n.push("This is a browser extension environment."),function kl(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,s)=>`(${s+1}) ${i}`).join(" "),t=Z.create("invalid-analytics-context",{errorInfo:e});M.warn(t.message)}}();const i=n.options.appId;if(!i)throw Z.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Z.create("no-api-key");M.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=j[i])throw Z.create("already-exists",{id:i});if(!Gi){!function id(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(jt);const{wrappedGtag:r,gtagCore:a}=function ad(n,e,t,i,s){let r=function(...a){window[i].push(arguments)};return window[s]&&"function"==typeof window[s]&&(r=window[s]),window[s]=function rd(n,e,t,i){function r(){return r=(0,w.Z)(function*(a,...l){try{if("event"===a){const[c,u]=l;yield function od(n,e,t,i,s){return Di.apply(this,arguments)}(n,e,t,c,u)}else if("config"===a){const[c,u]=l;yield function sd(n,e,t,i,s,r){return Ni.apply(this,arguments)}(n,e,t,i,c,u)}else if("consent"===a){const[c]=l;n("consent","update",c)}else if("get"===a){const[c,u,d]=l;n("get",c,u,d)}else if("set"===a){const[c]=l;n("set",c)}else n(a,...l)}catch(c){M.error(c)}}),r.apply(this,arguments)}return function s(a){return r.apply(this,arguments)}}(r,n,e,t),{gtagCore:r,wrappedGtag:window[s]}}(j,lr,cr,jt,"gtag");Q=r,dr=a,Gi=!0}return j[i]=function Ed(n,e,t,i,s,r,a){return Wi.apply(this,arguments)}(n,lr,cr,e,dr,jt,t),new Ad(n)}const hr="@firebase/analytics";!function Rd(){ce(new ie($t,(e,{options:t})=>Sd(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),ce(new ie("analytics-internal",function n(e){try{const t=e.getProvider($t).getImmediate();return{logEvent:(i,s,r)=>function Dd(n,e,t,i){n=Te(n),function vd(n,e,t,i,s){return Oi.apply(this,arguments)}(Q,j[n.app.options.appId],e,t,i).catch(s=>M.error(s))}(t,i,s,r)}}catch(t){throw Z.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),$(hr,"0.10.0"),$(hr,"0.10.0","esm2017")}();const _r="@firebase/database";let ji="";class Pd{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),R(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:at(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Ld{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return ne(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const gr=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Pd(e)}}catch{}return new Ld},Ne=gr("localStorage"),Qi=gr("sessionStorage"),$e=new On("@firebase/database"),mr=function(){let n=1;return function(){return n++}}(),vr=function(n){const e=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);if(s>=55296&&s<=56319){const r=s-55296;i++,f(i<n.length,"Surrogate pair missing trail surrogate."),s=65536+(r<<10)+(n.charCodeAt(i)-56320)}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=63&s|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=63&s|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=63&s|128)}return e}(n),t=new Ol;t.update(e);const i=t.digest();return Rn.encodeByteArray(i)},ut=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=ut.apply(null,i):e+="object"==typeof i?R(i):i,e+=" "}return e};let De=null,yr=!0;const P=function(...n){if(!0===yr&&(yr=!1,null===De&&!0===Qi.get("logging_enabled")&&function(n,e){f(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?($e.logLevel=A.VERBOSE,De=$e.log.bind($e),e&&Qi.set("logging_enabled",!0)):"function"==typeof n?De=n:(De=null,Qi.remove("logging_enabled"))}(!0)),De){const e=ut.apply(null,n);De(e)}},dt=function(n){return function(...e){P(n,...e)}},Ji=function(...n){const e="FIREBASE INTERNAL ERROR: "+ut(...n);$e.error(e)},J=function(...n){const e=`FIREBASE FATAL ERROR: ${ut(...n)}`;throw $e.error(e),new Error(e)},O=function(...n){const e="FIREBASE WARNING: "+ut(...n);$e.warn(e)},Qt=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},de="[MIN_NAME]",re="[MAX_NAME]",Re=function(n,e){if(n===e)return 0;if(n===de||e===re)return-1;if(e===de||n===re)return 1;{const t=Cr(n),i=Cr(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},Fd=function(n,e){return n===e?0:n<e?-1:1},ht=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+R(e))},Ki=function(n){if("object"!=typeof n||null===n)return R(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=R(e[i]),t+=":",t+=Ki(n[e[i]]);return t+="}",t},br=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let s=0;s<t;s+=e)i.push(n.substring(s,s+e>t?t:s+e));return i};function L(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const xr=function(n){f(!Qt(n),"Invalid JSON number");const i=1023;let s,r,a,l,c;0===n?(r=0,a=0,s=1/n==-1/0?1:0):(s=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(l=Math.min(Math.floor(Math.log(n)/Math.LN2),i),r=l+i,a=Math.round(n*Math.pow(2,52-l)-Math.pow(2,52))):(r=0,a=Math.round(n/Math.pow(2,-1074))));const u=[];for(c=52;c;c-=1)u.push(a%2?1:0),a=Math.floor(a/2);for(c=11;c;c-=1)u.push(r%2?1:0),r=Math.floor(r/2);u.push(s?1:0),u.reverse();const d=u.join("");let h="";for(c=0;c<64;c+=8){let p=parseInt(d.substr(c,8),2).toString(16);1===p.length&&(p="0"+p),h+=p}return h.toLowerCase()},qd=new RegExp("^-?(0*)\\d{1,10}$"),Cr=function(n){if(qd.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},je=function(n){try{n()}catch(e){setTimeout(()=>{throw O("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},pt=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Vd{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){O(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class $d{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(P("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',O(e)}}let _t=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Sr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Dr="websocket",Rr="long_polling";class Xi{constructor(e,t,i,s,r=!1,a="",l=!1,c=!1){this.secure=t,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=a,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ne.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ne.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Mr(n,e,t){let i;if(f("string"==typeof e,"typeof type must == string"),f("object"==typeof t,"typeof params must == object"),e===Dr)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Rr)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function jd(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const s=[];return L(t,(r,a)=>{s.push(r+"="+a)}),i+s.join("&")}class Qd{constructor(){this.counters_={}}incrementCounter(e,t=1){ne(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return ml(this.counters_)}}const es={},ts={};function ns(n){const e=n.toString();return es[e]||(es[e]=new Qd),es[e]}class Kd{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&je(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class he{constructor(e,t,i,s,r,a,l){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.transportSessionId=a,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=dt(e),this.stats_=ns(t),this.urlFn=c=>(this.appCheckToken&&(c.ac=this.appCheckToken),Mr(t,Rr,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Kd(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new is((...r)=>{const[a,l,c,u,d]=r;if(this.incrementIncomingBytes_(r),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===a)this.id=l,this.password=c;else{if("close"!==a)throw new Error("Unrecognized command received: "+a);l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_()}},(...r)=>{const[a,l]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(a,l)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Sr.test(location.hostname)&&(i.r="f");const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){he.forceAllow_=!0}static forceDisallow(){he.forceDisallow_=!0}static isAvailable(){return!(!he.forceAllow_&&(he.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=R(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=uo(t),s=br(i,1840);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=R(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class is{constructor(e,t,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=mr(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=is.createIFrame_();let r="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(r='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(l){P("frame writing exception"),l.stack&&P(l.stack),P(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||P("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const a=this.pendingSegs.shift();i=i+"&seg"+s+"="+a.seg+"&ts"+s+"="+a.ts+"&d"+s+"="+a.d,s++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(s),i()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||"loaded"===s||"complete"===s)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{P("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let Kt=null;typeof MozWebSocket<"u"?Kt=MozWebSocket:typeof WebSocket<"u"&&(Kt=WebSocket);let Qe=(()=>{class n{constructor(t,i,s,r,a,l,c){this.connId=t,this.applicationId=s,this.appCheckToken=r,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=dt(this.connId),this.stats_=ns(i),this.connURL=n.connectionURL_(i,l,c,r,s),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,s,r,a){const l={v:"5"};return typeof location<"u"&&location.hostname&&Sr.test(location.hostname)&&(l.r="f"),i&&(l.s=i),s&&(l.ls=s),r&&(l.ac=r),a&&(l.p=a),Mr(t,Dr,l)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ne.set("previous_websocket_failure",!0);try{let s;0,this.mySock=new Kt(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const r=s.message||s.data;return r&&this.log_(r),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const s=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&null!==Kt&&!n.forceDisallow_}static previouslyFailed(){return Ne.isInMemoryStorage||!0===Ne.get("previous_websocket_failure")}markConnectionHealthy(){Ne.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const s=at(i);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(f(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const s=this.extractFrameCount_(i);null!==s&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();const i=R(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const s=br(i,16384);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Br=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[he,Qe]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=Qe&&Qe.isAvailable();let s=i&&!Qe.previouslyFailed();if(t.webSocketOnly&&(i||O("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Qe];else{const r=this.transports_=[];for(const a of n.ALL_TRANSPORTS)a&&a.isAvailable()&&r.push(a);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class $r{constructor(e,t,i,s,r,a,l,c,u,d){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=a,this.onReady_=l,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=dt("c:"+this.id+":"),this.transportManager_=new Br(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=pt(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ht("t",e),i=ht("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ht("t",e),i=ht("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ht("t",e);if("d"in e){const i=e.d;if("h"===t){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?Ji("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ji("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&O("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),pt(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):pt(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ne.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class jr{put(e,t,i,s){}merge(e,t,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class Qr{constructor(e){this.allowedEvents_=e,this.listeners_={},f(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const s=this.getInitialEvent(e);s&&t.apply(i,s)}off(e,t,i){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let r=0;r<s.length;r++)if(s[r].callback===t&&(!i||i===s[r].context))return void s.splice(r,1)}validateEventType_(e){f(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Yt extends Qr{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!_o()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Yt}getInitialEvent(e){return f("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class T{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function C(){return new T("")}function v(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function pe(n){return n.pieces_.length-n.pieceNum_}function E(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new T(n.pieces_,e)}function os(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ft(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Yr(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new T(e,0)}function N(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof T)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&t.push(i[s])}return new T(t,0)}function y(n){return n.pieceNum_>=n.pieces_.length}function F(n,e){const t=v(n),i=v(e);if(null===t)return e;if(t===i)return F(E(n),E(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function rs(n,e){if(pe(n)!==pe(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function H(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(pe(n)>pe(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class wh{constructor(e,t){this.errorPrefix_=t,this.parts_=ft(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Ht(this.parts_[i]);Xr(this)}}function Xr(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Me(n))}function Me(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class as extends Qr{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new as}getInitialEvent(e){return f("visible"===e,"Unknown event type: "+e),[this.visible_]}}const gt=1e3;let en,Pe=(()=>{class n extends jr{constructor(t,i,s,r,a,l,c,u){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=a,this.authTokenProvider_=l,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=n.nextPersistentConnectionId_++,this.log_=dt("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=gt,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");as.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Yt.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,s){const r=++this.requestNumber_,a={r,a:t,b:i};this.log_(R(a)),f(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),s&&(this.requestCBHash_[r]=s)}get(t){this.initConnection_();const i=new rt,r={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:l=>{const c=l.d;"ok"===l.s?i.resolve(c):i.reject(c)}};return this.outstandingGets_.push(r),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,s,r){this.initConnection_();const a=t._queryIdentifier,l=t._path.toString();this.log_("Listen called for "+l+" "+a),this.listens.has(l)||this.listens.set(l,new Map),f(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),f(!this.listens.get(l).has(a),"listen() called twice for same path/queryId.");const c={onComplete:r,hashFn:i,query:t,tag:s};this.listens.get(l).set(a,c),this.connected_&&this.sendListen_(c)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})}sendListen_(t){const i=t.query,s=i._path.toString(),r=i._queryIdentifier;this.log_("Listen on "+s+" for "+r);const a={p:s};t.tag&&(a.q=i._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,c=>{const u=c.d,d=c.s;n.warnOnListenWarnings_(u,i),(this.listens.get(s)&&this.listens.get(s).get(r))===t&&(this.log_("listen response",c),"ok"!==d&&this.removeListen_(s,r),t.onComplete&&t.onComplete(d,u))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&ne(t,"w")){const s=qe(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const r='".indexOn": "'+i._queryParams.getIndex().toString()+'"',a=i._path.toString();O(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=Bt(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=function(n){const t=Bt(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",s={cred:t};null===this.authOverride_?s.noauth=!0:"object"==typeof this.authOverride_&&(s.authvar=this.authOverride_),this.sendRequest(i,s,r=>{const a=r.s,l=r.d||"error";this.authToken_===t&&("ok"===a?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,s=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,s)})}unlisten(t,i){const s=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),f(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,t._queryObject,i)}sendUnlisten_(t,i,s,r){this.log_("Unlisten on "+t+" for "+i);const a={p:t};r&&(a.q=s,a.t=r),this.sendRequest("n",a)}onDisconnectPut(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:s})}onDisconnectMerge(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:s})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,s,r){const a={p:i,d:s};this.log_("onDisconnect "+t,a),this.sendRequest(t,a,l=>{r&&setTimeout(()=>{r(l.s,l.d)},Math.floor(0))})}put(t,i,s,r){this.putInternal("p",t,i,s,r)}merge(t,i,s,r){this.putInternal("m",t,i,s,r)}putInternal(t,i,s,r,a){this.initConnection_();const l={p:i,d:s};void 0!==a&&(l.h=a),this.outstandingPuts_.push({action:t,request:l,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,s,a=>{this.log_(i+" response",a),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(a.s,a.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,s=>{"ok"!==s.s&&this.log_("reportStats","Error sending stats: "+s.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+R(t));const i=t.r,s=this.requestCBHash_[i];s&&(delete this.requestCBHash_[i],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):Ji("Unrecognized action received from server: "+R(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){f(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=gt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=gt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=gt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,w.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),s=t.onReady_.bind(t),r=t.onRealtimeDisconnect_.bind(t),a=t.id+":"+n.nextConnectionId_++,l=t.lastSessionId;let c=!1,u=null;const d=function(){u?u.close():(c=!0,r())};t.realtime_={close:d,sendRequest:function(_){f(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(_)}};const p=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[_,g]=yield Promise.all([t.authTokenProvider_.getToken(p),t.appCheckTokenProvider_.getToken(p)]);c?P("getToken() completed but was canceled"):(P("getToken() completed. Creating connection."),t.authToken_=_&&_.accessToken,t.appCheckToken_=g&&g.token,u=new $r(a,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,s,r,x=>{O(x+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},l))}catch(_){t.log_("Failed to get token: "+_),c||(t.repoInfo_.nodeAdmin&&O(_),d())}}})()}interrupt(t){P("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){P("Resuming connection for reason: "+t),delete this.interruptReasons_[t],mo(this.interruptReasons_)&&(this.reconnectDelay_=gt,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let s;s=i?i.map(a=>Ki(a)).join("$"):"default";const r=this.removeListen_(t,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(t,i){const s=new T(t).toString();let r;if(this.listens.has(s)){const a=this.listens.get(s);r=a.get(i),a.delete(i),0===a.size&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(t,i){P("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){P("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+ji.replace(/\./g,"-")]=1,_o()?t["framework.cordova"]=1:function Sl(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Yt.getInstance().currentlyOnline();return mo(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class b{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new b(e,t)}}class Xt{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new b(de,e),s=new b(de,t);return 0!==this.compare(i,s)}minPost(){return b.MIN}}class na extends Xt{static get __EMPTY_NODE(){return en}static set __EMPTY_NODE(e){en=e}compare(e,t){return Re(e.name,t.name)}isDefinedOn(e){throw ze("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return b.MIN}maxPost(){return new b(re,en)}makePost(e,t){return f("string"==typeof e,"KeyIndex indexValue must always be a string."),new b(e,en)}toString(){return".key"}}const K=new na;class tn{constructor(e,t,i,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,s&&(a*=-1),a<0)e=this.isReverse_?e.left:e.right;else{if(0===a){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let cs,W=(()=>{class n{constructor(t,i,s,r,a){this.key=t,this.value=i,this.color=s??n.RED,this.left=r??B.EMPTY_NODE,this.right=a??B.EMPTY_NODE}copy(t,i,s,r,a){return new n(t??this.key,i??this.value,s??this.color,r??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,s){let r=this;const a=s(t,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(t,i,s),null):0===a?r.copy(null,i,null,null,null):r.copy(null,null,null,null,r.right.insert(t,i,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return B.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let s,r;if(s=this,i(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,i),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),0===i(t,s.key)){if(s.right.isEmpty())return B.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,i))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class B{constructor(e,t=B.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new B(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,W.BLACK,null,null))}remove(e){return new B(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,W.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,s=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(s=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new tn(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new tn(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new tn(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new tn(this.root_,null,this.comparator_,!0,e)}}function Sh(n,e){return Re(n.name,e.name)}function ls(n,e){return Re(n,e)}B.EMPTY_NODE=new class Ih{copy(e,t,i,s,r){return this}insert(e,t,i){return new W(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const ia=function(n){return"number"==typeof n?"number:"+xr(n):"string:"+n},sa=function(n){if(n.isLeafNode()){const e=n.val();f("string"==typeof e||"number"==typeof e||"object"==typeof e&&ne(e,".sv"),"Priority must be a string or number.")}else f(n===cs||n.isEmpty(),"priority of unexpected type.");f(n===cs||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let oa,ra,aa,Je=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,f(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),sa(this.priorityNode_)}static set __childrenNodeConstructor(t){oa=t}static get __childrenNodeConstructor(){return oa}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return y(t)?this:".priority"===v(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const s=v(t);return null===s?i:i.isEmpty()&&".priority"!==s?this:(f(".priority"!==s||1===pe(t),".priority must be the last token in a path"),this.updateImmediateChild(s,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(E(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+ia(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?xr(this.value_):this.value_,this.lazyHash_=vr(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(f(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,s=typeof this.value_,r=n.VALUE_TYPE_ORDER.indexOf(i),a=n.VALUE_TYPE_ORDER.indexOf(s);return f(r>=0,"Unknown leaf type: "+i),f(a>=0,"Unknown leaf type: "+s),r===a?"object"===s?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-r}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const I=new class Rh extends Xt{compare(e,t){const i=e.node.getPriority(),s=t.node.getPriority(),r=i.compareTo(s);return 0===r?Re(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return b.MIN}maxPost(){return new b(re,new Je("[PRIORITY-POST]",aa))}makePost(e,t){const i=ra(e);return new b(t,new Je("[PRIORITY-POST]",i))}toString(){return".priority"}},Mh=Math.log(2);class Ph{constructor(e){this.count=parseInt(Math.log(e+1)/Mh,10),this.current_=this.count-1;const s=(r=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const nn=function(n,e,t,i){n.sort(e);const s=function(c,u){const d=u-c;let h,p;if(0===d)return null;if(1===d)return h=n[c],p=t?t(h):h,new W(p,h.node,W.BLACK,null,null);{const _=parseInt(d/2,10)+c,g=s(c,_),x=s(_+1,u);return h=n[_],p=t?t(h):h,new W(p,h.node,W.BLACK,g,x)}},l=function(c){let u=null,d=null,h=n.length;const p=function(g,x){const k=h-g,xe=h;h-=g;const Nn=s(k+1,xe),so=n[k],Ef=t?t(so):so;_(new W(Ef,so.node,x,null,Nn))},_=function(g){u?(u.left=g,u=g):(d=g,u=g)};for(let g=0;g<c.count;++g){const x=c.nextBitIsOne(),k=Math.pow(2,c.count-(g+1));x?p(k,W.BLACK):(p(k,W.BLACK),p(k,W.RED))}return d}(new Ph(n.length));return new B(i||e,l)};let us;const Ke={};class ae{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return f(Ke&&I,"ChildrenNode.ts has not been loaded"),us=us||new ae({".priority":Ke},{".priority":I}),us}get(e){const t=qe(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof B?t:null}hasIndex(e){return ne(this.indexSet_,e.toString())}addIndex(e,t){f(e!==K,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const r=t.getIterator(b.Wrap);let l,a=r.getNext();for(;a;)s=s||e.isDefinedOn(a.node),i.push(a),a=r.getNext();l=s?nn(i,e.getCompare()):Ke;const c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;const d=Object.assign({},this.indexes_);return d[c]=l,new ae(d,u)}addToIndexes(e,t){const i=zt(this.indexes_,(s,r)=>{const a=qe(this.indexSet_,r);if(f(a,"Missing index implementation for "+r),s===Ke){if(a.isDefinedOn(e.node)){const l=[],c=t.getIterator(b.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&l.push(u),u=c.getNext();return l.push(e),nn(l,a.getCompare())}return Ke}{const l=t.get(e.name);let c=s;return l&&(c=c.remove(new b(e.name,l))),c.insert(e,e.node)}});return new ae(i,this.indexSet_)}removeFromIndexes(e,t){const i=zt(this.indexes_,s=>{if(s===Ke)return s;{const r=t.get(e.name);return r?s.remove(new b(e.name,r)):s}});return new ae(i,this.indexSet_)}}let mt,m=(()=>{class n{constructor(t,i,s){this.children_=t,this.priorityNode_=i,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&sa(this.priorityNode_),this.children_.isEmpty()&&f(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return mt||(mt=new n(new B(ls),null,ae.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||mt}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?mt:i}}getChild(t){const i=v(t);return null===i?this:this.getImmediateChild(i).getChild(E(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if(f(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const s=new b(t,i);let r,a;i.isEmpty()?(r=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(t,i),a=this.indexMap_.addToIndexes(s,this.children_));const l=r.isEmpty()?mt:this.priorityNode_;return new n(r,l,a)}}updateChild(t,i){const s=v(t);if(null===s)return i;{f(".priority"!==v(t)||1===pe(t),".priority must be the last token in a path");const r=this.getImmediateChild(s).updateChild(E(t),i);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let s=0,r=0,a=!0;if(this.forEachChild(I,(l,c)=>{i[l]=c.val(t),s++,a&&n.INTEGER_REGEXP_.test(l)?r=Math.max(r,Number(l)):a=!1}),!t&&a&&r<2*s){const l=[];for(const c in i)l[c]=i[c];return l}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+ia(this.getPriority().val())+":"),this.forEachChild(I,(i,s)=>{const r=s.hash();""!==r&&(t+=":"+i+":"+r)}),this.lazyHash_=""===t?"":vr(t)}return this.lazyHash_}getPredecessorChildName(t,i,s){const r=this.resolveIndex_(s);if(r){const a=r.getPredecessorKey(new b(t,i));return a?a.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.minKey();return s&&s.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new b(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.maxKey();return s&&s.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new b(i,this.children_.get(i)):null}forEachChild(t,i){const s=this.resolveIndex_(t);return s?s.inorderTraversal(r=>i(r.name,r.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getIteratorFrom(t,r=>r);{const r=this.children_.getIteratorFrom(t.name,b.Wrap);let a=r.peek();for(;null!=a&&i.compare(a,t)<0;)r.getNext(),a=r.peek();return r}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getReverseIteratorFrom(t,r=>r);{const r=this.children_.getReverseIteratorFrom(t.name,b.Wrap);let a=r.peek();for(;null!=a&&i.compare(a,t)>0;)r.getNext(),a=r.peek();return r}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===vt?-1:0}withIndex(t){if(t===K||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===K||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const s=this.getIterator(I),r=i.getIterator(I);let a=s.getNext(),l=r.getNext();for(;a&&l;){if(a.name!==l.name||!a.node.equals(l.node))return!1;a=s.getNext(),l=r.getNext()}return null===a&&null===l}return!1}return!1}}resolveIndex_(t){return t===K?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const vt=new class Lh extends m{constructor(){super(new B(ls),m.EMPTY_NODE,ae.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return m.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(b,{MIN:{value:new b(de,m.EMPTY_NODE)},MAX:{value:new b(re,vt)}}),na.__EMPTY_NODE=m.EMPTY_NODE,Je.__childrenNodeConstructor=m,function kh(n){cs=n}(vt),function Dh(n){aa=n}(vt);const Oh=!0;function D(n,e=null){if(null===n)return m.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),f(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Je(n,D(e));if(n instanceof Array||!Oh){let t=m.EMPTY_NODE;return L(n,(i,s)=>{if(ne(n,i)&&"."!==i.substring(0,1)){const r=D(s);(r.isLeafNode()||!r.isEmpty())&&(t=t.updateImmediateChild(i,r))}}),t.updatePriority(D(e))}{const t=[];let i=!1;if(L(n,(a,l)=>{if("."!==a.substring(0,1)){const c=D(l);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),t.push(new b(a,c)))}}),0===t.length)return m.EMPTY_NODE;const r=nn(t,Sh,a=>a.name,ls);if(i){const a=nn(t,I.getCompare());return new m(r,D(e),new ae({".priority":a},{".priority":I}))}return new m(r,D(e),ae.Default)}}!function Nh(n){ra=n}(D);class ds extends Xt{constructor(e){super(),this.indexPath_=e,f(!y(e)&&".priority"!==v(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),s=this.extractChild(t.node),r=i.compareTo(s);return 0===r?Re(e.name,t.name):r}makePost(e,t){const i=D(e),s=m.EMPTY_NODE.updateChild(this.indexPath_,i);return new b(t,s)}maxPost(){const e=m.EMPTY_NODE.updateChild(this.indexPath_,vt);return new b(re,e)}toString(){return ft(this.indexPath_,0).join("/")}}const hs=new class Zh extends Xt{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?Re(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return b.MIN}maxPost(){return b.MAX}makePost(e,t){const i=D(e);return new b(t,i)}toString(){return".value"}};function la(n){return{type:"value",snapshotNode:n}}function Ye(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function yt(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function wt(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class ps{constructor(e){this.index_=e}updateChild(e,t,i,s,r,a){f(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(t);return l.getChild(s).equals(i.getChild(s))&&l.isEmpty()===i.isEmpty()||(null!=a&&(i.isEmpty()?e.hasChild(t)?a.trackChildChange(yt(t,l)):f(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?a.trackChildChange(Ye(t,i)):a.trackChildChange(wt(t,i,l))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(I,(s,r)=>{t.hasChild(s)||i.trackChildChange(yt(s,r))}),t.isLeafNode()||t.forEachChild(I,(s,r)=>{if(e.hasChild(s)){const a=e.getImmediateChild(s);a.equals(r)||i.trackChildChange(wt(s,r,a))}else i.trackChildChange(Ye(s,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?m.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class bt{constructor(e){this.indexedFilter_=new ps(e.getIndex()),this.index_=e.getIndex(),this.startPost_=bt.getStartPost_(e),this.endPost_=bt.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,s,r,a){return this.matches(new b(t,i))||(i=m.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,s,r,a)}updateFullNode(e,t,i){t.isLeafNode()&&(t=m.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(m.EMPTY_NODE);const r=this;return t.forEachChild(I,(a,l)=>{r.matches(new b(a,l))||(s=s.updateImmediateChild(a,m.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Uh{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new bt(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,s,r,a){return this.rangedFilter_.matches(new b(t,i))||(i=m.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,s,r,a):this.fullLimitUpdateChild_(e,t,i,r,a)}updateFullNode(e,t,i){let s;if(t.isLeafNode()||t.isEmpty())s=m.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let r;s=m.EMPTY_NODE.withIndex(this.index_),r=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;r.hasNext()&&a<this.limit_;){const l=r.getNext();if(this.withinDirectionalStart(l)){if(!this.withinDirectionalEnd(l))break;s=s.updateImmediateChild(l.name,l.node),a++}}}else{let r;s=t.withIndex(this.index_),s=s.updatePriority(m.EMPTY_NODE),r=this.reverse_?s.getReverseIterator(this.index_):s.getIterator(this.index_);let a=0;for(;r.hasNext();){const l=r.getNext();a<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?a++:s=s.updateImmediateChild(l.name,m.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,s,r){let a;if(this.reverse_){const h=this.index_.getCompare();a=(p,_)=>h(_,p)}else a=this.index_.getCompare();const l=e;f(l.numChildren()===this.limit_,"");const c=new b(t,i),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(l.hasChild(t)){const h=l.getImmediateChild(t);let p=s.getChildAfterChild(this.index_,u,this.reverse_);for(;null!=p&&(p.name===t||l.hasChild(p.name));)p=s.getChildAfterChild(this.index_,p,this.reverse_);const _=null==p?1:a(p,c);if(d&&!i.isEmpty()&&_>=0)return r?.trackChildChange(wt(t,i,h)),l.updateImmediateChild(t,i);{r?.trackChildChange(yt(t,h));const x=l.updateImmediateChild(t,m.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(r?.trackChildChange(Ye(p.name,p.node)),x.updateImmediateChild(p.name,p.node)):x}}return i.isEmpty()?e:d&&a(u,c)>=0?(null!=r&&(r.trackChildChange(yt(u.name,u.node)),r.trackChildChange(Ye(t,i))),l.updateImmediateChild(t,i).updateImmediateChild(u.name,m.EMPTY_NODE)):e}}class _s{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=I}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return f(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return f(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:de}hasEnd(){return this.endSet_}getIndexEndValue(){return f(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return f(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:re}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return f(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===I}copy(){const e=new _s;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ca(n){const e={};if(n.isDefault())return e;let t;if(n.index_===I?t="$priority":n.index_===hs?t="$value":n.index_===K?t="$key":(f(n.index_ instanceof ds,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=R(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=R(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+R(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=R(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+R(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function ua(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==I&&(e.i=n.index_.toString()),e}class on extends jr{constructor(e,t,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=dt("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(f(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,s){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const a=on.getListenId_(e,i),l={};this.listens_[a]=l;const c=ca(e._queryParams);this.restRequest_(r+".json",c,(u,d)=>{let h=d;if(404===u&&(h=null,u=null),null===u&&this.onDataUpdate_(r,h,!1,i),qe(this.listens_,a)===l){let p;p=u?401===u?"permission_denied":"rest_error:"+u:"ok",s(p,null)}})}unlisten(e,t){const i=on.getListenId_(e,t);delete this.listens_[i]}get(e){const t=ca(e._queryParams),i=e._path.toString(),s=new rt;return this.restRequest_(i+".json",t,(r,a)=>{let l=a;404===r&&(l=null,r=null),null===r?(this.onDataUpdate_(i,l,!1,null),s.resolve(l)):s.reject(new Error(l))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(t.auth=s.accessToken),r&&r.token&&(t.ac=r.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+function Ll(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}(t);this.log_("Sending REST request for "+a);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(i&&4===l.readyState){this.log_("REST Response for "+a+" received. status:",l.status,"response:",l.responseText);let c=null;if(l.status>=200&&l.status<300){try{c=at(l.responseText)}catch{O("Failed to parse JSON response for "+a+": "+l.responseText)}i(null,c)}else 401!==l.status&&404!==l.status&&O("Got unsuccessful REST response for "+a+" Status: "+l.status),i(l.status);i=null}},l.open("GET",a,!0),l.send()})}}class Gh{constructor(){this.rootNode_=m.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function rn(){return{value:null,children:new Map}}function Xe(n,e,t){if(y(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=v(e);n.children.has(i)||n.children.set(i,rn()),Xe(n.children.get(i),e=E(e),t)}}function vs(n,e,t){null!==n.value?t(e,n.value):function Vh(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,s)=>{vs(s,new T(e.toString()+"/"+i),t)})}class $h{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&L(this.last_,(i,s)=>{t[i]=t[i]-s}),this.last_=e,t}}class Jh{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new $h(e);const i=1e4+2e4*Math.random();pt(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;L(e,(s,r)=>{r>0&&ne(this.statsToReport_,s)&&(t[s]=r,i=!0)}),i&&this.server_.reportStats(t),pt(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Y=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Y||{});function bs(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class an{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Y.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(y(this.path)){if(null!=this.affectedTree.value)return f(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new T(e));return new an(C(),t,this.revert)}}return f(v(this.path)===e,"operationForChild called for unrelated child."),new an(E(this.path),this.affectedTree,this.revert)}}class xt{constructor(e,t){this.source=e,this.path=t,this.type=Y.LISTEN_COMPLETE}operationForChild(e){return y(this.path)?new xt(this.source,C()):new xt(this.source,E(this.path))}}class Le{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Y.OVERWRITE}operationForChild(e){return y(this.path)?new Le(this.source,C(),this.snap.getImmediateChild(e)):new Le(this.source,E(this.path),this.snap)}}class et{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Y.MERGE}operationForChild(e){if(y(this.path)){const t=this.children.subtree(new T(e));return t.isEmpty()?null:t.value?new Le(this.source,C(),t.value):new et(this.source,C(),t)}return f(v(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new et(this.source,E(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class _e{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(y(e))return this.isFullyInitialized()&&!this.filtered_;const t=v(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Kh{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Ct(n,e,t,i,s,r){const a=i.filter(l=>l.type===t);a.sort((l,c)=>function ep(n,e,t){if(null==e.childName||null==t.childName)throw ze("Should only compare child_ events.");const i=new b(e.childName,e.snapshotNode),s=new b(t.childName,t.snapshotNode);return n.index_.compare(i,s)}(n,l,c)),a.forEach(l=>{const c=function Xh(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,l,r);s.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(c,n.query_))})})}function ln(n,e){return{eventCache:n,serverCache:e}}function Tt(n,e,t,i){return ln(new _e(e,t,i),n.serverCache)}function ha(n,e,t,i){return ln(n.eventCache,new _e(e,t,i))}function cn(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Oe(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let xs;class S{constructor(e,t=(()=>(xs||(xs=new B(Fd)),xs))()){this.value=e,this.children=t}static fromObject(e){let t=new S(null);return L(e,(i,s)=>{t=t.set(new T(i),s)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:C(),value:this.value};if(y(e))return null;{const i=v(e),s=this.children.get(i);if(null!==s){const r=s.findRootMostMatchingPathAndValue(E(e),t);return null!=r?{path:N(new T(i),r.path),value:r.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(y(e))return this;{const t=v(e),i=this.children.get(t);return null!==i?i.subtree(E(e)):new S(null)}}set(e,t){if(y(e))return new S(t,this.children);{const i=v(e),r=(this.children.get(i)||new S(null)).set(E(e),t),a=this.children.insert(i,r);return new S(this.value,a)}}remove(e){if(y(e))return this.children.isEmpty()?new S(null):new S(null,this.children);{const t=v(e),i=this.children.get(t);if(i){const s=i.remove(E(e));let r;return r=s.isEmpty()?this.children.remove(t):this.children.insert(t,s),null===this.value&&r.isEmpty()?new S(null):new S(this.value,r)}return this}}get(e){if(y(e))return this.value;{const t=v(e),i=this.children.get(t);return i?i.get(E(e)):null}}setTree(e,t){if(y(e))return t;{const i=v(e),r=(this.children.get(i)||new S(null)).setTree(E(e),t);let a;return a=r.isEmpty()?this.children.remove(i):this.children.insert(i,r),new S(this.value,a)}}fold(e){return this.fold_(C(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((s,r)=>{i[s]=r.fold_(N(e,s),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,C(),t)}findOnPath_(e,t,i){const s=!!this.value&&i(t,this.value);if(s)return s;if(y(e))return null;{const r=v(e),a=this.children.get(r);return a?a.findOnPath_(E(e),N(t,r),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,C(),t)}foreachOnPath_(e,t,i){if(y(e))return this;{this.value&&i(t,this.value);const s=v(e),r=this.children.get(s);return r?r.foreachOnPath_(E(e),N(t,s),i):new S(null)}}foreach(e){this.foreach_(C(),e)}foreach_(e,t){this.children.inorderTraversal((i,s)=>{s.foreach_(N(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class G{constructor(e){this.writeTree_=e}static empty(){return new G(new S(null))}}function Et(n,e,t){if(y(e))return new G(new S(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const s=i.path;let r=i.value;const a=F(s,e);return r=r.updateChild(a,t),new G(n.writeTree_.set(s,r))}{const s=new S(t),r=n.writeTree_.setTree(e,s);return new G(r)}}}function Cs(n,e,t){let i=n;return L(t,(s,r)=>{i=Et(i,N(e,s),r)}),i}function pa(n,e){if(y(e))return G.empty();{const t=n.writeTree_.setTree(e,new S(null));return new G(t)}}function Ts(n,e){return null!=Ze(n,e)}function Ze(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(F(t.path,e)):null}function _a(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(I,(i,s)=>{e.push(new b(i,s))}):n.writeTree_.children.inorderTraversal((i,s)=>{null!=s.value&&e.push(new b(i,s.value))}),e}function fe(n,e){if(y(e))return n;{const t=Ze(n,e);return new G(null!=t?new S(t):n.writeTree_.subtree(e))}}function Es(n){return n.writeTree_.isEmpty()}function tt(n,e){return fa(C(),n.writeTree_,e)}function fa(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((s,r)=>{".priority"===s?(f(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):t=fa(N(n,s),r,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(N(n,".priority"),i)),t}}function un(n,e){return wa(e,n)}function rp(n,e){if(n.snap)return H(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&H(N(n.path,t),e))return!0;return!1}function lp(n){return n.visible}function ga(n,e,t){let i=G.empty();for(let s=0;s<n.length;++s){const r=n[s];if(e(r)){const a=r.path;let l;if(r.snap)H(t,a)?(l=F(t,a),i=Et(i,l,r.snap)):H(a,t)&&(l=F(a,t),i=Et(i,C(),r.snap.getChild(l)));else{if(!r.children)throw ze("WriteRecord should have .snap or .children");if(H(t,a))l=F(t,a),i=Cs(i,l,r.children);else if(H(a,t))if(l=F(a,t),y(l))i=Cs(i,C(),r.children);else{const c=qe(r.children,v(l));if(c){const u=c.getChild(E(l));i=Et(i,C(),u)}}}}}return i}function ma(n,e,t,i,s){if(i||s){const r=fe(n.visibleWrites,e);return!s&&Es(r)?t:s||null!=t||Ts(r,C())?tt(ga(n.allWrites,function(u){return(u.visible||s)&&(!i||!~i.indexOf(u.writeId))&&(H(u.path,e)||H(e,u.path))},e),t||m.EMPTY_NODE):null}{const r=Ze(n.visibleWrites,e);if(null!=r)return r;{const a=fe(n.visibleWrites,e);return Es(a)?t:null!=t||Ts(a,C())?tt(a,t||m.EMPTY_NODE):null}}}function dn(n,e,t,i){return ma(n.writeTree,n.treePath,e,t,i)}function As(n,e){return function cp(n,e,t){let i=m.EMPTY_NODE;const s=Ze(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(I,(r,a)=>{i=i.updateImmediateChild(r,a)}),i;if(t){const r=fe(n.visibleWrites,e);return t.forEachChild(I,(a,l)=>{const c=tt(fe(r,new T(a)),l);i=i.updateImmediateChild(a,c)}),_a(r).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}return _a(fe(n.visibleWrites,e)).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}(n.writeTree,n.treePath,e)}function va(n,e,t,i){return function up(n,e,t,i,s){f(i||s,"Either existingEventSnap or existingServerSnap must exist");const r=N(e,t);if(Ts(n.visibleWrites,r))return null;{const a=fe(n.visibleWrites,r);return Es(a)?s.getChild(t):tt(a,s.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function hn(n,e){return function hp(n,e){return Ze(n.visibleWrites,e)}(n.writeTree,N(n.treePath,e))}function Is(n,e,t){return function dp(n,e,t,i){const s=N(e,t),r=Ze(n.visibleWrites,s);return null!=r?r:i.isCompleteForChild(t)?tt(fe(n.visibleWrites,s),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function ya(n,e){return wa(N(n.treePath,e),n.writeTree)}function wa(n,e){return{treePath:n,writeTree:e}}class gp{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;f("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),f(".priority"!==i,"Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const r=s.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(i,wt(i,e.snapshotNode,s.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(i,yt(i,s.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(i,Ye(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==r)throw ze("Illegal combination of changes: "+e+" occurred after "+s);this.changeMap.set(i,wt(i,e.snapshotNode,s.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const ba=new class mp{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class Ss{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new _e(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Is(this.writes_,e,i)}}getChildAfterChild(e,t,i){const s=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Oe(this.viewCache_),r=function fp(n,e,t,i,s,r){return function pp(n,e,t,i,s,r,a){let l;const c=fe(n.visibleWrites,e),u=Ze(c,C());if(null!=u)l=u;else{if(null==t)return[];l=tt(c,t)}if(l=l.withIndex(a),l.isEmpty()||l.isLeafNode())return[];{const d=[],h=a.getCompare(),p=r?l.getReverseIteratorFrom(i,a):l.getIteratorFrom(i,a);let _=p.getNext();for(;_&&d.length<s;)0!==h(_,i)&&d.push(_),_=p.getNext();return d}}(n.writeTree,n.treePath,e,t,i,s,r)}(this.writes_,s,t,1,i,e);return 0===r.length?null:r[0]}}function xa(n,e,t,i,s,r){const a=e.eventCache;if(null!=hn(i,t))return e;{let l,c;if(y(t))if(f(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Oe(e),h=As(i,u instanceof m?u:m.EMPTY_NODE);l=n.filter.updateFullNode(e.eventCache.getNode(),h,r)}else{const u=dn(i,Oe(e));l=n.filter.updateFullNode(e.eventCache.getNode(),u,r)}else{const u=v(t);if(".priority"===u){f(1===pe(t),"Can't have a priority with additional path components");const d=a.getNode();c=e.serverCache.getNode();const h=va(i,t,d,c);l=null!=h?n.filter.updatePriority(d,h):a.getNode()}else{const d=E(t);let h;if(a.isCompleteForChild(u)){c=e.serverCache.getNode();const p=va(i,t,a.getNode(),c);h=null!=p?a.getNode().getImmediateChild(u).updateChild(d,p):a.getNode().getImmediateChild(u)}else h=Is(i,u,e.serverCache);l=null!=h?n.filter.updateChild(a.getNode(),u,h,d,s,r):a.getNode()}}return Tt(e,l,a.isFullyInitialized()||y(t),n.filter.filtersNodes())}}function pn(n,e,t,i,s,r,a,l){const c=e.serverCache;let u;const d=a?n.filter:n.filter.getIndexedFilter();if(y(t))u=d.updateFullNode(c.getNode(),i,null);else if(d.filtersNodes()&&!c.isFiltered()){const _=c.getNode().updateChild(t,i);u=d.updateFullNode(c.getNode(),_,null)}else{const _=v(t);if(!c.isCompleteForPath(t)&&pe(t)>1)return e;const g=E(t),k=c.getNode().getImmediateChild(_).updateChild(g,i);u=".priority"===_?d.updatePriority(c.getNode(),k):d.updateChild(c.getNode(),_,k,g,ba,null)}const h=ha(e,u,c.isFullyInitialized()||y(t),d.filtersNodes());return xa(n,h,t,s,new Ss(s,h,r),l)}function ks(n,e,t,i,s,r,a){const l=e.eventCache;let c,u;const d=new Ss(s,e,r);if(y(t))u=n.filter.updateFullNode(e.eventCache.getNode(),i,a),c=Tt(e,u,!0,n.filter.filtersNodes());else{const h=v(t);if(".priority"===h)u=n.filter.updatePriority(e.eventCache.getNode(),i),c=Tt(e,u,l.isFullyInitialized(),l.isFiltered());else{const p=E(t),_=l.getNode().getImmediateChild(h);let g;if(y(p))g=i;else{const x=d.getCompleteChild(h);g=null!=x?".priority"===os(p)&&x.getChild(Yr(p)).isEmpty()?x:x.updateChild(p,i):m.EMPTY_NODE}c=_.equals(g)?e:Tt(e,n.filter.updateChild(l.getNode(),h,g,p,d,a),l.isFullyInitialized(),n.filter.filtersNodes())}}return c}function Ca(n,e){return n.eventCache.isCompleteForChild(e)}function Ta(n,e,t){return t.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function Ns(n,e,t,i,s,r,a,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u,c=e;u=y(t)?i:new S(null).setTree(t,i);const d=e.serverCache.getNode();return u.children.inorderTraversal((h,p)=>{if(d.hasChild(h)){const g=Ta(0,e.serverCache.getNode().getImmediateChild(h),p);c=pn(n,c,new T(h),g,s,r,a,l)}}),u.children.inorderTraversal((h,p)=>{const _=!e.serverCache.isCompleteForChild(h)&&null===p.value;if(!d.hasChild(h)&&!_){const x=Ta(0,e.serverCache.getNode().getImmediateChild(h),p);c=pn(n,c,new T(h),x,s,r,a,l)}}),c}class Ap{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new ps(i.getIndex()),r=function Bh(n){return n.loadsAllData()?new ps(n.getIndex()):n.hasLimit()?new Uh(n):new bt(n)}(i);this.processor_=function vp(n){return{filter:n}}(r);const a=t.serverCache,l=t.eventCache,c=s.updateFullNode(m.EMPTY_NODE,a.getNode(),null),u=r.updateFullNode(m.EMPTY_NODE,l.getNode(),null),d=new _e(c,a.isFullyInitialized(),s.filtersNodes()),h=new _e(u,l.isFullyInitialized(),r.filtersNodes());this.viewCache_=ln(h,d),this.eventGenerator_=new Kh(this.query_)}get query(){return this.query_}}function kp(n,e){const t=Oe(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!y(e)&&!t.getImmediateChild(v(e)).isEmpty())?t.getChild(e):null}function Ea(n){return 0===n.eventRegistrations_.length}function Aa(n,e,t){const i=[];if(t){f(null==e,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(r=>{const a=r.createCancelEvent(t,s);a&&i.push(a)})}if(e){let s=[];for(let r=0;r<n.eventRegistrations_.length;++r){const a=n.eventRegistrations_[r];if(a.matches(e)){if(e.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(r+1));break}}else s.push(a)}n.eventRegistrations_=s}else n.eventRegistrations_=[];return i}function Ia(n,e,t,i){e.type===Y.MERGE&&null!==e.source.queryId&&(f(Oe(n.viewCache_),"We should always have a full cache before handling merges"),f(cn(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,r=function wp(n,e,t,i,s){const r=new gp;let a,l;if(t.type===Y.OVERWRITE){const u=t;u.source.fromUser?a=ks(n,e,u.path,u.snap,i,s,r):(f(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!y(u.path),a=pn(n,e,u.path,u.snap,i,s,l,r))}else if(t.type===Y.MERGE){const u=t;u.source.fromUser?a=function xp(n,e,t,i,s,r,a){let l=e;return i.foreach((c,u)=>{const d=N(t,c);Ca(e,v(d))&&(l=ks(n,l,d,u,s,r,a))}),i.foreach((c,u)=>{const d=N(t,c);Ca(e,v(d))||(l=ks(n,l,d,u,s,r,a))}),l}(n,e,u.path,u.children,i,s,r):(f(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),a=Ns(n,e,u.path,u.children,i,s,l,r))}else if(t.type===Y.ACK_USER_WRITE){const u=t;a=u.revert?function Ep(n,e,t,i,s,r){let a;if(null!=hn(i,t))return e;{const l=new Ss(i,e,s),c=e.eventCache.getNode();let u;if(y(t)||".priority"===v(t)){let d;if(e.serverCache.isFullyInitialized())d=dn(i,Oe(e));else{const h=e.serverCache.getNode();f(h instanceof m,"serverChildren would be complete if leaf node"),d=As(i,h)}u=n.filter.updateFullNode(c,d,r)}else{const d=v(t);let h=Is(i,d,e.serverCache);null==h&&e.serverCache.isCompleteForChild(d)&&(h=c.getImmediateChild(d)),u=null!=h?n.filter.updateChild(c,d,h,E(t),l,r):e.eventCache.getNode().hasChild(d)?n.filter.updateChild(c,d,m.EMPTY_NODE,E(t),l,r):c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=dn(i,Oe(e)),a.isLeafNode()&&(u=n.filter.updateFullNode(u,a,r)))}return a=e.serverCache.isFullyInitialized()||null!=hn(i,C()),Tt(e,u,a,n.filter.filtersNodes())}}(n,e,u.path,i,s,r):function Cp(n,e,t,i,s,r,a){if(null!=hn(s,t))return e;const l=e.serverCache.isFiltered(),c=e.serverCache;if(null!=i.value){if(y(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return pn(n,e,t,c.getNode().getChild(t),s,r,l,a);if(y(t)){let u=new S(null);return c.getNode().forEachChild(K,(d,h)=>{u=u.set(new T(d),h)}),Ns(n,e,t,u,s,r,l,a)}return e}{let u=new S(null);return i.foreach((d,h)=>{const p=N(t,d);c.isCompleteForPath(p)&&(u=u.set(d,c.getNode().getChild(p)))}),Ns(n,e,t,u,s,r,l,a)}}(n,e,u.path,u.affectedTree,i,s,r)}else{if(t.type!==Y.LISTEN_COMPLETE)throw ze("Unknown operation type: "+t.type);a=function Tp(n,e,t,i,s){const r=e.serverCache;return xa(n,ha(e,r.getNode(),r.isFullyInitialized()||y(t),r.isFiltered()),t,i,ba,s)}(n,e,t.path,i,r)}const c=r.getChanges();return function bp(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=cn(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&t.push(la(cn(e)))}}(e,a,c),{viewCache:a,changes:c}}(n.processor_,s,e,t,i);return function yp(n,e){f(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),f(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,r.viewCache),f(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=r.viewCache,Sa(n,r.changes,r.viewCache.eventCache.getNode(),null)}function Sa(n,e,t,i){return function Yh(n,e,t,i){const s=[],r=[];return e.forEach(a=>{"child_changed"===a.type&&n.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&r.push(function Fh(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(a.childName,a.snapshotNode))}),Ct(n,s,"child_removed",e,i,t),Ct(n,s,"child_added",e,i,t),Ct(n,s,"child_moved",r,i,t),Ct(n,s,"child_changed",e,i,t),Ct(n,s,"value",e,i,t),s}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let _n,gn;class ka{constructor(){this.views=new Map}}function Ds(n,e,t,i){const s=e.source.queryId;if(null!==s){const r=n.views.get(s);return f(null!=r,"SyncTree gave us an op for an invalid query."),Ia(r,e,t,i)}{let r=[];for(const a of n.views.values())r=r.concat(Ia(a,e,t,i));return r}}function Lp(n,e,t,i,s,r){const a=function Na(n,e,t,i,s){const a=n.views.get(e._queryIdentifier);if(!a){let l=dn(t,s?i:null),c=!1;l?c=!0:i instanceof m?(l=As(t,i),c=!1):(l=m.EMPTY_NODE,c=!1);const u=ln(new _e(l,c,!1),new _e(i,s,!1));return new Ap(e,u)}return a}(n,e,i,s,r);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,a),function Np(n,e){n.eventRegistrations_.push(e)}(a,t),function Dp(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(I,(r,a)=>{i.push(Ye(r,a))}),t.isFullyInitialized()&&i.push(la(t.getNode())),Sa(n,i,t.getNode(),e)}(a,t)}function Da(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function ge(n,e){let t=null;for(const i of n.views.values())t=t||kp(i,e);return t}function Ra(n,e){return e._queryParams.loadsAllData()?fn(n):n.views.get(e._queryIdentifier)}function Ma(n,e){return null!=Ra(n,e)}function me(n){return null!=fn(n)}function fn(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Up=1;class Pa{constructor(e){this.listenProvider_=e,this.syncPointTree_=new S(null),this.pendingWriteTree_=function _p(){return{visibleWrites:G.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Rs(n,e,t,i,s){return function np(n,e,t,i,s){f(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===s&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:s}),s&&(n.visibleWrites=Et(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,s),s?nt(n,new Le({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function ve(n,e,t=!1){const i=function sp(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function op(n,e){const t=n.allWrites.findIndex(l=>l.writeId===e);f(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let s=i.visible,r=!1,a=n.allWrites.length-1;for(;s&&a>=0;){const l=n.allWrites[a];l.visible&&(a>=t&&rp(l,i.path)?s=!1:H(i.path,l.path)&&(r=!0)),a--}return!!s&&(r?(function ap(n){n.visibleWrites=ga(n.allWrites,lp,C()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=pa(n.visibleWrites,i.path):L(i.children,c=>{n.visibleWrites=pa(n.visibleWrites,N(i.path,c))}),!0))}(n.pendingWriteTree_,e)){let r=new S(null);return null!=i.snap?r=r.set(C(),!0):L(i.children,a=>{r=r.set(new T(a),!0)}),nt(n,new an(i.path,r,t))}return[]}function At(n,e,t){return nt(n,new Le({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function mn(n,e,t,i,s=!1){const r=e._path,a=n.syncPointTree_.get(r);let l=[];if(a&&("default"===e._queryIdentifier||Ma(a,e))){const c=function Op(n,e,t,i){const s=e._queryIdentifier,r=[];let a=[];const l=me(n);if("default"===s)for(const[c,u]of n.views.entries())a=a.concat(Aa(u,t,i)),Ea(u)&&(n.views.delete(c),u.query._queryParams.loadsAllData()||r.push(u.query));else{const c=n.views.get(s);c&&(a=a.concat(Aa(c,t,i)),Ea(c)&&(n.views.delete(s),c.query._queryParams.loadsAllData()||r.push(c.query)))}return l&&!me(n)&&r.push(new(function Mp(){return f(_n,"Reference.ts has not been loaded"),_n}())(e._repo,e._path)),{removed:r,events:a}}(a,e,t,i);(function Pp(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(r));const u=c.removed;if(l=c.events,!s){const d=-1!==u.findIndex(p=>p._queryParams.loadsAllData()),h=n.syncPointTree_.findOnPath(r,(p,_)=>me(_));if(d&&!h){const p=n.syncPointTree_.subtree(r);if(!p.isEmpty()){const _=function Vp(n){return n.fold((e,t,i)=>{if(t&&me(t))return[fn(t)];{let s=[];return t&&(s=Da(t)),L(i,(r,a)=>{s=s.concat(a)}),s}})}(p);for(let g=0;g<_.length;++g){const x=_[g],k=x.query,xe=Fa(n,x);n.listenProvider_.startListening(St(k),It(n,k),xe.hashFn,xe.onComplete)}}}!h&&u.length>0&&!i&&(d?n.listenProvider_.stopListening(St(e),null):u.forEach(p=>{const _=n.queryToTagMap.get(yn(p));n.listenProvider_.stopListening(St(p),_)}))}!function $p(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const s=yn(i),r=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(r)}}}(n,u)}return l}function Ms(n,e,t,i=!1){const s=e._path;let r=null,a=!1;n.syncPointTree_.foreachOnPath(s,(p,_)=>{const g=F(p,s);r=r||ge(_,g),a=a||me(_)});let c,l=n.syncPointTree_.get(s);l?(a=a||me(l),r=r||ge(l,C())):(l=new ka,n.syncPointTree_=n.syncPointTree_.set(s,l)),null!=r?c=!0:(c=!1,r=m.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((_,g)=>{const x=ge(g,C());x&&(r=r.updateImmediateChild(_,x))}));const u=Ma(l,e);if(!u&&!e._queryParams.loadsAllData()){const p=yn(e);f(!n.queryToTagMap.has(p),"View does not exist, but we have a tag");const _=function jp(){return Up++}();n.queryToTagMap.set(p,_),n.tagToQueryMap.set(_,p)}let h=Lp(l,e,t,un(n.pendingWriteTree_,s),r,c);if(!u&&!a&&!i){const p=Ra(l,e);h=h.concat(function Qp(n,e,t){const i=e._path,s=It(n,e),r=Fa(n,t),a=n.listenProvider_.startListening(St(e),s,r.hashFn,r.onComplete),l=n.syncPointTree_.subtree(i);if(s)f(!me(l.value),"If we're adding a query, it shouldn't be shadowed");else{const c=l.fold((u,d,h)=>{if(!y(u)&&d&&me(d))return[fn(d).query];{let p=[];return d&&(p=p.concat(Da(d).map(_=>_.query))),L(h,(_,g)=>{p=p.concat(g)}),p}});for(let u=0;u<c.length;++u){const d=c[u];n.listenProvider_.stopListening(St(d),It(n,d))}}return a}(n,e,p))}return h}function vn(n,e,t){const s=n.pendingWriteTree_,r=n.syncPointTree_.findOnPath(e,(a,l)=>{const u=ge(l,F(a,e));if(u)return u});return ma(s,e,r,t,!0)}function nt(n,e){return Oa(e,n.syncPointTree_,null,un(n.pendingWriteTree_,C()))}function Oa(n,e,t,i){if(y(n.path))return Za(n,e,t,i);{const s=e.get(C());null==t&&null!=s&&(t=ge(s,C()));let r=[];const a=v(n.path),l=n.operationForChild(a),c=e.children.get(a);if(c&&l){const u=t?t.getImmediateChild(a):null,d=ya(i,a);r=r.concat(Oa(l,c,u,d))}return s&&(r=r.concat(Ds(s,n,i,t))),r}}function Za(n,e,t,i){const s=e.get(C());null==t&&null!=s&&(t=ge(s,C()));let r=[];return e.children.inorderTraversal((a,l)=>{const c=t?t.getImmediateChild(a):null,u=ya(i,a),d=n.operationForChild(a);d&&(r=r.concat(Za(d,l,c,u)))}),s&&(r=r.concat(Ds(s,n,i,t))),r}function Fa(n,e){const t=e.query,i=It(n,t);return{hashFn:()=>(function Ip(n){return n.viewCache_.serverCache.getNode()}(e)||m.EMPTY_NODE).hash(),onComplete:s=>{if("ok"===s)return i?function Hp(n,e,t){const i=Ps(n,t);if(i){const s=Ls(i),r=s.path,a=s.queryId,l=F(r,e);return Os(n,r,new xt(bs(a),l))}return[]}(n,t._path,i):function qp(n,e){return nt(n,new xt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const r=function zd(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(s,t);return mn(n,t,null,r)}}}}function It(n,e){const t=yn(e);return n.queryToTagMap.get(t)}function yn(n){return n._path.toString()+"$"+n._queryIdentifier}function Ps(n,e){return n.tagToQueryMap.get(e)}function Ls(n){const e=n.indexOf("$");return f(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new T(n.substr(0,e))}}function Os(n,e,t){const i=n.syncPointTree_.get(e);return f(i,"Missing sync point for query tag that we're tracking"),Ds(i,t,un(n.pendingWriteTree_,e),null)}function St(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Fp(){return f(gn,"Reference.ts has not been loaded"),gn}())(n._repo,n._path):n}class Zs{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Zs(t)}node(){return this.node_}}class Fs{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=N(this.path_,e);return new Fs(this.syncTree_,t)}node(){return vn(this.syncTree_,this.path_)}}const Jp=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},Ua=function(n,e,t){return n&&"object"==typeof n?(f(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Kp(n[".sv"],e,t):"object"==typeof n[".sv"]?Yp(n[".sv"],e):void f(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Kp=function(n,e,t){if("timestamp"===n)return t.timestamp;f(!1,"Unexpected server value: "+n)},Yp=function(n,e,t){n.hasOwnProperty("increment")||f(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&f(!1,"Unexpected increment value: "+i);const s=e.node();if(f(null!==s&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const a=s.getValue();return"number"!=typeof a?i:a+i},Ba=function(n,e,t,i){return Bs(e,new Fs(t,n),i)},Us=function(n,e,t){return Bs(n,new Zs(e),t)};function Bs(n,e,t){const i=n.getPriority().val(),s=Ua(i,e.getImmediateChild(".priority"),t);let r;if(n.isLeafNode()){const a=n,l=Ua(a.getValue(),e,t);return l!==a.getValue()||s!==a.getPriority().val()?new Je(l,D(s)):n}{const a=n;return r=a,s!==a.getPriority().val()&&(r=r.updatePriority(new Je(s))),a.forEachChild(I,(l,c)=>{const u=Bs(c,e.getImmediateChild(l),t);u!==c&&(r=r.updateImmediateChild(l,u))}),r}}class zs{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function wn(n,e){let t=e instanceof T?e:new T(e),i=n,s=v(t);for(;null!==s;){const r=qe(i.node.children,s)||{children:{},childCount:0};i=new zs(s,i,r),t=E(t),s=v(t)}return i}function Fe(n){return n.node.value}function qs(n,e){n.node.value=e,Hs(n)}function za(n){return n.node.childCount>0}function bn(n,e){L(n.node.children,(t,i)=>{e(new zs(t,n,i))})}function qa(n,e,t,i){t&&!i&&e(n),bn(n,s=>{qa(s,e,!0,i)}),t&&i&&e(n)}function kt(n){return new T(null===n.parent?n.name:kt(n.parent)+"/"+n.name)}function Hs(n){null!==n.parent&&function t_(n,e,t){const i=function Xp(n){return void 0===Fe(n)&&!za(n)}(t),s=ne(n.node.children,e);i&&s?(delete n.node.children[e],n.node.childCount--,Hs(n)):!i&&!s&&(n.node.children[e]=t.node,n.node.childCount++,Hs(n))}(n.parent,n.name,n)}const n_=/[\[\].#$\/\u0000-\u001F\u007F]/,i_=/[\[\].#$\u0000-\u001F\u007F]/,Ws=10485760,xn=function(n){return"string"==typeof n&&0!==n.length&&!n_.test(n)},Ha=function(n){return"string"==typeof n&&0!==n.length&&!i_.test(n)},Dt=function(n,e,t){const i=t instanceof T?new wh(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Me(i));if("function"==typeof e)throw new Error(n+"contains a function "+Me(i)+" with contents = "+e.toString());if(Qt(e))throw new Error(n+"contains "+e.toString()+" "+Me(i));if("string"==typeof e&&e.length>Ws/3&&Ht(e)>Ws)throw new Error(n+"contains a string greater than "+Ws+" utf8 bytes "+Me(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let s=!1,r=!1;if(L(e,(a,l)=>{if(".value"===a)s=!0;else if(".priority"!==a&&".sv"!==a&&(r=!0,!xn(a)))throw new Error(n+" contains an invalid key ("+a+") "+Me(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function bh(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Ht(e),Xr(n)})(i,a),Dt(n,l,i),function xh(n){const e=n.parts_.pop();n.byteLength_-=Ht(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),s&&r)throw new Error(n+' contains ".value" child '+Me(i)+" in addition to actual children.")}},Vs=function(n,e,t,i){if(!(i&&void 0===t||Ha(t)))throw new Error(He(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},r_=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Vs(n,e,t,i)};class a_{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Cn(n,e){let t=null;for(let i=0;i<e.length;i++){const s=e[i],r=s.getPath();null!==t&&!rs(r,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:r}),t.events.push(s)}t&&n.eventLists_.push(t)}function Va(n,e,t){Cn(n,t),$a(n,i=>rs(i,e))}function z(n,e,t){Cn(n,t),$a(n,i=>H(i,e)||H(e,i))}function $a(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const s=n.eventLists_[i];s&&(e(s.path)?(l_(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function l_(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();De&&P("event: "+t.toString()),je(i)}}}const c_=25;class u_{constructor(e,t,i,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new a_,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rn(),this.transactionQueueTree_=new zs,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Qa(n){const t=n.infoData_.getNode(new T(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Mt(n){return Jp({timestamp:Qa(n)})}function Ja(n,e,t,i,s){n.dataUpdateCount++;const r=new T(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let a=[];if(s)if(i){const c=zt(t,u=>D(u));a=function Wp(n,e,t,i){const s=Ps(n,i);if(s){const r=Ls(s),a=r.path,l=r.queryId,c=F(a,e),u=S.fromObject(t);return Os(n,a,new et(bs(l),c,u))}return[]}(n.serverSyncTree_,r,c,s)}else{const c=D(t);a=function La(n,e,t,i){const s=Ps(n,i);if(null!=s){const r=Ls(s),a=r.path,l=r.queryId,c=F(a,e);return Os(n,a,new Le(bs(l),c,t))}return[]}(n.serverSyncTree_,r,c,s)}else if(i){const c=zt(t,u=>D(u));a=function zp(n,e,t){const i=S.fromObject(t);return nt(n,new et({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,r,c)}else{const c=D(t);a=At(n.serverSyncTree_,r,c)}let l=r;a.length>0&&(l=st(n,r)),z(n.eventQueue_,l,a)}function Ka(n,e){$s(n,"connected",e),!1===e&&function f_(n){it(n,"onDisconnectEvents");const e=Mt(n),t=rn();vs(n.onDisconnect_,C(),(s,r)=>{const a=Ba(s,r,n.serverSyncTree_,e);Xe(t,s,a)});let i=[];vs(t,C(),(s,r)=>{i=i.concat(At(n.serverSyncTree_,s,r));const a=Ks(n,s);st(n,a)}),n.onDisconnect_=rn(),z(n.eventQueue_,C(),i)}(n)}function $s(n,e,t){const i=new T("/.info/"+e),s=D(t);n.infoData_.updateSnapshot(i,s);const r=At(n.infoSyncTree_,i,s);z(n.eventQueue_,i,r)}function Tn(n){return n.nextWriteId_++}function js(n,e,t,i,s){it(n,"set",{path:e.toString(),value:t,priority:i});const r=Mt(n),a=D(t,i),l=vn(n.serverSyncTree_,e),c=Us(a,l,r),u=Tn(n),d=Rs(n.serverSyncTree_,e,c,u,!0);Cn(n.eventQueue_,d),n.server_.put(e.toString(),a.val(!0),(p,_)=>{const g="ok"===p;g||O("set at "+e+" failed: "+p);const x=ve(n.serverSyncTree_,u,!g);z(n.eventQueue_,e,x),function ye(n,e,t,i){e&&je(()=>{if("ok"===t)e(null);else{const s=(t||"error").toUpperCase();let r=s;i&&(r+=": "+i);const a=new Error(r);a.code=s,e(a)}})}(0,s,p,_)});const h=Ks(n,e);st(n,h),z(n.eventQueue_,h,[])}function Qs(n,e,t){let i;i=".info"===v(e._path)?mn(n.infoSyncTree_,e,t):mn(n.serverSyncTree_,e,t),Va(n.eventQueue_,e._path,i)}function it(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),P(t,...e)}function Js(n,e,t){return vn(n.serverSyncTree_,e,t)||m.EMPTY_NODE}function En(n,e=n.transactionQueueTree_){if(e||An(n,e),Fe(e)){const t=tl(n,e);f(t.length>0,"Sending zero length transaction queue"),t.every(s=>0===s.status)&&function x_(n,e,t){const i=t.map(u=>u.currentWriteId),s=Js(n,e,i);let r=s;const a=s.hash();for(let u=0;u<t.length;u++){const d=t[u];f(0===d.status,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=F(e,d.path);r=r.updateChild(h,d.currentOutputSnapshotRaw)}const l=r.val(!0),c=e;n.server_.put(c.toString(),l,u=>{it(n,"transaction put response",{path:c.toString(),status:u});let d=[];if("ok"===u){const h=[];for(let p=0;p<t.length;p++)t[p].status=2,d=d.concat(ve(n.serverSyncTree_,t[p].currentWriteId)),t[p].onComplete&&h.push(()=>t[p].onComplete(null,!0,t[p].currentOutputSnapshotResolved)),t[p].unwatcher();An(n,wn(n.transactionQueueTree_,e)),En(n,n.transactionQueueTree_),z(n.eventQueue_,e,d);for(let p=0;p<h.length;p++)je(h[p])}else{if("datastale"===u)for(let h=0;h<t.length;h++)t[h].status=3===t[h].status?4:0;else{O("transaction at "+c.toString()+" failed: "+u);for(let h=0;h<t.length;h++)t[h].status=4,t[h].abortReason=u}st(n,e)}},a)}(n,kt(e),t)}else za(e)&&bn(e,t=>{En(n,t)})}function st(n,e){const t=el(n,e),i=kt(t);return function C_(n,e,t){if(0===e.length)return;const i=[];let s=[];const a=e.filter(l=>0===l.status).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const c=e[l],u=F(t,c.path);let h,d=!1;if(f(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)d=!0,h=c.abortReason,s=s.concat(ve(n.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=c_)d=!0,h="maxretry",s=s.concat(ve(n.serverSyncTree_,c.currentWriteId,!0));else{const p=Js(n,c.path,a);c.currentInputSnapshot=p;const _=e[l].update(p.val());if(void 0!==_){Dt("transaction failed: Data returned ",_,c.path);let g=D(_);"object"==typeof _&&null!=_&&ne(_,".priority")||(g=g.updatePriority(p.getPriority()));const k=c.currentWriteId,xe=Mt(n),Nn=Us(g,p,xe);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=Nn,c.currentWriteId=Tn(n),a.splice(a.indexOf(k),1),s=s.concat(Rs(n.serverSyncTree_,c.path,Nn,c.currentWriteId,c.applyLocally)),s=s.concat(ve(n.serverSyncTree_,k,!0))}else d=!0,h="nodata",s=s.concat(ve(n.serverSyncTree_,c.currentWriteId,!0))}z(n.eventQueue_,t,s),s=[],d&&(e[l].status=2,setTimeout(e[l].unwatcher,Math.floor(0)),e[l].onComplete&&i.push("nodata"===h?()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot):()=>e[l].onComplete(new Error(h),!1,null)))}An(n,n.transactionQueueTree_);for(let l=0;l<i.length;l++)je(i[l]);En(n,n.transactionQueueTree_)}(n,tl(n,t),i),i}function el(n,e){let t,i=n.transactionQueueTree_;for(t=v(e);null!==t&&void 0===Fe(i);)i=wn(i,t),t=v(e=E(e));return i}function tl(n,e){const t=[];return nl(n,e,t),t.sort((i,s)=>i.order-s.order),t}function nl(n,e,t){const i=Fe(e);if(i)for(let s=0;s<i.length;s++)t.push(i[s]);bn(e,s=>{nl(n,s,t)})}function An(n,e){const t=Fe(e);if(t){let i=0;for(let s=0;s<t.length;s++)2!==t[s].status&&(t[i]=t[s],i++);t.length=i,qs(e,t.length>0?t:void 0)}bn(e,i=>{An(n,i)})}function Ks(n,e){const t=kt(el(n,e)),i=wn(n.transactionQueueTree_,e);return function e_(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,s=>{Ys(n,s)}),Ys(n,i),qa(i,s=>{Ys(n,s)}),t}function Ys(n,e){const t=Fe(e);if(t){const i=[];let s=[],r=-1;for(let a=0;a<t.length;a++)3===t[a].status||(1===t[a].status?(f(r===a-1,"All SENT items should be at beginning of queue."),r=a,t[a].status=3,t[a].abortReason="set"):(f(0===t[a].status,"Unexpected transaction status in abort"),t[a].unwatcher(),s=s.concat(ve(n.serverSyncTree_,t[a].currentWriteId,!0)),t[a].onComplete&&i.push(t[a].onComplete.bind(null,new Error("set"),!1,null))));-1===r?qs(e,void 0):t.length=r+1,z(n.eventQueue_,kt(e),s);for(let a=0;a<i.length;a++)je(i[a])}}const Xs=function(n,e){const t=A_(n),i=t.namespace;return"firebase.com"===t.domain&&J(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&J("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&O("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Xi(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new T(t.pathString)}},A_=function(n){let e="",t="",i="",s="",r="",a=!0,l="https",c=443;if("string"==typeof n){let u=n.indexOf("//");u>=0&&(l=n.substring(0,u-1),n=n.substring(u+2));let d=n.indexOf("/");-1===d&&(d=n.length);let h=n.indexOf("?");-1===h&&(h=n.length),e=n.substring(0,Math.min(d,h)),d<h&&(s=function T_(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let s=t[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}(n.substring(d,h)));const p=function E_(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):O(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,h)));u=e.indexOf(":"),u>=0?(a="https"===l||"wss"===l,c=parseInt(e.substring(u+1),10)):u=e.length;const _=e.slice(0,u);if("localhost"===_.toLowerCase())t="localhost";else if(_.split(".").length<=2)t=_;else{const g=e.indexOf(".");i=e.substring(0,g).toLowerCase(),t=e.substring(g+1),r=i}"ns"in p&&(r=p.ns)}return{host:e,port:c,domain:t,subdomain:i,secure:a,scheme:l,pathString:s,namespace:r}};class sl{constructor(e,t,i,s){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=s}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+R(this.snapshot.exportVal())}}class ol{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class eo{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return f(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class q{constructor(e,t,i,s){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=s}get key(){return y(this._path)?null:os(this._path)}get ref(){return new V(this._repo,this._path)}get _queryIdentifier(){const e=ua(this._queryParams),t=Ki(e);return"{}"===t?"default":t}get _queryObject(){return ua(this._queryParams)}isEqual(e){if(!((e=Te(e))instanceof q))return!1;const t=this._repo===e._repo,i=rs(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function vh(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class V extends q{constructor(e,t){super(e,t,new _s,!1)}get parent(){const e=Yr(this._path);return null===e?null:new V(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ue{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new T(e),i=ot(this.ref,e);return new Ue(this._node.getChild(t),i,I)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,s)=>e(new Ue(s,ot(this.ref,i),I)))}hasChild(e){const t=new T(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function to(n,e){return(n=Te(n))._checkNotDeleted("ref"),void 0!==e?ot(n._root,e):n._root}function ot(n,e){return null===v((n=Te(n))._path)?r_("child","path",e,!1):Vs("child","path",e,!1),new V(n._repo,N(n._path,e))}function no(n,e){(function(n,e){if(".info"===v(e))throw new Error(n+" failed = Can't modify data under /.info/")})("set",(n=Te(n))._path),function(n,e,t,i){i&&void 0===e||Dt(He(n,"value"),e,t)}("set",e,n._path,!1);const t=new rt;return js(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}class Pt{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new sl("value",this,new Ue(e.snapshotNode,new V(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ol(this,e,t):null}matches(e){return e instanceof Pt&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class kn{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ol(this,e,t):null}createEvent(e,t){f(null!=e.childName,"Child events should have a childName.");const i=ot(new V(t._repo,t._path),e.childName),s=t._queryParams.getIndex();return new sl(e.type,this,new Ue(e.snapshotNode,i,s),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof kn&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function rl(n,e,t,i){return function Lt(n,e,t,i,s){let r;if("object"==typeof i&&(r=void 0,s=i),"function"==typeof i&&(r=i),s&&s.onlyOnce){const c=t,u=(d,h)=>{Qs(n._repo,n,l),c(d,h)};u.userCallback=t.userCallback,u.context=t.context,t=u}const a=new eo(t,r||void 0),l="value"===e?new Pt(a):new kn(e,a);return function y_(n,e,t){let i;i=".info"===v(e._path)?Ms(n.infoSyncTree_,e,t):Ms(n.serverSyncTree_,e,t),Va(n.eventQueue_,e._path,i)}(n._repo,n,l),()=>Qs(n._repo,n,l)}(n,"value",e,t,i)}(function Rp(n){f(!_n,"__referenceConstructor has already been defined"),_n=n})(V),function Zp(n){f(!gn,"__referenceConstructor has already been defined"),gn=n}(V);const io={};function B_(n,e,t,i,s){let r=i||n.options.databaseURL;void 0===r&&(n.options.projectId||J("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),P("Using default host for project ",n.options.projectId),r=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c,u,a=Xs(r,s),l=a.repoInfo;typeof process<"u"&&process.env&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(c=!0,r=`http://${u}?ns=${l.namespace}`,a=Xs(r,s),l=a.repoInfo):c=!a.repoInfo.secure;const d=s&&c?new _t(_t.OWNER):new $d(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!xn(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ha(n)}(t))throw new Error(He(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",a),y(a.path)||J("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function q_(n,e,t,i){let s=io[e.name];s||(s={},io[e.name]=s);let r=s[n.toURLString()];return r&&J("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new u_(n,false,t,i),s[n.toURLString()]=r,r}(l,n,d,new Vd(n.name,t));return new W_(h,n)}class W_{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function d_(n,e,t){if(n.stats_=ns(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new on(n.repoInfo_,(i,s,r,a)=>{Ja(n,i,s,r,a)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Ka(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{R(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Pe(n.repoInfo_,e,(i,s,r,a)=>{Ja(n,i,s,r,a)},i=>{Ka(n,i)},i=>{!function h_(n,e){L(e,(t,i)=>{$s(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function Jd(n,e){const t=n.toString();return ts[t]||(ts[t]=e()),ts[t]}(n.repoInfo_,()=>new Jh(n.stats_,n.server_)),n.infoData_=new Gh,n.infoSyncTree_=new Pa({startListening:(i,s,r,a)=>{let l=[];const c=n.infoData_.getNode(i._path);return c.isEmpty()||(l=At(n.infoSyncTree_,i._path,c),setTimeout(()=>{a("ok")},0)),l},stopListening:()=>{}}),$s(n,"connected",!1),n.serverSyncTree_=new Pa({startListening:(i,s,r,a)=>(n.server_.listen(i,r,s,(l,c)=>{const u=a(l,c);z(n.eventQueue_,i._path,u)}),[]),stopListening:(i,s)=>{n.server_.unlisten(i,s)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new V(this._repo,C())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function z_(n,e){const t=io[e];(!t||t[n.key]!==n)&&J(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function Xa(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&J("Cannot call "+e+" on a deleted database.")}}function dl(n=So(),e){const t=We(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=(n=>{const e=(n=>{var e,t;return null===(t=null===(e=Zt())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]})(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),i]:[e.substring(0,t),i]})("database");i&&function G_(n,e,t,i={}){(n=Te(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&J("Cannot call useEmulator() after instance has already been initialized.");const s=n._repoInternal;let r;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&J('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),r=new _t(_t.OWNER);else if(i.mockUserToken){const a="string"==typeof i.mockUserToken?i.mockUserToken:function El(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i=e||"demo-project",s=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ot(JSON.stringify({alg:"none",type:"JWT"})),Ot(JSON.stringify(a)),""].join(".")}(i.mockUserToken,n.app.options.projectId);r=new _t(a)}!function U_(n,e,t,i){n.repoInfo_=new Xi(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(s,e,t,r)}(t,...i)}return t}Pe.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Pe.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function V_(n){(function Md(n){ji=n})("9.23.0"),ce(new ie("database",(e,{instanceIdentifier:t})=>B_(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),$(_r,"0.14.4",n),$(_r,"0.14.4","esm2017")}();var be=U(8424),o=U(4769),Q_=U(343),hl=U(7341);const J_=["workarea"];function K_(n,e){if(1&n){const t=o.EpF();o.ynx(0),o.TgZ(1,"div",122)(2,"h4"),o._uU(3,"Path"),o.qZA(),o.TgZ(4,"div",96)(5,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(7),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement,"x"))}),o.TgZ(6,"input",123,124),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(7),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement,"x",+s.value))}),o.qZA(),o.TgZ(8,"span"),o._uU(9,"X"),o.qZA()(),o.TgZ(10,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(12),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement,"y"))}),o.TgZ(11,"input",123,125),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(12),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement,"y",+s.value))}),o.qZA(),o.TgZ(13,"span"),o._uU(14,"Y"),o.qZA()()()(),o.BQk()}if(2&n){const t=o.oxw(2);o.xp6(6),o.Q6J("value",t.selectedElement.x),o.xp6(5),o.Q6J("value",t.selectedElement.y)}}function Y_(n,e){if(1&n){const t=o.EpF();o.ynx(0),o.TgZ(1,"div",126)(2,"h4"),o._uU(3,"Rectangle"),o.qZA(),o.TgZ(4,"div",96)(5,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(7),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement,"x"))}),o.TgZ(6,"input",123,127),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(7),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement,"x",+s.value))}),o.qZA(),o.TgZ(8,"span"),o._uU(9,"X"),o.qZA()(),o.TgZ(10,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(12),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement,"y"))}),o.TgZ(11,"input",123,128),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(12),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement,"y",+s.value))}),o.qZA(),o.TgZ(13,"span"),o._uU(14,"Y"),o.qZA()(),o.TgZ(15,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(17),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement.options,"width"))}),o.TgZ(16,"input",123,129),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(17),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement.options,"width",+s.value))}),o.qZA(),o.TgZ(18,"span",100),o._uU(19,"Width"),o.qZA()(),o.TgZ(20,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(22),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement.options,"height"))}),o.TgZ(21,"input",123,130),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(22),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement.options,"height",+s.value))}),o.qZA(),o.TgZ(23,"span",100),o._uU(24,"Height"),o.qZA()()()(),o.BQk()}if(2&n){const t=o.oxw(2);o.xp6(6),o.Q6J("value",t.selectedElement.x),o.xp6(5),o.Q6J("value",t.selectedElement.y),o.xp6(5),o.Q6J("value",t.selectedElement.options.width),o.xp6(5),o.Q6J("value",t.selectedElement.options.height)}}function X_(n,e){if(1&n){const t=o.EpF();o.ynx(0),o.TgZ(1,"div",131)(2,"h4"),o._uU(3,"Image"),o.qZA(),o.TgZ(4,"div",96)(5,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(7),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement,"x"))}),o.TgZ(6,"input",132,133),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(7),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement,"x",+s.value))}),o.qZA(),o.TgZ(8,"span"),o._uU(9,"X"),o.qZA()(),o.TgZ(10,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(12),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement,"y"))}),o.TgZ(11,"input",134,135),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(12),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement,"y",+s.value))}),o.qZA(),o.TgZ(13,"span"),o._uU(14,"Y"),o.qZA()(),o.TgZ(15,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(17),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement.options,"width"))}),o.TgZ(16,"input",123,136),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(17),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement.options,"width",+s.value))}),o.qZA(),o.TgZ(18,"span",100),o._uU(19,"Width"),o.qZA()(),o.TgZ(20,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(22),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement.options,"height"))}),o.TgZ(21,"input",123,137),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(22),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement.options,"height",+s.value))}),o.qZA(),o.TgZ(23,"span",100),o._uU(24,"Height"),o.qZA()()()(),o.BQk()}if(2&n){const t=o.oxw(2);o.xp6(6),o.Q6J("value",t.selectedElement.x),o.xp6(5),o.Q6J("value",t.selectedElement.y),o.xp6(5),o.Q6J("value",t.selectedElement.options.width),o.xp6(5),o.Q6J("value",t.selectedElement.options.height)}}function ef(n,e){if(1&n){const t=o.EpF();o.ynx(0),o.TgZ(1,"div",138)(2,"h4"),o._uU(3,"Ellipse"),o.qZA(),o.TgZ(4,"div",96)(5,"label",139),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(7),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement.options,"cx"))}),o.TgZ(6,"input",140,141),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(7),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement.options,"cx",+s.value))}),o.qZA(),o.TgZ(8,"span"),o._uU(9,"X"),o.qZA()(),o.TgZ(10,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(12),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement.options,"cy"))}),o.TgZ(11,"input",142,143),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(12),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement.options,"cy",+s.value))}),o.qZA(),o.TgZ(13,"span"),o._uU(14,"Y"),o.qZA()(),o.TgZ(15,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(17),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement.options,"rx"))}),o.TgZ(16,"input",144,145),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(17),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement.options,"rx",+s.value))}),o.qZA(),o.TgZ(18,"span"),o._uU(19,"Radius X"),o.qZA()(),o.TgZ(20,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(22),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement.options,"ry"))}),o.TgZ(21,"input",146,147),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(22),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement.options,"ry",+s.value))}),o.qZA(),o.TgZ(23,"span"),o._uU(24,"Radius Y"),o.qZA()()()(),o.BQk()}if(2&n){const t=o.oxw(2);o.xp6(6),o.Q6J("value",t.selectedElement.options.cx),o.xp6(5),o.Q6J("value",t.selectedElement.options.cy),o.xp6(5),o.Q6J("value",t.selectedElement.options.rx),o.xp6(5),o.Q6J("value",t.selectedElement.options.ry)}}function tf(n,e){if(1&n){const t=o.EpF();o.ynx(0),o.TgZ(1,"div",148)(2,"h4"),o._uU(3,"Line"),o.qZA(),o.TgZ(4,"div",96)(5,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(7),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement.options,"x1"))}),o.TgZ(6,"input",149,150),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(7),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement.options,"x1",+s.value))}),o.qZA(),o.TgZ(8,"span"),o._uU(9,"Start X"),o.qZA()(),o.TgZ(10,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(12),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement.options,"y1"))}),o.TgZ(11,"input",151,152),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(12),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement.options,"y1",+s.value))}),o.qZA(),o.TgZ(13,"span"),o._uU(14,"Start Y"),o.qZA()(),o.TgZ(15,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(17),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement.options,"x2"))}),o.TgZ(16,"input",153,154),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(17),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement.options,"x2",+s.value))}),o.qZA(),o.TgZ(18,"span"),o._uU(19,"End X"),o.qZA()(),o.TgZ(20,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(22),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement.options,"y2"))}),o.TgZ(21,"input",155,156),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(22),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement.options,"y2",+s.value))}),o.qZA(),o.TgZ(23,"span"),o._uU(24,"End Y"),o.qZA()()()(),o.BQk()}if(2&n){const t=o.oxw(2);o.xp6(6),o.Q6J("value",t.selectedElement.options.x1),o.xp6(5),o.Q6J("value",t.selectedElement.options.y1),o.xp6(5),o.Q6J("value",t.selectedElement.options.x2),o.xp6(5),o.Q6J("value",t.selectedElement.options.y2)}}function nf(n,e){if(1&n){const t=o.EpF();o.ynx(0),o.TgZ(1,"div",157)(2,"h4"),o._uU(3,"Text"),o.qZA(),o.TgZ(4,"div",96)(5,"label",158)(6,"input",159,160),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(7),r=o.oxw(2);return o.KtG(r.selectedElement.value=s.value)}),o.qZA(),o.TgZ(8,"span"),o._uU(9,"Content"),o.qZA()(),o.TgZ(10,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(12),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement,"x"))}),o.TgZ(11,"input",161,162),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(12),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement,"x",+s.value))}),o.qZA(),o.TgZ(13,"span"),o._uU(14,"X"),o.qZA()(),o.TgZ(15,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(17),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement,"y"))}),o.TgZ(16,"input",163,164),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(17),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement,"y",+s.value))}),o.qZA(),o.TgZ(18,"span"),o._uU(19,"Y"),o.qZA()(),o.TgZ(20,"div",165)(21,"span"),o._uU(22,"Font"),o.qZA(),o.TgZ(23,"div",166),o._uU(24),o.qZA(),o._UZ(25,"div",118)(26,"input",167),o.TgZ(27,"select",168,169),o.NdJ("change",function(){o.CHM(t);const s=o.MAs(28),r=o.oxw(2);return o.KtG(r.selectedElement.options.fontFamily=s.value)}),o.TgZ(29,"option",170),o._uU(30,"Arial"),o.qZA(),o.TgZ(31,"option",171),o._uU(32,"Arial Black"),o.qZA(),o.TgZ(33,"option",172),o._uU(34,"Comic Sans MS"),o.qZA(),o.TgZ(35,"option",173),o._uU(36,"Courier New"),o.qZA(),o.TgZ(37,"option",174),o._uU(38,"Georgia"),o.qZA(),o.TgZ(39,"option",175),o._uU(40,"Impact"),o.qZA(),o.TgZ(41,"option",176),o._uU(42,"Lucida Console"),o.qZA(),o.TgZ(43,"option",177),o._uU(44,"Lucida Sans Unicode"),o.qZA(),o.TgZ(45,"option",178),o._uU(46,"Monospace"),o.qZA(),o.TgZ(47,"option",179),o._uU(48,"Palatino Linotype"),o.qZA(),o.TgZ(49,"option",180),o._uU(50,"Sans-serif"),o.qZA(),o.TgZ(51,"option",181),o._uU(52,"Serif"),o.qZA(),o.TgZ(53,"option",182),o._uU(54,"Tahoma"),o.qZA(),o.TgZ(55,"option",183),o._uU(56,"Times New Roman"),o.qZA(),o.TgZ(57,"option",184),o._uU(58,"Trebuchet MS"),o.qZA(),o.TgZ(59,"option",185),o._uU(60,"Verdana"),o.qZA()()(),o.TgZ(61,"div",186)(62,"span"),o._uU(63,"Font Style"),o.qZA(),o.TgZ(64,"div",187),o.NdJ("click",function(){o.CHM(t);const s=o.oxw(2);return o.KtG(s.toggleFontWeight())}),o._uU(65,"B"),o.qZA(),o.TgZ(66,"div",188),o.NdJ("click",function(){o.CHM(t);const s=o.oxw(2);return o.KtG(s.toggleFontStyle())}),o._uU(67,"i "),o.qZA()(),o.TgZ(68,"label",189),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(70),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement.options,"fontSize"))}),o.TgZ(69,"input",190,191),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(70),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement.options,"fontSize",+s.value))}),o.qZA(),o.TgZ(71,"span",192),o._uU(72,"Font Size"),o.qZA()()()(),o.BQk()}if(2&n){const t=o.oxw(2);o.xp6(6),o.Q6J("value",t.selectedElement.value),o.xp6(5),o.Q6J("value",t.selectedElement.x),o.xp6(5),o.Q6J("value",t.selectedElement.y),o.xp6(7),o.Udp("font-family",t.selectedElement.options.fontFamily),o.xp6(1),o.hij(" ",t.selectedElement.options.fontFamily,""),o.xp6(3),o.Q6J("value",t.selectedElement.options.fontFamily),o.xp6(37),o.ekj("active","bold"===t.selectedElement.options.fontWeight),o.xp6(2),o.ekj("active","italic"===t.selectedElement.options.fontStyle),o.xp6(3),o.Q6J("value",t.selectedElement.options.fontSize)}}function sf(n,e){if(1&n){const t=o.EpF();o.ynx(0),o.TgZ(1,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(3),r=o.oxw(2);return o.KtG(r.onDragDown(s,r.selectedElement.options,"rx"))}),o.TgZ(2,"input",193,194),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(3),r=o.oxw(2);return o.KtG(r.setNumberValue(r.selectedElement.options,"rx",+s.value))}),o.qZA(),o.TgZ(4,"span",100),o._uU(5,"Roundness"),o.qZA(),o._UZ(6,"div",195),o.qZA(),o.BQk()}if(2&n){const t=o.oxw(2);o.xp6(2),o.Q6J("value",t.selectedElement.options.rx)}}function of(n,e){1&n&&(o.ynx(0),o._uU(1,"\xb7\xb7\xb7"),o.BQk())}function rf(n,e){1&n&&(o.ynx(0),o._uU(1,"- -"),o.BQk())}function af(n,e){1&n&&(o.ynx(0),o._uU(1,"-\xb7-"),o.BQk())}function lf(n,e){1&n&&(o.ynx(0),o._uU(1,"-\xb7\xb7-"),o.BQk())}function cf(n,e){1&n&&(o.ynx(0),o._uU(1,"\u2014"),o.BQk())}function uf(n,e){1&n&&o.GkF(0)}function df(n,e){if(1&n&&(o.ynx(0),o.YNc(1,uf,1,0,"ng-container",196),o.BQk()),2&n){o.oxw(2);const t=o.MAs(47);o.xp6(1),o.Q6J("ngTemplateOutlet",t)}}function hf(n,e){if(1&n){const t=o.EpF();o.ynx(0)(1,93),o.YNc(2,K_,15,2,"ng-container",94),o.YNc(3,Y_,25,4,"ng-container",94),o.YNc(4,X_,25,4,"ng-container",94),o.YNc(5,ef,25,4,"ng-container",94),o.YNc(6,tf,25,4,"ng-container",94),o.YNc(7,nf,73,12,"ng-container",94),o.TgZ(8,"div",95)(9,"div",96)(10,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(12),r=o.oxw();return o.KtG(r.onDragDown(s,r.selectedElement,"rotation"))}),o.TgZ(11,"input",98,99),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(12),r=o.oxw();return o.KtG(r.setNumberValue(r.selectedElement,"rotation",+s.value))}),o.qZA(),o.TgZ(13,"span",100),o._uU(14,"Rotation"),o.qZA(),o.TgZ(15,"div",101),o._UZ(16,"div",102),o.qZA()(),o.TgZ(17,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(19),r=o.oxw();return o.KtG(r.onDragDown(s,r.selectedElement,"opacity"))}),o.TgZ(18,"input",103,104),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(19),r=o.oxw();return o.KtG(r.setNumberValue(r.selectedElement,"opacity",+s.value))}),o.qZA(),o.TgZ(20,"span",105),o._uU(21,"Opacity"),o.qZA()(),o.YNc(22,sf,7,1,"ng-container",94),o.qZA()(),o.TgZ(23,"div",106)(24,"h4"),o._uU(25,"Stroke"),o.qZA(),o.TgZ(26,"div",96)(27,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(29),r=o.oxw();return o.KtG(r.onDragDown(s,r.selectedElement.options,"strokeWidth"))}),o.TgZ(28,"input",107,108),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(29),r=o.oxw();return o.KtG(r.setNumberValue(r.selectedElement.options,"strokeWidth",+s.value))}),o.qZA(),o.TgZ(30,"span",100),o._uU(31,"Width"),o.qZA(),o._UZ(32,"div",109),o.qZA(),o.TgZ(33,"div",110)(34,"span"),o._uU(35,"Dash"),o.qZA(),o.TgZ(36,"select",111,112),o.NdJ("change",function(){o.CHM(t);const s=o.MAs(37),r=o.oxw();return o.KtG(r.selectedElement.options.dasharray=s.value)}),o.TgZ(38,"option",113),o._uU(39,"\u2014"),o.qZA(),o.TgZ(40,"option",114),o._uU(41,"\xb7\xb7\xb7"),o.qZA(),o.TgZ(42,"option",115),o._uU(43,"- -"),o.qZA(),o.TgZ(44,"option",116),o._uU(45,"-\xb7-"),o.qZA(),o.TgZ(46,"option",117),o._uU(47,"-\xb7\xb7-"),o.qZA()(),o._UZ(48,"div",118),o.TgZ(49,"label",119),o.ynx(50,93),o.YNc(51,of,2,0,"ng-container",94),o.YNc(52,rf,2,0,"ng-container",94),o.YNc(53,af,2,0,"ng-container",94),o.YNc(54,lf,2,0,"ng-container",94),o.YNc(55,cf,2,0,"ng-container",120),o.BQk(),o.qZA()(),o.TgZ(56,"label",121)(57,"span",100),o._uU(58,"Stroke Join"),o.qZA()(),o.TgZ(59,"label",121)(60,"span",100),o._uU(61,"Stroke Cap"),o.qZA()()()(),o.YNc(62,df,2,1,"ng-container",120),o.BQk()()}if(2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngSwitch",t.selectedElement.type),o.xp6(1),o.Q6J("ngSwitchCase",t.elementTypeEnum.BRUSH),o.xp6(1),o.Q6J("ngSwitchCase",t.elementTypeEnum.RECT),o.xp6(1),o.Q6J("ngSwitchCase",t.elementTypeEnum.IMAGE),o.xp6(1),o.Q6J("ngSwitchCase",t.elementTypeEnum.ELLIPSE),o.xp6(1),o.Q6J("ngSwitchCase",t.elementTypeEnum.LINE),o.xp6(1),o.Q6J("ngSwitchCase",t.elementTypeEnum.TEXT),o.xp6(4),o.Q6J("value",t.selectedElement.rotation),o.xp6(4),o.Akn("transform: rotate("+t.selectedElement.rotation+"deg);"),o.xp6(3),o.Q6J("value",t.selectedElement.opacity),o.xp6(4),o.Q6J("ngSwitchCase",t.elementTypeEnum.RECT),o.xp6(6),o.Q6J("value",t.selectedElement.options.strokeWidth),o.xp6(8),o.Q6J("value",t.selectedElement.options.dasharray),o.xp6(14),o.Q6J("ngSwitch",t.selectedElement.options.dasharray),o.xp6(1),o.Q6J("ngSwitchCase","2,2"),o.xp6(1),o.Q6J("ngSwitchCase","5,5"),o.xp6(1),o.Q6J("ngSwitchCase","5,2,2,2"),o.xp6(1),o.Q6J("ngSwitchCase","5,2,2,2,2,2")}}function pf(n,e){1&n&&o.GkF(0)}function _f(n,e){if(1&n&&(o.ynx(0),o.YNc(1,pf,1,0,"ng-container",196),o.BQk()),2&n){o.oxw();const t=o.MAs(47);o.xp6(1),o.Q6J("ngTemplateOutlet",t)}}function ff(n,e){1&n&&(o.ynx(0),o._uU(1,"\xb7\xb7\xb7"),o.BQk())}function gf(n,e){1&n&&(o.ynx(0),o._uU(1,"- -"),o.BQk())}function mf(n,e){1&n&&(o.ynx(0),o._uU(1,"-\xb7-"),o.BQk())}function vf(n,e){1&n&&(o.ynx(0),o._uU(1,"-\xb7\xb7-"),o.BQk())}function yf(n,e){1&n&&(o.ynx(0),o._uU(1,"\u2014"),o.BQk())}function wf(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",197)(1,"h4"),o._uU(2,"Whiteboard"),o.qZA(),o.TgZ(3,"div",96)(4,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(6),r=o.oxw();return o.KtG(r.onDragDown(s,r.options,"canvasWidth"))}),o.TgZ(5,"input",198,199),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(6),r=o.oxw();return r.setNumberValue(r.options,"canvasWidth",+s.value),o.KtG(r.updateOptions())}),o.qZA(),o.TgZ(7,"span",100),o._uU(8,"Width"),o.qZA()(),o.TgZ(9,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(11),r=o.oxw();return o.KtG(r.onDragDown(s,r.options,"canvasHeight"))}),o.TgZ(10,"input",198,200),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(11),r=o.oxw();return r.setNumberValue(r.options,"canvasHeight",+s.value),o.KtG(r.updateOptions())}),o.qZA(),o.TgZ(12,"span",100),o._uU(13,"Height"),o.qZA()(),o.TgZ(14,"label",201)(15,"span"),o._uU(16,"Color"),o.qZA(),o.TgZ(17,"div",202)(18,"div",203),o.NdJ("change",function(s){o.CHM(t);const r=o.oxw();return o.KtG(r.options.backgroundColor=s)}),o.TgZ(19,"div",61),o._UZ(20,"div",204),o.TgZ(21,"div",205),o.O4$(),o.TgZ(22,"svg",206),o._UZ(23,"rect",207),o.qZA()()()()()(),o.kcU(),o.TgZ(24,"div",208)(25,"span"),o._uU(26,"Sizes"),o.qZA(),o.TgZ(27,"select",209,210),o.NdJ("change",function(){o.CHM(t);const s=o.MAs(28),r=o.oxw();return o.KtG(r.setSizeResolution(s.value))}),o.TgZ(29,"option",211),o._uU(30,"Custom"),o.qZA(),o.TgZ(31,"option",212),o._uU(32,"Fit to Content"),o.qZA(),o.TgZ(33,"optgroup",213)(34,"option",214),o._uU(35,"Twitter Post (1012 \xd7 506)"),o.qZA(),o.TgZ(36,"option",215),o._uU(37,"Twitter Header (1500 \xd7 500)"),o.qZA(),o.TgZ(38,"option",216),o._uU(39,"Facebook Post (1200 \xd7 630)"),o.qZA(),o.TgZ(40,"option",217),o._uU(41,"Facebook Cover (820 \xd7 312)"),o.qZA(),o.TgZ(42,"option",218),o._uU(43,"Instagram Post (1080 \xd7 1080)"),o.qZA(),o.TgZ(44,"option",219),o._uU(45,"Instagram Story (1080 \xd7 1920)"),o.qZA(),o.TgZ(46,"option",220),o._uU(47,"Dribble Shot (400 \xd7 300)"),o.qZA(),o.TgZ(48,"option",221),o._uU(49,"Dribble Shot HD (800 \xd7 600)"),o.qZA(),o.TgZ(50,"option",222),o._uU(51,"LinkedIn Cover (1584 \xd7 396)"),o.qZA()(),o.TgZ(52,"optgroup",223)(53,"option",224),o._uU(54,"16:9 (1920 \xd7 1080)"),o.qZA(),o.TgZ(55,"option",225),o._uU(56,"4:3 (1024 \xd7 768)"),o.qZA()(),o.TgZ(57,"optgroup",226)(58,"option",227),o._uU(59,"Desktop (1140 \xd7 1024)"),o.qZA(),o.TgZ(60,"option",228),o._uU(61,"MacBook (834 \xd7 1194)"),o.qZA(),o.TgZ(62,"option",229),o._uU(63,"MacBook Pro (1024 \xd7 1366)"),o.qZA(),o.TgZ(64,"option",230),o._uU(65,"Surface Book (1440 \xd7 990)"),o.qZA(),o.TgZ(66,"option",231),o._uU(67,"iMac (1368 \xd7 912)"),o.qZA()(),o.TgZ(68,"optgroup",232)(69,"option",233),o._uU(70,"iPad Mini (768 \xd7 1024)"),o.qZA(),o.TgZ(71,"option",228),o._uU(72,'iPad Pro 11" (834 \xd7 1194)'),o.qZA(),o.TgZ(73,"option",229),o._uU(74,'iPad Pro 12.9" (1024 \xd7 1366)'),o.qZA(),o.TgZ(75,"option",230),o._uU(76,"Surface Pro 3 (1440 \xd7 990)"),o.qZA(),o.TgZ(77,"option",231),o._uU(78,"Surface Pro 4 (1368 \xd7 912)"),o.qZA()(),o.TgZ(79,"optgroup",234)(80,"option",235),o._uU(81,"iPhone 11 ProMax (414 \xd7 896)"),o.qZA(),o.TgZ(82,"option",236),o._uU(83,"iPhone 11 Pro / X (375 \xd7 812)"),o.qZA(),o.TgZ(84,"option",237),o._uU(85,"iPhone 8 Plus (414 \xd7 736)"),o.qZA(),o.TgZ(86,"option",238),o._uU(87,"iPhone 8 (375 \xd7 667)"),o.qZA(),o.TgZ(88,"option",239),o._uU(89,"Google Pixel 2 (411 \xd7 731)"),o.qZA(),o.TgZ(90,"option",240),o._uU(91,"Google Pixel XL (411 \xd7 823)"),o.qZA(),o.TgZ(92,"option",241),o._uU(93,"Android (360 \xd7 640)"),o.qZA()(),o.TgZ(94,"optgroup",242)(95,"option",243),o._uU(96,"A4 (595 \xd7 842)"),o.qZA(),o.TgZ(97,"option",244),o._uU(98,"A5 (420 \xd7 595)"),o.qZA(),o.TgZ(99,"option",245),o._uU(100,"A6 (297 \xd7 420)"),o.qZA(),o.TgZ(101,"option",246),o._uU(102,"Letter (612 \xd7 792) "),o.qZA(),o.TgZ(103,"option",247),o._uU(104,"Tabloid (792 \xd7 1224)"),o.qZA()()(),o._UZ(105,"div",118),o.TgZ(106,"label",248),o._uU(107),o.qZA()()(),o.TgZ(108,"div",106)(109,"h4"),o._uU(110,"Stroke"),o.qZA(),o.TgZ(111,"div",96)(112,"label",97),o.NdJ("mousedown",function(){o.CHM(t);const s=o.MAs(114),r=o.oxw();return o.KtG(r.onDragDown(s,r.options,"strokeWidth"))}),o.TgZ(113,"input",107,108),o.NdJ("input",function(){o.CHM(t);const s=o.MAs(114),r=o.oxw();return o.KtG(r.setNumberValue(r.options,"strokeWidth",+s.value))}),o.qZA(),o.TgZ(115,"span",100),o._uU(116,"Width"),o.qZA(),o._UZ(117,"div",109),o.qZA(),o.TgZ(118,"div",110)(119,"span"),o._uU(120,"Dash"),o.qZA(),o.TgZ(121,"select",111,112),o.NdJ("change",function(){o.CHM(t);const s=o.MAs(122),r=o.oxw();return r.options.dasharray=s.value,o.KtG(r.updateOptions())}),o.TgZ(123,"option",113),o._uU(124,"\u2014"),o.qZA(),o.TgZ(125,"option",114),o._uU(126,"\xb7\xb7\xb7"),o.qZA(),o.TgZ(127,"option",115),o._uU(128,"- -"),o.qZA(),o.TgZ(129,"option",116),o._uU(130,"-\xb7-"),o.qZA(),o.TgZ(131,"option",117),o._uU(132,"-\xb7\xb7-"),o.qZA()(),o._UZ(133,"div",118),o.TgZ(134,"label",119),o.ynx(135,93),o.YNc(136,ff,2,0,"ng-container",94),o.YNc(137,gf,2,0,"ng-container",94),o.YNc(138,mf,2,0,"ng-container",94),o.YNc(139,vf,2,0,"ng-container",94),o.YNc(140,yf,2,0,"ng-container",120),o.BQk(),o.qZA()(),o.TgZ(141,"label",121)(142,"span",100),o._uU(143,"Stroke Join"),o.qZA()(),o.TgZ(144,"label",121)(145,"span",100),o._uU(146,"Stroke Cap"),o.qZA()()()()()}if(2&n){const t=o.MAs(28),i=o.oxw();o.xp6(5),o.Q6J("value",i.options.canvasWidth),o.xp6(5),o.Q6J("value",i.options.canvasHeight),o.xp6(13),o.uIk("fill",i.options.backgroundColor),o.xp6(84),o.Oqu(t.value),o.xp6(6),o.Q6J("value",i.options.strokeWidth),o.xp6(8),o.Q6J("value",i.options.dasharray),o.xp6(14),o.Q6J("ngSwitch",i.options.dasharray),o.xp6(1),o.Q6J("ngSwitchCase","2,2"),o.xp6(1),o.Q6J("ngSwitchCase","5,5"),o.xp6(1),o.Q6J("ngSwitchCase","5,2,2,2"),o.xp6(1),o.Q6J("ngSwitchCase","5,2,2,2,2,2")}}const bf=[{path:"",component:(()=>{class n{constructor(t){this._whiteboardService=t,this.data=[],this.toolsEnum=ao.e,this.elementTypeEnum=pl.D,this.selectedTool=ao.e.BRUSH,this.selectedElement=null,this.options={strokeColor:"#ec407a",strokeWidth:5,fill:"#000",backgroundColor:"#fff",canvasHeight:600,canvasWidth:800,dasharray:""},this.formatTypes=_l.a,this.outerWidth=1200,this.outerHeight=750,this.zoom=1,this.x=0,this.y=0,this.loading=!1}ngOnInit(){const t=Io({apiKey:be.N.apiKey,authDomain:be.N.authDomain,projectId:be.N.projectId,storageBucket:be.N.storageBucket,messagingSenderId:be.N.messagingSenderId,appId:be.N.appId,measurementId:be.N.measurementId,databaseURL:be.N.databaseURL});!function kd(n=So()){const e=We(n=Te(n),$t);return e.isInitialized()?e.getImmediate():function Nd(n,e={}){const t=We(n,$t);if(t.isInitialized()){const s=t.getImmediate();if(qt(e,t.getOptions()))return s;throw Z.create("already-initialized")}return t.initialize({options:e})}(n)}(t);const s=to(dl(t),"data/");this.loading=!0,rl(s,r=>{this.loading=!1;const a=r.val();this.data=a||[]})}ngAfterViewInit(){setTimeout(()=>{this.calculateSize()},0)}onDataChange(t){this.loading||(this.data=t,no(to(dl(),"data/"),t))}calculateSize(){const t=this.workarea.nativeElement,i={w:this.options.canvasWidth,h:this.options.canvasHeight};let s=t.clientWidth,r=t.clientHeight;const a=s,l=r,c=this.zoom;s=Math.max(a,i.w*c*2),r=Math.max(l,i.h*c*2);const d=s/2-a/2,h=r/2-l/2;this.outerWidth=s,this.outerHeight=r,this.updateSize(i.w,i.h),setTimeout(()=>{t.scrollLeft=d,t.scrollTop=h},0)}updateSize(t,i){this.options.canvasWidth=t,this.options.canvasHeight=i;const s=this.zoom,l=this.outerWidth/2-t*s/2,c=this.outerHeight/2-i*s/2;setTimeout(()=>{this.x=l,this.y=c},0)}zoomWheel(t){const i=t;(i.altKey||i.ctrlKey)&&(t.preventDefault(),this.setZoom(Math.trunc(100*this.zoom-i.deltaY/100*(i.altKey?10:5))))}setZoom(t){const i=this.zoom;let s=+t/100;s<.001&&(s=.1);const r={w:this.options.canvasWidth,h:this.options.canvasHeight};let a=null;null!=a&&window.cancelAnimationFrame(a);const l=Date.now(),u=s-i,d=()=>{let p=(Date.now()-l)/500;p=Math.pow(p-1,3)+1,this.zoom=i+u*p,this.updateSize(r.w,r.h),p<1&&p>-.9?a=requestAnimationFrame(d):(this.zoom=s,this.updateSize(r.w,r.h))};d()}setSizeResolution(t){let i=this.options.canvasWidth,s=this.options.canvasHeight;const r=[];if(r[0]=parseInt(t.split("x")[0]),r[1]=parseInt(t.split("x")[1]),"Custom"==t)return;"content"==t&&(r[0]=100,r[1]=100);const a=r[0]-i,l=r[1]-s;let c=null;null!=c&&window.cancelAnimationFrame(c);const u=Date.now(),h=()=>{let _=(Date.now()-u)/500;_=Math.pow(_-1,3)+1,i=parseInt((r[0]-a+_*a).toFixed(0)),s=parseInt((r[1]-l+_*l).toFixed(0)),this.updateSize(i,s),_<1&&_>-.9?c=requestAnimationFrame(h):this.updateSize(i,s)};h()}onDragDown(t,i,s){const r=t.min?parseInt(t.min,10):null,a=t.max?parseInt(t.max,10):null,l=parseInt(t.step,10);let c=200;r&&a&&(c=a-r>0?(a-r)/l:200);const u=c/70*l;let d=0,h=parseInt(t.value,10);const p=g=>{0===d&&(d=g.pageY);const x=-1*(g.pageY-d);d=g.pageY;let k=x*u*1;k.toFixed(l<1?1:0),k=Math.floor(Number(h)+Number(k)),null!==a&&(k=Math.min(k,a)),null!==r&&(k=Math.max(k,r)),h=k,i[s]=h,t.value=h.toString()},_=()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",_)};document.addEventListener("mousemove",p),document.addEventListener("mouseup",_)}setNumberValue(t,i,s){isNaN(s)||(t[i]=s)}toggleFontWeight(){this.selectedElement&&(this.selectedElement.options.fontWeight="normal"===this.selectedElement.options.fontWeight?"bold":"normal")}toggleFontStyle(){this.selectedElement&&(this.selectedElement.options.fontStyle="normal"===this.selectedElement.options.fontStyle?"italic":"normal")}newDocument(){this._whiteboardService.erase()}saveAs(t){this._whiteboardService.save(t)}addImage(t){if(t){const i=t.files;if(i){const s=new FileReader;s.onload=r=>{this._whiteboardService.addImage(r.target.result)},s.readAsDataURL(i[0])}}}undo(){this._whiteboardService.undo()}redo(){this._whiteboardService.redo()}colorChange(t,i){this.selectedElement?this.selectedElement.options[t]=i:(this.options[t]=i,this.updateOptions())}swapColors(){[this.options.fill,this.options.strokeColor]=[this.options.strokeColor,this.options.fill],this.updateOptions()}updateOptions(){this.options=Object.assign({},this.options)}setSelectedElement(t){this.selectedElement=t}static#e=this.\u0275fac=function(i){return new(i||n)(o.Y36(lo.v))};static#t=this.\u0275cmp=o.Xpm({type:n,selectors:[["app-whiteboard-live-app"]],viewQuery:function(i,s){if(1&i&&o.Gf(J_,5),2&i){let r;o.iGM(r=o.CRH())&&(s.workarea=r.first)}},features:[o._Bn([lo.v])],decls:130,vars:38,consts:[[1,"editor"],["id","rulers"],["id","ruler_corner"],["id","ruler_x"],["id","ruler_y"],["id","workarea",1,"select",2,"overflow","scroll",3,"mousewheel"],["workarea",""],["id","svgcanvas"],[3,"data","selectedTool","options","strokeWidth","zoom","canvasHeight","canvasWidth","x","y","fullScreen","strokeColor","fill","backgroundColor","dataChange","selectElement","toolChanged"],["whiteboard",""],["id","menu_bar",1,"active"],[1,"menu"],["title","New document",1,"menu_title",3,"click"],["viewBox","0 0 16 16","width","20","height","20"],["fill","#565a66","d","m9.5 1.1l3.4 3.5l.1.4v2h-1V6H8V2H3v11h4v1H2.5l-.5-.5v-12l.5-.5h6.7l.3.1zM9 2v3h2.9L9 2zm4 14h-1v-3H9v-1h3V9h1v3h3v1h-3v3z"],["title","Save Board",1,"menu_title"],["viewBox","0 0 20 20","width","20","height","20"],["d","M12.984 12.656l2.625-2.578 1.406 1.406-5.016 5.016-5.016-5.016 1.406-1.406 2.625 2.578v-9.656h1.969v9.656zM18.984 12h2.016v6.984q0 0.797-0.609 1.406t-1.406 0.609h-13.969q-0.797 0-1.406-0.609t-0.609-1.406v-6.984h2.016v6.984h13.969v-6.984z","fill","#565a66"],["id","file_menu",1,"menu_list","inverted-undo"],[1,"menu_item",3,"click"],["title","Add image",1,"menu_title"],["fill","#565a66","d","M4 5h13v7h2V5c0-1.103-.897-2-2-2H4c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h8v-2H4V5z"],["fill","#565a66","d","m8 11l-3 4h11l-4-6l-3 4z"],["fill","#565a66","d","M19 14h-2v3h-3v2h3v3h2v-3h3v-2h-3z"],["type","file",1,"file-input",3,"change"],["title","Undo",1,"menu_title",3,"click"],["fill","#565a66","d","M9 10h6c1.654 0 3 1.346 3 3s-1.346 3-3 3h-3v2h3c2.757 0 5-2.243 5-5s-2.243-5-5-5H9V5L4 9l5 4v-3z"],["title","Redo",1,"menu_title",3,"click"],["fill","#565a66","d","M9 18h3v-2H9c-1.654 0-3-1.346-3-3s1.346-3 3-3h6v3l5-4l-5-4v3H9c-2.757 0-5 2.243-5 5s2.243 5 5 5z"],["id","panels",1,"tools_panel"],[4,"ngIf"],["main_context_panel",""],["id","tools_left",1,"tools_panel"],["title","Select Tool",1,"tool_button",3,"click"],["viewBox","0 0 24 24","width","24","height","24"],["d","M17.15 20.76l-2.94 1.5-3.68-6-4.41 3V1.24l12.5 12.01-4.41 1.5 2.94 6z"],["title","Brush Tool",1,"tool_button",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","24","viewBox","0 0 24 24","width","24",2,"transform","scale(-1, 1)"],["d","M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"],["title","Image Tool",1,"tool_button",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","24","viewBox","0 0 24 24","width","24"],["d","M0 0h24v24H0z","fill","none"],["d","M17 7l-5 5 5 5V7zm-2 9.17L12.83 12 15 9.83 17.17 12 15 14.17zM3 3v18h18V3H3zm16 16H5V5h14v14z"],["title","Line Tool",1,"tool_button",3,"click"],["viewBox","0 0 27 27","xmlns","http://www.w3.org/2000/svg","width","24","height","24"],["d","M 3 1 L 26 24 L 24 26 L 1 3 L 3 1 Z"],["title","Square/Rect Tool",1,"tool_button",3,"click"],["d","M 0 8 L 0 24 L 24 24 L 25 8 L 0 8 Z"],["title","Ellipse/Circle Tool",1,"tool_button",3,"click"],["cx","13","cy","13","rx","13","ry","9"],["title","Text Tool",1,"tool_button",3,"click"],["xmlns","http://www.w3.org/2000/svg","height","24","viewBox","2 2 20 20","width","27","height","27"],["d","M5 4v3h5.5v12h3V7H19V4z"],["title","Eraser Tool",1,"tool_button",3,"click"],["d","M19 13H5v-2h14v2z"],["id","color_tools"],["id","tool_switch","title","Switch stroke and fill colors [X]",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 11 11"],["d","M3.01 2A6 6 0 019 8h1.83l-2.91 2.91L5 8h2a4 4 0 00-3.99-4v1.93L.1 3.02 3.01.1V2z"],["id","tool_fill","ngx-colors-trigger","",1,"color_tool","active",3,"change"],["title","Change fill color",1,"icon_label"],[1,"color_block"],["id","fill_bg"],["id","fill_color",1,"color_block"],["xmlns","http://www.w3.org/2000/svg","width","100%"],["width","100%","height","100%","opacity","1"],["id","tool_stroke","ngx-colors-trigger","",1,"color_tool",3,"change"],["title","Change stroke color",1,"icon_label"],["id","stroke_bg"],["id","stroke_color","title","Change stroke color",1,"color_block"],["id","tools_bottom",1,"tools_panel"],["id","zoom_select",3,"change"],["zoomSelect",""],["value","6"],["value","12"],["value","16"],["value","25"],["value","50"],["value","75"],["value","100","selected","selected"],["value","150"],["value","200"],["value","300"],["value","400"],["value","600"],["value","800"],["value","1600"],["id","zoom_panel","title","Change zoom level",1,"toolset"],["id","zoom_label",1,"select-input"],["id","zoomLabel",1,"zoom_tool","icon_label"],["xmlns","http://www.w3.org/2000/svg","height","24","viewBox","2 2 20 20","width","27"],["d","M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"],["id","zoom","type","text","readonly","readonly",3,"value"],[3,"ngSwitch"],[4,"ngSwitchCase"],["id","selected_panel",1,"context_panel",2,"display","block"],[1,"draginputs"],[1,"draginput",3,"mousedown"],["step","2","min","-180","max","180","type","text",1,"attr_changer",3,"value","input"],["angle",""],[1,"icon_label"],["id","tool_angle_indicator",1,"angle"],["id","tool_angle_indicator_cursor",1,"angle-cursor"],["step","5","min","0","max","100","type","text",1,"attr_changer",3,"value","input"],["group_opacity",""],["id","group_opacityLabel",1,"icon_label"],["id","stroke_panel",1,"context_panel",2,"display","block"],["size","2","value","1","data-attr","stroke-width","min","0","max","99","step","1",3,"value","input"],["stroke_width",""],[1,"draginput_cursor",2,"top","68.9394px"],[1,"stroke_tool","draginput"],["id","stroke_style",3,"value","change"],["dasharray",""],["selected","selected","value","none"],["value","2,2"],["value","5,5"],["value","5,2,2,2"],["value","5,2,2,2,2,2"],[1,"caret"],["id","stroke_style_label"],[4,"ngSwitchDefault"],[2,"display","none"],["id","path_panel",1,"context_panel","clearfix",2,"display","block"],["type","text","min","","max","","step","1",1,"attr_changer",3,"value","input"],["path_x",""],["path_y",""],["id","rect_panel",1,"context_panel",2,"display","block"],["rect_x",""],["rect_y",""],["rect_width",""],["rect_height",""],["id","image_panel",1,"context_panel","clearfix",2,"display","block"],["title","Change X coordinate","type","text","min","","max","","step","1",1,"attr_changer",3,"value","input"],["image_x",""],["title","Change Y coordinate","type","text","min","","max","","step","1",1,"attr_changer",3,"value","input"],["image_y",""],["image_width",""],["image_height",""],["id","ellipse_panel",1,"context_panel",2,"display","block"],["id","tool_ellipse_cx",1,"draginput",3,"mousedown"],["title","Change ellipse's cx coordinate","type","text","min","","max","","step","1",1,"attr_changer",3,"value","input"],["ellipse_cx",""],["title","Change ellipse's cy coordinate","type","text","min","","max","","step","1",1,"attr_changer",3,"value","input"],["ellipse_cy",""],["title","Change ellipse's x radius","type","text","min","","max","","step","1",1,"attr_changer",3,"value","input"],["ellipse_rx",""],["title","Change ellipse's y radius","type","text","min","","max","","step","1",1,"attr_changer",3,"value","input"],["ellipse_ry",""],["id","line_panel",1,"context_panel","clearfix",2,"display","block"],["type","text","min","","max","","step","1","title","Change line's starting x coordinate",1,"attr_changer",3,"value","input"],["line_x1",""],["type","text","min","","max","","step","1","title","Change line's starting y coordinate",1,"attr_changer",3,"value","input"],["line_y1",""],["type","text","min","","max","","step","1","title","Change line's ending x coordinate",1,"attr_changer",3,"value","input"],["line_x2",""],["type","text","min","","max","","step","1","title","Change line's ending y coordinate",1,"attr_changer",3,"value","input"],["line_y2",""],["id","text_panel",1,"context_panel",2,"display","block"],["data-title","Change Content",1,"draginput","twocol","textcontent"],["id","text","type","text",3,"value","input"],["text",""],["type","text","min","","max","","step","1","title","Change text x coordinate",1,"attr_changer",3,"value","input"],["text_x",""],["type","text","min","","max","","step","1","title","Change text y coordinate",1,"attr_changer",3,"value","input"],["text_y",""],["id","tool_font_family",1,"toolset","draginput","twocol"],["id","preview_font"],["id","font_family","data-title","Change Font Family","size","12","type","hidden"],["id","font_family_dropdown",3,"value","change"],["font_family",""],["value","Arial"],["value","Arial Black"],["value","Comic Sans MS"],["value","Courier New"],["value","Georgia"],["value","Impact"],["value","Lucida Console"],["value","Lucida Sans Unicode"],["value","monospace","selected",""],["value","Palatino Linotype"],["value","sans-serif","selected",""],["value","serif","selected",""],["value","Tahoma"],["value","Times New Roman"],["value","Trebuchet MS"],["value","Verdana"],[1,"draginput","font_style"],["id","tool_bold","data-title","Bold Text [B]",3,"click"],["id","tool_italic","data-title","Italic Text [I]",3,"click"],["id","tool_font_size","data-title","Change Font Size",1,"draginput",3,"mousedown"],["type","text","min","0","max","","step","1","title","Change text font size",1,"attr_changer",3,"value","input"],["font_size",""],["id","font_sizeLabel",1,"icon_label"],["type","text","step","5","min","0","max","100",1,"attr_changer",3,"value","input"],["rect_rx",""],[1,"draginput_cursor",2,"top","70px"],[4,"ngTemplateOutlet"],["id","canvas_panel",1,"context_panel"],["type","text","min","10","max","","step","1","pattern","[0-9]*",3,"value","input"],["canvas_width",""],["canvas_height",""],["data-title","Change canvas color",1,"draginput"],["id","color_canvas_tools"],["id","tool_canvas","ngx-colors-trigger","",1,"color_tool","active",3,"change"],["id","canvas_bg"],["id","canvas_color"],["xmlns","http://www.w3.org/2000/svg","width","60.5"],["width","100%","height","100%"],[1,"draginput"],[3,"change"],["resolution",""],["id","selectedPredefined","selected","selected"],["id","fitToContent","value","content"],["label","Social Media"],["value","1012x506"],["value","1500x500"],["value","1200x630"],["value","820x312"],["value","1080x1080"],["value","1080x1920"],["value","400x300"],["value","800x600"],["value","1584x396"],["label","Presentation"],["value","1920x1080"],["value","1024x768"],["label","Desktop"],["value","1140x1024"],["value","834x1194"],["value","1024x1366"],["value","1440x990"],["value","1368x912"],["label","Tablet"],["value","768x1024"],["label","Phone"],["value","414x896"],["value","375x812"],["value","414x736"],["value","375x667"],["value","411x731"],["value","411x823"],["value","360x640"],["label","Paper"],["value","595x842"],["value","420x595"],["value","297x420"],["value","612x792"],["value","792x1224"],["id","resolution_label"]],template:function(i,s){if(1&i){const r=o.EpF();o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"div",2)(3,"div",3)(4,"div",4),o.qZA(),o.TgZ(5,"div",5,6),o.NdJ("mousewheel",function(l){return s.zoomWheel(l)}),o.TgZ(7,"div",7)(8,"ng-whiteboard",8,9),o.NdJ("dataChange",function(l){return s.onDataChange(l)})("selectElement",function(l){return s.setSelectedElement(l)})("toolChanged",function(l){return s.selectedTool=l}),o.qZA()()(),o.TgZ(10,"div",10)(11,"div",11)(12,"div",12),o.NdJ("click",function(){return s.newDocument()}),o.O4$(),o.TgZ(13,"svg",13),o._UZ(14,"path",14),o.qZA()()(),o.kcU(),o.TgZ(15,"div",11)(16,"div",15),o.O4$(),o.TgZ(17,"svg",16),o._UZ(18,"path",17),o.qZA()(),o.kcU(),o.TgZ(19,"div",18)(20,"div",19),o.NdJ("click",function(){return s.saveAs(s.formatTypes.Png)}),o._uU(21,"Save as PNG"),o.qZA(),o.TgZ(22,"div",19),o.NdJ("click",function(){return s.saveAs(s.formatTypes.Jpeg)}),o._uU(23,"Save as JPEG"),o.qZA(),o.TgZ(24,"div",19),o.NdJ("click",function(){return s.saveAs(s.formatTypes.Svg)}),o._uU(25,"Save as SVG"),o.qZA(),o.TgZ(26,"div",19),o.NdJ("click",function(){return s.saveAs(s.formatTypes.Base64)}),o._uU(27,"Copy Base-64"),o.qZA()()(),o.TgZ(28,"div",11)(29,"label",20),o.O4$(),o.TgZ(30,"svg",16),o._UZ(31,"path",21)(32,"path",22)(33,"path",23),o.qZA(),o.kcU(),o.TgZ(34,"input",24),o.NdJ("change",function(l){return s.addImage(l.target)}),o.qZA()()(),o.TgZ(35,"div",11)(36,"div",25),o.NdJ("click",function(){return s.undo()}),o.O4$(),o.TgZ(37,"svg",16),o._UZ(38,"path",26),o.qZA()()(),o.kcU(),o.TgZ(39,"div",11)(40,"div",27),o.NdJ("click",function(){return s.redo()}),o.O4$(),o.TgZ(41,"svg",16),o._UZ(42,"path",28),o.qZA()()()(),o.kcU(),o.TgZ(43,"div",29),o.YNc(44,hf,63,19,"ng-container",30),o.YNc(45,_f,2,1,"ng-container",30),o.YNc(46,wf,147,11,"ng-template",null,31,o.W1O),o.qZA(),o.TgZ(48,"div",32)(49,"div",33),o.NdJ("click",function(){return s.selectedTool=s.toolsEnum.SELECT}),o.O4$(),o.TgZ(50,"svg",34),o._UZ(51,"path",35),o.qZA()(),o.kcU(),o.TgZ(52,"div",36),o.NdJ("click",function(){return s.selectedTool=s.toolsEnum.BRUSH}),o.O4$(),o.TgZ(53,"svg",37),o._UZ(54,"path",38),o.qZA()(),o.kcU(),o.TgZ(55,"div",39),o.NdJ("click",function(){return s.selectedTool=s.toolsEnum.IMAGE}),o.O4$(),o.TgZ(56,"svg",40),o._UZ(57,"path",41)(58,"path",42),o.qZA()(),o.kcU(),o.TgZ(59,"div",43),o.NdJ("click",function(){return s.selectedTool=s.toolsEnum.LINE}),o.O4$(),o.TgZ(60,"svg",44),o._UZ(61,"path",45),o.qZA()(),o.kcU(),o.TgZ(62,"div",46),o.NdJ("click",function(){return s.selectedTool=s.toolsEnum.RECT}),o.O4$(),o.TgZ(63,"svg",44),o._UZ(64,"path",47),o.qZA()(),o.kcU(),o.TgZ(65,"div",48),o.NdJ("click",function(){return s.selectedTool=s.toolsEnum.ELLIPSE}),o.O4$(),o.TgZ(66,"svg",44),o._UZ(67,"ellipse",49),o.qZA()(),o.kcU(),o.TgZ(68,"div",50),o.NdJ("click",function(){return s.selectedTool=s.toolsEnum.TEXT}),o.O4$(),o.TgZ(69,"svg",51),o._UZ(70,"path",52),o.qZA()(),o.kcU(),o.TgZ(71,"div",53),o.NdJ("click",function(){return s.selectedTool=s.toolsEnum.ERASER}),o.O4$(),o.TgZ(72,"svg",40),o._UZ(73,"path",41)(74,"path",54),o.qZA()(),o.kcU(),o.TgZ(75,"div",55)(76,"div",56),o.NdJ("click",function(){return s.swapColors()}),o.O4$(),o.TgZ(77,"svg",57),o._UZ(78,"path",58),o.qZA()(),o.kcU(),o.TgZ(79,"div",59),o.NdJ("change",function(l){return s.colorChange("fill",l)}),o._UZ(80,"label",60),o.TgZ(81,"div",61),o._UZ(82,"div",62),o.TgZ(83,"div",63),o.O4$(),o.TgZ(84,"svg",64),o._UZ(85,"rect",65),o.qZA()()()(),o.kcU(),o.TgZ(86,"div",66),o.NdJ("change",function(l){return s.colorChange("strokeColor",l)}),o._UZ(87,"label",67),o.TgZ(88,"div",61),o._UZ(89,"div",68),o.TgZ(90,"div",69),o.O4$(),o.TgZ(91,"svg",64),o._UZ(92,"rect",65),o.qZA()()()()()(),o.kcU(),o.TgZ(93,"div",70)(94,"select",71,72),o.NdJ("change",function(){o.CHM(r);const l=o.MAs(95);return o.KtG(s.setZoom(l.value))}),o.TgZ(96,"option",73),o._uU(97,"6%"),o.qZA(),o.TgZ(98,"option",74),o._uU(99,"12%"),o.qZA(),o.TgZ(100,"option",75),o._uU(101,"16%"),o.qZA(),o.TgZ(102,"option",76),o._uU(103,"25%"),o.qZA(),o.TgZ(104,"option",77),o._uU(105,"50%"),o.qZA(),o.TgZ(106,"option",78),o._uU(107,"75%"),o.qZA(),o.TgZ(108,"option",79),o._uU(109,"100%"),o.qZA(),o.TgZ(110,"option",80),o._uU(111,"150%"),o.qZA(),o.TgZ(112,"option",81),o._uU(113,"200%"),o.qZA(),o.TgZ(114,"option",82),o._uU(115,"300%"),o.qZA(),o.TgZ(116,"option",83),o._uU(117,"400%"),o.qZA(),o.TgZ(118,"option",84),o._uU(119,"600%"),o.qZA(),o.TgZ(120,"option",85),o._uU(121,"800%"),o.qZA(),o.TgZ(122,"option",86),o._uU(123,"1600%"),o.qZA()(),o.TgZ(124,"div",87)(125,"div",88)(126,"span",89),o.O4$(),o.TgZ(127,"svg",90),o._UZ(128,"path",91),o.qZA()(),o.kcU(),o._UZ(129,"input",92),o.qZA()()()()}2&i&&(o.xp6(7),o.Udp("width",s.outerWidth,"px")("height",s.outerHeight,"px"),o.xp6(1),o.Q6J("data",s.data)("selectedTool",s.selectedTool)("options",s.options)("strokeWidth",s.options.strokeWidth)("zoom",s.zoom)("canvasHeight",s.options.canvasHeight)("canvasWidth",s.options.canvasWidth)("x",s.x)("y",s.y)("fullScreen",!1)("strokeColor",s.options.strokeColor)("fill",s.options.fill)("backgroundColor",s.options.backgroundColor),o.xp6(36),o.Q6J("ngIf",s.selectedElement),o.xp6(1),o.Q6J("ngIf",!s.selectedElement),o.xp6(4),o.ekj("active",s.selectedTool===s.toolsEnum.SELECT),o.xp6(3),o.ekj("active",s.selectedTool===s.toolsEnum.BRUSH),o.xp6(3),o.ekj("active",s.selectedTool===s.toolsEnum.IMAGE),o.xp6(4),o.ekj("active",s.selectedTool===s.toolsEnum.LINE),o.xp6(3),o.ekj("active",s.selectedTool===s.toolsEnum.RECT),o.xp6(3),o.ekj("active",s.selectedTool===s.toolsEnum.ELLIPSE),o.xp6(3),o.ekj("active",s.selectedTool===s.toolsEnum.TEXT),o.xp6(3),o.ekj("active",s.selectedTool===s.toolsEnum.ERASER),o.xp6(14),o.uIk("fill",s.options.fill),o.xp6(7),o.uIk("fill",s.options.strokeColor),o.xp6(37),o.Q6J("value",100*s.zoom+"%"))},dependencies:[Be.O5,Be.tP,Be.RF,Be.n9,Be.ED,Q_.v,hl.u_],styles:['@charset "UTF-8";.demo{width:100%;height:768px;border:2px dashed #ccc;background:#fff;overflow:hidden;position:relative}.editor{--z0: #111827;--z1: #1e2433;--a1: #421f24;--b1: #45322a;--c1: #1c3b3b;--z2: #2b313f;--z3: #393e4c;--z4: #474c59;--z5: #565a66;--z6: #656974;--z7: #747782;--a7: #d4100b;--z8: #848790;--z9: #94969f;--z10: #a4a6ae;--z12: #c5c7cc;--z13: #d6d8db;--z14: #e7e9eb;--z15: #f9fafb;--d0: #152239;--d1: #1a3050;--d4: #1e5a9d;--d6: #1779d4;--d7: #0b89f0;--d8: #3797ff;--d9: #62a3ff;--d13: #c3d4fd;--d14: #d7e2fd;--d15: #eaeffc;-webkit-font-smoothing:antialiased;--shadow-bg: 0 var(--x2) var(--x4) var(--z0);--shadow: 0 var(--x1) var(--x8) rgba(0, 0, 0, .4);--accent1: var(--d1);--accent4: var(--d4);--accent6: var(--d6);--accent7: var(--d7);--accent8: var(--d8);--accent9: var(--d9);--accent13: var(--d13);--accent14: var(--d14);--accent15: var(--d15);--x1: 4px;--x2: 8px;--x3: 12px;--x4: 16px;--x5: 20px;--x6: 24px;--x7: 28px;--x8: 32px;--x9: 36px;--x10: 40px;--x12: 48px;--x13: 52px;--x16: 64px;--mono-font: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;--panel-width: calc(var(--x10) * 2 * 2 + var(--x1));--transition-duration: .2s;--transition: all var(--transition-duration) ease}.editor{background:var(--z1);font:14px/120% -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;margin:0;padding:0}::selection{background:#000;color:#fff}::-moz-selection{background:#000;color:#fff}.editor{overscroll-behavior-x:none;overflow:hidden;width:100%;height:100%}::-webkit-scrollbar{width:var(--x1);height:var(--x1);background:transparent;position:absolute}::-webkit-scrollbar-track{border-radius:10px;background:transparent}::-webkit-scrollbar-thumb{border-radius:10px;background:var(--z3)}::-webkit-scrollbar-corner{background:transparent}input[type=submit],input[type=button],button{background:var(--accent7);color:var(--z15);border-radius:var(--x1);padding:var(--x2) var(--x4);border:none;line-height:140%;font-size:16px;font-weight:550;cursor:pointer}input[type=submit]:hover,input[type=button]:hover,button:hover{background:var(--accent9)}input[type=submit]:active,input[type=button]:active,button:active{box-shadow:0 0 0 var(--x1) var(--accent14);outline:none}input[type=submit]:focus,input[type=button]:focus,button:focus{outline:none}button.cancel,input.Cancel,input.cancel,input.jGraduate_Cancel{-webkit-appearance:none;background-color:var(--z12);color:var(--z3);margin:0}#canvas_panel{display:block}#tool_bold span,#tool_italic span{position:absolute;width:100%;height:100%;top:0;left:0;background:#ccc;opacity:0}#tools_bottom{position:absolute;left:var(--x12);right:0;bottom:0;height:var(--x10);overflow:visible}.clearfix:before,.clearfix:after{content:"";display:table}.clearfix:after{clear:both}#color_canvas_tools,#fill_bg,#stroke_bg{background:var(--z15) url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMAQMAAABsu86kAAAAA3NCSVQICAjb4U/gAAAABlBMVEXu7u7///8o06qaAAAACXBIWXMAAAsSAAALEgHS3X78AAAAFXRFWHRDcmVhdGlvbiBUaW1lADcvMjIvMTL7FNdCAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M1cbXjNgAAABFJREFUCJljYP7AgIb+MKAhAM8/C5vWL6zSAAAAAElFTkSuQmCC) top left repeat}#color_canvas_tools{width:60px;height:40px;margin:23px 5px 5px;position:relative;overflow:hidden}#color_canvas_tools{display:block}#stroke_style_label{font-size:30px;margin-top:33px;letter-spacing:-1px}.stroke_tool .caret{top:60%}.draginputs{display:flex;flex-direction:row;justify-content:flex-start;flex-wrap:wrap}.draginput{background-color:var(--z2);border-radius:var(--x1);width:calc(50% - var(--x2));height:calc(var(--x9) * 2);display:block;position:relative;margin:0 var(--x2) var(--x2) 0;overflow:hidden;transition:var(--transition);box-shadow:none}.dragging .draginput{pointer-events:none}.dragging .draginput.active{pointer-events:all;box-shadow:none}.draginput:hover{background-color:var(--z3);transition:none;box-shadow:var(--shadow-bg)}.draginput:hover span,.draginput.active span{color:var(--z15)}.draginput:hover input,.draginput.active input{color:var(--accent8)}.draginput.active,.draginput.active:hover{background-color:var(--z0)}.draginput.active:hover{transition:none}.draginput .caret{border:solid transparent 5px;border-top-color:var(--z9);position:absolute;width:0;height:0;right:5px;margin-top:-2px;top:50%}.draginput label{margin:28px 10px 0 5px;font-size:14px;color:var(--z15);font-weight:700}.draginput label#resolution_label,.draginput label#seg_type_label{font:700 12px/110% sans-serif;position:absolute;left:auto;right:10px;z-index:0;text-align:right}.draginput label#seg_type_label{margin-top:40px}.draginput label#seg_type_label .caret{top:66%}.draginput label#resolution_label .pull{position:relative;left:-15px}.draginput label#resolution_label span{right:-13px;left:auto;font-size:16px;top:2px;font-weight:700;color:#fff}.draginput input{border:none;background:transparent;font:24px/normal sans-serif;text-align:center;color:var(--accent7);padding:30px 0 16px;width:100%;height:24px;position:relative;z-index:2}.draginput input::selection{background:var(--accent9)}.draginput.text-input input,.draginput.text-input input:hover,.draginput.text-input input:active{cursor:text}.draginput.text-input input{text-align:left;text-indent:var(--x2)}.draginput.textcontent input{cursor:text;text-align:left;text-indent:var(--x2)}.draginput.textcontent input,.draginput.textcontent input:hover,.draginput.textcontent input:active{cursor:text}.draginput input,.draginput input:hover,.draginput input:active{cursor:grab;cursor:-moz-grab}.draginput input[type=checkbox],.draginput input[type=checkbox]:hover,.draginput input[type=checkbox]:active{cursor:pointer}.draginput input:invalid{color:var(--a7)}.draginput span{font:12px/130% sans-serif;color:var(--z8);display:block;position:absolute;top:5px;left:5px;text-align:left;white-space:nowrap;z-index:1}.draginput select{-webkit-appearance:none;opacity:0;display:block;position:absolute;height:100%;width:100%;margin:0;z-index:1;top:0;left:0;cursor:pointer}.draginput:hover .draginput_cursor{border-color:var(--accent6)}.draginput_cursor{position:absolute;top:50%;width:100%;border-top:solid var(--accent4) 1px;z-index:0}.draginput input[readonly=readonly]{-webkit-appearance:none;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.draginput input:focus{background:var(--accent7);color:var(--accent15);outline:none;box-shadow:0 0 5px 2px var(--accent7)}.draginput input:focus+span{z-index:10;color:var(--z15)}.draginput .push_bottom{bottom:0;position:absolute}.draginput .angle{width:var(--x12);height:var(--x12);border-radius:var(--x12);background-color:var(--z3);position:absolute;bottom:var(--x1);left:14px}.editor.dragging .draginput .angle{background-color:var(--z1)}.draginput:hover .angle{background:var(--z4)}.draginput .angle-cursor{width:4px;height:25px;border-top:solid var(--accent7) 3px;position:absolute;margin:0 0 0 23px;transform-origin:50% 0}#menu_bar{padding:0 0 0 var(--x12);position:relative;z-index:2;height:var(--x8);display:flex}#menu_bar .menu:hover .menu_list{display:block}.menu{position:relative;z-index:5;color:var(--z3);display:inline-block}.menu_title{cursor:pointer;display:inline-block;z-index:10;color:var(--z15);position:relative;line-height:var(--x8);padding:0 var(--x3);vertical-align:top}.menu .menu_title:hover{background:var(--z2)}.menu_list .separator{margin:var(--x1) 0;border-top:solid var(--z14) 1px}.menu_list{position:absolute;left:0;top:var(--x8);white-space:nowrap;background:var(--z15);padding:var(--x2) 0;border-radius:0 var(--x2) var(--x2) var(--x2);box-shadow:var(--shadow)}#menu_bar.active .menu.open .menu_title{background:var(--z15);color:var(--z1)}.menu .menu_list{display:none;position:absolute}.menu_list .menu_item{position:relative;overflow:hidden;line-height:var(--x6);padding:var(--x1) var(--x16) var(--x1) var(--x6);cursor:pointer;color:var(--z3)}.file-input{-webkit-appearance:none;position:absolute;opacity:0;cursor:pointer;inset:0;display:block;background:red;z-index:100}.menu_list .menu_item.tool_button{background:transparent;border:none;margin:0;padding:var(--x1) var(--x16) var(--x1) var(--x6);height:auto;width:auto}.menu_list .menu_item.push_button_pressed:before{content:"\\2714";position:absolute;display:block;left:6px;top:var(--x1)}.menu_list .menu_item:hover,.menu_list .menu_item.push_button_pressed:hover{background:var(--accent15);color:#000}.menu_list .menu_item.disabled:hover,.menu_list .menu_item.push_button_pressed.disabled:hover{background:transparent;color:var(--z3)}.menu_list .menu_item.push_button_pressed{background:transparent;border:none;width:auto;height:auto;margin:0}.menu_list .menu_item span{display:block;position:absolute;right:var(--x2);padding:0 var(--x2);background:var(--z14);top:50%;transform:translateY(-50%);text-align:center;font-size:12px;line-height:var(--x6);border-radius:var(--x1);font-weight:600}.menu_list .menu_item:not(.disabled):hover span{background:var(--accent13)}.menu-right button:hover svg{fill:var(--z12)}.menu-right svg{fill:var(--z5)}#logo svg{pointer-events:none;margin-top:var(--x2);fill:var(--z7)}#logo svg path:last-child{fill:var(--z13)}#logo:hover svg{fill:var(--z9)}#logo svg path:last-child{fill:var(--z15)}#rulers>div{position:absolute;background:var(--z2);z-index:1;overflow:hidden;-webkit-font-smoothing:none}#rulers #ruler_corner{top:var(--x8);left:var(--x12);width:var(--x4);height:var(--x4);z-index:2;border-radius:var(--x2) 0 0 0}#ruler_x{height:var(--x4);top:var(--x8);left:var(--x12);right:calc(var(--panel-width) + var(--x4));overflow:hidden;border-radius:var(--x2)}#ruler_y{width:var(--x4);top:var(--x8);left:var(--x12);bottom:var(--x10);overflow:hidden;border-radius:var(--x2)}#ruler_x>div,#ruler_y>div{overflow:hidden}#stroke_color:after{content:"";position:absolute;display:block;left:var(--x1);right:var(--x1);top:var(--x1);bottom:var(--x1);background:var(--z1);box-shadow:0 0 0 1px var(--z13)}#tool_switch{cursor:pointer;width:11px;height:11px;position:absolute;top:-5px;right:0;cursor:nwse-resize}#tool_switch svg{fill:var(--z6)}#tool_switch:hover svg{fill:var(--z15)}.color_block{width:var(--x5);height:var(--x5);overflow:hidden;border:solid var(--z12) 1px;cursor:pointer}.color_block svg{width:22px;height:22px}#tool_stroke .color_block>div{position:absolute;bottom:0;right:0}#color_tools{position:relative;width:48px;height:48px;margin:12px 6px 0}#color_tools{width:auto;height:auto}#tool_fill{position:absolute;top:0;left:0;z-index:1}#tool_stroke{top:14px;left:14px}#tool_fill,#tool_stroke,#tool_canvas{box-shadow:0 0 0 1px var(--z0);position:absolute}#tool_canvas .color_block{width:58px;height:38px}#tool_canvas .color_block svg{width:auto;height:auto}#shape_cats>div{padding:0 var(--x4);background:var(--z14);color:var(--z6);height:var(--x7);line-height:var(--x7);transition:background-color .1s ease}#svgcanvas{background-color:var(--z2);display:block;width:100%;height:100%}#workarea{display:block;position:absolute;top:var(--x8);left:var(--x12);bottom:var(--x10);right:calc(var(--panel-width) + var(--x4));background-color:var(--z2);overflow:auto;align-items:center;justify-content:center;transition:transform .5s cubic-bezier(.13,.66,.24,.92);border-radius:var(--x2);box-shadow:var(--shadow-bg)}#tools_left{position:absolute;border-right:none;width:var(--x12);top:var(--x8);bottom:0;left:0;z-index:4}.tool_button{height:var(--x12);width:var(--x12);cursor:pointer;line-height:60px;text-align:center;transform:scale(.8)}.tool_button:hover{transform:scale(1)}.tool_button:hover svg{fill:var(--z13)}.tool_button.active{transform:scale(1.4)}.tool_button svg{vertical-align:center;fill:var(--z5)}.tool_button.active svg{fill:var(--accent8)}.tool_button.active svg{fill:var(--accent7)}.tool_button.disabled svg{background-color:#aaa;cursor:not-allowed;fill:var(--z3);pointer-events:none}#tool_rect svg{position:relative;top:-1px;left:1px}#tool_ellipse svg{position:relative;top:2px;left:1px}.select-input{margin:var(--x2) 0;position:relative}.select-input:after{content:"\\2193";font-weight:700;position:absolute;right:var(--x6);top:50%;color:var(--z7);transform:translateY(-50%)}.select-input select{-webkit-appearance:none;background-color:var(--z3);color:var(--z14);height:var(--x8);display:block;width:calc(100% - var(--x2));padding:0 var(--x4);border:none;border-radius:var(--x1)}.select-input select:focus{outline:none;box-shadow:0 0 0 1px var(--accent7)}#panels{position:absolute;box-sizing:border-box;width:var(--panel-width);right:var(--x1);top:var(--x5);bottom:0;border-bottom:none;overflow:auto;padding:0}.context_panel{display:none}.context_panel h4{color:var(--z15);font-weight:400;margin:0;padding:10px 0 5px}.context_panel label{display:block;color:var(--z13);white-space:nowrap}#align_tools{display:none}.align_buttons{margin-bottom:var(--x2)}.align_button,.align_button *{transition:var(--transition)}.align_button:hover,.align_button:hover *{transition:none}.align_button{float:left;height:var(--x13);width:var(--x13);line-height:var(--x16);text-align:center;cursor:pointer;position:relative}.align_button:hover{background-color:var(--z0);border-color:var(--z3)}.align_button svg{fill:var(--z10)}.align_button:hover svg{fill:var(--z15);transition:none}.align_button:nth-child(1){border-radius:var(--x1) 0 0 0}.align_button:nth-child(3){border-radius:0 var(--x1) 0 0}.align_button:nth-child(4){border-radius:0 0 0 var(--x1)}.align_button:nth-child(6){border-radius:0 0 var(--x1) 0}.align_buttons .push_button{display:block;float:left}#tool_bold,#tool_italic{font:700 20px/35px serif;text-align:center;position:absolute;padding:0;color:var(--z13);background:transparent;border:none;margin:0;width:50%;top:var(--x8);line-height:var(--x10);bottom:0;border-top:solid var(--z1) 2px;cursor:pointer}#tool_bold{right:0}#tool_italic{border-right:solid var(--z1) 2px;line-height:var(--x9);left:0;font-weight:700;font-style:italic;font-size:24px}#tool_bold:hover,#tool_italic:hover{color:var(--z15);background-color:var(--z3)}#tool_bold.disabled,#tool_italic.disabled{opacity:1;color:var(--z4);pointer-events:none}#tool_bold.active,#tool_italic.active{color:#50a0ff}#preview_font{color:var(--z15);font-size:2em;line-height:80px;padding:0 var(--x2);white-space:nowrap}#preview_font+.caret{right:var(--x2)}.draginput:hover #preview_font:after{border-right-color:var(--z3);background:linear-gradient(to right,rgba(0,0,0,0),var(--z3))}#preview_font:after{content:"";position:absolute;right:0;top:3px;bottom:3px;width:15px;border-right:solid var(--z2) 10px;background:linear-gradient(to right,rgba(0,0,0,0),var(--z2))}#zoom_panel,#zoom_select{padding:var(--x2) 0;right:calc(var(--panel-width) + var(--x2));position:absolute;cursor:pointer;width:100px}#zoom_label:after{content:""}#zoom_select{opacity:0;z-index:100}#zoom_select:hover+div{opacity:1}#zoom_label{position:absolute;background:transparent;width:100%;margin:0}#zoom_panel .caret{margin-top:-5px}#zoom_label img,#zoom_label svg{width:var(--x4);height:var(--x4)}#zoomLabel{width:var(--x4);height:var(--x4);cursor:pointer}#zoomLabel svg{fill:var(--z10);position:relative;top:2px}#zoom_label input{-webkit-appearance:none;color:var(--z10);font-size:13px;height:auto;width:var(--x12);padding:0;cursor:default;position:absolute;background:transparent;border:none;top:2px;left:var(--x6);pointer-events:none}#zoom_label select{-webkit-appearance:none;position:absolute;inset:0}#zoom_label span{top:0;left:0}\n'],encapsulation:3})}return n})()}];let xf=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=o.oAB({type:n});static#n=this.\u0275inj=o.cJS({imports:[ro.Bz.forChild(bf),ro.Bz]})}return n})();var Cf=U(9509);let Tf=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=o.oAB({type:n});static#n=this.\u0275inj=o.cJS({imports:[Be.ez,xf,Cf.Z,hl.To]})}return n})()}}]);