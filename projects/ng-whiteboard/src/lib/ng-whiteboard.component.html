<svg [class]="'svgroot ' + selectedTool" #svgContainer id="svgroot" xlinkns="http://www.w3.org/1999/xlink">
  <svg
    id="canvasBackground"
    [attr.width]="canvasWidth * zoom"
    [attr.height]="canvasHeight * zoom"
    [attr.x]="x"
    [attr.y]="y"
    style="pointer-events: none;"
  >
    <defs id="placeholder_defs"></defs>
    <rect
      width="100%"
      height="100%"
      x="0"
      y="0"
      stroke-width="0"
      stroke="transparent"
      [attr.fill]="backgroundColor"
      style="pointer-events: none;"
    ></rect>
  </svg>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    [attr.width]="canvasWidth * zoom"
    [attr.height]="canvasHeight * zoom"
    [attr.viewBox]="[0, 0, canvasWidth, canvasHeight]"
    id="svgcontent"
    [attr.x]="x"
    [attr.y]="y"
  >
    <defs></defs>
    <g style="pointer-events: all;">
      <title style="pointer-events: inherit;">Layer 1</title>
      <ng-container *ngFor="let item of data">
        <g
          class="wb_element"
          [id]="'item_' + item.id"
          [attr.data-wb-id]="item.id"
          [ngSwitch]="item.elementName"
          [attr.transform]="'translate(' + (item.x) + ',' + (item.y) + ')'"
        >
          <g *ngSwitchCase="types.BRUSH">
            <path
              class="line"
              [style]="
                'fill: none; ' +
                'stroke:' +
                item.elementOptions.stroke +
                ';' +
                'stroke-width:' +
                item.elementOptions.size +
                ';' +
                'stroke-linejoin:' +
                item.elementOptions.lineJoin +
                ';' +
                'stroke-linecap:' +
                item.elementOptions.lineCap +
                ';'
              "
              [attr.d]="item.value"
            ></path>
          </g>
          <g *ngSwitchCase="types.IMAGE">
            <g>
              <image
                [attr.height]="item.height"
                [attr.width]="item.width"
                preserveAspectRatio="none"
                [attr.xlink:href]="item.value"
              ></image>
              <g class="handlers">
                <ellipse rx="9" ry="9" cx="0" cy="0" fill="#29b6f2" pointer-events="all"></ellipse>
                <ellipse rx="9" ry="9" [attr.cx]="item.width" cy="0" fill="#29b6f2" pointer-events="all"></ellipse>
                <ellipse rx="9" ry="9" cx="0" [attr.cy]="item.height" fill="#29b6f2" pointer-events="all"></ellipse>
                <ellipse
                  rx="9"
                  ry="9"
                  [attr.cx]="item.width"
                  [attr.cy]="item.height"
                  fill="#29b6f2"
                  pointer-events="all"
                ></ellipse>

                <!-- <rect x="0" y="0" width="9" height="9" fill="#cccccc" style="opacity: 0;"></rect> -->
              </g>
            </g>
          </g>
          <g *ngSwitchCase="types.TEXT">
            <text
              [attr.fill]="item.elementOptions.color"
              class="text_element"
              stroke="#000"
              stroke-width="0"
              [attr.font-size]="item.elementOptions.size + 10"
              font-family="Noto Sans JP"
              text-anchor="start"
              xml:space="preserve"
              style="cursor: text;"
            >
              {{ item.value }}
            </text>
          </g>
          <g *ngSwitchDefault>output2</g>
        </g>
      </ng-container>
      <g class="temp-line" *ngIf="tempElement">
        <path
          class="line"
          [style]="
            'fill: none; ' +
            'stroke:' +
            tempElement.elementOptions.stroke +
            ';' +
            'stroke-width:' +
            tempElement.elementOptions.size +
            ';' +
            'stroke-linejoin:' +
            tempElement.elementOptions.lineJoin +
            ';' +
            'stroke-linecap:' +
            tempElement.elementOptions.lineCap +
            ';'
          "
          [attr.d]="tempElement.value"
        ></path>
      </g>
    </g>
    <defs></defs>
  </svg>
  <g id="selectorParentGroup" transform="translate(444,300)">
    <g display="none">
      <circle
        id="selectorGrip_rotate_nw"
        fill="#000"
        r="8"
        stroke="#000"
        fill-opacity="0"
        stroke-opacity="0"
        stroke-width="0"
        style="cursor: url(images/rotate.png) 12 12, auto;"
      ></circle>
      <circle
        id="selectorGrip_rotate_ne"
        fill="#000"
        r="8"
        stroke="#000"
        fill-opacity="0"
        stroke-opacity="0"
        stroke-width="0"
        style="cursor: url(images/rotate.png) 12 12, auto;"
      ></circle>
      <circle
        id="selectorGrip_rotate_se"
        fill="#000"
        r="8"
        stroke="#000"
        fill-opacity="0"
        stroke-opacity="0"
        stroke-width="0"
        style="cursor: url(images/rotate.png) 12 12, auto;"
      ></circle>
      <circle
        id="selectorGrip_rotate_sw"
        fill="#000"
        r="8"
        stroke="#000"
        fill-opacity="0"
        stroke-opacity="0"
        stroke-width="0"
        style="cursor: url(images/rotate.png) 12 12, auto;"
      ></circle>
      <rect
        id="selectorGrip_resize_nw"
        width="8"
        height="8"
        fill="#4F80FF"
        stroke="rgba(0,0,0,0)"
        style="cursor: nw-resize;"
        pointer-events="all"
      ></rect>
      <rect
        id="selectorGrip_resize_n"
        width="8"
        height="8"
        fill="#4F80FF"
        stroke="rgba(0,0,0,0)"
        style="cursor: n-resize;"
        pointer-events="all"
      ></rect>
      <rect
        id="selectorGrip_resize_ne"
        width="8"
        height="8"
        fill="#4F80FF"
        stroke="rgba(0,0,0,0)"
        style="cursor: ne-resize;"
        pointer-events="all"
      ></rect>
      <rect
        id="selectorGrip_resize_e"
        width="8"
        height="8"
        fill="#4F80FF"
        stroke="rgba(0,0,0,0)"
        style="cursor: e-resize;"
        pointer-events="all"
      ></rect>
      <rect
        id="selectorGrip_resize_se"
        width="8"
        height="8"
        fill="#4F80FF"
        stroke="rgba(0,0,0,0)"
        style="cursor: se-resize;"
        pointer-events="all"
      ></rect>
      <rect
        id="selectorGrip_resize_s"
        width="8"
        height="8"
        fill="#4F80FF"
        stroke="rgba(0,0,0,0)"
        style="cursor: s-resize;"
        pointer-events="all"
      ></rect>
      <rect
        id="selectorGrip_resize_sw"
        width="8"
        height="8"
        fill="#4F80FF"
        stroke="rgba(0,0,0,0)"
        style="cursor: sw-resize;"
        pointer-events="all"
      ></rect>
      <rect
        id="selectorGrip_resize_w"
        width="8"
        height="8"
        fill="#4F80FF"
        stroke="rgba(0,0,0,0)"
        style="cursor: w-resize;"
        pointer-events="all"
      ></rect>
    </g>
    <rect
      id="selectorRubberBand"
      fill="none"
      stroke="#666"
      stroke-dasharray="3,2"
      display="none"
      style="pointer-events: none;"
    ></rect>
  </g>
</svg>
<input #textInput type="text" class="text-input" style="display: none;" />
<!-- <svg

  #svgElement

  [ngClass]="{ draw: true }"
>
  <ng-container *ngFor="let el of elements">
    <ng-container [ngSwitch]="el.type">
      <ng-container *ngSwitchCase="tool.Pin">
        <svg:path
          class="line"
          [style]="
            'fill: none; ' +
            'stroke:' +
            el.color +
            ';' +
            'stroke-width:' +
            el.lineSize +
            ';' +
            'stroke-linejoin:' +
            el.linejoin +
            ';' +
            ' stroke-linecap:' +
            el.linecap +
            ';'
          "
          [attr.d]="el.data"
        ></svg:path>
      </ng-container>
    </ng-container>
  </ng-container>

  <ng-container [ngTemplateOutlet]="line" *ngIf="templine"></ng-container>

  <rect *ngIf="withGrid" width="100%" height="100%" fill="url(#grid)" />


  <defs>
    <pattern id="smallGrid" width="10" height="10" patternUnits="userSpaceOnUse">
      <path d="M 10 0 L 0 0 0 10" fill="none" stroke="gray" stroke-width="0.5"/>
    </pattern>
    <pattern id="grid" width="100" height="100" patternUnits="userSpaceOnUse">
      <rect width="100" height="100" fill="url(#smallGrid)"/>
      <path d="M 100 0 L 0 0 0 100" fill="none" stroke="gray" stroke-width="1"/>
    </pattern>
  </defs>
</svg> -->
<!-- [attr.viewBox]="'' +viewBoxX + ' ' + viewBoxY + ' ' + width * zoomLevels[zoom] + ' ' + (width * zoomLevels[zoom]) / 2" -->

<!--
  on:mousedown|preventDefault={mouseDown}
on:touchstart|preventDefault={mouseDown}
on:mousemove|preventDefault={drag}
on:tounchmove|preventDefault={drag}
on:mouseup|preventDefault={mouseUp}
on:mouseleave|preventDefault={mouseUp}
on:touchend|preventDefault={mouseUp}

 -->

<!-- <ng-template #line let-line="line">
  <svg:path
    class="line"
    [style]="
      'fill: none; ' +
      'stroke:' +
      line.color +
      ';' +
      'stroke-width:' +
      line.lineSize +
      ';' +
      'stroke-linejoin:' +
      line.linejoin +
      ';' +
      ' stroke-linecap:' +
      line.linecap +
      ';'
    "
    [attr.d]="line.src"
  ></svg:path>
</ng-template> -->
